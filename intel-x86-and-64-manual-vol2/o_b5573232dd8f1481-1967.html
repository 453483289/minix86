<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1967</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:12px;font-family:Times;color:#0860a8;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:18px;font-family:Times;color:#000000;}
	.ft07{font-size:8px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1967-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_b5573232dd8f14811967.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">XSAVES‚ÄîSave Processor Extended&#160;States&#160;Supervisor</p>
<p style="position:absolute;top:47px;left:637px;white-space:nowrap" class="ft01">INSTRUCTION SET REFERENCE, V-Z</p>
<p style="position:absolute;top:1103px;left:764px;white-space:nowrap" class="ft00">Vol. 2C&#160;5-581</p>
<p style="position:absolute;top:98px;left:69px;white-space:nowrap" class="ft02">XSAVES‚ÄîSave Processor Extended States Supervisor</p>
<p style="position:absolute;top:305px;left:354px;white-space:nowrap" class="ft03">Instruction Operand&#160;Encoding</p>
<p style="position:absolute;top:392px;left:69px;white-space:nowrap" class="ft03">Description</p>
<p style="position:absolute;top:418px;left:69px;white-space:nowrap" class="ft08">Performs&#160;a full or&#160;partial save of&#160;processor state components to&#160;the XSAVE&#160;area located at&#160;the memory address&#160;<br/>specified by&#160;the&#160;destination&#160;operand.&#160;The implicit&#160;EDX:EAX register&#160;pair specifies a&#160;64-bit instruction mask.&#160;The&#160;<br/>specific&#160;state&#160;components saved correspond to&#160;the bits&#160;set&#160;in&#160;the requested-feature bitmap (RFBM),&#160;the logical-<br/>AND&#160;of&#160;EDX:EAX and&#160;the logical-OR of XCR0&#160;with the IA32_XSS&#160;MSR.&#160;XSAVES may&#160;be&#160;executed only if&#160;CPL = 0.<br/>The format of the XSAVE area&#160;is&#160;detailed<a href="˛ˇ">&#160;in Section 13.4,&#160;‚ÄúXSAVE Area,‚Äù</a>&#160;of&#160;<a href="˛ˇ"><i>Intel¬Æ&#160;64&#160;and IA-32 Architectures Soft-<br/>ware Developer‚Äôs Manual, Volume&#160;1</i>.<br/>Section&#160;13.11, ‚ÄúOperation of XSAVES,‚Äù&#160;of&#160;<i>Intel¬Æ&#160;64&#160;and IA-32&#160;Architectures Software Developer‚Äôs Manual, Volume&#160;<br/>1</i>&#160;</a>provides a&#160;detailed&#160;description of the operation of the XSAVES&#160;instruction.&#160;The&#160;following items provide&#160;a&#160;high-<br/>level outline:</p>
<p style="position:absolute;top:587px;left:69px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:588px;left:95px;white-space:nowrap" class="ft08">Execution of XSAVES&#160;is similar&#160;to that&#160;of&#160;XSAVEC. XSAVES&#160;differs from XSAVEC in that&#160;it can&#160;save&#160;state&#160;<br/>components corresponding to&#160;bits&#160;set in&#160;the IA32_XSS&#160;MSR&#160;and that&#160;it may use&#160;the modified optimization.</p>
<p style="position:absolute;top:626px;left:69px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:627px;left:95px;white-space:nowrap" class="ft04">XSAVES saves state component&#160;<i>i</i>&#160;only&#160;if&#160;RFBM[<i>i</i>]&#160;=&#160;&#160;1&#160;&#160;and&#160;&#160;XINUSE[<i>i</i>]&#160;=&#160;&#160;1.</p>
<p style="position:absolute;top:624px;left:584px;white-space:nowrap" class="ft07">1</p>
<p style="position:absolute;top:627px;left:591px;white-space:nowrap" class="ft04">&#160;(XINUSE&#160;is&#160;a bitmap by which the&#160;</p>
<p style="position:absolute;top:643px;left:94px;white-space:nowrap" class="ft08">processor tracks&#160;the&#160;status&#160;of&#160;various&#160;state&#160;components. See<a href="˛ˇ">&#160;Section 13.6, ‚ÄúProcessor Tracking of XSAVE-<br/>Managed State.‚Äù</a>)&#160;Even&#160;if both&#160;bits&#160;are 1,&#160;XSAVES may&#160;optimize&#160;and not save&#160;state component&#160;<i>i</i>&#160;if (1)&#160;state&#160;<br/>component&#160;<i>i</i>&#160;has not&#160;been&#160;modified&#160;since the&#160;last execution of XRTOR&#160;or XRSTORS;&#160;and (2)&#160;this&#160;execution of&#160;<br/>XSAVES correspond to&#160;that last&#160;execution&#160;of XRTOR&#160;or XRSTORS as&#160;determined by XRSTOR_INFO (see the&#160;<br/>Operation section&#160;below).</p>
<p style="position:absolute;top:731px;left:69px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:732px;left:95px;white-space:nowrap" class="ft08">XSAVES does not&#160;modify&#160;bytes 511:464 of&#160;the legacy&#160;region of the&#160;XSAVE area&#160;(see<a href="˛ˇ">&#160;Section 13.4.1,&#160;‚ÄúLegacy&#160;<br/>Region&#160;of an&#160;XSAVE&#160;Area‚Äù).</a></p>
<p style="position:absolute;top:770px;left:69px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:771px;left:95px;white-space:nowrap" class="ft04">XSAVES writes the logical AND of RFBM and XINUSE&#160;to the XSTATE_BV&#160;field of the XSAVE header.</p>
<p style="position:absolute;top:768px;left:738px;white-space:nowrap" class="ft07">2</p>
<p style="position:absolute;top:771px;left:745px;white-space:nowrap" class="ft04">&#160;(See<a href="˛ˇ">&#160;Section&#160;</a></p>
<p style="position:absolute;top:787px;left:94px;white-space:nowrap" class="ft08"><a href="˛ˇ">13.4.2, ‚ÄúXSAVE&#160;Header.‚Äù</a>)&#160;XSAVES&#160;sets bit&#160;63&#160;of the XCOMP_BV field and&#160;sets&#160;bits&#160;62:0 of that&#160;field&#160;to&#160;<br/>RFBM[62:0].&#160;XSAVES&#160;does&#160;not write&#160;to&#160;any parts of&#160;the XSAVE&#160;header&#160;other than the XSTATE_BV and&#160;<br/>XCOMP_BV&#160;fields.</p>
<p style="position:absolute;top:842px;left:69px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:843px;left:95px;white-space:nowrap" class="ft08">XSAVES&#160;always&#160;uses&#160;the&#160;compacted format of the&#160;extended&#160;region of the&#160;XSAVE area&#160;(see<a href="˛ˇ">&#160;Section 13.4.3,&#160;<br/>‚ÄúExtended Region&#160;of&#160;an XSAVE&#160;Area‚Äù)</a>.</p>
<p style="position:absolute;top:883px;left:69px;white-space:nowrap" class="ft08">Use of a&#160;destination&#160;operand not aligned&#160;to 64-byte boundary (in&#160;either&#160;64-bit&#160;or 32-bit&#160;modes) results in a&#160;<br/>general-protection&#160;(#GP) exception.&#160;In 64-bit&#160;mode,&#160;the upper 32 bits of RDX and&#160;RAX are ignored.</p>
<p style="position:absolute;top:123px;left:74px;white-space:nowrap" class="ft04">Opcode</p>
<p style="position:absolute;top:123px;left:221px;white-space:nowrap" class="ft04">Instruction</p>
<p style="position:absolute;top:123px;left:388px;white-space:nowrap" class="ft04">Op/&#160;</p>
<p style="position:absolute;top:137px;left:388px;white-space:nowrap" class="ft04">En</p>
<p style="position:absolute;top:123px;left:425px;white-space:nowrap" class="ft04">64-Bit&#160;</p>
<p style="position:absolute;top:137px;left:425px;white-space:nowrap" class="ft04">Mode</p>
<p style="position:absolute;top:123px;left:497px;white-space:nowrap" class="ft04">Compat/</p>
<p style="position:absolute;top:137px;left:497px;white-space:nowrap" class="ft04">Leg Mode</p>
<p style="position:absolute;top:123px;left:567px;white-space:nowrap" class="ft04">Description</p>
<p style="position:absolute;top:160px;left:74px;white-space:nowrap" class="ft04">0F C7&#160;/5</p>
<p style="position:absolute;top:160px;left:221px;white-space:nowrap" class="ft04">XSAVES&#160;<i>mem</i></p>
<p style="position:absolute;top:160px;left:388px;white-space:nowrap" class="ft04">M</p>
<p style="position:absolute;top:160px;left:425px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:160px;left:497px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:160px;left:567px;white-space:nowrap" class="ft04">Save state&#160;components specified&#160;by EDX:EAX&#160;</p>
<p style="position:absolute;top:177px;left:567px;white-space:nowrap" class="ft04">to&#160;<i>mem</i>&#160;with&#160;compaction, optimizing&#160;if&#160;</p>
<p style="position:absolute;top:193px;left:567px;white-space:nowrap" class="ft04">possible.</p>
<p style="position:absolute;top:216px;left:74px;white-space:nowrap" class="ft04">REX.W+&#160;0F&#160;C7&#160;/5</p>
<p style="position:absolute;top:216px;left:221px;white-space:nowrap" class="ft04">XSAVES64&#160;<i>mem</i></p>
<p style="position:absolute;top:216px;left:388px;white-space:nowrap" class="ft04">M</p>
<p style="position:absolute;top:216px;left:425px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:216px;left:497px;white-space:nowrap" class="ft04">N.E.</p>
<p style="position:absolute;top:216px;left:567px;white-space:nowrap" class="ft04">Save&#160;state components specified by&#160;EDX:EAX&#160;</p>
<p style="position:absolute;top:232px;left:567px;white-space:nowrap" class="ft04">to&#160;<i>mem</i>&#160;with&#160;compaction, optimizing&#160;if&#160;</p>
<p style="position:absolute;top:249px;left:567px;white-space:nowrap" class="ft04">possible.</p>
<p style="position:absolute;top:328px;left:91px;white-space:nowrap" class="ft04">Op/En</p>
<p style="position:absolute;top:328px;left:204px;white-space:nowrap" class="ft04">Operand&#160;1</p>
<p style="position:absolute;top:328px;left:376px;white-space:nowrap" class="ft04">Operand&#160;2</p>
<p style="position:absolute;top:328px;left:547px;white-space:nowrap" class="ft04">Operand&#160;3</p>
<p style="position:absolute;top:328px;left:719px;white-space:nowrap" class="ft04">Operand&#160;4</p>
<p style="position:absolute;top:352px;left:103px;white-space:nowrap" class="ft04">M</p>
<p style="position:absolute;top:352px;left:191px;white-space:nowrap" class="ft04">ModRM:r/m&#160;&#160;(w)</p>
<p style="position:absolute;top:352px;left:397px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:352px;left:568px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:352px;left:740px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:984px;left:69px;white-space:nowrap" class="ft04">1.&#160;There is&#160;an&#160;exception&#160;for&#160;state component 1 (SSE).&#160;MXCSR&#160;is part&#160;of&#160;SSE state,&#160;but XINUSE[1] may be&#160;0 even&#160;if&#160;MXCSR does not&#160;</p>
<p style="position:absolute;top:1000px;left:91px;white-space:nowrap" class="ft04">have&#160;its initial&#160;value&#160;of&#160;1F80H.&#160;In&#160;this case, the init&#160;optimization&#160;does not apply and&#160;XSAVEC&#160;will save&#160;SSE state&#160;as long&#160;as&#160;RFBM[1]&#160;=&#160;</p>
<p style="position:absolute;top:1017px;left:91px;white-space:nowrap" class="ft04">1&#160;and the&#160;modified&#160;optimization&#160;is&#160;not being applied.</p>
<p style="position:absolute;top:1038px;left:69px;white-space:nowrap" class="ft04">2.&#160;There is&#160;an&#160;exception&#160;for&#160;state component 1 (SSE).&#160;MXCSR&#160;is part&#160;of&#160;SSE state,&#160;but XINUSE[1] may be&#160;0 even&#160;if&#160;MXCSR does not&#160;</p>
<p style="position:absolute;top:1054px;left:91px;white-space:nowrap" class="ft04">have&#160;its initial value&#160;of&#160;1F80H.&#160;In this case,&#160;XSAVES sets XSTATE_BV[1] to&#160;1&#160;as&#160;long&#160;as RFBM[1]&#160;=&#160;1.</p>
</div>
</body>
</html>
