<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1264</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:12px;font-family:Times;color:#0860a8;}
	.ft05{font-size:14px;font-family:Times;color:#000000;}
	.ft06{font-size:12px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:17px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1264-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_b5573232dd8f14811264.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:708px;white-space:nowrap" class="ft00">SAL/SAR/SHL/SHR‚ÄîShift</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">INSTRUCTION SET REFERENCE, M-U</p>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">4-584&#160;Vol. 2B</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft07">The shift&#160;arithmetic right&#160;(SAR)&#160;and shift logical&#160;right (SHR)&#160;instructions shift the bits of the&#160;destination operand&#160;to&#160;<br/>the&#160;right&#160;(toward less significant&#160;bit locations). For each&#160;shift&#160;count,&#160;the least&#160;significant bit of the&#160;destination&#160;<br/>operand is&#160;shifted into&#160;the&#160;CF flag, and&#160;the most significant&#160;bit&#160;is either&#160;set&#160;or&#160;cleared depending on the&#160;instruction&#160;<br/>type.&#160;The&#160;SHR instruction clears the&#160;most&#160;significant bit (see Figure 7-8 in&#160;<a href="˛ˇ">the&#160;<i>Intel¬Æ 64&#160;and&#160;IA-32&#160;Architectures&#160;<br/>Software Developer‚Äôs Manual,&#160;Volume&#160;1</i>); the&#160;</a>SAR instruction sets or&#160;clears the most significant bit to correspond&#160;<br/>to the sign (most significant bit) of the original value in&#160;the destination operand.&#160;In&#160;effect, the SAR instruction fills&#160;<br/>the&#160;empty bit position‚Äôs&#160;shifted&#160;value with the sign of the unshifted&#160;value (see Figure 7-9 in&#160;the&#160;<a href="˛ˇ"><i>Intel¬Æ 64 and&#160;IA-32&#160;<br/>Architectures Software&#160;Developer‚Äôs Manual, Volume&#160;1</i></a>).<br/>The&#160;SAR and SHR instructions can&#160;be&#160;used&#160;to&#160;perform signed&#160;or&#160;unsigned&#160;division, respectively,&#160;of&#160;the&#160;destination&#160;<br/>operand&#160;by powers&#160;of 2.&#160;For example,&#160;using&#160;the&#160;SAR&#160;instruction to&#160;shift&#160;a signed integer&#160;1 bit to&#160;the right&#160;divides&#160;<br/>the&#160;value by 2.<br/>Using the SAR instruction to perform&#160;a division operation does&#160;not produce&#160;the same&#160;result as&#160;the&#160;IDIV instruction.&#160;<br/>The&#160;quotient from the&#160;IDIV instruction is&#160;rounded&#160;toward&#160;zero,&#160;whereas the&#160;‚Äúquotient‚Äù&#160;of&#160;the SAR instruction is&#160;<br/>rounded toward negative&#160;infinity. This&#160;difference&#160;is&#160;apparent&#160;only&#160;for negative numbers.&#160;For&#160;example, when the&#160;<br/>IDIV instruction is&#160;used&#160;to divide -9&#160;by 4,&#160;the&#160;result&#160;is&#160;-2 with&#160;a remainder of -1.&#160;If&#160;the SAR instruction&#160;is used to&#160;<br/>shift&#160;-9&#160;right by two bits,&#160;the result is&#160;-3 and&#160;the&#160;‚Äúremainder‚Äù is&#160;+3; however,&#160;the&#160;SAR&#160;instruction&#160;stores only the&#160;</p>
<p style="position:absolute;top:379px;left:68px;white-space:nowrap" class="ft07">most significant bit of the remainder&#160;(in the&#160;CF&#160;flag).&#160;<br/>The&#160;OF flag&#160;is affected only on 1-bit shifts. For left shifts, the&#160;OF flag&#160;is set to&#160;0 if&#160;the most-significant bit of the&#160;<br/>result is&#160;the&#160;same&#160;as&#160;the CF flag (that is, the top&#160;two&#160;bits&#160;of&#160;the&#160;original operand&#160;were&#160;the&#160;same); otherwise, it&#160;is&#160;<br/>set to 1. For the SAR instruction,&#160;the OF flag is cleared for&#160;all 1-bit shifts. For the SHR instruction, the&#160;OF flag is set&#160;<br/>to&#160;the most-significant&#160;bit of the original&#160;operand.<br/>In 64-bit&#160;mode,&#160;the instruction‚Äôs&#160;default operation size&#160;is&#160;32 bits&#160;and&#160;the mask width for CL&#160;is 5 bits.&#160;Using&#160;a REX&#160;<br/>prefix in&#160;the&#160;form of REX.R&#160;permits access to&#160;additional&#160;registers (R8-R15).&#160;Using&#160;a REX prefix in&#160;the form of REX.W&#160;<br/>promotes operation to 64-bits and sets the mask width for&#160;CL&#160;to 6 bits. See the summary chart at the beginning of&#160;<br/>this&#160;section&#160;for&#160;encoding&#160;data and&#160;limits.</p>
<p style="position:absolute;top:563px;left:68px;white-space:nowrap" class="ft04">IA-32 Architecture&#160;Compatibility</p>
<p style="position:absolute;top:589px;left:68px;white-space:nowrap" class="ft07">The&#160;8086&#160;does&#160;not mask&#160;the shift count.&#160;However,&#160;all other&#160;IA-32&#160;processors (starting&#160;with the Intel&#160;286&#160;processor)&#160;<br/>do mask the shift count to 5 bits, resulting&#160;in a maximum&#160;count of 31. This&#160;masking&#160;is done in&#160;all operating modes&#160;<br/>(including&#160;the virtual-8086 mode) to reduce&#160;the maximum execution time&#160;of&#160;the instructions.</p>
<p style="position:absolute;top:659px;left:68px;white-space:nowrap" class="ft04">Operation</p>
<p style="position:absolute;top:685px;left:68px;white-space:nowrap" class="ft02">IF&#160;64-Bit Mode&#160;and using REX.W</p>
<p style="position:absolute;top:703px;left:88px;white-space:nowrap" class="ft02">THEN</p>
<p style="position:absolute;top:721px;left:115px;white-space:nowrap" class="ft02">countMASK&#160;‚Üê&#160;3FH;</p>
<p style="position:absolute;top:739px;left:88px;white-space:nowrap" class="ft02">ELSE</p>
<p style="position:absolute;top:757px;left:115px;white-space:nowrap" class="ft02">countMASK&#160;‚Üê&#160;1FH;</p>
<p style="position:absolute;top:775px;left:68px;white-space:nowrap" class="ft02">FI</p>
<p style="position:absolute;top:805px;left:68px;white-space:nowrap" class="ft02">tempCOUNT&#160;‚Üê&#160;(COUNT&#160;AND countMASK);</p>
<p style="position:absolute;top:823px;left:68px;white-space:nowrap" class="ft02">tempDEST&#160;‚Üê&#160;DEST;</p>
<p style="position:absolute;top:841px;left:68px;white-space:nowrap" class="ft02">WHILE&#160;(tempCOUNT&#160;</p>
<p style="position:absolute;top:839px;left:185px;white-space:nowrap" class="ft05">‚â†</p>
<p style="position:absolute;top:841px;left:194px;white-space:nowrap" class="ft02">&#160;0)</p>
<p style="position:absolute;top:859px;left:68px;white-space:nowrap" class="ft02">DO</p>
<p style="position:absolute;top:877px;left:88px;white-space:nowrap" class="ft02">IF instruction is&#160;SAL&#160;or&#160;SHL</p>
<p style="position:absolute;top:895px;left:115px;white-space:nowrap" class="ft02">THEN&#160;</p>
<p style="position:absolute;top:913px;left:142px;white-space:nowrap" class="ft02">CF&#160;‚Üê&#160;MSB(DEST);</p>
<p style="position:absolute;top:931px;left:115px;white-space:nowrap" class="ft02">ELSE (* Instruction is&#160;SAR&#160;or&#160;SHR *)</p>
<p style="position:absolute;top:949px;left:142px;white-space:nowrap" class="ft02">CF&#160;‚Üê&#160;LSB(DEST);</p>
<p style="position:absolute;top:967px;left:88px;white-space:nowrap" class="ft011">FI;<br/>IF instruction is&#160;SAL&#160;or&#160;SHL</p>
<p style="position:absolute;top:1003px;left:115px;white-space:nowrap" class="ft02">THEN&#160;</p>
<p style="position:absolute;top:1021px;left:142px;white-space:nowrap" class="ft02">DEST<i>&#160;</i>‚Üê&#160;DEST&#160;</p>
<p style="position:absolute;top:1021px;left:226px;white-space:nowrap" class="ft06">‚àó</p>
<p style="position:absolute;top:1021px;left:234px;white-space:nowrap" class="ft02">&#160;2;</p>
<p style="position:absolute;top:1039px;left:115px;white-space:nowrap" class="ft02">ELSE&#160;</p>
<p style="position:absolute;top:1057px;left:142px;white-space:nowrap" class="ft02">IF instruction is&#160;SAR</p>
</div>
</body>
</html>
