<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1924</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:12px;font-family:Times;color:#0860a8;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:18px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;font-family:Times;color:#000000;}
	.ft08{font-size:8px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft012{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1924-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_b5573232dd8f14811924.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:536px;white-space:nowrap" class="ft00">XACQUIRE/XRELEASE ‚Äî Hardware Lock&#160;Elision&#160;Prefix&#160;Hints</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">INSTRUCTION SET REFERENCE, V-Z</p>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">5-538&#160;Vol. 2C</p>
<p style="position:absolute;top:98px;left:68px;white-space:nowrap" class="ft02">XACQUIRE/XRELEASE ‚Äî Hardware&#160;Lock Elision Prefix Hints</p>
<p style="position:absolute;top:369px;left:68px;white-space:nowrap" class="ft03">Description</p>
<p style="position:absolute;top:394px;left:68px;white-space:nowrap" class="ft09">The XACQUIRE&#160;prefix is&#160;a hint to&#160;start lock elision on&#160;the&#160;memory&#160;address specified&#160;by&#160;the instruction&#160;and the&#160;<br/>XRELEASE prefix&#160;is a&#160;hint&#160;to end lock elision&#160;on&#160;the&#160;memory address specified by the&#160;instruction.<br/>The XACQUIRE&#160;prefix hint can&#160;only&#160;be&#160;used with&#160;the following instructions (these instructions are&#160;also&#160;referred&#160;to&#160;<br/>as&#160;XACQUIRE-enabled when&#160;used with the&#160;XACQUIRE&#160;prefix):</p>
<p style="position:absolute;top:471px;left:68px;white-space:nowrap" class="ft05">‚Ä¢</p>
<p style="position:absolute;top:472px;left:93px;white-space:nowrap" class="ft09">Instructions with an explicit LOCK prefix&#160;(F0H)&#160;prepended&#160;to forms of&#160;the&#160;instruction&#160;where the&#160;destination&#160;<br/>operand is&#160;a memory operand: ADD,&#160;ADC, AND,&#160;BTC, BTR, BTS,&#160;CMPXCHG, CMPXCHG8B,&#160;DEC,&#160;INC,&#160;NEG, NOT,&#160;<br/>OR,&#160;SBB,&#160;SUB,&#160;XOR,&#160;XADD,&#160;and&#160;XCHG.&#160;</p>
<p style="position:absolute;top:526px;left:68px;white-space:nowrap" class="ft05">‚Ä¢</p>
<p style="position:absolute;top:527px;left:93px;white-space:nowrap" class="ft04">The&#160;XCHG instruction&#160;either with or&#160;without the&#160;presence of the LOCK&#160;prefix.&#160;</p>
<p style="position:absolute;top:549px;left:68px;white-space:nowrap" class="ft09">The&#160;XRELEASE prefix&#160;hint can only be used with the&#160;following instructions (also&#160;referred&#160;to as&#160;XRELEASE-enabled&#160;<br/>when used with the&#160;XRELEASE&#160;prefix):</p>
<p style="position:absolute;top:588px;left:68px;white-space:nowrap" class="ft05">‚Ä¢</p>
<p style="position:absolute;top:589px;left:93px;white-space:nowrap" class="ft09">Instructions with an explicit LOCK prefix&#160;(F0H)&#160;prepended&#160;to forms of&#160;the&#160;instruction&#160;where the&#160;destination&#160;<br/>operand is&#160;a memory operand: ADD,&#160;ADC, AND,&#160;BTC, BTR, BTS,&#160;CMPXCHG, CMPXCHG8B,&#160;DEC,&#160;INC,&#160;NEG, NOT,&#160;<br/>OR,&#160;SBB,&#160;SUB,&#160;XOR,&#160;XADD,&#160;and&#160;XCHG.&#160;</p>
<p style="position:absolute;top:643px;left:68px;white-space:nowrap" class="ft05">‚Ä¢</p>
<p style="position:absolute;top:644px;left:93px;white-space:nowrap" class="ft04">The&#160;XCHG instruction&#160;either with or&#160;without the&#160;presence of the LOCK&#160;prefix.&#160;</p>
<p style="position:absolute;top:666px;left:68px;white-space:nowrap" class="ft05">‚Ä¢</p>
<p style="position:absolute;top:667px;left:93px;white-space:nowrap" class="ft09">The&#160;‚ÄúMOV mem, reg‚Äù&#160;(Opcode 88H/89H)&#160;and ‚ÄúMOV mem,&#160;imm‚Äù (Opcode C6H/C7H)&#160;instructions. In these&#160;<br/>cases, the&#160;XRELEASE&#160;is recognized without the&#160;presence of&#160;the LOCK&#160;prefix.</p>
<p style="position:absolute;top:706px;left:68px;white-space:nowrap" class="ft09">The lock variables must satisfy&#160;the guidelines&#160;described&#160;<a href="˛ˇ">in&#160;<i>Intel¬Æ 64 and&#160;IA-32 Architectures Software&#160;Developer‚Äôs&#160;<br/>Manual, Volume&#160;1</i>, Section 16.3.3, for</a>&#160;elision to&#160;be&#160;successful,&#160;otherwise an&#160;HLE&#160;abort may be signaled.<br/>If an encoded&#160;byte sequence&#160;that meets&#160;XACQUIRE/XRELEASE requirements includes both prefixes,&#160;then the&#160;HLE&#160;<br/>semantic&#160;is determined&#160;by the&#160;prefix&#160;byte that is placed closest to&#160;the instruction opcode. For example,&#160;an F3F2C6&#160;<br/>will&#160;not be treated&#160;as a&#160;XRELEASE-enabled&#160;instruction&#160;since the&#160;F2H (XACQUIRE)&#160;is closest to the instruction&#160;<br/>opcode&#160;C6.&#160;Similarly,&#160;an F2F3F0&#160;prefixed&#160;instruction will&#160;be&#160;treated as&#160;a XRELEASE-enabled instruction since&#160;F3H&#160;<br/>(XRELEASE)&#160;is closest to the&#160;instruction opcode.<br/><b>Intel 64&#160;and IA-32 Compatibility<br/></b>The&#160;effect of the&#160;XACQUIRE/XRELEASE&#160;prefix hint is&#160;the same&#160;in non-64-bit modes and&#160;in 64-bit mode.<br/>For instructions&#160;that do not support the XACQUIRE hint,&#160;the&#160;presence of&#160;the F2H&#160;&#160;prefix behaves&#160;the same way as&#160;<br/>prior hardware, according to</p>
<p style="position:absolute;top:916px;left:68px;white-space:nowrap" class="ft05">‚Ä¢</p>
<p style="position:absolute;top:917px;left:93px;white-space:nowrap" class="ft04">REPNE/REPNZ&#160;semantics for string instructions,</p>
<p style="position:absolute;top:939px;left:68px;white-space:nowrap" class="ft05">‚Ä¢</p>
<p style="position:absolute;top:940px;left:93px;white-space:nowrap" class="ft04">Serve as SIMD&#160;prefix&#160;for&#160;legacy&#160;SIMD&#160;instructions operating&#160;on XMM&#160;register</p>
<p style="position:absolute;top:961px;left:68px;white-space:nowrap" class="ft05">‚Ä¢</p>
<p style="position:absolute;top:962px;left:93px;white-space:nowrap" class="ft04">Cause&#160;#UD if prepending the&#160;VEX&#160;prefix.</p>
<p style="position:absolute;top:984px;left:68px;white-space:nowrap" class="ft05">‚Ä¢</p>
<p style="position:absolute;top:985px;left:93px;white-space:nowrap" class="ft04">Undefined&#160;for non-string&#160;instructions or&#160;other situations.</p>
<p style="position:absolute;top:1007px;left:68px;white-space:nowrap" class="ft09">For instructions that do not&#160;support the XRELEASE hint, the&#160;presence&#160;of the F3H prefix behaves the&#160;same&#160;way&#160;as in&#160;<br/>prior hardware, according to</p>
<p style="position:absolute;top:1045px;left:68px;white-space:nowrap" class="ft05">‚Ä¢</p>
<p style="position:absolute;top:1046px;left:93px;white-space:nowrap" class="ft04">REP/REPE/REPZ&#160;semantics for string instructions,</p>
<p style="position:absolute;top:123px;left:77px;white-space:nowrap" class="ft04">Opcode/Instruction</p>
<p style="position:absolute;top:123px;left:300px;white-space:nowrap" class="ft04">64/32bit&#160;</p>
<p style="position:absolute;top:139px;left:300px;white-space:nowrap" class="ft04">Mode&#160;</p>
<p style="position:absolute;top:155px;left:300px;white-space:nowrap" class="ft04">Support</p>
<p style="position:absolute;top:123px;left:373px;white-space:nowrap" class="ft04">CPUID&#160;</p>
<p style="position:absolute;top:139px;left:373px;white-space:nowrap" class="ft04">Feature&#160;</p>
<p style="position:absolute;top:155px;left:373px;white-space:nowrap" class="ft04">Flag</p>
<p style="position:absolute;top:123px;left:440px;white-space:nowrap" class="ft04">Description</p>
<p style="position:absolute;top:175px;left:77px;white-space:nowrap" class="ft04">F2</p>
<p style="position:absolute;top:175px;left:300px;white-space:nowrap" class="ft04">V/V</p>
<p style="position:absolute;top:175px;left:373px;white-space:nowrap" class="ft04">HLE</p>
<p style="position:absolute;top:172px;left:396px;white-space:nowrap" class="ft08">1</p>
<p style="position:absolute;top:275px;left:69px;white-space:nowrap" class="ft01">NOTES:</p>
<p style="position:absolute;top:294px;left:68px;white-space:nowrap" class="ft04">1.&#160;Software&#160;is&#160;not required&#160;to&#160;check&#160;the&#160;HLE feature flag&#160;to&#160;use XACQUIRE&#160;or&#160;XRELEASE,&#160;as they&#160;are treated&#160;as regular&#160;prefix&#160;if&#160;HLE</p>
<p style="position:absolute;top:311px;left:82px;white-space:nowrap" class="ft04">feature&#160;flag&#160;reports&#160;0.</p>
<p style="position:absolute;top:175px;left:440px;white-space:nowrap" class="ft04">A hint&#160;used with an ‚ÄúXACQUIRE-enabled‚Äú instruction&#160;to&#160;start lock&#160;</p>
<p style="position:absolute;top:191px;left:440px;white-space:nowrap" class="ft04">elision on&#160;the&#160;instruction&#160;memory&#160;operand address.</p>
<p style="position:absolute;top:195px;left:77px;white-space:nowrap" class="ft04">XACQUIRE</p>
<p style="position:absolute;top:231px;left:77px;white-space:nowrap" class="ft04">F3</p>
<p style="position:absolute;top:231px;left:300px;white-space:nowrap" class="ft04">V/V</p>
<p style="position:absolute;top:231px;left:373px;white-space:nowrap" class="ft04">HLE</p>
<p style="position:absolute;top:231px;left:440px;white-space:nowrap" class="ft04">A hint&#160;used with an ‚ÄúXRELEASE-enabled‚Äú instruction to end lock&#160;</p>
<p style="position:absolute;top:247px;left:440px;white-space:nowrap" class="ft04">elision on&#160;the&#160;instruction&#160;memory&#160;operand address.</p>
<p style="position:absolute;top:250px;left:77px;white-space:nowrap" class="ft04">XRELEASE</p>
</div>
</body>
</html>
