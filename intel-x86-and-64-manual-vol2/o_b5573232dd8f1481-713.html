<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 713</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:12px;font-family:Times;color:#0860a8;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page713-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_b5573232dd8f1481713.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">MONITOR‚ÄîSet&#160;Up&#160;Monitor&#160;Address</p>
<p style="position:absolute;top:47px;left:635px;white-space:nowrap" class="ft01">INSTRUCTION SET REFERENCE,&#160;M-U</p>
<p style="position:absolute;top:1103px;left:770px;white-space:nowrap" class="ft00">Vol. 2B&#160;4-33</p>
<p style="position:absolute;top:98px;left:69px;white-space:nowrap" class="ft02">MONITOR‚ÄîSet Up Monitor Address</p>
<p style="position:absolute;top:282px;left:354px;white-space:nowrap" class="ft03">Instruction Operand&#160;Encoding</p>
<p style="position:absolute;top:370px;left:69px;white-space:nowrap" class="ft03">Description</p>
<p style="position:absolute;top:396px;left:69px;white-space:nowrap" class="ft07">The MONITOR instruction&#160;arms address monitoring&#160;hardware&#160;using an&#160;address specified in EAX (the address range&#160;<br/>that&#160;the monitoring hardware checks&#160;for&#160;store operations&#160;can be&#160;determined&#160;by&#160;using&#160;CPUID).&#160;A&#160;store&#160;to&#160;an&#160;<br/>address within the&#160;specified&#160;address&#160;range&#160;triggers the&#160;monitoring hardware.&#160;The&#160;state of&#160;monitor&#160;hardware is&#160;<br/>used by&#160;MWAIT.&#160;<br/>The&#160;content of EAX is&#160;an effective address&#160;(in 64-bit&#160;mode,&#160;RAX is&#160;used). By default,&#160;the DS&#160;segment is&#160;used to&#160;<br/>create&#160;a linear address that&#160;is monitored. Segment&#160;overrides can&#160;be&#160;used.<br/>ECX&#160;and EDX&#160;are also&#160;used. They&#160;communicate other information to&#160;MONITOR.&#160;ECX specifies&#160;optional extensions.&#160;<br/>EDX specifies&#160;optional hints; it&#160;does&#160;not change&#160;the architectural&#160;behavior of the&#160;instruction. For the&#160;Pentium&#160;4&#160;<br/>processor&#160;(family 15, model&#160;3), no extensions&#160;or hints&#160;are&#160;defined.&#160;Undefined hints&#160;in EDX are&#160;ignored by the&#160;<br/>processor; undefined extensions&#160;in&#160;ECX&#160;raises a&#160;general protection fault.<br/>The address&#160;range&#160;must&#160;use memory of the&#160;write-back type. Only write-back&#160;memory will&#160;correctly&#160;trigger the&#160;<br/>monitoring hardware.&#160;Additional information&#160;on determining&#160;what&#160;address&#160;range&#160;to&#160;use&#160;in order to&#160;prevent false&#160;<br/>wake-ups&#160;<a href="˛ˇ">is described in Chapter&#160;8,&#160;‚ÄúMultiple-Processor&#160;Management‚Äù o</a>f&#160;th<a href="˛ˇ">e&#160;<i>Intel¬Æ 64 and&#160;IA-32 Architectures&#160;<br/>Software Developer‚Äôs Manual, Volume&#160;3A</i></a>.<br/>The MONITOR&#160;instruction&#160;is ordered as&#160;a load operation with respect to other&#160;memory transactions. The instruction&#160;<br/>is&#160;subject to&#160;the permission checking&#160;and faults associated with&#160;a byte&#160;load. Like&#160;a load, MONITOR&#160;sets&#160;the A-bit&#160;<br/>but&#160;not the&#160;D-bit in&#160;page&#160;tables.&#160;<br/>CPUID.01H:ECX.MONITOR[bit 3]&#160;indicates&#160;the availability&#160;of MONITOR and MWAIT in&#160;the&#160;processor.&#160;When&#160;set,&#160;<br/>MONITOR may&#160;be&#160;executed&#160;only at&#160;privilege&#160;level&#160;0 (use&#160;at any other privilege&#160;level results&#160;in an&#160;invalid-opcode&#160;<br/>exception). The operating&#160;system&#160;or system&#160;BIOS may&#160;disable&#160;this instruction by using&#160;the IA32_MISC_ENABLE&#160;<br/>MSR; disabling MONITOR clears the CPUID feature flag and&#160;causes execution to generate&#160;an invalid-opcode excep-<br/>tion.&#160;<br/>The instruction‚Äôs operation&#160;is the&#160;same&#160;in&#160;non-64-bit modes and&#160;64-bit mode.</p>
<p style="position:absolute;top:840px;left:69px;white-space:nowrap" class="ft03">Operation</p>
<p style="position:absolute;top:867px;left:69px;white-space:nowrap" class="ft06">MONITOR sets&#160;up&#160;an address range for the monitor hardware&#160;using&#160;the&#160;content of EAX (RAX in 64-bit mode) as an&#160;<br/>effective&#160;address and puts&#160;the monitor hardware&#160;in armed state.&#160;Always use&#160;memory&#160;of&#160;the&#160;write-back&#160;caching&#160;<br/>type. A store&#160;to the&#160;specified address&#160;range&#160;will trigger&#160;the&#160;monitor hardware. The content&#160;of&#160;ECX and&#160;EDX are&#160;<br/>used&#160;to communicate other&#160;information to the monitor hardware.</p>
<p style="position:absolute;top:953px;left:69px;white-space:nowrap" class="ft03">Intel C/C++&#160;Compiler&#160;Intrinsic Equivalent</p>
<p style="position:absolute;top:979px;left:69px;white-space:nowrap" class="ft04">MONITOR:</p>
<p style="position:absolute;top:979px;left:154px;white-space:nowrap" class="ft04">void&#160;_mm_monitor(void&#160;const *p,&#160;unsigned&#160;extensions,unsigned&#160;hints)</p>
<p style="position:absolute;top:1016px;left:69px;white-space:nowrap" class="ft03">Numeric Exceptions</p>
<p style="position:absolute;top:1042px;left:69px;white-space:nowrap" class="ft04">None</p>
<p style="position:absolute;top:123px;left:73px;white-space:nowrap" class="ft04">Opcode</p>
<p style="position:absolute;top:123px;left:222px;white-space:nowrap" class="ft04">Instruction</p>
<p style="position:absolute;top:123px;left:390px;white-space:nowrap" class="ft04">Op/&#160;</p>
<p style="position:absolute;top:137px;left:390px;white-space:nowrap" class="ft04">En</p>
<p style="position:absolute;top:123px;left:427px;white-space:nowrap" class="ft04">64-Bit&#160;</p>
<p style="position:absolute;top:137px;left:427px;white-space:nowrap" class="ft04">Mode</p>
<p style="position:absolute;top:123px;left:499px;white-space:nowrap" class="ft04">Compat/</p>
<p style="position:absolute;top:137px;left:499px;white-space:nowrap" class="ft04">Leg Mode</p>
<p style="position:absolute;top:123px;left:570px;white-space:nowrap" class="ft04">Description</p>
<p style="position:absolute;top:160px;left:73px;white-space:nowrap" class="ft04">0F&#160;01&#160;C8</p>
<p style="position:absolute;top:160px;left:222px;white-space:nowrap" class="ft04">MONITOR</p>
<p style="position:absolute;top:160px;left:390px;white-space:nowrap" class="ft04">NP</p>
<p style="position:absolute;top:160px;left:427px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:160px;left:499px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:160px;left:570px;white-space:nowrap" class="ft04">Sets up&#160;a linear&#160;address range to&#160;be&#160;</p>
<p style="position:absolute;top:177px;left:570px;white-space:nowrap" class="ft04">monitored by hardware&#160;and activates the&#160;</p>
<p style="position:absolute;top:193px;left:570px;white-space:nowrap" class="ft04">monitor.&#160;The&#160;address range should be&#160;a write-</p>
<p style="position:absolute;top:209px;left:570px;white-space:nowrap" class="ft04">back memory caching&#160;type. The&#160;address&#160;is&#160;</p>
<p style="position:absolute;top:226px;left:570px;white-space:nowrap" class="ft04">DS:EAX&#160;(DS:RAX&#160;in&#160;64-bit mode).</p>
<p style="position:absolute;top:306px;left:88px;white-space:nowrap" class="ft04">Op/En</p>
<p style="position:absolute;top:306px;left:199px;white-space:nowrap" class="ft04">Operand&#160;1</p>
<p style="position:absolute;top:306px;left:374px;white-space:nowrap" class="ft04">Operand&#160;2</p>
<p style="position:absolute;top:306px;left:548px;white-space:nowrap" class="ft04">Operand&#160;3</p>
<p style="position:absolute;top:306px;left:720px;white-space:nowrap" class="ft04">Operand&#160;4</p>
<p style="position:absolute;top:330px;left:97px;white-space:nowrap" class="ft04">NP</p>
<p style="position:absolute;top:330px;left:220px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:330px;left:395px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:330px;left:569px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:330px;left:741px;white-space:nowrap" class="ft04">NA</p>
</div>
</body>
</html>
