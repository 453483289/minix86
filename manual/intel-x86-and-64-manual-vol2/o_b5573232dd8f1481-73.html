<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 73</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:16px;font-family:Times;color:#0860a8;}
	.ft05{font-size:18px;font-family:Times;color:#000000;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:12px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page73-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_b5573232dd8f1481073.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:767px;white-space:nowrap" class="ft00">Vol. 2A&#160;2-13</p>
<p style="position:absolute;top:47px;left:706px;white-space:nowrap" class="ft01">INSTRUCTION FORMAT</p>
<p style="position:absolute;top:97px;left:69px;white-space:nowrap" class="ft02">2.3&#160;</p>
<p style="position:absolute;top:97px;left:148px;white-space:nowrap" class="ft02">INTEL® ADVANCED VECTOR EXTENSIONS (INTEL® AVX)</p>
<p style="position:absolute;top:130px;left:69px;white-space:nowrap" class="ft08">Intel AVX instructions&#160;are encoded using an encoding scheme that&#160;combines&#160;prefix bytes,&#160;opcode&#160;extension field,&#160;<br/>operand&#160;encoding&#160;fields, and vector length encoding capability into a&#160;new prefix, referred to&#160;as VEX.&#160;In the&#160;VEX&#160;<br/>encoding&#160;scheme,&#160;the&#160;VEX prefix may be&#160;two or&#160;three bytes long,&#160;depending on the&#160;instruction&#160;semantics.&#160;Despite&#160;<br/>the&#160;two-byte or&#160;three-byte&#160;length&#160;of&#160;the VEX prefix, the&#160;VEX&#160;encoding format provides a&#160;more compact&#160;represen-<br/>tation/packing of the components of&#160;encoding&#160;an&#160;instruction&#160;in Intel&#160;64&#160;architecture. The&#160;VEX encoding scheme&#160;<br/>also allows more&#160;headroom for future&#160;growth of&#160;Intel 64 architecture.</p>
<p style="position:absolute;top:263px;left:69px;white-space:nowrap" class="ft04">2.3.1 Instruction&#160;</p>
<p style="position:absolute;top:263px;left:242px;white-space:nowrap" class="ft04">Format</p>
<p style="position:absolute;top:291px;left:69px;white-space:nowrap" class="ft03">Instruction&#160;encoding using&#160;VEX prefix provides&#160;several&#160;advantages:</p>
<p style="position:absolute;top:313px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:313px;left:95px;white-space:nowrap" class="ft08">Instruction syntax support for&#160;three&#160;operands&#160;and&#160;up-to&#160;four operands&#160;when necessary. For example, the third&#160;<br/>source register&#160;used by&#160;VBLENDVPD is&#160;encoded&#160;using bits 7:4 of the&#160;immediate&#160;byte.</p>
<p style="position:absolute;top:352px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:352px;left:95px;white-space:nowrap" class="ft03">Encoding support&#160;for vector length&#160;of&#160;128 bits (using&#160;XMM&#160;registers) and&#160;256&#160;bits&#160;(using YMM&#160;registers).</p>
<p style="position:absolute;top:374px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:375px;left:95px;white-space:nowrap" class="ft03">Encoding support&#160;for instruction syntax&#160;of&#160;non-destructive source&#160;operands.</p>
<p style="position:absolute;top:397px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:397px;left:95px;white-space:nowrap" class="ft08">Elimination of escape&#160;opcode byte&#160;(0FH),&#160;SIMD prefix&#160;byte (66H, F2H, F3H)&#160;via a&#160;compact bit field&#160;represen-<br/>tation within the&#160;VEX&#160;prefix.</p>
<p style="position:absolute;top:436px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:436px;left:95px;white-space:nowrap" class="ft08">Elimination&#160;of&#160;the need&#160;to use&#160;REX prefix to encode the&#160;extended&#160;half of general-purpose register&#160;sets&#160;(R8-<br/>R15) for direct register&#160;access, memory addressing,&#160;or&#160;accessing&#160;XMM8-XMM15 (including&#160;YMM8-YMM15).</p>
<p style="position:absolute;top:475px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:475px;left:95px;white-space:nowrap" class="ft08">Flexible and more compact bit&#160;fields&#160;are provided&#160;in the&#160;VEX prefix&#160;to retain&#160;the full&#160;functionality&#160;provided by&#160;<br/>REX&#160;prefix. REX.W,&#160;REX.X,&#160;REX.B functionalities are provided&#160;in&#160;the three-byte&#160;VEX prefix only because&#160;only&#160;a&#160;<br/>subset&#160;of SIMD instructions need them.&#160;</p>
<p style="position:absolute;top:530px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:531px;left:95px;white-space:nowrap" class="ft03">Extensibility for future instruction extensions&#160;without&#160;significant instruction length increase.</p>
<p style="position:absolute;top:552px;left:69px;white-space:nowrap" class="ft08"><a href="o_b5573232dd8f1481-73.html">Figure 2-8 shows th</a>e&#160;Intel 64 instruction&#160;encoding format&#160;with VEX prefix&#160;support. Legacy&#160;instruction&#160;without a&#160;<br/>VEX prefix is&#160;fully&#160;supported&#160;and&#160;unchanged.&#160;The&#160;use of VEX&#160;prefix in an&#160;Intel 64&#160;instruction is&#160;optional, but&#160;a VEX&#160;<br/>prefix is required for Intel 64&#160;instructions&#160;that operate on YMM registers or support three&#160;and four operand syntax.&#160;<br/>VEX prefix is not a constant-valued,&#160;“single-purpose” byte&#160;like 0FH,&#160;66H, F2H,&#160;F3H in&#160;legacy SSE instructions. VEX&#160;<br/>prefix provides substantially&#160;richer capability than the&#160;REX&#160;prefix.&#160;</p>
<p style="position:absolute;top:787px;left:263px;white-space:nowrap" class="ft06">Figure&#160;2-8.&#160;&#160;Instruction&#160;Encoding Format&#160;with VEX Prefix</p>
<p style="position:absolute;top:843px;left:69px;white-space:nowrap" class="ft04">2.3.2&#160;</p>
<p style="position:absolute;top:843px;left:150px;white-space:nowrap" class="ft04">VEX and the LOCK prefix</p>
<p style="position:absolute;top:871px;left:69px;white-space:nowrap" class="ft03">Any VEX-encoded instruction with a&#160;LOCK&#160;prefix preceding VEX will&#160;#UD.</p>
<p style="position:absolute;top:921px;left:69px;white-space:nowrap" class="ft04">2.3.3&#160;</p>
<p style="position:absolute;top:921px;left:150px;white-space:nowrap" class="ft04">VEX and the 66H, F2H, and F3H prefixes</p>
<p style="position:absolute;top:949px;left:69px;white-space:nowrap" class="ft03">Any VEX-encoded instruction with a&#160;66H,&#160;F2H,&#160;or&#160;F3H&#160;prefix preceding VEX will&#160;#UD.</p>
<p style="position:absolute;top:999px;left:69px;white-space:nowrap" class="ft04">2.3.4&#160;</p>
<p style="position:absolute;top:999px;left:150px;white-space:nowrap" class="ft04">VEX and the REX prefix</p>
<p style="position:absolute;top:1027px;left:69px;white-space:nowrap" class="ft03">Any VEX-encoded instruction with a&#160;REX&#160;prefix proceeding&#160;VEX will #UD.&#160;</p>
<p style="position:absolute;top:735px;left:445px;white-space:nowrap" class="ft03">ModR/M</p>
<p style="position:absolute;top:700px;left:464px;white-space:nowrap" class="ft07">1</p>
<p style="position:absolute;top:735px;left:195px;white-space:nowrap" class="ft03">[Prefixes]</p>
<p style="position:absolute;top:735px;left:294px;white-space:nowrap" class="ft03">[VEX]</p>
<p style="position:absolute;top:735px;left:370px;white-space:nowrap" class="ft03">OPCODE</p>
<p style="position:absolute;top:735px;left:526px;white-space:nowrap" class="ft03">[SIB]</p>
<p style="position:absolute;top:735px;left:589px;white-space:nowrap" class="ft03">[DISP]</p>
<p style="position:absolute;top:735px;left:658px;white-space:nowrap" class="ft03">[IMM]</p>
<p style="position:absolute;top:700px;left:306px;white-space:nowrap" class="ft07">2,3</p>
<p style="position:absolute;top:700px;left:388px;white-space:nowrap" class="ft07">1</p>
<p style="position:absolute;top:700px;left:534px;white-space:nowrap" class="ft07">0,1</p>
<p style="position:absolute;top:700px;left:604px;white-space:nowrap" class="ft07">0,1,2,4</p>
<p style="position:absolute;top:700px;left:673px;white-space:nowrap" class="ft07">0,1</p>
<p style="position:absolute;top:700px;left:179px;white-space:nowrap" class="ft07"># Bytes</p>
</div>
</body>
</html>
