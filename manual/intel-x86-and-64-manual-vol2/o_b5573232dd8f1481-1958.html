<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1958</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:12px;font-family:Times;color:#0860a8;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:18px;font-family:Times;color:#000000;}
	.ft07{font-size:8px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:17px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1958-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_b5573232dd8f14811958.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:627px;white-space:nowrap" class="ft00">XSAVE‚ÄîSave Processor Extended States</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">INSTRUCTION SET REFERENCE, V-Z</p>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">5-572&#160;Vol. 2C</p>
<p style="position:absolute;top:98px;left:68px;white-space:nowrap" class="ft02">XSAVE‚ÄîSave&#160;Processor Extended States</p>
<p style="position:absolute;top:272px;left:353px;white-space:nowrap" class="ft03">Instruction&#160;Operand&#160;Encoding</p>
<p style="position:absolute;top:359px;left:68px;white-space:nowrap" class="ft03">Description</p>
<p style="position:absolute;top:385px;left:68px;white-space:nowrap" class="ft08">Performs a&#160;full&#160;or partial save&#160;of processor state&#160;components to&#160;the XSAVE&#160;area located at&#160;the&#160;memory address&#160;<br/>specified&#160;by the&#160;destination&#160;operand. The implicit EDX:EAX&#160;register&#160;pair&#160;specifies a&#160;64-bit instruction mask.&#160;The&#160;<br/>specific&#160;state&#160;components saved correspond to&#160;the bits set in the requested-feature&#160;bitmap&#160;(RFBM), which&#160;is the&#160;<br/>logical-AND of EDX:EAX&#160;and XCR0.<br/>The format of the&#160;XSAVE area&#160;is&#160;detaile<a href="˛ˇ">d in&#160;Section&#160;13.4, ‚ÄúXSAVE Area,‚Äù&#160;of&#160;<i>Intel¬Æ 64&#160;and IA-32&#160;Architectures&#160;Soft-<br/>ware&#160;Developer‚Äôs Manual, Volume&#160;1</i></a>.<br/><a href="˛ˇ">Section&#160;13.7,&#160;‚ÄúOperation of XSAVE,‚Äù&#160;of&#160;<i>Intel¬Æ 64&#160;and IA-32 Architectures&#160;Software&#160;Developer‚Äôs Manual, Volume&#160;1</i>&#160;<br/></a>provides&#160;a detailed description of&#160;the&#160;operation of the&#160;XSAVE instruction.&#160;The&#160;following items&#160;provide&#160;a high-level&#160;<br/>outline:</p>
<p style="position:absolute;top:554px;left:68px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:555px;left:93px;white-space:nowrap" class="ft04">XSAVE saves state component&#160;<i>i</i>&#160;if and only&#160;if RFBM[<i>i</i>]&#160;=&#160;&#160;1.</p>
<p style="position:absolute;top:552px;left:485px;white-space:nowrap" class="ft07">1</p>
<p style="position:absolute;top:577px;left:68px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:577px;left:93px;white-space:nowrap" class="ft08">XSAVE does not&#160;modify&#160;bytes 511:464 of&#160;the&#160;legacy region of the&#160;XSAV<a href="˛ˇ">E area (see Section 13.4.1, ‚ÄúLegacy&#160;<br/>Region of&#160;an&#160;XSAVE&#160;Area‚Äù).</a></p>
<p style="position:absolute;top:616px;left:68px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:616px;left:93px;white-space:nowrap" class="ft08">XSAVE reads&#160;the&#160;XSTATE_BV&#160;field&#160;of the&#160;XSAVE header&#160;(see<a href="˛ˇ">&#160;Section 13.4.2,&#160;‚ÄúXSAVE Header‚Äù) and&#160;</a>writes&#160;a&#160;<br/>modified value back&#160;to memory as&#160;follows.&#160;If RFBM[<i>i</i>]&#160;=&#160;1, XSAVE&#160;writes XSTATE_BV[<i>i</i>] with the&#160;value&#160;of&#160;<br/>XINUSE[<i>i</i>]. (XINUSE is&#160;a bitmap by which the&#160;processor&#160;tracks the&#160;status of various state components.&#160;See&#160;<br/><a href="˛ˇ">Section 13.6, ‚ÄúProcessor&#160;Tracking&#160;of&#160;XSAVE-Managed&#160;State.‚Äù) If R</a>FBM[<i>i</i>]&#160;=&#160;0, XSAVE writes XSTATE_BV[<i>i</i>] with&#160;<br/>the value&#160;that it read from&#160;memory&#160;(it&#160;does not modify&#160;the&#160;bit). XSAVE does&#160;not write&#160;to any&#160;part&#160;of the&#160;XSAVE&#160;<br/>header&#160;other than the XSTATE_BV field.</p>
<p style="position:absolute;top:721px;left:68px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:721px;left:93px;white-space:nowrap" class="ft08">XSAVE&#160;always uses&#160;the standard format of the&#160;extended region of the&#160;XSAVE area&#160;(see<a href="˛ˇ">&#160;Section&#160;13.4.3,&#160;<br/>‚ÄúExtended Region&#160;of&#160;an XSAVE&#160;Area‚Äù)</a>.</p>
<p style="position:absolute;top:762px;left:68px;white-space:nowrap" class="ft08">Use of a&#160;destination&#160;operand not aligned&#160;to 64-byte boundary (in&#160;either&#160;64-bit or 32-bit&#160;modes)&#160;results in a&#160;<br/>general-protection&#160;(#GP) exception.&#160;In 64-bit&#160;mode,&#160;the upper 32 bits of RDX and&#160;RAX are ignored.</p>
<p style="position:absolute;top:815px;left:68px;white-space:nowrap" class="ft03">Operation</p>
<p style="position:absolute;top:847px;left:68px;white-space:nowrap" class="ft04">RFBM&#160;‚Üê&#160;XCR0 AND EDX:EAX;&#160;/* bitwise logical AND */</p>
<p style="position:absolute;top:865px;left:68px;white-space:nowrap" class="ft04">OLD_BV&#160;‚Üê&#160;XSTATE_BV&#160;field from XSAVE header;</p>
<p style="position:absolute;top:901px;left:68px;white-space:nowrap" class="ft04">IF&#160;RFBM[0]&#160;=&#160;1</p>
<p style="position:absolute;top:919px;left:88px;white-space:nowrap" class="ft04">THEN store x87 state into legacy region&#160;of&#160;XSAVE area;</p>
<p style="position:absolute;top:937px;left:68px;white-space:nowrap" class="ft011">FI;<br/>IF&#160;RFBM[1]&#160;=&#160;1</p>
<p style="position:absolute;top:973px;left:88px;white-space:nowrap" class="ft04">THEN&#160;store&#160;XMM&#160;registers into legacy region&#160;of&#160;XSAVE area;</p>
<p style="position:absolute;top:991px;left:68px;white-space:nowrap" class="ft04">FI;</p>
<p style="position:absolute;top:123px;left:74px;white-space:nowrap" class="ft04">Opcode</p>
<p style="position:absolute;top:123px;left:221px;white-space:nowrap" class="ft04">Instruction</p>
<p style="position:absolute;top:123px;left:387px;white-space:nowrap" class="ft04">Op/&#160;</p>
<p style="position:absolute;top:137px;left:387px;white-space:nowrap" class="ft04">En</p>
<p style="position:absolute;top:123px;left:424px;white-space:nowrap" class="ft04">64-Bit&#160;</p>
<p style="position:absolute;top:137px;left:424px;white-space:nowrap" class="ft04">Mode</p>
<p style="position:absolute;top:123px;left:496px;white-space:nowrap" class="ft04">Compat/</p>
<p style="position:absolute;top:137px;left:496px;white-space:nowrap" class="ft04">Leg&#160;Mode</p>
<p style="position:absolute;top:123px;left:566px;white-space:nowrap" class="ft04">Description</p>
<p style="position:absolute;top:160px;left:74px;white-space:nowrap" class="ft04">0F&#160;AE&#160;/4</p>
<p style="position:absolute;top:160px;left:221px;white-space:nowrap" class="ft04">XSAVE&#160;<i>mem</i></p>
<p style="position:absolute;top:160px;left:387px;white-space:nowrap" class="ft04">M</p>
<p style="position:absolute;top:160px;left:424px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:160px;left:496px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:160px;left:566px;white-space:nowrap" class="ft04">Save&#160;state components&#160;specified&#160;by&#160;EDX:EAX&#160;</p>
<p style="position:absolute;top:177px;left:566px;white-space:nowrap" class="ft04">to&#160;<i>mem</i>.</p>
<p style="position:absolute;top:199px;left:74px;white-space:nowrap" class="ft04">REX.W+ 0F AE&#160;/4</p>
<p style="position:absolute;top:199px;left:221px;white-space:nowrap" class="ft04">XSAVE64&#160;<i>mem</i></p>
<p style="position:absolute;top:199px;left:387px;white-space:nowrap" class="ft04">M</p>
<p style="position:absolute;top:199px;left:424px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:199px;left:496px;white-space:nowrap" class="ft04">N.E.</p>
<p style="position:absolute;top:199px;left:566px;white-space:nowrap" class="ft04">Save&#160;state components&#160;specified&#160;by&#160;EDX:EAX&#160;</p>
<p style="position:absolute;top:215px;left:566px;white-space:nowrap" class="ft04">to&#160;<i>mem</i>.</p>
<p style="position:absolute;top:295px;left:90px;white-space:nowrap" class="ft04">Op/En</p>
<p style="position:absolute;top:295px;left:203px;white-space:nowrap" class="ft04">Operand&#160;1</p>
<p style="position:absolute;top:295px;left:376px;white-space:nowrap" class="ft04">Operand&#160;2</p>
<p style="position:absolute;top:295px;left:546px;white-space:nowrap" class="ft04">Operand&#160;3</p>
<p style="position:absolute;top:295px;left:718px;white-space:nowrap" class="ft04">Operand&#160;4</p>
<p style="position:absolute;top:319px;left:102px;white-space:nowrap" class="ft04">M</p>
<p style="position:absolute;top:319px;left:190px;white-space:nowrap" class="ft04">ModRM:r/m (w)</p>
<p style="position:absolute;top:319px;left:397px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:319px;left:567px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:319px;left:740px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:1038px;left:68px;white-space:nowrap" class="ft04">1.&#160;An exception is&#160;made&#160;for MXCSR and MXCSR_MASK, which&#160;belong&#160;to&#160;state&#160;component 1 ‚Äî&#160;SSE.&#160;XSAVE saves these&#160;values&#160;to&#160;mem-</p>
<p style="position:absolute;top:1054px;left:89px;white-space:nowrap" class="ft04">ory if&#160;either RFBM[1] or RFBM[2] is 1.</p>
</div>
</body>
</html>
