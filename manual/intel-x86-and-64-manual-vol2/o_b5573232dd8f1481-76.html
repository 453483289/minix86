<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 76</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:14px;font-family:Times;color:#0860a8;}
	.ft04{font-size:11px;line-height:20px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:21px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page76-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_b5573232dd8f1481076.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">2-16&#160;Vol. 2A</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">INSTRUCTION FORMAT</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft06">This bit is&#160;present in both&#160;2-&#160;and 3-byte VEX&#160;prefixes.<br/>The&#160;usage&#160;of&#160;WRXB bits&#160;for legacy instructions is&#160;explained&#160;in detail section 2.2.1.2 of&#160;Intel 64 and IA-32&#160;Architec-<br/>tures&#160;Software developer’s manual,&#160;Volume 2A.<br/>This bit is&#160;stored&#160;in bit inverted&#160;format.</p>
<p style="position:absolute;top:203px;left:68px;white-space:nowrap" class="ft03">2.3.5.3&#160;&#160;</p>
<p style="position:absolute;top:203px;left:152px;white-space:nowrap" class="ft03">3-byte VEX byte&#160;1, bit[6]&#160;-&#160;‘X’&#160;</p>
<p style="position:absolute;top:229px;left:68px;white-space:nowrap" class="ft06">Bit[6] of the 3-byte VEX byte&#160;1&#160;encodes&#160;a bit analogous to&#160;a bit inverted&#160;REX.X.&#160;It&#160;is&#160;an&#160;extension&#160;of the SIB Index&#160;<br/>field&#160;in 64-bit modes.&#160;In 32-bit modes,&#160;this bit must&#160;be&#160;set&#160;to ‘1’&#160;otherwise&#160;the&#160;instruction&#160;is LES or&#160;LDS.<br/>This bit is&#160;available&#160;only&#160;in&#160;the 3-byte VEX prefix.<br/>This bit is&#160;stored&#160;in bit inverted&#160;format.</p>
<p style="position:absolute;top:331px;left:68px;white-space:nowrap" class="ft03">2.3.5.4&#160;&#160;</p>
<p style="position:absolute;top:331px;left:152px;white-space:nowrap" class="ft03">3-byte VEX byte&#160;1, bit[5]&#160;-&#160;‘B’&#160;</p>
<p style="position:absolute;top:357px;left:68px;white-space:nowrap" class="ft04">Bit[5] of&#160;the&#160;3-byte VEX byte 1 encodes&#160;a&#160;bit analogous to&#160;a bit inverted&#160;REX.B. In 64-bit modes, it is an extension&#160;<br/>of&#160;the&#160;ModR/M&#160;r/m field,&#160;or&#160;the SIB base&#160;field.&#160;In 32-bit modes,&#160;this bit&#160;is ignored.<br/>This bit is&#160;available&#160;only&#160;in&#160;the 3-byte VEX prefix.<br/>This bit is&#160;stored&#160;in bit inverted&#160;format.</p>
<p style="position:absolute;top:460px;left:68px;white-space:nowrap" class="ft03">2.3.5.5&#160;&#160;</p>
<p style="position:absolute;top:460px;left:152px;white-space:nowrap" class="ft03">3-byte VEX byte&#160;2, bit[7]&#160;-&#160;‘W’&#160;</p>
<p style="position:absolute;top:485px;left:68px;white-space:nowrap" class="ft05">Bit[7] of the 3-byte VEX byte 2 is represented by the notation VEX.W. It&#160;can provide&#160;following functions, depending&#160;<br/>on&#160;the specific opcode.&#160;<br/>•</p>
<p style="position:absolute;top:518px;left:95px;white-space:nowrap" class="ft05">For AVX instructions&#160;that have&#160;equivalent legacy SSE&#160;instructions (typically these SSE instructions have&#160;a&#160;<br/>general-purpose&#160;register operand with its operand&#160;size&#160;attribute&#160;promotable by REX.W),&#160;if&#160;REX.W promotes&#160;<br/>the&#160;operand size attribute of the&#160;general-purpose register&#160;operand in&#160;legacy SSE&#160;instruction, VEX.W has&#160;same&#160;<br/>meaning in&#160;the corresponding AVX equivalent form.&#160;In 32-bit modes,&#160;VEX.W&#160;is silently ignored.</p>
<p style="position:absolute;top:584px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:584px;left:95px;white-space:nowrap" class="ft05">For&#160;AVX instructions&#160;that have equivalent legacy&#160;SSE&#160;instructions (typically these SSE&#160;instructions have&#160;oper-<br/>ands with their operand&#160;size&#160;attribute fixed and&#160;not promotable&#160;by REX.W), if REX.W&#160;is don’t&#160;care&#160;in legacy&#160;<br/>SSE&#160;instruction, VEX.W is&#160;ignored&#160;in&#160;the corresponding AVX equivalent form irrespective&#160;of mode.</p>
<p style="position:absolute;top:634px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:634px;left:95px;white-space:nowrap" class="ft05">For new&#160;AVX instructions&#160;where VEX.W has no&#160;defined function (typically&#160;these&#160;meant the combination of&#160;the&#160;<br/>opcode&#160;byte and VEX.mmmmm did not have&#160;any&#160;equivalent&#160;SSE&#160;functions), VEX.W is reserved as zero&#160;and&#160;<br/>setting to other than zero will cause instruction&#160;to #UD.</p>
<p style="position:absolute;top:711px;left:68px;white-space:nowrap" class="ft03">2.3.5.6&#160;&#160;</p>
<p style="position:absolute;top:711px;left:152px;white-space:nowrap" class="ft03">2-byte VEX Byte 1, bits[6:3]&#160;and 3-byte VEX Byte 2, bits [6:3]- ‘vvvv’ the Source&#160;or Dest&#160;</p>
<p style="position:absolute;top:730px;left:152px;white-space:nowrap" class="ft03">Register Specifier</p>
<p style="position:absolute;top:756px;left:68px;white-space:nowrap" class="ft05">In 32-bit mode the&#160;VEX&#160;first&#160;byte C4 and C5 alias&#160;onto&#160;the&#160;LES&#160;and LDS instructions. To maintain compatibility with&#160;<br/>existing programs the VEX 2nd byte, bits&#160;[7:6] must be 11b.&#160;To achieve this,&#160;the VEX payload&#160;bits&#160;are selected&#160;to&#160;<br/>place&#160;only&#160;inverted, 64-bit&#160;valid fields (extended&#160;register&#160;selectors) in these upper&#160;bits.&#160;<br/>The 2-byte&#160;VEX Byte 1,&#160;bits [6:3] and&#160;the 3-byte VEX, Byte 2, bits [6:3] encode a field (shorthand VEX.vvvv) that&#160;<br/>for instructions with 2 or more&#160;source&#160;registers and an XMM or YMM or memory destination encodes the first source&#160;<br/>register specifier stored&#160;in&#160;inverted (1’s complement)&#160;form.&#160;<br/>VEX.vvvv is not used by the&#160;instructions with one source (except certain shifts, see&#160;below) or on instructions with&#160;<br/>no XMM&#160;or YMM or memory destination.&#160;If&#160;an instruction does not use VEX.vvvv&#160;then&#160;it&#160;should be set to&#160;1111b&#160;<br/>otherwise&#160;instruction will #UD.<br/>In 64-bit&#160;mode&#160;all&#160;4&#160;bits may be&#160;used.&#160;Se<a href="o_b5573232dd8f1481-77.html">e Table&#160;2-8</a>&#160;for&#160;the encoding of the&#160;XMM&#160;or&#160;YMM registers.&#160;In&#160;32-bit&#160;and&#160;<br/>16-bit modes bit 6 must be&#160;1&#160;(if bit 6 is not&#160;1,&#160;the 2-byte&#160;VEX version will generate&#160;LDS instruction and the 3-byte&#160;<br/>VEX version will ignore&#160;this&#160;bit).</p>
</div>
</body>
</html>
