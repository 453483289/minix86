<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1921</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:12px;font-family:Times;color:#0860a8;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1921-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_b5573232dd8f14811921.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">WRMSR‚ÄîWrite to Model&#160;Specific Register</p>
<p style="position:absolute;top:47px;left:637px;white-space:nowrap" class="ft01">INSTRUCTION SET REFERENCE, V-Z</p>
<p style="position:absolute;top:1103px;left:764px;white-space:nowrap" class="ft00">Vol. 2C&#160;5-535</p>
<p style="position:absolute;top:98px;left:69px;white-space:nowrap" class="ft02">WRMSR‚ÄîWrite to&#160;Model Specific Register</p>
<p style="position:absolute;top:233px;left:354px;white-space:nowrap" class="ft03">Instruction Operand&#160;Encoding</p>
<p style="position:absolute;top:320px;left:69px;white-space:nowrap" class="ft03">Description</p>
<p style="position:absolute;top:346px;left:69px;white-space:nowrap" class="ft07">Writes the contents of registers EDX:EAX into the 64-bit model specific register (MSR) specified in the ECX register.&#160;<br/>(On processors that&#160;support the Intel&#160;64 architecture, the high-order 32&#160;bits of RCX are ignored.)&#160;The contents of&#160;<br/>the&#160;EDX register&#160;are copied&#160;to high-order 32 bits of the&#160;selected&#160;MSR and&#160;the contents&#160;of the&#160;EAX&#160;register&#160;are&#160;<br/>copied&#160;to&#160;low-order&#160;32&#160;bits of the&#160;MSR.&#160;(On processors&#160;that&#160;support&#160;the Intel&#160;64 architecture,&#160;the high-order 32&#160;<br/>bits&#160;of&#160;each&#160;of&#160;RAX&#160;and&#160;RDX&#160;are&#160;ignored.)&#160;Undefined&#160;or&#160;reserved&#160;bits&#160;in&#160;an&#160;MSR&#160;should&#160;be&#160;set&#160;to&#160;values&#160;previously&#160;<br/>read.<br/>This instruction must&#160;be&#160;executed at privilege&#160;level 0&#160;or&#160;in real-address&#160;mode; otherwise, a&#160;general protection&#160;<br/>exception #GP(0)&#160;is generated. Specifying a&#160;reserved&#160;or unimplemented MSR&#160;address&#160;in ECX&#160;will&#160;also cause&#160;a&#160;<br/>general protection&#160;exception. The processor will&#160;also generate a general protection exception if software&#160;attempts&#160;<br/>to write to&#160;bits&#160;in a&#160;reserved MSR.<br/>When the&#160;WRMSR instruction is&#160;used&#160;to write&#160;to an MTRR,&#160;the&#160;TLBs&#160;are invalidated. This includes&#160;global entries&#160;<br/>(see&#160;‚ÄúTranslation Lookaside Buffers&#160;<a href="˛ˇ">(TLBs)‚Äù in Chapter 3&#160;of&#160;</a>the&#160;<a href="˛ˇ"><i>Intel¬Æ 64&#160;and IA-32 Architectures Software Devel-<br/>oper‚Äôs&#160;Manual, Volume&#160;3A</i>).<br/></a>MSRs control functions for testability,&#160;execution&#160;tracing, performance-monitoring and&#160;machine&#160;check errors.&#160;<br/><a href="˛ˇ">Chapter 35,&#160;‚ÄúModel-Specific Registers (MSRs)‚Äù,&#160;</a>in the&#160;<a href="˛ˇ"><i>Intel¬Æ 64&#160;and&#160;IA-32 Architectures Software&#160;Developer‚Äôs&#160;<br/>Manual, Volume&#160;3C</i>,&#160;</a>lists all&#160;MSRs that&#160;can&#160;be written with this instruction&#160;and their&#160;addresses.&#160;Note&#160;that each&#160;<br/>processor&#160;family has&#160;its own set&#160;of MSRs.<br/>The WRMSR instruction is a serializing instruction (see&#160;<a href="˛ˇ">‚ÄúSerializing Instructions‚Äù in&#160;Chapter 8 of&#160;</a>the<a href="˛ˇ">&#160;<i>Intel¬Æ&#160;64&#160;and&#160;<br/>IA-32&#160;Architectures&#160;Software Developer‚Äôs Manual, Volume&#160;3A</i></a>). Note&#160;that WRMSR&#160;to&#160;the&#160;IA32_TSC_DEADLINE&#160;<br/>MSR (MSR&#160;index 6E0H) and&#160;the X2APIC MSRs (MSR indices 802H to&#160;83FH) are&#160;not serializing.<br/>The CPUID&#160;instruction&#160;should be used to&#160;determine&#160;whether MSRs&#160;are supported&#160;(CPUID.01H:EDX[5]&#160;=&#160;1) before&#160;</p>
<p style="position:absolute;top:730px;left:69px;white-space:nowrap" class="ft04">using this&#160;instruction.</p>
<p style="position:absolute;top:767px;left:69px;white-space:nowrap" class="ft03">IA-32 Architecture&#160;Compatibility</p>
<p style="position:absolute;top:793px;left:69px;white-space:nowrap" class="ft06">The MSRs and the ability to read them with the&#160;WRMSR instruction were introduced&#160;into the IA-32 architecture with&#160;<br/>the Pentium processor.&#160;Execution of&#160;this&#160;instruction by an IA-32 processor earlier than&#160;the&#160;Pentium processor&#160;<br/>results in&#160;an invalid opcode exception&#160;#UD.</p>
<p style="position:absolute;top:863px;left:69px;white-space:nowrap" class="ft03">Operation</p>
<p style="position:absolute;top:889px;left:69px;white-space:nowrap" class="ft04">MSR[ECX]&#160;‚Üê&#160;EDX:EAX;</p>
<p style="position:absolute;top:926px;left:69px;white-space:nowrap" class="ft03">Flags Affected</p>
<p style="position:absolute;top:952px;left:69px;white-space:nowrap" class="ft04">None.</p>
<p style="position:absolute;top:123px;left:76px;white-space:nowrap" class="ft04">Opcode</p>
<p style="position:absolute;top:123px;left:222px;white-space:nowrap" class="ft04">Instruction</p>
<p style="position:absolute;top:123px;left:389px;white-space:nowrap" class="ft04">Op/&#160;</p>
<p style="position:absolute;top:137px;left:389px;white-space:nowrap" class="ft04">En</p>
<p style="position:absolute;top:123px;left:426px;white-space:nowrap" class="ft04">64-Bit&#160;</p>
<p style="position:absolute;top:137px;left:426px;white-space:nowrap" class="ft04">Mode</p>
<p style="position:absolute;top:123px;left:498px;white-space:nowrap" class="ft04">Compat/</p>
<p style="position:absolute;top:137px;left:498px;white-space:nowrap" class="ft04">Leg&#160;Mode</p>
<p style="position:absolute;top:123px;left:568px;white-space:nowrap" class="ft04">Description</p>
<p style="position:absolute;top:160px;left:76px;white-space:nowrap" class="ft04">0F&#160;30</p>
<p style="position:absolute;top:160px;left:222px;white-space:nowrap" class="ft04">WRMSR</p>
<p style="position:absolute;top:160px;left:389px;white-space:nowrap" class="ft04">NP</p>
<p style="position:absolute;top:160px;left:426px;white-space:nowrap" class="ft04">Valid&#160;</p>
<p style="position:absolute;top:160px;left:498px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:160px;left:568px;white-space:nowrap" class="ft04">Write the value&#160;in&#160;EDX:EAX to MSR specified&#160;</p>
<p style="position:absolute;top:177px;left:568px;white-space:nowrap" class="ft04">by ECX.</p>
<p style="position:absolute;top:256px;left:88px;white-space:nowrap" class="ft04">Op/En</p>
<p style="position:absolute;top:256px;left:195px;white-space:nowrap" class="ft04">Operand&#160;1</p>
<p style="position:absolute;top:256px;left:366px;white-space:nowrap" class="ft04">Operand&#160;2</p>
<p style="position:absolute;top:256px;left:537px;white-space:nowrap" class="ft04">Operand&#160;3</p>
<p style="position:absolute;top:256px;left:714px;white-space:nowrap" class="ft04">Operand&#160;4</p>
<p style="position:absolute;top:280px;left:97px;white-space:nowrap" class="ft04">NP</p>
<p style="position:absolute;top:280px;left:216px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:280px;left:387px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:280px;left:558px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:280px;left:735px;white-space:nowrap" class="ft04">NA</p>
</div>
</body>
</html>
