<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 68</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:14px;font-family:Times;color:#0860a8;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:20px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:21px;font-family:Times;color:#000000;}
	.ft010{font-size:9px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page68-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_b5573232dd8f1481068.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">2-8&#160;Vol. 2A</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">INSTRUCTION FORMAT</p>
<p style="position:absolute;top:98px;left:68px;white-space:nowrap" class="ft02">2.2.1 REX&#160;</p>
<p style="position:absolute;top:98px;left:185px;white-space:nowrap" class="ft02">Prefixes</p>
<p style="position:absolute;top:126px;left:68px;white-space:nowrap" class="ft03">REX&#160;prefixes are&#160;instruction-prefix bytes used in 64-bit&#160;mode.&#160;They do the&#160;following:</p>
<p style="position:absolute;top:148px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:148px;left:93px;white-space:nowrap" class="ft03">Specify GPRs and&#160;SSE&#160;registers.</p>
<p style="position:absolute;top:170px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:171px;left:93px;white-space:nowrap" class="ft03">Specify 64-bit&#160;operand size.</p>
<p style="position:absolute;top:193px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:193px;left:93px;white-space:nowrap" class="ft03">Specify extended&#160;control registers.</p>
<p style="position:absolute;top:214px;left:68px;white-space:nowrap" class="ft07">Not&#160;all instructions require&#160;a REX&#160;prefix in&#160;64-bit mode. A&#160;prefix is&#160;necessary only if&#160;an&#160;instruction&#160;references&#160;one&#160;<br/>of the extended&#160;registers&#160;or uses&#160;a 64-bit&#160;operand. If&#160;a REX prefix is used&#160;when it&#160;has no meaning, it&#160;is&#160;ignored.<br/>Only one&#160;REX&#160;prefix is&#160;allowed per instruction.&#160;If used,&#160;the REX&#160;prefix byte must immediately&#160;precede&#160;the opcode&#160;<br/>byte or&#160;the escape&#160;opcode&#160;byte&#160;(0FH).&#160;When a&#160;REX&#160;prefix is&#160;used&#160;in conjunction with an instruction containing&#160;a&#160;<br/>mandatory prefix,&#160;the mandatory prefix must come before&#160;the REX so the REX prefix can be immediately preceding&#160;<br/>the opcode&#160;or the escape&#160;byte.&#160;For example,&#160;CVTDQ2PD&#160;with a REX prefix should have REX placed between F3&#160;and&#160;<br/>0F E6. Other&#160;placements&#160;are ignored. The&#160;instruction-size&#160;limit of 15 bytes still&#160;applies to&#160;instructions&#160;with&#160;a REX&#160;<br/>prefix. Se<a href="o_b5573232dd8f1481-68.html">e&#160;Figure&#160;2-3.</a></p>
<p style="position:absolute;top:596px;left:68px;white-space:nowrap" class="ft05">2.2.1.1&#160;&#160;</p>
<p style="position:absolute;top:596px;left:152px;white-space:nowrap" class="ft05">Encoding</p>
<p style="position:absolute;top:621px;left:68px;white-space:nowrap" class="ft07">Intel&#160;64&#160;and IA-32&#160;instruction formats specify&#160;up&#160;to three&#160;registers by&#160;using 3-bit fields in&#160;the encoding, depending&#160;<br/>on the&#160;format:</p>
<p style="position:absolute;top:660px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:660px;left:93px;white-space:nowrap" class="ft03">ModR/M: the&#160;reg&#160;and r/m&#160;fields of&#160;the ModR/M byte.</p>
<p style="position:absolute;top:682px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:683px;left:93px;white-space:nowrap" class="ft07">ModR/M with&#160;SIB:&#160;the reg field of the&#160;ModR/M byte, the&#160;base and index&#160;fields&#160;of&#160;the SIB (scale, index,&#160;base)&#160;<br/>byte.</p>
<p style="position:absolute;top:721px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:722px;left:93px;white-space:nowrap" class="ft03">Instructions&#160;without ModR/M:&#160;the reg field of the&#160;opcode.</p>
<p style="position:absolute;top:743px;left:68px;white-space:nowrap" class="ft07">In&#160;64-bit mode, these formats do not change. Bits needed to&#160;define fields in the&#160;64-bit context are provided by&#160;the&#160;<br/>addition&#160;of REX prefixes.</p>
<p style="position:absolute;top:804px;left:68px;white-space:nowrap" class="ft05">2.2.1.2&#160;&#160;</p>
<p style="position:absolute;top:804px;left:152px;white-space:nowrap" class="ft05">More&#160;on REX Prefix Fields&#160;</p>
<p style="position:absolute;top:829px;left:68px;white-space:nowrap" class="ft07">REX prefixes&#160;are&#160;a set&#160;of 16 opcodes that&#160;span one&#160;row&#160;of&#160;the&#160;opcode&#160;map&#160;and occupy&#160;entries&#160;40H to&#160;4FH.&#160;These&#160;<br/>opcodes represent&#160;valid instructions (INC or&#160;DEC)&#160;in IA-32 operating modes and&#160;in compatibility&#160;mode. In&#160;64-bit&#160;<br/>mode,&#160;the same&#160;opcodes represent&#160;the instruction prefix&#160;REX&#160;and&#160;are not treated&#160;as individual&#160;instructions.&#160;<br/>The single-byte-opcode&#160;forms of the INC/DEC&#160;instructions&#160;are not&#160;available in&#160;64-bit mode. INC/DEC functionality&#160;<br/>is still available&#160;using&#160;ModR/M&#160;forms&#160;of&#160;the same&#160;instructions (opcodes FF/0 and FF/1).&#160;<br/>Se<a href="o_b5573232dd8f1481-69.html">e Table 2-4</a>&#160;for a&#160;summary of&#160;the&#160;REX prefix format.&#160;<a href="o_b5573232dd8f1481-69.html">Figure&#160;2-4&#160;</a><a href="o_b5573232dd8f1481-70.html">though Figure&#160;2-7 show</a>&#160;examples of REX prefix&#160;<br/>fields&#160;in use.&#160;Some&#160;combinations of REX prefix&#160;fields&#160;are&#160;invalid.&#160;In such cases,&#160;the prefix&#160;is ignored. Some&#160;addi-<br/>tional information&#160;follows:</p>
<p style="position:absolute;top:975px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:976px;left:93px;white-space:nowrap" class="ft07">Setting&#160;REX.W can be&#160;used to&#160;determine the&#160;operand size&#160;but does not&#160;solely determine operand&#160;width.&#160;Like&#160;<br/>the 66H&#160;size prefix, 64-bit&#160;operand size&#160;override&#160;has no effect&#160;on byte-specific operations.&#160;</p>
<p style="position:absolute;top:1014px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:1015px;left:93px;white-space:nowrap" class="ft03">For non-byte&#160;operations: if a&#160;66H prefix&#160;is used&#160;with prefix&#160;(REX.W = 1),&#160;66H is&#160;ignored.&#160;</p>
<p style="position:absolute;top:1037px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:1038px;left:93px;white-space:nowrap" class="ft03">If&#160;a&#160;66H&#160;override&#160;is&#160;used&#160;with REX and&#160;REX.W&#160;= 0,&#160;the operand&#160;size&#160;is&#160;16&#160;bits.</p>
<p style="position:absolute;top:551px;left:310px;white-space:nowrap" class="ft06">Figure&#160;2-3. &#160;Prefix Ordering&#160;in 64-bit Mode</p>
<p style="position:absolute;top:409px;left:257px;white-space:nowrap" class="ft00">REX</p>
<p style="position:absolute;top:447px;left:648px;white-space:nowrap" class="ft010">Immediate data&#160;<br/>of&#160;1, 2,&#160;or&#160;4&#160;<br/>bytes or none</p>
<p style="position:absolute;top:448px;left:553px;white-space:nowrap" class="ft010">Address&#160;<br/>displacement&#160;of&#160;<br/>1,&#160;2, or 4 bytes&#160;</p>
<p style="position:absolute;top:448px;left:472px;white-space:nowrap" class="ft010">1 byte<br/>(if required)</p>
<p style="position:absolute;top:450px;left:392px;white-space:nowrap" class="ft010">1 byte<br/>(if&#160;required)</p>
<p style="position:absolute;top:446px;left:318px;white-space:nowrap" class="ft010">1-, 2-,&#160;or&#160;<br/>3-byte&#160;<br/>opcode</p>
<p style="position:absolute;top:448px;left:245px;white-space:nowrap" class="ft00">(optional)</p>
<p style="position:absolute;top:448px;left:178px;white-space:nowrap" class="ft010">Grp 1,&#160;Grp&#160;<br/>2, Grp 3,&#160;<br/>Grp 4<br/>(optional)</p>
<p style="position:absolute;top:408px;left:184px;white-space:nowrap" class="ft00">Legacy</p>
<p style="position:absolute;top:420px;left:252px;white-space:nowrap" class="ft00">Prefix</p>
<p style="position:absolute;top:415px;left:322px;white-space:nowrap" class="ft00">Opcode</p>
<p style="position:absolute;top:415px;left:404px;white-space:nowrap" class="ft00">ModR/M</p>
<p style="position:absolute;top:413px;left:489px;white-space:nowrap" class="ft00">SIB</p>
<p style="position:absolute;top:413px;left:549px;white-space:nowrap" class="ft00">Displacement</p>
<p style="position:absolute;top:414px;left:660px;white-space:nowrap" class="ft00">Immediate</p>
<p style="position:absolute;top:421px;left:184px;white-space:nowrap" class="ft00">Prefixes</p>
</div>
</body>
</html>
