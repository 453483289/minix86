<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1325</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:12px;font-family:Times;color:#0860a8;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:8px;font-family:Times;color:#000000;}
	.ft06{font-size:12px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:20px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1325-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_b5573232dd8f14811325.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">STI—Set Interrupt Flag</p>
<p style="position:absolute;top:47px;left:635px;white-space:nowrap" class="ft01">INSTRUCTION SET REFERENCE,&#160;M-U</p>
<p style="position:absolute;top:1103px;left:763px;white-space:nowrap" class="ft00">Vol. 2B&#160;4-645</p>
<p style="position:absolute;top:98px;left:69px;white-space:nowrap" class="ft02">STI—Set Interrupt Flag</p>
<p style="position:absolute;top:250px;left:354px;white-space:nowrap" class="ft03">Instruction Operand&#160;Encoding</p>
<p style="position:absolute;top:336px;left:69px;white-space:nowrap" class="ft03">Description</p>
<p style="position:absolute;top:363px;left:69px;white-space:nowrap" class="ft07">If&#160;protected-mode virtual&#160;interrupts are&#160;not enabled,&#160;STI&#160;sets&#160;the interrupt flag&#160;(IF) in&#160;the EFLAGS register.&#160;After&#160;<br/>the IF&#160;flag&#160;is set,&#160;the&#160;processor begins responding&#160;to&#160;external,&#160;maskable interrupts&#160;after&#160;the next instruction is&#160;<br/>executed.&#160;The&#160;delayed effect&#160;of this instruction is&#160;provided&#160;to allow interrupts&#160;to be enabled just before returning&#160;<br/>from a&#160;procedure&#160;(or subroutine). For instance, if&#160;an&#160;STI instruction is&#160;followed&#160;by an RET&#160;instruction,&#160;the RET&#160;<br/>instruction&#160;is allowed to execute before external&#160;interrupts&#160;are recognized</p>
<p style="position:absolute;top:426px;left:567px;white-space:nowrap" class="ft05">1</p>
<p style="position:absolute;top:429px;left:574px;white-space:nowrap" class="ft04">. If&#160;the&#160;STI instruction is&#160;followed by a&#160;</p>
<p style="position:absolute;top:445px;left:69px;white-space:nowrap" class="ft08">CLI instruction (which clears&#160;the IF&#160;flag), the&#160;effect of the&#160;STI instruction is&#160;negated.&#160;<br/>The&#160;IF flag&#160;and the STI and&#160;CLI instructions&#160;do not prohibit the&#160;generation of exceptions&#160;and NMI interrupts.&#160;NMI&#160;<br/>interrupts&#160;(and&#160;SMIs) may be blocked&#160;for&#160;one macroinstruction following an STI.<br/>When protected-mode&#160;virtual&#160;interrupts are&#160;enabled,&#160;CPL is&#160;3,&#160;and IOPL is&#160;less&#160;than&#160;3; STI sets the VIF flag&#160;in the&#160;<br/>EFLAGS&#160;register,&#160;leaving&#160;IF unaffected.<br/><a href="o_b5573232dd8f1481-1325.html">Table 4-19</a>&#160;indicates&#160;the action of&#160;the STI instruction&#160;depending&#160;on the&#160;processor’s mode&#160;of operation and&#160;the&#160;<br/>CPL/IOPL settings of the running program or procedure.<br/>Operation is&#160;the&#160;same in all&#160;modes.</p>
<p style="position:absolute;top:123px;left:74px;white-space:nowrap" class="ft04">Opcode</p>
<p style="position:absolute;top:123px;left:222px;white-space:nowrap" class="ft04">Instruction</p>
<p style="position:absolute;top:123px;left:391px;white-space:nowrap" class="ft04">Op/&#160;</p>
<p style="position:absolute;top:137px;left:391px;white-space:nowrap" class="ft04">En</p>
<p style="position:absolute;top:123px;left:428px;white-space:nowrap" class="ft04">64-Bit&#160;</p>
<p style="position:absolute;top:137px;left:428px;white-space:nowrap" class="ft04">Mode</p>
<p style="position:absolute;top:123px;left:500px;white-space:nowrap" class="ft04">Compat/</p>
<p style="position:absolute;top:137px;left:500px;white-space:nowrap" class="ft04">Leg Mode</p>
<p style="position:absolute;top:123px;left:570px;white-space:nowrap" class="ft04">Description</p>
<p style="position:absolute;top:160px;left:74px;white-space:nowrap" class="ft04">FB</p>
<p style="position:absolute;top:160px;left:222px;white-space:nowrap" class="ft04">STI</p>
<p style="position:absolute;top:160px;left:391px;white-space:nowrap" class="ft04">NP</p>
<p style="position:absolute;top:160px;left:428px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:160px;left:500px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:160px;left:570px;white-space:nowrap" class="ft04">Set&#160;interrupt flag; external, maskable&#160;</p>
<p style="position:absolute;top:177px;left:570px;white-space:nowrap" class="ft04">interrupts&#160;enabled at&#160;the&#160;end&#160;of&#160;the&#160;next&#160;</p>
<p style="position:absolute;top:193px;left:570px;white-space:nowrap" class="ft04">instruction.</p>
<p style="position:absolute;top:272px;left:87px;white-space:nowrap" class="ft04">Op/En</p>
<p style="position:absolute;top:272px;left:193px;white-space:nowrap" class="ft04">Operand&#160;1</p>
<p style="position:absolute;top:272px;left:364px;white-space:nowrap" class="ft04">Operand&#160;2</p>
<p style="position:absolute;top:272px;left:538px;white-space:nowrap" class="ft04">Operand&#160;3</p>
<p style="position:absolute;top:272px;left:716px;white-space:nowrap" class="ft04">Operand&#160;4</p>
<p style="position:absolute;top:297px;left:96px;white-space:nowrap" class="ft04">NP</p>
<p style="position:absolute;top:297px;left:215px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:297px;left:385px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:297px;left:559px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:297px;left:737px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:951px;left:69px;white-space:nowrap" class="ft04">1.&#160;The STI instruction&#160;delays recognition of&#160;interrupts only if&#160;it&#160;is executed&#160;with&#160;EFLAGS.IF&#160;= 0.&#160;In&#160;a sequence of&#160;STI instructions,&#160;only&#160;</p>
<p style="position:absolute;top:967px;left:91px;white-space:nowrap" class="ft09">the first instruction in&#160;the sequence is&#160;guaranteed&#160;to&#160;delay interrupts.<br/>In the following&#160;instruction sequence, interrupts may be&#160;recognized&#160;before&#160;RET&#160;executes:</p>
<p style="position:absolute;top:1005px;left:91px;white-space:nowrap" class="ft04">STI</p>
<p style="position:absolute;top:1021px;left:91px;white-space:nowrap" class="ft04">STI</p>
<p style="position:absolute;top:1038px;left:91px;white-space:nowrap" class="ft04">RET</p>
<p style="position:absolute;top:622px;left:312px;white-space:nowrap" class="ft03">Table&#160;4-19.&#160; Decision&#160;Table for&#160;STI&#160;Results&#160;</p>
<p style="position:absolute;top:643px;left:93px;white-space:nowrap" class="ft04">CR0.PE</p>
<p style="position:absolute;top:643px;left:168px;white-space:nowrap" class="ft04">EFLAGS.VM&#160;EFLAGS.IOPL</p>
<p style="position:absolute;top:643px;left:356px;white-space:nowrap" class="ft04">CS.CPL</p>
<p style="position:absolute;top:643px;left:439px;white-space:nowrap" class="ft04">CR4.PVI</p>
<p style="position:absolute;top:643px;left:515px;white-space:nowrap" class="ft04">EFLAGS.VIP</p>
<p style="position:absolute;top:643px;left:610px;white-space:nowrap" class="ft04">CR4.VME</p>
<p style="position:absolute;top:643px;left:727px;white-space:nowrap" class="ft04">STI Result</p>
<p style="position:absolute;top:666px;left:111px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:666px;left:198px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:666px;left:285px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:666px;left:372px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:666px;left:459px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:666px;left:546px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:666px;left:633px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:666px;left:741px;white-space:nowrap" class="ft04">IF</p>
<p style="position:absolute;top:665px;left:752px;white-space:nowrap" class="ft06">&#160;</p>
<p style="position:absolute;top:668px;left:756px;white-space:nowrap" class="ft00">=</p>
<p style="position:absolute;top:665px;left:762px;white-space:nowrap" class="ft06">&#160;</p>
<p style="position:absolute;top:666px;left:766px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:688px;left:111px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:688px;left:198px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:691px;left:274px;white-space:nowrap" class="ft00">≥&#160;</p>
<p style="position:absolute;top:688px;left:283px;white-space:nowrap" class="ft04">CPL</p>
<p style="position:absolute;top:688px;left:372px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:688px;left:459px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:688px;left:546px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:688px;left:633px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:688px;left:742px;white-space:nowrap" class="ft04">IF&#160;</p>
<p style="position:absolute;top:691px;left:756px;white-space:nowrap" class="ft00">=&#160;</p>
<p style="position:absolute;top:688px;left:766px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:711px;left:111px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:711px;left:198px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:713px;left:273px;white-space:nowrap" class="ft00">&lt;</p>
<p style="position:absolute;top:711px;left:280px;white-space:nowrap" class="ft04">&#160;CPL</p>
<p style="position:absolute;top:711px;left:372px;white-space:nowrap" class="ft04">3</p>
<p style="position:absolute;top:711px;left:459px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:711px;left:546px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:711px;left:633px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:711px;left:737px;white-space:nowrap" class="ft04">VIF&#160;</p>
<p style="position:absolute;top:713px;left:760px;white-space:nowrap" class="ft00">=</p>
<p style="position:absolute;top:711px;left:767px;white-space:nowrap" class="ft04">&#160;1</p>
<p style="position:absolute;top:733px;left:111px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:733px;left:198px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:736px;left:273px;white-space:nowrap" class="ft00">&lt;</p>
<p style="position:absolute;top:733px;left:280px;white-space:nowrap" class="ft04">&#160;CPL</p>
<p style="position:absolute;top:736px;left:367px;white-space:nowrap" class="ft00">&lt;</p>
<p style="position:absolute;top:733px;left:374px;white-space:nowrap" class="ft06">&#160;</p>
<p style="position:absolute;top:733px;left:377px;white-space:nowrap" class="ft04">3</p>
<p style="position:absolute;top:733px;left:459px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:733px;left:546px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:733px;left:633px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:733px;left:732px;white-space:nowrap" class="ft04">GP Fault</p>
<p style="position:absolute;top:756px;left:111px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:756px;left:198px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:758px;left:273px;white-space:nowrap" class="ft00">&lt;</p>
<p style="position:absolute;top:756px;left:280px;white-space:nowrap" class="ft04">&#160;CPL</p>
<p style="position:absolute;top:756px;left:372px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:756px;left:459px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:756px;left:546px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:756px;left:633px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:756px;left:732px;white-space:nowrap" class="ft04">GP Fault</p>
<p style="position:absolute;top:778px;left:111px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:778px;left:198px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:781px;left:273px;white-space:nowrap" class="ft00">&lt;</p>
<p style="position:absolute;top:778px;left:280px;white-space:nowrap" class="ft04">&#160;CPL</p>
<p style="position:absolute;top:778px;left:372px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:778px;left:459px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:778px;left:546px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:778px;left:633px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:778px;left:732px;white-space:nowrap" class="ft04">GP Fault</p>
<p style="position:absolute;top:801px;left:111px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:801px;left:198px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:801px;left:285px;white-space:nowrap" class="ft04">3</p>
<p style="position:absolute;top:801px;left:372px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:801px;left:459px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:801px;left:546px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:801px;left:633px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:801px;left:741px;white-space:nowrap" class="ft04">IF</p>
<p style="position:absolute;top:800px;left:752px;white-space:nowrap" class="ft06">&#160;</p>
<p style="position:absolute;top:803px;left:756px;white-space:nowrap" class="ft00">=</p>
<p style="position:absolute;top:800px;left:762px;white-space:nowrap" class="ft06">&#160;</p>
<p style="position:absolute;top:801px;left:766px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:823px;left:111px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:823px;left:198px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:826px;left:280px;white-space:nowrap" class="ft00">&lt;</p>
<p style="position:absolute;top:823px;left:287px;white-space:nowrap" class="ft04">&#160;</p>
<p style="position:absolute;top:823px;left:290px;white-space:nowrap" class="ft04">3</p>
<p style="position:absolute;top:823px;left:372px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:823px;left:459px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:823px;left:546px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:823px;left:633px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:823px;left:736px;white-space:nowrap" class="ft04">VIF = 1</p>
<p style="position:absolute;top:846px;left:111px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:846px;left:198px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:848px;left:280px;white-space:nowrap" class="ft00">&lt;</p>
<p style="position:absolute;top:846px;left:287px;white-space:nowrap" class="ft04">&#160;</p>
<p style="position:absolute;top:846px;left:290px;white-space:nowrap" class="ft04">3</p>
<p style="position:absolute;top:846px;left:372px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:846px;left:459px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:846px;left:546px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:846px;left:633px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:846px;left:732px;white-space:nowrap" class="ft04">GP Fault</p>
<p style="position:absolute;top:868px;left:111px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:868px;left:198px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:871px;left:280px;white-space:nowrap" class="ft00">&lt;</p>
<p style="position:absolute;top:868px;left:287px;white-space:nowrap" class="ft04">&#160;</p>
<p style="position:absolute;top:868px;left:290px;white-space:nowrap" class="ft04">3</p>
<p style="position:absolute;top:868px;left:372px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:868px;left:459px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:868px;left:546px;white-space:nowrap" class="ft04">X</p>
<p style="position:absolute;top:868px;left:633px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:868px;left:732px;white-space:nowrap" class="ft04">GP Fault</p>
<p style="position:absolute;top:891px;left:76px;white-space:nowrap" class="ft01">NOTES:</p>
<p style="position:absolute;top:910px;left:76px;white-space:nowrap" class="ft04">X = This&#160;setting has no impact.</p>
</div>
</body>
</html>
