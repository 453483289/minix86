<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 455</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:0px;font-family:Times;color:#0860a8;}
	.ft04{font-size:12px;font-family:Times;color:#0860a8;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:19px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page455-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_b5573232dd8f1481455.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">FCOMI/FCOMIP/&#160;FUCOMI/FUCOMIP—Compare&#160;Floating&#160;Point Values&#160;and&#160;Set EFLAGS</p>
<p style="position:absolute;top:47px;left:638px;white-space:nowrap" class="ft01">INSTRUCTION&#160;SET&#160;REFERENCE,&#160;A-L</p>
<p style="position:absolute;top:1103px;left:763px;white-space:nowrap" class="ft00">Vol. 2A&#160;3-327</p>
<p style="position:absolute;top:98px;left:69px;white-space:nowrap" class="ft02">FCOMI/FCOMIP/</p>
<p style="position:absolute;top:114px;left:194px;white-space:nowrap" class="ft03">&#160;</p>
<p style="position:absolute;top:98px;left:195px;white-space:nowrap" class="ft02">FUCOMI/FUCOMIP—Compare Floating Point Values and Set EFLAGS</p>
<p style="position:absolute;top:336px;left:69px;white-space:nowrap" class="ft04">Description</p>
<p style="position:absolute;top:361px;left:69px;white-space:nowrap" class="ft06">Performs an unordered comparison of the&#160;contents of registers ST(0) and ST(i) and sets the status flags ZF, PF, and&#160;<br/>CF in&#160;the EFLAGS register according to&#160;the&#160;results&#160;(see&#160;the&#160;table below).&#160;The&#160;sign&#160;of zero is&#160;ignored for compari-<br/>sons,&#160;so that –0.0&#160;is&#160;equal&#160;to&#160;+0.0.&#160;</p>
<p style="position:absolute;top:627px;left:69px;white-space:nowrap" class="ft07">An unordered comparison&#160;checks&#160;the class&#160;of the&#160;numbe<a href="o_b5573232dd8f1481-533.html">rs being compared (see “FXAM—Examine Floating-Point”&#160;<br/></a>in this chapter). The&#160;FUCOMI/FUCOMIP&#160;instructions&#160;perform the&#160;same operations as&#160;the&#160;FCOMI/FCOMIP&#160;instruc-<br/>tions. The only difference is that the FUCOMI/FUCOMIP instructions raise&#160;the&#160;invalid-arithmetic-operand exception&#160;<br/>(#IA)&#160;only&#160;when&#160;either or both operands&#160;are an SNaN&#160;or&#160;are in an unsupported format; QNaNs cause the condition&#160;<br/>code&#160;flags to&#160;be set to unordered, but&#160;do not cause&#160;an exception&#160;to be generated.&#160;The FCOMI/FCOMIP&#160;instructions&#160;<br/>raise&#160;an invalid-operation&#160;exception when either&#160;or both&#160;of&#160;the&#160;operands&#160;are&#160;a NaN&#160;value of any&#160;kind or are in an&#160;<br/>unsupported format.<br/>If&#160;the operation results&#160;in an&#160;invalid-arithmetic-operand&#160;exception being&#160;raised,&#160;the&#160;status&#160;flags in the&#160;EFLAGS&#160;<br/>register&#160;are set only if the&#160;exception is&#160;masked.&#160;<br/>The FCOMI/FCOMIP and FUCOMI/FUCOMIP instructions set the&#160;OF,&#160;SF&#160;and&#160;AF&#160;flags&#160;to&#160;zero&#160;in&#160;the&#160;EFLAGS&#160;register&#160;<br/>(regardless of&#160;whether an&#160;invalid-operation&#160;exception&#160;is detected).<br/>The FCOMIP and FUCOMIP&#160;instructions also&#160;pop the register&#160;stack following the comparison&#160;operation. To&#160;pop&#160;the&#160;<br/>register&#160;stack,&#160;the&#160;processor marks the&#160;ST(0) register&#160;as empty and&#160;increments the&#160;stack pointer&#160;(TOP) by 1.<br/>This&#160;instruction’s operation is&#160;the same&#160;in&#160;non-64-bit modes and&#160;64-bit mode.</p>
<p style="position:absolute;top:905px;left:69px;white-space:nowrap" class="ft04">IA-32 Architecture&#160;Compatibility</p>
<p style="position:absolute;top:930px;left:69px;white-space:nowrap" class="ft06">The FCOMI/FCOMIP/FUCOMI/FUCOMIP instructions were&#160;introduced to&#160;the IA-32 Architecture in&#160;the P6 family&#160;<br/>processors&#160;and are&#160;not available&#160;in earlier&#160;IA-32 processors.&#160;</p>
<p style="position:absolute;top:128px;left:75px;white-space:nowrap" class="ft05">Opcode</p>
<p style="position:absolute;top:128px;left:189px;white-space:nowrap" class="ft05">Instruction</p>
<p style="position:absolute;top:128px;left:357px;white-space:nowrap" class="ft05">64-Bit&#160;</p>
<p style="position:absolute;top:143px;left:356px;white-space:nowrap" class="ft05">Mode</p>
<p style="position:absolute;top:128px;left:416px;white-space:nowrap" class="ft05">Compat/</p>
<p style="position:absolute;top:143px;left:416px;white-space:nowrap" class="ft05">Leg Mode</p>
<p style="position:absolute;top:128px;left:492px;white-space:nowrap" class="ft05">Description</p>
<p style="position:absolute;top:166px;left:75px;white-space:nowrap" class="ft05">DB&#160;F0+i</p>
<p style="position:absolute;top:166px;left:189px;white-space:nowrap" class="ft05">FCOMI ST, ST(i)</p>
<p style="position:absolute;top:166px;left:357px;white-space:nowrap" class="ft05">Valid</p>
<p style="position:absolute;top:166px;left:416px;white-space:nowrap" class="ft05">Valid</p>
<p style="position:absolute;top:166px;left:492px;white-space:nowrap" class="ft05">Compare&#160;ST(0)&#160;with ST(i) and set status&#160;flags accordingly.</p>
<p style="position:absolute;top:189px;left:75px;white-space:nowrap" class="ft05">DF F0+i</p>
<p style="position:absolute;top:189px;left:189px;white-space:nowrap" class="ft05">FCOMIP ST,&#160;ST(i)</p>
<p style="position:absolute;top:189px;left:357px;white-space:nowrap" class="ft05">Valid</p>
<p style="position:absolute;top:189px;left:416px;white-space:nowrap" class="ft05">Valid</p>
<p style="position:absolute;top:189px;left:492px;white-space:nowrap" class="ft05">Compare&#160;ST(0) with ST(i), set&#160;status flags accordingly,&#160;and&#160;</p>
<p style="position:absolute;top:205px;left:492px;white-space:nowrap" class="ft05">pop register stack.</p>
<p style="position:absolute;top:227px;left:75px;white-space:nowrap" class="ft05">DB&#160;E8+i</p>
<p style="position:absolute;top:227px;left:189px;white-space:nowrap" class="ft05">FUCOMI&#160;ST,&#160;ST(i)</p>
<p style="position:absolute;top:227px;left:357px;white-space:nowrap" class="ft05">Valid</p>
<p style="position:absolute;top:227px;left:416px;white-space:nowrap" class="ft05">Valid</p>
<p style="position:absolute;top:227px;left:492px;white-space:nowrap" class="ft05">Compare&#160;ST(0)&#160;with&#160;ST(i), check for ordered values, and set&#160;</p>
<p style="position:absolute;top:244px;left:492px;white-space:nowrap" class="ft05">status flags accordingly.</p>
<p style="position:absolute;top:267px;left:75px;white-space:nowrap" class="ft05">DF E8+i</p>
<p style="position:absolute;top:267px;left:189px;white-space:nowrap" class="ft05">FUCOMIP ST, ST(i)</p>
<p style="position:absolute;top:267px;left:357px;white-space:nowrap" class="ft05">Valid</p>
<p style="position:absolute;top:267px;left:416px;white-space:nowrap" class="ft05">Valid</p>
<p style="position:absolute;top:267px;left:492px;white-space:nowrap" class="ft05">Compare&#160;ST(0) with ST(i), check for&#160;ordered values, set&#160;</p>
<p style="position:absolute;top:283px;left:492px;white-space:nowrap" class="ft05">status flags accordingly, and&#160;pop&#160;register stack.</p>
<p style="position:absolute;top:417px;left:271px;white-space:nowrap" class="ft04">Table 3-22.&#160;&#160;FCOMI/FCOMIP/&#160;FUCOMI/FUCOMIP&#160;Results</p>
<p style="position:absolute;top:439px;left:193px;white-space:nowrap" class="ft05">Comparison Results*</p>
<p style="position:absolute;top:439px;left:502px;white-space:nowrap" class="ft05">ZF</p>
<p style="position:absolute;top:439px;left:635px;white-space:nowrap" class="ft05">PF</p>
<p style="position:absolute;top:439px;left:763px;white-space:nowrap" class="ft05">CF</p>
<p style="position:absolute;top:462px;left:224px;white-space:nowrap" class="ft05">ST0&#160;&gt;&#160;ST(i)</p>
<p style="position:absolute;top:462px;left:505px;white-space:nowrap" class="ft05">0</p>
<p style="position:absolute;top:462px;left:639px;white-space:nowrap" class="ft05">0</p>
<p style="position:absolute;top:462px;left:767px;white-space:nowrap" class="ft05">0</p>
<p style="position:absolute;top:484px;left:224px;white-space:nowrap" class="ft05">ST0&#160;&lt;&#160;ST(i)</p>
<p style="position:absolute;top:484px;left:505px;white-space:nowrap" class="ft05">0</p>
<p style="position:absolute;top:484px;left:639px;white-space:nowrap" class="ft05">0</p>
<p style="position:absolute;top:484px;left:767px;white-space:nowrap" class="ft05">1</p>
<p style="position:absolute;top:507px;left:224px;white-space:nowrap" class="ft05">ST0&#160;=&#160;ST(i)</p>
<p style="position:absolute;top:507px;left:505px;white-space:nowrap" class="ft05">1</p>
<p style="position:absolute;top:507px;left:639px;white-space:nowrap" class="ft05">0</p>
<p style="position:absolute;top:507px;left:767px;white-space:nowrap" class="ft05">0</p>
<p style="position:absolute;top:529px;left:219px;white-space:nowrap" class="ft05">Unordered**</p>
<p style="position:absolute;top:529px;left:505px;white-space:nowrap" class="ft05">1</p>
<p style="position:absolute;top:529px;left:639px;white-space:nowrap" class="ft05">1</p>
<p style="position:absolute;top:529px;left:767px;white-space:nowrap" class="ft05">1</p>
<p style="position:absolute;top:552px;left:75px;white-space:nowrap" class="ft01">NOTES:</p>
<p style="position:absolute;top:571px;left:75px;white-space:nowrap" class="ft08">*&#160;See&#160;the IA-32&#160;Architecture&#160;Compatibility section below.<br/>**&#160;Flags not set if&#160;unmasked&#160;invalid-arithmetic-operand&#160;(#IA) exception is&#160;generated.</p>
</div>
</body>
</html>
