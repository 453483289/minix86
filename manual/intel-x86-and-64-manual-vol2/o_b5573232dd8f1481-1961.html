<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1961</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:12px;font-family:Times;color:#0860a8;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:18px;font-family:Times;color:#000000;}
	.ft07{font-size:8px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:20px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1961-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_b5573232dd8f14811961.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">XSAVEC‚ÄîSave Processor Extended States with&#160;Compaction</p>
<p style="position:absolute;top:47px;left:637px;white-space:nowrap" class="ft01">INSTRUCTION SET REFERENCE, V-Z</p>
<p style="position:absolute;top:1103px;left:764px;white-space:nowrap" class="ft00">Vol. 2C&#160;5-575</p>
<p style="position:absolute;top:98px;left:69px;white-space:nowrap" class="ft02">XSAVEC‚ÄîSave Processor Extended States with Compaction</p>
<p style="position:absolute;top:272px;left:354px;white-space:nowrap" class="ft03">Instruction Operand&#160;Encoding</p>
<p style="position:absolute;top:359px;left:69px;white-space:nowrap" class="ft03">Description</p>
<p style="position:absolute;top:385px;left:69px;white-space:nowrap" class="ft08">Performs&#160;a full or&#160;partial save of&#160;processor state components to&#160;the XSAVE&#160;area located at&#160;the memory address&#160;<br/>specified by&#160;the&#160;destination&#160;operand.&#160;The implicit&#160;EDX:EAX register&#160;pair specifies a&#160;64-bit instruction mask.&#160;The&#160;<br/>specific&#160;state&#160;components saved correspond to&#160;the bits set&#160;in&#160;the requested-feature bitmap (RFBM),&#160;which&#160;is&#160;the&#160;<br/>logical-AND of EDX:EAX and XCR0.<br/>The format of the XSAVE area&#160;is&#160;detailed<a href="˛ˇ">&#160;in Section 13.4,&#160;‚ÄúXSAVE Area,‚Äù</a>&#160;of&#160;<a href="˛ˇ"><i>Intel¬Æ&#160;64&#160;and IA-32 Architectures Soft-<br/>ware Developer‚Äôs Manual, Volume&#160;1</i>.<br/>Section&#160;13.10, ‚ÄúOperation of&#160;XSAVEC,‚Äù&#160;of&#160;<i>Intel¬Æ&#160;64&#160;and&#160;IA-32&#160;Architectures&#160;Software&#160;Developer‚Äôs&#160;Manual,&#160;Volume&#160;<br/>1</i>&#160;</a>provides a&#160;detailed&#160;description of the operation of the XSAVEC&#160;instruction.&#160;The following items&#160;provide&#160;a high-<br/>level outline:</p>
<p style="position:absolute;top:554px;left:69px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:555px;left:95px;white-space:nowrap" class="ft08">Execution&#160;of&#160;XSAVEC&#160;is&#160;similar&#160;to&#160;that&#160;of&#160;XSAVE.&#160;XSAVEC&#160;differs&#160;from&#160;XSAVE&#160;in&#160;that&#160;it&#160;uses&#160;compaction&#160;and&#160;that&#160;<br/>it may&#160;use&#160;the init optimization.</p>
<p style="position:absolute;top:593px;left:69px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:594px;left:95px;white-space:nowrap" class="ft04">XSAVEC saves&#160;state component&#160;<i>i</i>&#160;if and&#160;only if RFBM[<i>i</i>]&#160;=&#160;&#160;1&#160;&#160;and&#160;&#160;XINUSE[<i>i</i>]&#160;=&#160;&#160;1.</p>
<p style="position:absolute;top:591px;left:622px;white-space:nowrap" class="ft07">1</p>
<p style="position:absolute;top:594px;left:629px;white-space:nowrap" class="ft04">&#160;(XINUSE&#160;is&#160;a bitmap by&#160;which&#160;</p>
<p style="position:absolute;top:610px;left:94px;white-space:nowrap" class="ft08">the&#160;processor&#160;tracks the&#160;status of various state&#160;components.&#160;S<a href="˛ˇ">ee Section 13.6, ‚ÄúProcessor Tracking of&#160;XSAVE-<br/>Managed State.‚Äù</a>)</p>
<p style="position:absolute;top:649px;left:69px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:649px;left:95px;white-space:nowrap" class="ft08">XSAVEC does&#160;not modify bytes&#160;511:464&#160;of the&#160;legacy region of the XSAVE area (see<a href="˛ˇ">&#160;Section 13.4.1, ‚ÄúLegacy&#160;<br/>Region&#160;of an&#160;XSAVE&#160;Area‚Äù).</a></p>
<p style="position:absolute;top:688px;left:69px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:688px;left:95px;white-space:nowrap" class="ft04">XSAVEC writes the&#160;logical&#160;AND&#160;of RFBM&#160;and&#160;XINUSE&#160;to&#160;the XSTATE_BV field of the&#160;XSAVE header.</p>
<p style="position:absolute;top:686px;left:752px;white-space:nowrap" class="ft07">2,3</p>
<p style="position:absolute;top:688px;left:770px;white-space:nowrap" class="ft04">&#160;(See&#160;</p>
<p style="position:absolute;top:705px;left:94px;white-space:nowrap" class="ft08"><a href="˛ˇ">Section&#160;13.4.2, ‚ÄúXSAVE&#160;Header.‚Äù</a>) XSAVEC sets&#160;bit&#160;63 of&#160;the XCOMP_BV field&#160;and&#160;sets bits&#160;62:0 of that&#160;field&#160;to&#160;<br/>RFBM[62:0].&#160;XSAVEC does&#160;not write&#160;to any parts of the&#160;XSAVE header other&#160;than the&#160;XSTATE_BV&#160;and&#160;<br/>XCOMP_BV&#160;fields.</p>
<p style="position:absolute;top:760px;left:69px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:760px;left:95px;white-space:nowrap" class="ft08">XSAVEC always uses&#160;the compacted format of the extended&#160;region of the XSAVE area (see<a href="˛ˇ">&#160;Section 13.4.3,&#160;<br/>‚ÄúExtended Region&#160;of&#160;an XSAVE&#160;Area‚Äù)</a>.</p>
<p style="position:absolute;top:801px;left:69px;white-space:nowrap" class="ft08">Use of a&#160;destination&#160;operand not aligned&#160;to 64-byte boundary (in&#160;either&#160;64-bit&#160;or 32-bit&#160;modes) results in a&#160;<br/>general-protection&#160;(#GP) exception.&#160;In 64-bit&#160;mode,&#160;the upper 32 bits of RDX and&#160;RAX are ignored.</p>
<p style="position:absolute;top:854px;left:69px;white-space:nowrap" class="ft03">Operation</p>
<p style="position:absolute;top:886px;left:69px;white-space:nowrap" class="ft04">RFBM&#160;‚Üê&#160;XCR0 AND EDX:EAX;&#160;/*&#160;bitwise logical AND */</p>
<p style="position:absolute;top:904px;left:69px;white-space:nowrap" class="ft04">COMPMASK&#160;‚Üê&#160;RFBM&#160;OR 80000000_00000000H;</p>
<p style="position:absolute;top:940px;left:69px;white-space:nowrap" class="ft04">IF RFBM[0]&#160;=&#160;1 and XINUSE[0]&#160;=&#160;1</p>
<p style="position:absolute;top:123px;left:74px;white-space:nowrap" class="ft04">Opcode</p>
<p style="position:absolute;top:123px;left:221px;white-space:nowrap" class="ft04">Instruction</p>
<p style="position:absolute;top:123px;left:388px;white-space:nowrap" class="ft04">Op/&#160;</p>
<p style="position:absolute;top:137px;left:388px;white-space:nowrap" class="ft04">En</p>
<p style="position:absolute;top:123px;left:425px;white-space:nowrap" class="ft04">64-Bit&#160;</p>
<p style="position:absolute;top:137px;left:425px;white-space:nowrap" class="ft04">Mode</p>
<p style="position:absolute;top:123px;left:497px;white-space:nowrap" class="ft04">Compat/</p>
<p style="position:absolute;top:137px;left:497px;white-space:nowrap" class="ft04">Leg Mode</p>
<p style="position:absolute;top:123px;left:567px;white-space:nowrap" class="ft04">Description</p>
<p style="position:absolute;top:160px;left:74px;white-space:nowrap" class="ft04">0F C7&#160;/4</p>
<p style="position:absolute;top:160px;left:221px;white-space:nowrap" class="ft04">XSAVEC&#160;<i>mem</i></p>
<p style="position:absolute;top:160px;left:388px;white-space:nowrap" class="ft04">M</p>
<p style="position:absolute;top:160px;left:425px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:160px;left:497px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:160px;left:567px;white-space:nowrap" class="ft04">Save state&#160;components specified&#160;by EDX:EAX&#160;</p>
<p style="position:absolute;top:177px;left:567px;white-space:nowrap" class="ft04">to&#160;<i>mem</i>&#160;with&#160;compaction.</p>
<p style="position:absolute;top:199px;left:74px;white-space:nowrap" class="ft04">REX.W+&#160;0F&#160;C7&#160;/4</p>
<p style="position:absolute;top:199px;left:221px;white-space:nowrap" class="ft04">XSAVEC64&#160;<i>mem</i></p>
<p style="position:absolute;top:199px;left:388px;white-space:nowrap" class="ft04">M</p>
<p style="position:absolute;top:199px;left:425px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:199px;left:497px;white-space:nowrap" class="ft04">N.E.</p>
<p style="position:absolute;top:199px;left:567px;white-space:nowrap" class="ft04">Save&#160;state components specified by&#160;EDX:EAX&#160;</p>
<p style="position:absolute;top:216px;left:567px;white-space:nowrap" class="ft04">to&#160;<i>mem</i>&#160;with&#160;compaction.</p>
<p style="position:absolute;top:295px;left:91px;white-space:nowrap" class="ft04">Op/En</p>
<p style="position:absolute;top:295px;left:204px;white-space:nowrap" class="ft04">Operand&#160;1</p>
<p style="position:absolute;top:295px;left:376px;white-space:nowrap" class="ft04">Operand&#160;2</p>
<p style="position:absolute;top:295px;left:547px;white-space:nowrap" class="ft04">Operand&#160;3</p>
<p style="position:absolute;top:295px;left:719px;white-space:nowrap" class="ft04">Operand&#160;4</p>
<p style="position:absolute;top:319px;left:103px;white-space:nowrap" class="ft04">M</p>
<p style="position:absolute;top:319px;left:191px;white-space:nowrap" class="ft04">ModRM:r/m&#160;&#160;(w)</p>
<p style="position:absolute;top:319px;left:397px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:319px;left:568px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:319px;left:740px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:979px;left:69px;white-space:nowrap" class="ft04">1.&#160;There is&#160;an&#160;exception&#160;for&#160;state component 1 (SSE).&#160;MXCSR&#160;is part&#160;of&#160;SSE state,&#160;but XINUSE[1] may be&#160;0 even&#160;if&#160;MXCSR does not&#160;</p>
<p style="position:absolute;top:996px;left:91px;white-space:nowrap" class="ft04">have&#160;its initial value&#160;of&#160;1F80H.&#160;In this case,&#160;XSAVEC saves SSE state as&#160;long as&#160;RFBM[1]&#160;=&#160;1.</p>
<p style="position:absolute;top:1017px;left:69px;white-space:nowrap" class="ft011">2.&#160;Unlike&#160;XSAVE and XSAVEOPT,&#160;XSAVEC clears bits in&#160;the XSTATE_BV field that&#160;correspond to&#160;bits that&#160;are clear in RFBM.<br/>3.&#160;There is&#160;an&#160;exception&#160;for&#160;state component 1 (SSE).&#160;MXCSR&#160;is part&#160;of&#160;SSE state,&#160;but XINUSE[1] may be&#160;0 even&#160;if&#160;MXCSR does not&#160;</p>
<p style="position:absolute;top:1054px;left:91px;white-space:nowrap" class="ft04">have&#160;its initial value&#160;of&#160;1F80H.&#160;In this case,&#160;XSAVEC sets XSTATE_BV[1] to&#160;1 as long as RFBM[1]&#160;=&#160;1.</p>
</div>
</body>
</html>
