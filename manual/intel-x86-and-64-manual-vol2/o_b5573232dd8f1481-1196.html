<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1196</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:12px;font-family:Times;color:#0860a8;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:12px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:17px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1196-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_b5573232dd8f14811196.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:556px;white-space:nowrap" class="ft00">PUSHF/PUSHFDâ€”Push&#160;EFLAGS Register onto&#160;the Stack</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">INSTRUCTION SET REFERENCE, M-U</p>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">4-516&#160;Vol. 2B</p>
<p style="position:absolute;top:98px;left:68px;white-space:nowrap" class="ft02">PUSHF/PUSHFDâ€”Push EFLAGS Register onto&#160;the Stack</p>
<p style="position:absolute;top:262px;left:353px;white-space:nowrap" class="ft03">Instruction&#160;Operand&#160;Encoding</p>
<p style="position:absolute;top:349px;left:68px;white-space:nowrap" class="ft03">Description</p>
<p style="position:absolute;top:375px;left:68px;white-space:nowrap" class="ft09">Decrements the&#160;stack pointer&#160;by 4&#160;(if the&#160;current operand-size&#160;attribute&#160;is 32) and&#160;pushes the&#160;entire&#160;contents of&#160;<br/>the EFLAGS register onto&#160;the stack, or decrements&#160;the stack pointer by 2 (if the operand-size&#160;attribute&#160;is 16) and&#160;<br/>pushes&#160;the lower 16&#160;bits&#160;of the EFLAGS&#160;register (that is, the&#160;FLAGS register) onto&#160;the&#160;stack. These&#160;instructions&#160;<br/>reverse the operation of the&#160;POPF/POPFD instructions.&#160;<br/>When&#160;copying the entire EFLAGS&#160;register&#160;to the stack,&#160;the&#160;VM and&#160;RF&#160;flags (bits 16&#160;and 17) are not&#160;copied; instead,&#160;<br/>the values&#160;for these flags are&#160;cleared in the EFLAGS&#160;image stored&#160;on the stack. S<a href="þÿ">ee Chapter 3 of the</a>&#160;<a href="þÿ"><i>IntelÂ® 64&#160;and&#160;<br/>IA-32&#160;Architectures&#160;Software Developerâ€™s Manual, Volume&#160;1</i>, for mo</a>re&#160;information about&#160;the EFLAGS register.&#160;<br/>The PUSHF&#160;(push flags)&#160;and PUSHFD (push&#160;flags&#160;double) mnemonics reference the&#160;same opcode. The&#160;PUSHF&#160;<br/>instruction is&#160;intended for use&#160;when&#160;the operand-size&#160;attribute is&#160;16&#160;and&#160;the&#160;PUSHFD instruction for when the&#160;<br/>operand-size attribute is&#160;32.&#160;Some assemblers&#160;may force the&#160;operand size&#160;to 16 when PUSHF&#160;is used&#160;and&#160;to 32&#160;<br/>when PUSHFD is&#160;used. Others&#160;may&#160;treat these mnemonics as&#160;synonyms (PUSHF/PUSHFD) and use&#160;the current&#160;<br/>setting of&#160;the operand-size attribute to&#160;determine&#160;the&#160;size&#160;of values&#160;to be&#160;pushed&#160;from the&#160;stack,&#160;regardless&#160;of the&#160;<br/>mnemonic used.<br/>In 64-bit mode, the&#160;instructionâ€™s&#160;default operation is to&#160;decrement the&#160;stack pointer (RSP) by&#160;8&#160;and pushes&#160;RFLAGS&#160;<br/>on&#160;the stack. 16-bit operation is supported&#160;using&#160;the operand size override&#160;prefix 66H.&#160;32-bit operand size&#160;cannot&#160;<br/>be encoded in&#160;this mode.&#160;When copying&#160;RFLAGS to&#160;the stack, the VM&#160;and RF flags (bits 16 and 17) are not&#160;copied;&#160;<br/>instead,&#160;values&#160;for&#160;these&#160;flags are&#160;cleared in&#160;the RFLAGS&#160;image stored&#160;on&#160;the&#160;stack.<br/>When in virtual-8086&#160;mode and&#160;the&#160;I/O privilege&#160;level (IOPL) is less than 3,&#160;the&#160;PUSHF/PUSHFD&#160;instruction causes&#160;<br/>a&#160;general protection exception&#160;(#GP).<br/>In&#160;the real-address&#160;mode, if the ESP or&#160;SP&#160;register is&#160;1&#160;when&#160;PUSHF/PUSHFD&#160;instruction executes: an&#160;#SS excep-<br/>tion is generated but not delivered (the stack error&#160;reported&#160;prevents #SS&#160;delivery).&#160;Next, the&#160;processor generates&#160;<br/>a #DF exception and enters&#160;a shutdown state as described<a href="þÿ">&#160;in the #DF discussion in Chapter 6 of the&#160;<i>IntelÂ® 64&#160;and&#160;<br/>IA-32&#160;Architectures&#160;Software Developerâ€™s Manual, Volume&#160;3A</i>.</a></p>
<p style="position:absolute;top:812px;left:68px;white-space:nowrap" class="ft03">Operation</p>
<p style="position:absolute;top:838px;left:68px;white-space:nowrap" class="ft04">IF&#160;(PE</p>
<p style="position:absolute;top:837px;left:100px;white-space:nowrap" class="ft06">&#160;=&#160;</p>
<p style="position:absolute;top:838px;left:116px;white-space:nowrap" class="ft04">0) or&#160;(PE</p>
<p style="position:absolute;top:837px;left:165px;white-space:nowrap" class="ft06">&#160;=</p>
<p style="position:absolute;top:839px;left:176px;white-space:nowrap" class="ft04">&#160;1 and ((VM</p>
<p style="position:absolute;top:837px;left:241px;white-space:nowrap" class="ft06">&#160;=&#160;</p>
<p style="position:absolute;top:838px;left:257px;white-space:nowrap" class="ft04">0) or (VM&#160;</p>
<p style="position:absolute;top:838px;left:313px;white-space:nowrap" class="ft06">=</p>
<p style="position:absolute;top:839px;left:321px;white-space:nowrap" class="ft04">&#160;1 and&#160;IOPL&#160;</p>
<p style="position:absolute;top:838px;left:389px;white-space:nowrap" class="ft06">=&#160;</p>
<p style="position:absolute;top:838px;left:401px;white-space:nowrap" class="ft04">3)))</p>
<p style="position:absolute;top:856px;left:68px;white-space:nowrap" class="ft04">(* Real-Address&#160;Mode, Protected mode, or&#160;Virtual-8086&#160;mode&#160;with&#160;IOPL&#160;equal to 3&#160;*)</p>
<p style="position:absolute;top:874px;left:88px;white-space:nowrap" class="ft04">THEN</p>
<p style="position:absolute;top:892px;left:115px;white-space:nowrap" class="ft04">IF&#160;OperandSize&#160;</p>
<p style="position:absolute;top:892px;left:204px;white-space:nowrap" class="ft06">=&#160;</p>
<p style="position:absolute;top:892px;left:216px;white-space:nowrap" class="ft04">32</p>
<p style="position:absolute;top:910px;left:142px;white-space:nowrap" class="ft04">THEN&#160;</p>
<p style="position:absolute;top:928px;left:169px;white-space:nowrap" class="ft011">push&#160;(EFLAGS&#160;AND 00FCFFFFH);<br/>(*&#160;VM&#160;and RF&#160;EFLAG bits are cleared&#160;in&#160;image stored&#160;on&#160;the&#160;stack&#160;*)</p>
<p style="position:absolute;top:964px;left:142px;white-space:nowrap" class="ft04">ELSE&#160;</p>
<p style="position:absolute;top:982px;left:169px;white-space:nowrap" class="ft04">push (EFLAGS);&#160;(* Lower 16 bits only *)</p>
<p style="position:absolute;top:1000px;left:115px;white-space:nowrap" class="ft04">FI;</p>
<p style="position:absolute;top:1030px;left:88px;white-space:nowrap" class="ft04">ELSE IF&#160;64-bit MODE&#160;(* In 64-bit Mode *)</p>
<p style="position:absolute;top:1048px;left:115px;white-space:nowrap" class="ft04">IF&#160;OperandSize&#160;=&#160;64</p>
<p style="position:absolute;top:123px;left:74px;white-space:nowrap" class="ft04">Opcode*</p>
<p style="position:absolute;top:123px;left:221px;white-space:nowrap" class="ft04">Instruction</p>
<p style="position:absolute;top:123px;left:388px;white-space:nowrap" class="ft04">Op/&#160;</p>
<p style="position:absolute;top:137px;left:388px;white-space:nowrap" class="ft04">En</p>
<p style="position:absolute;top:123px;left:425px;white-space:nowrap" class="ft04">64-Bit&#160;</p>
<p style="position:absolute;top:137px;left:425px;white-space:nowrap" class="ft04">Mode</p>
<p style="position:absolute;top:123px;left:497px;white-space:nowrap" class="ft04">Compat/</p>
<p style="position:absolute;top:137px;left:497px;white-space:nowrap" class="ft04">Leg&#160;Mode</p>
<p style="position:absolute;top:123px;left:567px;white-space:nowrap" class="ft04">Description</p>
<p style="position:absolute;top:160px;left:74px;white-space:nowrap" class="ft04">9C</p>
<p style="position:absolute;top:160px;left:221px;white-space:nowrap" class="ft04">PUSHF</p>
<p style="position:absolute;top:160px;left:388px;white-space:nowrap" class="ft04">NP</p>
<p style="position:absolute;top:160px;left:425px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:160px;left:497px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:160px;left:567px;white-space:nowrap" class="ft04">Push lower&#160;16&#160;bits of&#160;EFLAGS.</p>
<p style="position:absolute;top:182px;left:74px;white-space:nowrap" class="ft04">9C</p>
<p style="position:absolute;top:182px;left:221px;white-space:nowrap" class="ft04">PUSHFD</p>
<p style="position:absolute;top:182px;left:388px;white-space:nowrap" class="ft04">NP</p>
<p style="position:absolute;top:182px;left:425px;white-space:nowrap" class="ft04">N.E.</p>
<p style="position:absolute;top:182px;left:497px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:182px;left:567px;white-space:nowrap" class="ft04">Push EFLAGS.</p>
<p style="position:absolute;top:205px;left:74px;white-space:nowrap" class="ft04">9C</p>
<p style="position:absolute;top:205px;left:221px;white-space:nowrap" class="ft04">PUSHFQ</p>
<p style="position:absolute;top:205px;left:388px;white-space:nowrap" class="ft04">NP</p>
<p style="position:absolute;top:205px;left:425px;white-space:nowrap" class="ft04">Valid</p>
<p style="position:absolute;top:205px;left:497px;white-space:nowrap" class="ft04">N.E.</p>
<p style="position:absolute;top:205px;left:567px;white-space:nowrap" class="ft04">Push RFLAGS.</p>
<p style="position:absolute;top:285px;left:87px;white-space:nowrap" class="ft04">Op/En</p>
<p style="position:absolute;top:285px;left:194px;white-space:nowrap" class="ft04">Operand&#160;1</p>
<p style="position:absolute;top:285px;left:364px;white-space:nowrap" class="ft04">Operand 2</p>
<p style="position:absolute;top:285px;left:540px;white-space:nowrap" class="ft04">Operand&#160;3</p>
<p style="position:absolute;top:285px;left:718px;white-space:nowrap" class="ft04">Operand&#160;4</p>
<p style="position:absolute;top:308px;left:96px;white-space:nowrap" class="ft04">NP</p>
<p style="position:absolute;top:308px;left:215px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:308px;left:385px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:308px;left:561px;white-space:nowrap" class="ft04">NA</p>
<p style="position:absolute;top:308px;left:739px;white-space:nowrap" class="ft04">NA</p>
</div>
</body>
</html>
