<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 458</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:16px;font-family:Times;color:#0860a8;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:16px;font-family:Times;color:#000000;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:8px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:19px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page458-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce458.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">13-4&#160;Vol. 3A</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">SYSTEM PROGRAMMING&#160;FOR INSTRUCTION SET EXTENSIONS&#160;AND PROCESSOR&#160;EXTENDED STATES</p>
<p style="position:absolute;top:423px;left:68px;white-space:nowrap" class="ft08">The SIMD&#160;floating-point exception&#160;mask&#160;bits (bits&#160;7&#160;through 12),&#160;the&#160;flush-to-zero&#160;flag&#160;(bit 15),&#160;the&#160;denormals-are-<br/>zero flag (bit&#160;6),&#160;and the rounding&#160;control field (bits 13 and&#160;14)&#160;in the MXCSR register&#160;should be left in&#160;their default&#160;<br/>values&#160;of 0.&#160;This permits the&#160;application&#160;to determine how these&#160;features&#160;are to&#160;be&#160;used.</p>
<p style="position:absolute;top:507px;left:68px;white-space:nowrap" class="ft03">13.1.4&#160;</p>
<p style="position:absolute;top:507px;left:148px;white-space:nowrap" class="ft03">Providing Non-Numeric Exception Handlers for Exceptions Generated by&#160;the SSE&#160;</p>
<p style="position:absolute;top:528px;left:148px;white-space:nowrap" class="ft03">Instructions</p>
<p style="position:absolute;top:559px;left:68px;white-space:nowrap" class="ft09">SSE instructions can&#160;generate the&#160;same&#160;type&#160;of&#160;memory-access exceptions&#160;(such as&#160;page&#160;faults and&#160;limit viola-<br/>tions) and&#160;other non-numeric exceptions as&#160;other Intel 64&#160;and&#160;IA-32&#160;architecture instructions&#160;generate.&#160;<br/>Ordinarily,&#160;existing exception&#160;handlers can&#160;handle these and&#160;other non-numeric exceptions without&#160;code&#160;modifica-<br/>tion.&#160;However,&#160;depending on&#160;the&#160;mechanisms used&#160;in&#160;existing exception&#160;handlers,&#160;some modifications&#160;might need&#160;<br/>to be made.<br/>The SSE&#160;extensions&#160;can&#160;generate the&#160;non-numeric exceptions&#160;listed below:</p>
<p style="position:absolute;top:678px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:679px;left:93px;white-space:nowrap" class="ft010">Memory Access Exceptions:<br/>—&#160;Stack-segment fault (#SS).<br/>—&#160;General protection exception&#160;(#GP). Executing&#160;most&#160;SSE&#160;instructions&#160;with&#160;an unaligned 128-bit&#160;memory&#160;</p>
<p style="position:absolute;top:743px;left:119px;white-space:nowrap" class="ft08">reference generates&#160;a general-protection exception. (The MOVUPS&#160;and MOVUPD&#160;instructions&#160;allow&#160;<br/>unaligned a&#160;loads&#160;or stores&#160;of 128-bit&#160;memory locations,&#160;without&#160;generating&#160;a general-protection&#160;<br/>exception.) A 128-bit reference&#160;within the stack segment that is&#160;not aligned to a 16-byte boundary will also&#160;<br/>generate&#160;a general-protection exception, instead a&#160;stack-segment&#160;fault exception&#160;(#SS).</p>
<p style="position:absolute;top:817px;left:93px;white-space:nowrap" class="ft09">—&#160;Page fault (#PF).<br/>—&#160;Alignment check (#AC).&#160;When&#160;enabled,&#160;this type&#160;of&#160;alignment check operates&#160;on operands&#160;that are&#160;less&#160;</p>
<p style="position:absolute;top:857px;left:119px;white-space:nowrap" class="ft08">than&#160;128-bits in&#160;size: 16-bit,&#160;32-bit,&#160;and&#160;64-bit.&#160;To&#160;enable the&#160;generation of alignment&#160;check exceptions,&#160;do&#160;<br/>the&#160;following:</p>
<p style="position:absolute;top:899px;left:119px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:898px;left:144px;white-space:nowrap" class="ft02">Set&#160;the&#160;AM&#160;flag&#160;(bit&#160;18&#160;of&#160;control&#160;register&#160;CR0)</p>
<p style="position:absolute;top:923px;left:119px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:922px;left:144px;white-space:nowrap" class="ft02">Set&#160;the AC&#160;flag (bit 18 of the&#160;EFLAGS&#160;register)</p>
<p style="position:absolute;top:947px;left:119px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:946px;left:144px;white-space:nowrap" class="ft02">CPL must be 3</p>
<p style="position:absolute;top:970px;left:122px;white-space:nowrap" class="ft08">If alignment check exceptions are&#160;enabled,&#160;16-bit, 32-bit, and 64-bit misalignment will be detected for&#160;the&#160;<br/>MOVUPD&#160;and&#160;MOVUPS instructions; detection&#160;of&#160;128-bit misalignment&#160;is not guaranteed&#160;and&#160;may vary&#160;<br/>with implementation.</p>
<p style="position:absolute;top:105px;left:181px;white-space:nowrap" class="ft06">Table&#160;13-2. &#160;Action&#160;Taken for&#160;Combinations&#160;of&#160;OSFXSR,&#160;SSSE3, SSE4,&#160;EM,&#160;and&#160;TS</p>
<p style="position:absolute;top:130px;left:114px;white-space:nowrap" class="ft02">CR4</p>
<p style="position:absolute;top:130px;left:229px;white-space:nowrap" class="ft02">CPUID</p>
<p style="position:absolute;top:130px;left:355px;white-space:nowrap" class="ft02">CR0 Flags</p>
<p style="position:absolute;top:154px;left:102px;white-space:nowrap" class="ft02">OSFXSR</p>
<p style="position:absolute;top:154px;left:228px;white-space:nowrap" class="ft02">SSSE3</p>
<p style="position:absolute;top:171px;left:221px;white-space:nowrap" class="ft02">SSE4_1</p>
<p style="position:absolute;top:168px;left:267px;white-space:nowrap" class="ft07">1</p>
<p style="position:absolute;top:187px;left:221px;white-space:nowrap" class="ft02">SSE4_2</p>
<p style="position:absolute;top:184px;left:267px;white-space:nowrap" class="ft07">2</p>
<p style="position:absolute;top:334px;left:69px;white-space:nowrap" class="ft01">NOTES:</p>
<p style="position:absolute;top:353px;left:68px;white-space:nowrap" class="ft011">1.&#160;Applies&#160;to&#160;SSE4_1&#160;instructions&#160;except&#160;DPPS,&#160;DPPD,&#160;ROUNDPS,&#160;ROUNDPD,&#160;ROUNDSS,&#160;ROUNDSD.<br/>2.&#160;Applies&#160;to&#160;SSE4_2&#160;instructions&#160;except&#160;CRC32 and&#160;POPCNT.</p>
<p style="position:absolute;top:154px;left:339px;white-space:nowrap" class="ft02">EM</p>
<p style="position:absolute;top:154px;left:415px;white-space:nowrap" class="ft02">TS</p>
<p style="position:absolute;top:154px;left:628px;white-space:nowrap" class="ft02">Action</p>
<p style="position:absolute;top:211px;left:122px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:211px;left:240px;white-space:nowrap" class="ft02">X</p>
<p style="position:absolute;top:208px;left:248px;white-space:nowrap" class="ft07">3</p>
<p style="position:absolute;top:392px;left:68px;white-space:nowrap" class="ft02">3.&#160;X = Don’t care.</p>
<p style="position:absolute;top:211px;left:343px;white-space:nowrap" class="ft02">X</p>
<p style="position:absolute;top:211px;left:419px;white-space:nowrap" class="ft02">X</p>
<p style="position:absolute;top:211px;left:466px;white-space:nowrap" class="ft02">#UD&#160;&#160;exception.</p>
<p style="position:absolute;top:235px;left:122px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:235px;left:243px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:235px;left:343px;white-space:nowrap" class="ft02">X</p>
<p style="position:absolute;top:235px;left:419px;white-space:nowrap" class="ft02">X</p>
<p style="position:absolute;top:235px;left:466px;white-space:nowrap" class="ft02">#UD&#160;&#160;exception.</p>
<p style="position:absolute;top:259px;left:122px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:259px;left:243px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:259px;left:344px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:259px;left:419px;white-space:nowrap" class="ft02">X</p>
<p style="position:absolute;top:259px;left:466px;white-space:nowrap" class="ft02">#UD&#160;&#160;exception.</p>
<p style="position:absolute;top:283px;left:122px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:283px;left:243px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:283px;left:344px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:283px;left:419px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:283px;left:466px;white-space:nowrap" class="ft02">#NM&#160;&#160;exception.</p>
</div>
</body>
</html>
