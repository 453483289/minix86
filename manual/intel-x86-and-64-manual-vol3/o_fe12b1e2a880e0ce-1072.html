<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1072</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1072-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1072.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">24-26&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">VIRTUAL MACHINE CONTROL STRUCTURES</p>
<p style="position:absolute;top:100px;left:93px;white-space:nowrap" class="ft05">—&#160;A&#160;value of 2 indicates a&#160;32-bit field.<br/>—&#160;A&#160;value of 3 indicates a&#160;<b>natural-width</b>&#160;field. Such&#160;fields&#160;have&#160;64&#160;bits&#160;on processors that&#160;support Intel 64&#160;</p>
<p style="position:absolute;top:141px;left:119px;white-space:nowrap" class="ft02">architecture and&#160;32&#160;bits&#160;on processors that do not.</p>
<p style="position:absolute;top:163px;left:93px;white-space:nowrap" class="ft06">Fields whose encodings use&#160;value&#160;1&#160;are&#160;specially&#160;treated&#160;to&#160;allow&#160;32-bit&#160;software access to&#160;all 64 bits of the&#160;<br/>field. Such&#160;access&#160;is allowed&#160;by&#160;defining, for each such field, an encoding that&#160;allows&#160;direct&#160;access&#160;to the&#160;high&#160;<br/>32&#160;bits of the&#160;field.&#160;See&#160;below.</p>
<p style="position:absolute;top:218px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:219px;left:93px;white-space:nowrap" class="ft06"><b>Field type.</b>&#160;Bits 11:10&#160;encode the type&#160;of VMCS&#160;field:&#160;control, guest-state, host-state,&#160;or VM-exit&#160;information.&#160;<br/>(The&#160;last&#160;category also&#160;includes&#160;the VM-instruction error&#160;field.)</p>
<p style="position:absolute;top:257px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:258px;left:93px;white-space:nowrap" class="ft03"><b>Index.&#160;</b>Bits 9:1 distinguish&#160;components with the&#160;same field width&#160;and&#160;type.</p>
<p style="position:absolute;top:280px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:280px;left:93px;white-space:nowrap" class="ft06"><b>Access type.&#160;</b>Bit 0&#160;must be&#160;0&#160;for&#160;all&#160;fields except&#160;for 64-bit fields (those&#160;with&#160;field-width 1;&#160;see&#160;above).&#160;A&#160;<br/>VMREAD&#160;or VMWRITE&#160;using an&#160;encoding&#160;with&#160;this&#160;bit&#160;cleared to&#160;0 accesses&#160;the entire&#160;field.&#160;For a&#160;64-bit field&#160;<br/>with field-width 1,&#160;a VMREAD&#160;or VMWRITE using an encoding&#160;with this bit set to&#160;1 accesses only the high 32 bits&#160;<br/>of the&#160;field.</p>
<p style="position:absolute;top:354px;left:68px;white-space:nowrap" class="ft06"><a href="o_fe12b1e2a880e0ce-1951.html">Appendix B giv</a>es&#160;the encodings of&#160;all fields in the&#160;VMCS.<br/>The following describes&#160;the&#160;operation of VMREAD and VMWRITE&#160;based on processor mode,&#160;VMCS-field width,&#160;and&#160;<br/>access type:</p>
<p style="position:absolute;top:416px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:417px;left:93px;white-space:nowrap" class="ft05">16-bit fields:<br/>—&#160;A&#160;VMREAD returns the value&#160;of the field in bits&#160;15:0 of&#160;the destination operand; other bits of the&#160;destination&#160;</p>
<p style="position:absolute;top:457px;left:119px;white-space:nowrap" class="ft02">operand are cleared&#160;to&#160;0.</p>
<p style="position:absolute;top:481px;left:93px;white-space:nowrap" class="ft02">—&#160;A&#160;VMWRITE&#160;writes&#160;the&#160;value of bits&#160;15:0&#160;of&#160;the&#160;source&#160;operand into&#160;the VMCS field; other&#160;bits&#160;of&#160;the source&#160;</p>
<p style="position:absolute;top:498px;left:119px;white-space:nowrap" class="ft02">operand are not used.</p>
<p style="position:absolute;top:520px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:520px;left:93px;white-space:nowrap" class="ft05">32-bit fields:<br/>—&#160;A&#160;VMREAD&#160;returns the value of&#160;the&#160;field in bits&#160;31:0&#160;of&#160;the destination operand; in 64-bit mode,&#160;bits&#160;63:32&#160;</p>
<p style="position:absolute;top:561px;left:119px;white-space:nowrap" class="ft02">of&#160;the destination operand&#160;are cleared&#160;to 0.</p>
<p style="position:absolute;top:585px;left:93px;white-space:nowrap" class="ft02">—&#160;A&#160;VMWRITE&#160;writes&#160;the&#160;value of bits&#160;31:0&#160;of&#160;the&#160;source&#160;operand into&#160;the&#160;VMCS&#160;field;&#160;in&#160;64-bit&#160;mode,&#160;</p>
<p style="position:absolute;top:601px;left:119px;white-space:nowrap" class="ft02">bits&#160;63:32&#160;of&#160;the source&#160;operand are not used.</p>
<p style="position:absolute;top:623px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:624px;left:93px;white-space:nowrap" class="ft05">64-bit fields&#160;and&#160;natural-width fields using&#160;the full access type outside IA-32e&#160;mode.<br/>—&#160;A&#160;VMREAD&#160;returns&#160;the value&#160;of&#160;bits&#160;31:0&#160;of the&#160;field&#160;in&#160;its destination&#160;operand; bits&#160;63:32 of the&#160;field&#160;are&#160;</p>
<p style="position:absolute;top:664px;left:119px;white-space:nowrap" class="ft02">ignored.</p>
<p style="position:absolute;top:688px;left:93px;white-space:nowrap" class="ft02">—&#160;A&#160;VMWRITE writes&#160;the value&#160;of its&#160;source&#160;operand&#160;to bits&#160;31:0 of the field&#160;and clears bits&#160;63:32 of the field.</p>
<p style="position:absolute;top:710px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:711px;left:93px;white-space:nowrap" class="ft07">64-bit fields and&#160;natural-width fields using the&#160;full&#160;access type in 64-bit&#160;mode (only on processors that support&#160;<br/>Intel 64 architecture).<br/>—&#160;A&#160;VMREAD&#160;returns&#160;the value&#160;of&#160;the field&#160;in bits&#160;63:0 of&#160;the destination&#160;operand<br/>—&#160;A&#160;VMWRITE&#160;writes&#160;the&#160;value of bits&#160;63:0&#160;of&#160;the source&#160;operand into&#160;the VMCS field.</p>
<p style="position:absolute;top:797px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:798px;left:93px;white-space:nowrap" class="ft07">64-bit&#160;fields using the&#160;high access&#160;type.<br/>—&#160;A&#160;VMREAD&#160;returns&#160;the value&#160;of&#160;bits&#160;63:32&#160;of&#160;the&#160;field&#160;in bits&#160;31:0&#160;of&#160;the destination operand;&#160;in 64-bit&#160;</p>
<p style="position:absolute;top:838px;left:119px;white-space:nowrap" class="ft02">mode, bits 63:32&#160;of&#160;the destination operand&#160;are cleared&#160;to 0.</p>
<p style="position:absolute;top:862px;left:93px;white-space:nowrap" class="ft02">—&#160;A&#160;VMWRITE&#160;writes&#160;the&#160;value of bits&#160;31:0&#160;of&#160;the&#160;source&#160;operand to&#160;bits&#160;63:32&#160;of&#160;the&#160;field;&#160;in 64-bit&#160;mode,&#160;</p>
<p style="position:absolute;top:879px;left:119px;white-space:nowrap" class="ft02">bits&#160;63:32&#160;of&#160;the source&#160;operand are not used.</p>
<p style="position:absolute;top:903px;left:68px;white-space:nowrap" class="ft06">Software seeking to&#160;read&#160;a 64-bit&#160;field outside IA-32e&#160;mode&#160;can use&#160;VMREAD&#160;with the&#160;full access type&#160;(reading&#160;<br/>bits&#160;31:0&#160;of the&#160;field)&#160;and VMREAD with&#160;the high&#160;access&#160;type (reading&#160;bits&#160;63:32 of&#160;the field); the&#160;order&#160;of the&#160;two&#160;<br/>VMREAD executions&#160;is not&#160;important.&#160;Software seeking to&#160;modify a&#160;64-bit field outside IA-32e mode should first&#160;<br/>use VMWRITE&#160;with&#160;the full access type (establishing&#160;bits&#160;31:0&#160;of&#160;the field while clearing bits&#160;63:32) and&#160;then use&#160;<br/>VMWRITE with the&#160;high access type&#160;(establishing bits&#160;63:32&#160;of the&#160;field).</p>
</div>
</body>
</html>
