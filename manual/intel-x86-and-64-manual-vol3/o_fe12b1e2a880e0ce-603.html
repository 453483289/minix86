<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 603</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:12px;font-family:Times;color:#0860a8;}
	.ft05{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page603-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce603.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:761px;white-space:nowrap" class="ft00">Vol. 3B&#160;17-29</p>
<p style="position:absolute;top:47px;left:425px;white-space:nowrap" class="ft01">DEBUG, BRANCH&#160;PROFILE, TSC, AND RESOURCE MONITORING FEATURES</p>
<p style="position:absolute;top:97px;left:69px;white-space:nowrap" class="ft02">17.8&#160;</p>
<p style="position:absolute;top:97px;left:148px;white-space:nowrap" class="ft02">LAST&#160;BRANCH, INTERRUPT, AND&#160;EXCEPTION RECORDING FOR&#160;</p>
<p style="position:absolute;top:123px;left:147px;white-space:nowrap" class="ft02">PROCESSORS BASED ON INTEL</p>
<p style="position:absolute;top:125px;left:434px;white-space:nowrap" class="ft01">®</p>
<p style="position:absolute;top:123px;left:447px;white-space:nowrap" class="ft02">&#160;MICROARCHITECTURE CODE NAME&#160;</p>
<p style="position:absolute;top:148px;left:147px;white-space:nowrap" class="ft02">SANDY BRIDGE</p>
<p style="position:absolute;top:184px;left:69px;white-space:nowrap" class="ft05">Generally, all&#160;of the&#160;last branch record, interrupt and&#160;exception recording facility&#160;described&#160;<a href="o_fe12b1e2a880e0ce-601.html">in Section 17.7, “Last&#160;<br/>Branch, Interrupt, and&#160;Exception&#160;Recording for&#160;Processors based&#160;on Intel®&#160;Microarchitecture&#160;code&#160;name&#160;<br/>Nehalem”, apply&#160;</a>to processors based&#160;on Intel microarchitecture code name Sandy Bridge. For&#160;processors based on&#160;<br/>Intel microarchitecture code name Ivy Bridge,&#160;the same&#160;holds&#160;true.&#160;<br/>One&#160;difference&#160;of&#160;note&#160;is&#160;that&#160;MSR_LBR_SELECT&#160;is&#160;shared&#160;between two logical processors in&#160;the same core. In&#160;Intel&#160;<br/>microarchitecture code name&#160;Sandy Bridge, each&#160;logical processor has its own&#160;MSR_LBR_SELECT. The filtering&#160;<br/>semantics for “Near_ind_jmp”&#160;and&#160;“Near_rel_jmp” has&#160;been&#160;enhanced,&#160;se<a href="o_fe12b1e2a880e0ce-603.html">e Table&#160;17-12</a>.</p>
<p style="position:absolute;top:651px;left:69px;white-space:nowrap" class="ft02">17.9&#160;</p>
<p style="position:absolute;top:651px;left:148px;white-space:nowrap" class="ft02">LAST&#160;BRANCH, CALL STACK, INTERRUPT, AND EXCEPTION RECORDING&#160;</p>
<p style="position:absolute;top:676px;left:147px;white-space:nowrap" class="ft02">FOR PROCESSORS BASED ON HASWELL MICROARCHITECTURE</p>
<p style="position:absolute;top:712px;left:69px;white-space:nowrap" class="ft05">Generally, all&#160;of the&#160;last branch record, interrupt and&#160;exception recording facility&#160;described&#160;<a href="o_fe12b1e2a880e0ce-603.html">in Section 17.8, “Last&#160;<br/>Branch,&#160;Interrupt,&#160;and Exception Recording&#160;for&#160;Processors&#160;based on&#160;Intel® Microarchitecture&#160;code&#160;name Sandy&#160;<br/>Bridge”,</a>&#160;apply to&#160;next&#160;generation processors based on&#160;Intel microarchitecture&#160;code&#160;name&#160;Haswell.&#160;<br/>The&#160;LBR facility&#160;also supports an alternate capability&#160;to&#160;profile call&#160;stack profiles.&#160;Configuring&#160;the LBR facility&#160;to&#160;<br/>conduct&#160;call stack&#160;profiling is&#160;by writing 1&#160;to the&#160;MSR_LBR_SELECT.EN_CALLST<a href="o_fe12b1e2a880e0ce-603.html">ACK[bit 9]; see Table&#160;17-13. If&#160;<br/></a>MSR_LBR_SELECT.EN_CALLSTACK&#160;is clear,&#160;the&#160;LBR&#160;facility will capture&#160;branches&#160;normally&#160;<a href="o_fe12b1e2a880e0ce-603.html">as described in Section&#160;<br/>17.8.</a></p>
<p style="position:absolute;top:345px;left:166px;white-space:nowrap" class="ft04">Table&#160;17-12.&#160;&#160; MSR_LBR_SELECT&#160;for Intel® microarchitecture code&#160;name&#160;Sandy Bridge</p>
<p style="position:absolute;top:367px;left:74px;white-space:nowrap" class="ft03">Bit Field</p>
<p style="position:absolute;top:367px;left:192px;white-space:nowrap" class="ft03">Bit Offset</p>
<p style="position:absolute;top:367px;left:272px;white-space:nowrap" class="ft03">Access</p>
<p style="position:absolute;top:367px;left:333px;white-space:nowrap" class="ft03">Description</p>
<p style="position:absolute;top:390px;left:74px;white-space:nowrap" class="ft03">CPL_EQ_0</p>
<p style="position:absolute;top:390px;left:192px;white-space:nowrap" class="ft03">0</p>
<p style="position:absolute;top:390px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:390px;left:333px;white-space:nowrap" class="ft03">When&#160;set, do not capture&#160;branches&#160;occurring in&#160;ring 0</p>
<p style="position:absolute;top:412px;left:74px;white-space:nowrap" class="ft03">CPL_NEQ_0</p>
<p style="position:absolute;top:412px;left:192px;white-space:nowrap" class="ft03">1</p>
<p style="position:absolute;top:412px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:412px;left:333px;white-space:nowrap" class="ft03">When&#160;set, do not capture&#160;branches&#160;occurring in&#160;ring &gt;0</p>
<p style="position:absolute;top:435px;left:74px;white-space:nowrap" class="ft03">JCC</p>
<p style="position:absolute;top:435px;left:192px;white-space:nowrap" class="ft03">2</p>
<p style="position:absolute;top:435px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:435px;left:333px;white-space:nowrap" class="ft03">When&#160;set, do&#160;not capture conditional branches</p>
<p style="position:absolute;top:457px;left:74px;white-space:nowrap" class="ft03">NEAR_REL_CALL</p>
<p style="position:absolute;top:457px;left:192px;white-space:nowrap" class="ft03">3</p>
<p style="position:absolute;top:457px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:457px;left:333px;white-space:nowrap" class="ft03">When set, do not capture near relative&#160;calls</p>
<p style="position:absolute;top:480px;left:74px;white-space:nowrap" class="ft03">NEAR_IND_CALL</p>
<p style="position:absolute;top:480px;left:192px;white-space:nowrap" class="ft03">4</p>
<p style="position:absolute;top:480px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:480px;left:333px;white-space:nowrap" class="ft03">When set, do not capture near indirect calls</p>
<p style="position:absolute;top:502px;left:74px;white-space:nowrap" class="ft03">NEAR_RET</p>
<p style="position:absolute;top:502px;left:192px;white-space:nowrap" class="ft03">5</p>
<p style="position:absolute;top:502px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:502px;left:333px;white-space:nowrap" class="ft03">When set, do not capture near returns</p>
<p style="position:absolute;top:525px;left:74px;white-space:nowrap" class="ft03">NEAR_IND_JMP</p>
<p style="position:absolute;top:525px;left:192px;white-space:nowrap" class="ft03">6</p>
<p style="position:absolute;top:525px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:525px;left:333px;white-space:nowrap" class="ft03">When set, do not capture near indirect jumps except&#160;near indirect&#160;calls and near returns</p>
<p style="position:absolute;top:547px;left:74px;white-space:nowrap" class="ft03">NEAR_REL_JMP</p>
<p style="position:absolute;top:547px;left:192px;white-space:nowrap" class="ft03">7</p>
<p style="position:absolute;top:547px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:547px;left:333px;white-space:nowrap" class="ft03">When set, do not capture near relative&#160;jumps except&#160;near relative&#160;calls.</p>
<p style="position:absolute;top:570px;left:74px;white-space:nowrap" class="ft03">FAR_BRANCH</p>
<p style="position:absolute;top:570px;left:192px;white-space:nowrap" class="ft03">8</p>
<p style="position:absolute;top:570px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:570px;left:333px;white-space:nowrap" class="ft03">When set, do not capture far&#160;branches</p>
<p style="position:absolute;top:592px;left:74px;white-space:nowrap" class="ft03">Reserved</p>
<p style="position:absolute;top:592px;left:192px;white-space:nowrap" class="ft03">63:9</p>
<p style="position:absolute;top:592px;left:333px;white-space:nowrap" class="ft03">Must&#160;be&#160;zero</p>
<p style="position:absolute;top:849px;left:184px;white-space:nowrap" class="ft04">Table&#160;17-13.&#160;&#160; MSR_LBR_SELECT&#160;for&#160;Intel® microarchitecture code name&#160;Haswell</p>
<p style="position:absolute;top:871px;left:74px;white-space:nowrap" class="ft03">Bit Field</p>
<p style="position:absolute;top:871px;left:192px;white-space:nowrap" class="ft03">Bit Offset</p>
<p style="position:absolute;top:871px;left:272px;white-space:nowrap" class="ft03">Access</p>
<p style="position:absolute;top:871px;left:333px;white-space:nowrap" class="ft03">Description</p>
<p style="position:absolute;top:894px;left:74px;white-space:nowrap" class="ft03">CPL_EQ_0</p>
<p style="position:absolute;top:894px;left:192px;white-space:nowrap" class="ft03">0</p>
<p style="position:absolute;top:894px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:894px;left:333px;white-space:nowrap" class="ft03">When&#160;set, do not capture&#160;branches&#160;occurring in&#160;ring 0</p>
<p style="position:absolute;top:916px;left:74px;white-space:nowrap" class="ft03">CPL_NEQ_0</p>
<p style="position:absolute;top:916px;left:192px;white-space:nowrap" class="ft03">1</p>
<p style="position:absolute;top:916px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:916px;left:333px;white-space:nowrap" class="ft03">When&#160;set, do not capture&#160;branches&#160;occurring in&#160;ring &gt;0</p>
<p style="position:absolute;top:939px;left:74px;white-space:nowrap" class="ft03">JCC</p>
<p style="position:absolute;top:939px;left:192px;white-space:nowrap" class="ft03">2</p>
<p style="position:absolute;top:939px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:939px;left:333px;white-space:nowrap" class="ft03">When&#160;set, do&#160;not capture conditional branches</p>
<p style="position:absolute;top:961px;left:74px;white-space:nowrap" class="ft03">NEAR_REL_CALL</p>
<p style="position:absolute;top:961px;left:192px;white-space:nowrap" class="ft03">3</p>
<p style="position:absolute;top:961px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:961px;left:333px;white-space:nowrap" class="ft03">When set, do not capture near relative&#160;calls</p>
<p style="position:absolute;top:984px;left:74px;white-space:nowrap" class="ft03">NEAR_IND_CALL</p>
<p style="position:absolute;top:984px;left:192px;white-space:nowrap" class="ft03">4</p>
<p style="position:absolute;top:984px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:984px;left:333px;white-space:nowrap" class="ft03">When set, do not capture near indirect calls</p>
<p style="position:absolute;top:1006px;left:74px;white-space:nowrap" class="ft03">NEAR_RET</p>
<p style="position:absolute;top:1006px;left:192px;white-space:nowrap" class="ft03">5</p>
<p style="position:absolute;top:1006px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:1006px;left:333px;white-space:nowrap" class="ft03">When set, do not capture near returns</p>
<p style="position:absolute;top:1029px;left:74px;white-space:nowrap" class="ft03">NEAR_IND_JMP</p>
<p style="position:absolute;top:1029px;left:192px;white-space:nowrap" class="ft03">6</p>
<p style="position:absolute;top:1029px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:1029px;left:333px;white-space:nowrap" class="ft03">When set, do not capture near indirect jumps except&#160;near indirect&#160;calls and near returns</p>
<p style="position:absolute;top:1051px;left:74px;white-space:nowrap" class="ft03">NEAR_REL_JMP</p>
<p style="position:absolute;top:1051px;left:192px;white-space:nowrap" class="ft03">7</p>
<p style="position:absolute;top:1051px;left:272px;white-space:nowrap" class="ft03">R/W</p>
<p style="position:absolute;top:1051px;left:333px;white-space:nowrap" class="ft03">When set, do not capture near relative&#160;jumps except&#160;near relative&#160;calls.</p>
</div>
</body>
</html>
