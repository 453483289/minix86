<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 201</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:14px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#0860a8;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft09{font-size:9px;line-height:12px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page201-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce201.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:767px;white-space:nowrap" class="ft00">Vol. 3A&#160;6-15</p>
<p style="position:absolute;top:47px;left:609px;white-space:nowrap" class="ft01">INTERRUPT&#160;AND&#160;EXCEPTION HANDLING</p>
<p style="position:absolute;top:99px;left:433px;white-space:nowrap" class="ft02">NOTE</p>
<p style="position:absolute;top:124px;left:122px;white-space:nowrap" class="ft07">Because IA-32 architecture tasks are not re-entrant,&#160;an interrupt-handler task must disable&#160;<br/>interrupts between&#160;the&#160;time&#160;it completes handling&#160;the interrupt and&#160;the time&#160;it executes&#160;the IRET&#160;<br/>instruction.&#160;This action&#160;prevents another interrupt&#160;from occurring while&#160;the interrupt&#160;task’s&#160;TSS is&#160;<br/>still marked busy, which&#160;would cause&#160;a general-protection (#GP)&#160;exception.</p>
<p style="position:absolute;top:767px;left:69px;white-space:nowrap" class="ft04">6.13 ERROR&#160;</p>
<p style="position:absolute;top:767px;left:219px;white-space:nowrap" class="ft04">CODE</p>
<p style="position:absolute;top:804px;left:69px;white-space:nowrap" class="ft08">When an exception condition is&#160;related to a specific segment selector&#160;or IDT vector, the&#160;processor pushes&#160;an error&#160;<br/>code onto&#160;the stack of the&#160;exception&#160;handler (whether it&#160;is a&#160;procedure or&#160;task). The error&#160;code&#160;has the&#160;format&#160;<br/><a href="o_fe12b1e2a880e0ce-202.html">shown in Figure&#160;6-6. The error code rese</a>mbles a segment&#160;selector; however,&#160;instead of a TI&#160;flag and RPL field, the&#160;<br/>error code contains&#160;3 flags:<br/><b>EXT</b></p>
<p style="position:absolute;top:877px;left:170px;white-space:nowrap" class="ft07"><b>External event&#160;(bit 0)&#160;</b>— When&#160;set, indicates that&#160;the exception&#160;occurred&#160;during delivery&#160;of&#160;an&#160;<br/>event external&#160;to the&#160;program, such&#160;as&#160;an&#160;interrupt&#160;or an&#160;earlier&#160;exception.</p>
<p style="position:absolute;top:917px;left:69px;white-space:nowrap" class="ft05"><b>IDT</b></p>
<p style="position:absolute;top:917px;left:170px;white-space:nowrap" class="ft07"><b>Descriptor location (bit 1)&#160;</b>— When&#160;set, indicates that&#160;the index&#160;portion of the&#160;error code refers&#160;<br/>to a&#160;gate descriptor in&#160;the IDT;&#160;when clear,&#160;indicates that the index refers to a&#160;descriptor&#160;in&#160;the GDT&#160;<br/>or the&#160;current LDT.</p>
<p style="position:absolute;top:975px;left:69px;white-space:nowrap" class="ft05"><b>TI</b></p>
<p style="position:absolute;top:975px;left:170px;white-space:nowrap" class="ft07"><b>GDT/LDT&#160;(bit 2)&#160;</b>— Only&#160;used&#160;when&#160;the IDT flag&#160;is clear.&#160;When&#160;set, the&#160;TI flag indicates that the&#160;<br/>index portion of&#160;the error code refers to a segment or gate descriptor in the LDT;&#160;when&#160;clear,&#160;it indi-<br/>cates&#160;that the&#160;index refers to&#160;a&#160;descriptor in&#160;the current&#160;GDT.</p>
<p style="position:absolute;top:719px;left:341px;white-space:nowrap" class="ft06">Figure&#160;6-5.&#160;&#160;Interrupt&#160;Task&#160;Switch</p>
<p style="position:absolute;top:234px;left:374px;white-space:nowrap" class="ft00">IDT</p>
<p style="position:absolute;top:323px;left:358px;white-space:nowrap" class="ft00">Task Gate</p>
<p style="position:absolute;top:224px;left:556px;white-space:nowrap" class="ft00">TSS for Interrupt-</p>
<p style="position:absolute;top:468px;left:346px;white-space:nowrap" class="ft00">TSS Selector</p>
<p style="position:absolute;top:498px;left:371px;white-space:nowrap" class="ft00">GDT</p>
<p style="position:absolute;top:585px;left:344px;white-space:nowrap" class="ft00">TSS Descriptor</p>
<p style="position:absolute;top:316px;left:237px;white-space:nowrap" class="ft00">Interrupt</p>
<p style="position:absolute;top:329px;left:247px;white-space:nowrap" class="ft00">Vector</p>
<p style="position:absolute;top:465px;left:526px;white-space:nowrap" class="ft09">TSS<br/>Base<br/>Address</p>
<p style="position:absolute;top:237px;left:564px;white-space:nowrap" class="ft00">Handling Task</p>
</div>
</body>
</html>
