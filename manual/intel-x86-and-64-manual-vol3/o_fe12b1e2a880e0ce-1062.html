<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1062</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:18px;font-family:Times;color:#000000;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1062-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1062.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">24-16&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">VIRTUAL MACHINE CONTROL STRUCTURES</p>
<p style="position:absolute;top:98px;left:68px;white-space:nowrap" class="ft02">24.6.14 VM-Function&#160;</p>
<p style="position:absolute;top:98px;left:254px;white-space:nowrap" class="ft02">Controls</p>
<p style="position:absolute;top:129px;left:68px;white-space:nowrap" class="ft07">The&#160;<b>VM-function controls&#160;</b>constitute a&#160;64-bit vector that&#160;governs&#160;use of the VMFUNC&#160;instruction&#160;in VMX&#160;non-root&#160;<br/>operation.&#160;This field is&#160;supported only&#160;on processors that support the&#160;1-settings of both&#160;the “activate&#160;secondary&#160;<br/>controls” primary&#160;processor-based VM-execution&#160;control and&#160;the “enable VM&#160;functions” secondary&#160;processor-<br/>based VM-execution&#160;control.<br/><a href="o_fe12b1e2a880e0ce-1062.html">Table 24-9 lists the&#160;</a>VM-function&#160;controls.&#160;Se<a href="o_fe12b1e2a880e0ce-1087.html">e Section 25.5.5&#160;</a>for more details of how these controls affect processor&#160;<br/>behavior in VMX non-root operation.</p>
<p style="position:absolute;top:349px;left:68px;white-space:nowrap" class="ft07">All other&#160;bits&#160;in this field are reserved&#160;to 0.&#160;Software&#160;should consult&#160;the&#160;VMX capability MSR&#160;IA32_VMX_VMFUNC&#160;<br/><a href="o_fe12b1e2a880e0ce-1950.html">(see Appendix A.11) to&#160;</a>determine&#160;which bits are reserved. Failure to&#160;clear&#160;reserved&#160;bits causes subsequent&#160;<br/>VM&#160;entries to&#160;fail&#160;(see<a href="o_fe12b1e2a880e0ce-1094.html">&#160;Section 26.2.1.1).<br/></a>Processors that support the 1-setting of the “EPTP switching” VM-function control&#160;also&#160;support a 64-bit field called&#160;<br/>the&#160;<b>EPTP-list address</b>.&#160;This field&#160;contains the physical address of the&#160;4-KByte&#160;<b>EPTP list</b>.&#160;The&#160;EPTP&#160;list comprises&#160;<br/>512&#160;8-Byte&#160;entries (each an EPTP&#160;value)&#160;and is&#160;used&#160;by&#160;the EPTP-switching&#160;VM&#160;<a href="o_fe12b1e2a880e0ce-1088.html">function (see Section 25.5.5.3</a>).</p>
<p style="position:absolute;top:490px;left:68px;white-space:nowrap" class="ft02">24.6.15&#160;&#160;VMCS Shadowing Bitmap Addresses</p>
<p style="position:absolute;top:520px;left:68px;white-space:nowrap" class="ft07">On processors that&#160;support&#160;the&#160;1-setting of&#160;the “VMCS shadowing” VM-execution&#160;control, the VM-execution&#160;control&#160;<br/>fields include&#160;the 64-bit physical addresses of the&#160;<b>VMREAD&#160;bitmap</b>&#160;and the&#160;<b>VMWRITE bitmap</b>.&#160;Each&#160;bitmap&#160;is&#160;4&#160;<br/>KBytes in&#160;size and&#160;thus contains 32 KBits.&#160;The&#160;addresses&#160;are the&#160;<b>VMREAD-bitmap&#160;address</b>&#160;and&#160;the&#160;<b>VMWRITE-<br/>bitmap&#160;address</b>.<br/>If&#160;the “VMCS shadowing”&#160;VM-execution&#160;control&#160;is 1,&#160;executions of VMREAD&#160;and&#160;VMWRITE may&#160;consult these&#160;<br/><a href="o_fe12b1e2a880e0ce-1070.html">bitmaps (see Section 24.10</a>&#160;<a href="o_fe12b1e2a880e0ce-1182.html">and Section 30.3).</a></p>
<p style="position:absolute;top:661px;left:68px;white-space:nowrap" class="ft02">24.6.16 ENCLS-Exiting&#160;</p>
<p style="position:absolute;top:661px;left:266px;white-space:nowrap" class="ft02">Bitmap</p>
<p style="position:absolute;top:691px;left:68px;white-space:nowrap" class="ft07">The&#160;<b>ENCLS-exiting bitmap</b>&#160;is a&#160;64-bit field.&#160;If&#160;the “enable&#160;ENCLS&#160;exiting” VM-execution control&#160;is 1,&#160;execution&#160;of&#160;<br/>ENCLS causes&#160;a&#160;VM&#160;exit&#160;if&#160;the bit in&#160;this&#160;field&#160;corresponding&#160;to the&#160;value of EAX&#160;is 1.&#160;If&#160;the bit is&#160;0,&#160;the&#160;instruction&#160;<br/>executes normally.&#160;S<a href="o_fe12b1e2a880e0ce-1076.html">ee Section 25.1.3&#160;</a>for&#160;more information.</p>
<p style="position:absolute;top:775px;left:68px;white-space:nowrap" class="ft02">24.6.17&#160;&#160;Control Field for Page-Modification Logging</p>
<p style="position:absolute;top:805px;left:68px;white-space:nowrap" class="ft07">The&#160;<b>PML&#160;address</b>&#160;is a&#160;64-bit&#160;field.&#160;It&#160;is the&#160;4-KByte aligned&#160;address of the&#160;<b>page-modification log</b>. The&#160;page-<br/>modification log&#160;consists of 512&#160;64-bit&#160;entries.&#160;It&#160;is used&#160;for the&#160;page-modification logging feature.&#160;Details&#160;of the&#160;<br/>page-modification logging are&#160;given in&#160;<a href="o_fe12b1e2a880e0ce-1159.html">Section&#160;28.2.5</a>.<br/>If the “enable&#160;PML”&#160;VM-execution control&#160;is 1,&#160;VM&#160;entry&#160;ensures that the PML&#160;address is 4-KByte&#160;aligned.&#160;The&#160;PML&#160;<br/>address exists&#160;only&#160;on processors that support the&#160;1-setting of the&#160;“enable&#160;PML”&#160;VM-execution&#160;control.</p>
<p style="position:absolute;top:929px;left:68px;white-space:nowrap" class="ft02">24.6.18&#160;&#160;Controls for Virtualization Exceptions</p>
<p style="position:absolute;top:960px;left:68px;white-space:nowrap" class="ft07">On processors that support the&#160;1-setting&#160;of the&#160;“EPT-violation&#160;#VE” VM-execution&#160;control, the&#160;VM-execution&#160;<br/>control fields&#160;include&#160;the following:</p>
<p style="position:absolute;top:998px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:999px;left:93px;white-space:nowrap" class="ft07"><b>Virtualization-exception&#160;information address</b>&#160;(64 bits).&#160;This field contains the&#160;physical&#160;address of the&#160;<br/><b>virtualization-exception&#160;information area</b>.&#160;When a logical processor encounters a&#160;virtualization exception,&#160;<br/>it saves virtualization-exception&#160;information at&#160;the virtualization-exception&#160;information address;&#160;se<a href="o_fe12b1e2a880e0ce-1090.html">e&#160;Section&#160;<br/>25.5.6.2.</a></p>
<p style="position:absolute;top:250px;left:289px;white-space:nowrap" class="ft06">Table&#160;24-9.&#160;&#160;Definitions&#160;of&#160;VM-Function&#160;Controls</p>
<p style="position:absolute;top:271px;left:74px;white-space:nowrap" class="ft03">Bit&#160;Position(s)&#160;Name</p>
<p style="position:absolute;top:271px;left:292px;white-space:nowrap" class="ft03">Description</p>
<p style="position:absolute;top:294px;left:74px;white-space:nowrap" class="ft03">0</p>
<p style="position:absolute;top:294px;left:171px;white-space:nowrap" class="ft03">EPTP&#160;switching</p>
<p style="position:absolute;top:294px;left:292px;white-space:nowrap" class="ft03">The&#160;EPTP-switching&#160;VM&#160;function&#160;changes the&#160;EPT pointer to&#160;a&#160;value&#160;chosen from&#160;the&#160;EPTP list.&#160;</p>
<p style="position:absolute;top:310px;left:292px;white-space:nowrap" class="ft03">See<a href="o_fe12b1e2a880e0ce-1088.html">&#160;Section 25.5.5.3.</a></p>
</div>
</body>
</html>
