<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 293</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:14px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:16px;font-family:Times;color:#0860a8;}
	.ft05{font-size:8px;font-family:Times;color:#000000;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page293-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce293.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:767px;white-space:nowrap" class="ft00">Vol. 3A&#160;8-37</p>
<p style="position:absolute;top:47px;left:619px;white-space:nowrap" class="ft01">MULTIPLE-PROCESSOR&#160;MANAGEMENT</p>
<p style="position:absolute;top:99px;left:69px;white-space:nowrap" class="ft02">8.9.3.1&#160;&#160;</p>
<p style="position:absolute;top:99px;left:153px;white-space:nowrap" class="ft02">Hierarchical ID&#160;of&#160;Logical Processors with x2APIC&#160;ID</p>
<p style="position:absolute;top:127px;left:69px;white-space:nowrap" class="ft07"><a href="o_fe12b1e2a880e0ce-293.html">Table 8-4</a>&#160;shows an example of possible x2APIC ID&#160;assignments for a dual processor system that support x2APIC.&#160;<br/>Each&#160;physical package providing four processor cores,&#160;and&#160;each processor core&#160;also supporting Intel Hyper-<br/>Threading Technology. Note that the&#160;x2APIC&#160;ID&#160;need&#160;not be contiguous in&#160;the system.</p>
<p style="position:absolute;top:685px;left:69px;white-space:nowrap" class="ft04">8.9.4&#160;</p>
<p style="position:absolute;top:685px;left:150px;white-space:nowrap" class="ft04">Algorithm for Three-Level Mappings of&#160;APIC_ID</p>
<p style="position:absolute;top:715px;left:69px;white-space:nowrap" class="ft03">Software&#160;can gather&#160;the initial&#160;APIC_IDs for each logical processor supported&#160;by&#160;the operating&#160;system at&#160;runtime</p>
<p style="position:absolute;top:713px;left:826px;white-space:nowrap" class="ft05">9</p>
<p style="position:absolute;top:715px;left:833px;white-space:nowrap" class="ft03">&#160;</p>
<p style="position:absolute;top:732px;left:69px;white-space:nowrap" class="ft07">and extract identifiers corresponding&#160;to&#160;the&#160;three&#160;levels of sharing&#160;topology&#160;(package, core, and SMT). The&#160;three-<br/>level algorithms below&#160;focus on a&#160;non-clustered MP system&#160;for simplicity.&#160;They do not assume APIC&#160;IDs&#160;are contig-<br/>uous&#160;or that&#160;all logical processors on the&#160;platform are&#160;enabled.<br/>Intel supports multi-threading systems where&#160;all physical&#160;processors report identical values&#160;in CPUID&#160;leaf 0BH,&#160;<br/>CPUID.1:EBX[23:16]),&#160;CPUID.4</p>
<p style="position:absolute;top:803px;left:283px;white-space:nowrap" class="ft05">10</p>
<p style="position:absolute;top:805px;left:297px;white-space:nowrap" class="ft03">:EAX[31:26], and&#160;CPUID.4</p>
<p style="position:absolute;top:803px;left:478px;white-space:nowrap" class="ft05">11</p>
<p style="position:absolute;top:805px;left:492px;white-space:nowrap" class="ft03">:EAX[25:14]. The algorithms below&#160;assume&#160;the&#160;</p>
<p style="position:absolute;top:822px;left:69px;white-space:nowrap" class="ft08">target system has&#160;symmetry across physical package&#160;boundaries with respect&#160;to the number of&#160;logical processors&#160;<br/>per package,&#160;number of&#160;cores per package,&#160;and cache&#160;topology within a&#160;package.<br/>The extraction&#160;algorithm (for three-level&#160;mappings from&#160;an APIC&#160;ID) uses&#160;the general&#160;procedure depicted in&#160;<br/><a href="o_fe12b1e2a880e0ce-295.html">Example&#160;8-18,&#160;</a>and is&#160;supplemented&#160;by&#160;more detailed&#160;descriptions&#160;on the&#160;derivation&#160;of topology enumeration&#160;<br/>parameters for extraction&#160;bit&#160;masks:<br/>1.&#160;Detect hardware multi-threading&#160;support&#160;in the&#160;processor.</p>
<p style="position:absolute;top:201px;left:77px;white-space:nowrap" class="ft06">Table 8-4.&#160;&#160;Example of&#160;Possible&#160;x2APIC&#160;ID Assignment&#160;in a&#160;System&#160;that&#160;has&#160;Two&#160;Physical&#160;Processors&#160;Supporting&#160;</p>
<p style="position:absolute;top:223px;left:298px;white-space:nowrap" class="ft06">x2APIC&#160;and Intel Hyper-Threading Technology&#160;</p>
<p style="position:absolute;top:247px;left:161px;white-space:nowrap" class="ft03">x2APIC ID</p>
<p style="position:absolute;top:247px;left:363px;white-space:nowrap" class="ft03">Package&#160;ID</p>
<p style="position:absolute;top:247px;left:542px;white-space:nowrap" class="ft03">Core&#160;ID</p>
<p style="position:absolute;top:247px;left:721px;white-space:nowrap" class="ft03">SMT ID</p>
<p style="position:absolute;top:271px;left:182px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:271px;left:388px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:271px;left:555px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:271px;left:733px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:295px;left:182px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:295px;left:388px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:295px;left:555px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:295px;left:733px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:319px;left:182px;white-space:nowrap" class="ft03">2H</p>
<p style="position:absolute;top:319px;left:388px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:319px;left:555px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:319px;left:733px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:343px;left:182px;white-space:nowrap" class="ft03">3H</p>
<p style="position:absolute;top:343px;left:388px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:343px;left:555px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:343px;left:733px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:367px;left:182px;white-space:nowrap" class="ft03">4H</p>
<p style="position:absolute;top:367px;left:388px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:367px;left:555px;white-space:nowrap" class="ft03">2H</p>
<p style="position:absolute;top:367px;left:733px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:391px;left:182px;white-space:nowrap" class="ft03">5H</p>
<p style="position:absolute;top:391px;left:388px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:391px;left:555px;white-space:nowrap" class="ft03">2H</p>
<p style="position:absolute;top:391px;left:733px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:415px;left:182px;white-space:nowrap" class="ft03">6H</p>
<p style="position:absolute;top:415px;left:388px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:415px;left:555px;white-space:nowrap" class="ft03">3H</p>
<p style="position:absolute;top:415px;left:733px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:439px;left:182px;white-space:nowrap" class="ft03">7H</p>
<p style="position:absolute;top:439px;left:388px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:439px;left:555px;white-space:nowrap" class="ft03">3H</p>
<p style="position:absolute;top:439px;left:733px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:463px;left:178px;white-space:nowrap" class="ft03">10H</p>
<p style="position:absolute;top:463px;left:388px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:463px;left:555px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:463px;left:733px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:487px;left:178px;white-space:nowrap" class="ft03">11H</p>
<p style="position:absolute;top:487px;left:388px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:487px;left:555px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:487px;left:733px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:511px;left:178px;white-space:nowrap" class="ft03">12H</p>
<p style="position:absolute;top:511px;left:388px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:511px;left:555px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:511px;left:733px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:535px;left:178px;white-space:nowrap" class="ft03">13H</p>
<p style="position:absolute;top:535px;left:388px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:535px;left:555px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:535px;left:733px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:559px;left:178px;white-space:nowrap" class="ft03">14H</p>
<p style="position:absolute;top:559px;left:388px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:559px;left:555px;white-space:nowrap" class="ft03">2H</p>
<p style="position:absolute;top:559px;left:733px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:583px;left:178px;white-space:nowrap" class="ft03">15H</p>
<p style="position:absolute;top:583px;left:388px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:583px;left:555px;white-space:nowrap" class="ft03">2H</p>
<p style="position:absolute;top:583px;left:733px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:607px;left:178px;white-space:nowrap" class="ft03">16H</p>
<p style="position:absolute;top:607px;left:388px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:607px;left:555px;white-space:nowrap" class="ft03">3H</p>
<p style="position:absolute;top:607px;left:733px;white-space:nowrap" class="ft03">0H</p>
<p style="position:absolute;top:631px;left:178px;white-space:nowrap" class="ft03">17H</p>
<p style="position:absolute;top:631px;left:388px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:631px;left:555px;white-space:nowrap" class="ft03">3H</p>
<p style="position:absolute;top:631px;left:733px;white-space:nowrap" class="ft03">1H</p>
<p style="position:absolute;top:963px;left:69px;white-space:nowrap" class="ft03">9.&#160;As noted in<a href="o_fe12b1e2a880e0ce-280.html">&#160;Section 8.6 an</a>d&#160;<a href="o_fe12b1e2a880e0ce-291.html">Section 8.9.3, the</a>&#160;number&#160;of&#160;logical processors&#160;supported by&#160;the&#160;OS&#160;at&#160;runtime may be&#160;less&#160;than&#160;the&#160;</p>
<p style="position:absolute;top:979px;left:91px;white-space:nowrap" class="ft03">total number logical processors available in&#160;the platform&#160;hardware.</p>
<p style="position:absolute;top:1000px;left:69px;white-space:nowrap" class="ft03">10.&#160;Maximum number of&#160;addressable ID&#160;for processor cores in a physical&#160;processor is&#160;obtained&#160;by&#160;executing&#160;CPUID with EAX=4 and&#160;a&#160;</p>
<p style="position:absolute;top:1017px;left:91px;white-space:nowrap" class="ft03">valid ECX&#160;index,&#160;The&#160;ECX index&#160;start at&#160;0.</p>
<p style="position:absolute;top:1038px;left:69px;white-space:nowrap" class="ft03">11.&#160;Maximum&#160;number&#160;addressable ID for processor&#160;cores&#160;sharing&#160;the&#160;target&#160;cache level is&#160;obtained&#160;by&#160;executing CPUID with&#160;EAX = 4&#160;</p>
<p style="position:absolute;top:1054px;left:91px;white-space:nowrap" class="ft03">and&#160;the ECX index corresponding to&#160;the&#160;target&#160;cache&#160;level.</p>
</div>
</body>
</html>
