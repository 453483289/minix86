<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 75</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#0860a8;}
	.ft05{font-size:18px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page75-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce075.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:767px;white-space:nowrap" class="ft00">Vol. 3A&#160;2-13</p>
<p style="position:absolute;top:47px;left:634px;white-space:nowrap" class="ft01">SYSTEM ARCHITECTURE OVERVIEW</p>
<p style="position:absolute;top:98px;left:69px;white-space:nowrap" class="ft02">2.4.4&#160;</p>
<p style="position:absolute;top:98px;left:149px;white-space:nowrap" class="ft02">Task Register (TR)</p>
<p style="position:absolute;top:129px;left:69px;white-space:nowrap" class="ft07">The task register&#160;holds the&#160;16-bit segment selector,&#160;base&#160;address (32 bits in protected mode;&#160;64&#160;bits&#160;in&#160;IA-32e&#160;<br/>mode),&#160;segment&#160;limit, and descriptor&#160;attributes for&#160;the TSS&#160;of&#160;the current&#160;task. The selector references&#160;the&#160;TSS&#160;<br/>descriptor in the&#160;GDT.&#160;The&#160;base&#160;address specifies&#160;the linear&#160;address of&#160;byte&#160;0&#160;of&#160;the TSS; the&#160;segment limit speci-<br/>fies the&#160;number of bytes&#160;in the&#160;TSS.&#160;See also:&#160;<a href="o_fe12b1e2a880e0ce-245.html">Section 7.2.4,&#160;“Task&#160;Register.”<br/></a>The LTR and STR instructions&#160;load and store&#160;the&#160;segment selector&#160;part of&#160;the task register, respectively.&#160;When&#160;the&#160;<br/>LTR instruction&#160;loads a segment selector&#160;in the task register, the base address,&#160;limit,&#160;and&#160;descriptor attributes&#160;from&#160;<br/>the TSS descriptor are automatically loaded into&#160;the task&#160;register. On power up&#160;or reset&#160;of&#160;the processor,&#160;the base&#160;<br/>address&#160;is set to&#160;the default&#160;value of&#160;0&#160;and&#160;the limit&#160;is set&#160;to 0FFFFH.<br/>When a&#160;task switch occurs,&#160;the task&#160;register&#160;is&#160;automatically loaded&#160;with&#160;the segment selector and&#160;descriptor for&#160;<br/>the TSS&#160;for&#160;the new task. The&#160;contents of&#160;the task register&#160;are&#160;not&#160;automatically&#160;saved prior&#160;to writing the new TSS&#160;<br/>information into&#160;the&#160;register.</p>
<p style="position:absolute;top:364px;left:69px;white-space:nowrap" class="ft04">2.5 CONTROL&#160;</p>
<p style="position:absolute;top:364px;left:243px;white-space:nowrap" class="ft04">REGISTERS</p>
<p style="position:absolute;top:400px;left:69px;white-space:nowrap" class="ft07">Control registers (CR0,&#160;CR1,&#160;CR2,&#160;CR3,&#160;and CR4;&#160;<a href="o_fe12b1e2a880e0ce-76.html">see Figure&#160;2-7) d</a>etermine operating&#160;mode&#160;of the processor and&#160;<br/>the characteristics of&#160;the&#160;currently executing task. These registers are 32 bits in all&#160;32-bit modes and compatibility&#160;<br/>mode.&#160;<br/>In 64-bit&#160;mode,&#160;control&#160;registers are&#160;expanded&#160;to 64&#160;bits. The MOV CRn instructions are used to manipulate the&#160;<br/>register&#160;bits.&#160;Operand-size&#160;prefixes&#160;for these&#160;instructions are&#160;ignored. The following is&#160;also true:</p>
<p style="position:absolute;top:496px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:496px;left:95px;white-space:nowrap" class="ft07">The&#160;control registers can&#160;be read and loaded (or modified) using the move-to-or-from-control-registers forms&#160;<br/>of the&#160;MOV&#160;instruction. In protected mode, the&#160;MOV&#160;instructions allow the&#160;control&#160;registers&#160;to be read or&#160;loaded&#160;<br/>(at privilege&#160;level 0&#160;only). This&#160;restriction means&#160;that&#160;application&#160;programs&#160;or&#160;operating-system procedures&#160;<br/>(running&#160;at&#160;privilege levels&#160;1,&#160;2, or 3) are&#160;prevented from&#160;reading or loading the&#160;control registers.</p>
<p style="position:absolute;top:568px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:568px;left:95px;white-space:nowrap" class="ft07">Bits 63:32 of CR0&#160;and CR4 are reserved&#160;and must be written with&#160;zeros. Writing a nonzero&#160;value to any of the&#160;<br/>upper 32&#160;bits results&#160;in a&#160;general-protection&#160;exception, #GP(0).&#160;</p>
<p style="position:absolute;top:607px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:607px;left:95px;white-space:nowrap" class="ft03">All 64&#160;bits&#160;of CR2&#160;are writable&#160;by software.&#160;</p>
<p style="position:absolute;top:629px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:630px;left:95px;white-space:nowrap" class="ft03">Bits&#160;51:40 of CR3&#160;are reserved&#160;and&#160;must&#160;be&#160;0.&#160;</p>
<p style="position:absolute;top:652px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:652px;left:95px;white-space:nowrap" class="ft07">The&#160;MOV&#160;CRn instructions do not check that addresses written to CR2 and CR3&#160;are&#160;within the&#160;linear-address or&#160;<br/>physical-address limitations of&#160;the implementation.&#160;</p>
<p style="position:absolute;top:691px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:691px;left:95px;white-space:nowrap" class="ft03">Register&#160;CR8 is&#160;available&#160;in 64-bit mode&#160;only.&#160;</p>
<p style="position:absolute;top:715px;left:69px;white-space:nowrap" class="ft07">The control&#160;registers are summarized below,&#160;and each architecturally defined&#160;control field in these control registers&#160;<br/>is described individually<a href="o_fe12b1e2a880e0ce-76.html">. In Figure&#160;2-7, the width of the&#160;</a>register&#160;in 64-bit mode&#160;is indicated&#160;in&#160;parenthesis&#160;(except&#160;<br/>for CR0).</p>
<p style="position:absolute;top:770px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:771px;left:95px;white-space:nowrap" class="ft06"><b>CR0</b>&#160;—&#160;Contains system&#160;control&#160;flags that&#160;control&#160;operating mode and&#160;states&#160;of&#160;the processor.&#160;</p>
<p style="position:absolute;top:793px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:793px;left:95px;white-space:nowrap" class="ft06"><b>CR1</b>&#160;— Reserved.</p>
<p style="position:absolute;top:815px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:816px;left:95px;white-space:nowrap" class="ft06"><b>CR2</b>&#160;—&#160;Contains&#160;the page-fault linear&#160;address (the linear&#160;address that caused a&#160;page fault).</p>
<p style="position:absolute;top:838px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:838px;left:95px;white-space:nowrap" class="ft08"><b>CR3</b>&#160;—&#160;Contains the&#160;physical&#160;address of the&#160;base&#160;of the paging-structure hierarchy and two&#160;flags&#160;(PCD and&#160;<br/>PWT). Only the&#160;most-significant bits&#160;(less the lower 12&#160;bits) of&#160;the&#160;base address are specified; the lower 12 bits&#160;<br/>of the&#160;address are&#160;assumed&#160;to be&#160;0.&#160;The first&#160;paging&#160;structure&#160;must&#160;thus be aligned to&#160;a page&#160;(4-KByte)&#160;<br/>boundary.&#160;The&#160;PCD&#160;and PWT&#160;flags control caching of that&#160;paging&#160;structure&#160;in the&#160;processor’s&#160;internal&#160;data&#160;<br/>caches (they&#160;do not&#160;control&#160;TLB&#160;caching of page-directory information).<br/>When using&#160;the physical address&#160;extension,&#160;the CR3&#160;register contains&#160;the&#160;base address&#160;of&#160;the page-directory-<br/>pointer table.&#160;In IA-32e&#160;mode,&#160;the&#160;CR3 register&#160;contains&#160;the base address&#160;of&#160;the PML4&#160;table.<br/>S<a href="o_fe12b1e2a880e0ce-105.html">ee also:&#160;Chapter 4, “Paging.”</a></p>
<p style="position:absolute;top:991px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:991px;left:95px;white-space:nowrap" class="ft07"><b>CR4</b>&#160;— Contains&#160;a group of flags that enable&#160;several architectural extensions, and&#160;indicate operating system or&#160;<br/>executive support&#160;for specific processor&#160;capabilities.&#160;</p>
</div>
</body>
</html>
