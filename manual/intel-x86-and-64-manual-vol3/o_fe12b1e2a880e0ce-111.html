<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 111</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#0860a8;}
	.ft04{font-size:8px;font-family:Times;color:#000000;}
	.ft05{font-size:18px;font-family:Times;color:#000000;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page111-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce111.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:774px;white-space:nowrap" class="ft00">Vol. 3A&#160;4-7</p>
<p style="position:absolute;top:47px;left:793px;white-space:nowrap" class="ft01">PAGING</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft07">32-bit paging&#160;supports 4-MByte pages&#160;if&#160;CR4.PSE&#160;=&#160;1.&#160;PAE paging&#160;and IA-32e&#160;paging&#160;support 2-MByte pages&#160;<br/>(regardless of the&#160;value of CR4.PSE). IA-32e paging&#160;may support 1-GByte&#160;pa<a href="o_fe12b1e2a880e0ce-109.html">ges (see Section 4.1.4)</a>.<br/>Paging&#160;structures&#160;are&#160;given different&#160;names&#160;based on&#160;their uses&#160;in the&#160;translation process.&#160;<a href="o_fe12b1e2a880e0ce-111.html">Table&#160;4-2&#160;gives&#160;</a>the&#160;<br/>names of the&#160;different paging&#160;structures.&#160;It also&#160;provides, for each structure, the&#160;source&#160;of the&#160;physical&#160;address&#160;<br/>used to&#160;locate it&#160;(CR3 or&#160;a different&#160;paging-structure entry);&#160;the bits in&#160;the linear&#160;address used to&#160;select&#160;an entry&#160;<br/>from&#160;the&#160;structure;&#160;and details of&#160;whether&#160;and how such an&#160;entry&#160;can map&#160;a page.</p>
<p style="position:absolute;top:687px;left:69px;white-space:nowrap" class="ft03">4.3 32-BIT&#160;</p>
<p style="position:absolute;top:687px;left:217px;white-space:nowrap" class="ft03">PAGING</p>
<p style="position:absolute;top:724px;left:69px;white-space:nowrap" class="ft07">A logical processor uses&#160;32-bit paging if&#160;CR0.PG&#160;= 1&#160;and CR4.PAE&#160;=&#160;0. 32-bit&#160;paging translates&#160;32-bit&#160;linear&#160;<br/>addresses&#160;to 40-bit physical addresses.</p>
<p style="position:absolute;top:737px;left:335px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:740px;left:342px;white-space:nowrap" class="ft02">&#160;Although 40 bits&#160;corresponds to&#160;1 TByte,&#160;linear&#160;addresses&#160;are limited to&#160;</p>
<p style="position:absolute;top:757px;left:69px;white-space:nowrap" class="ft07">32&#160;bits;&#160;at most 4&#160;GBytes of&#160;linear-address space may be&#160;accessed&#160;at any&#160;given&#160;time.<br/>32-bit paging uses a&#160;hierarchy&#160;of&#160;paging&#160;structures to&#160;produce a translation for a&#160;linear address. CR3&#160;is used to&#160;<br/>locate the&#160;first&#160;paging-structure,&#160;the page&#160;directory.<a href="o_fe12b1e2a880e0ce-114.html">&#160;Table&#160;4-3 illustr</a>ates how CR3 is&#160;used&#160;with&#160;32-bit paging.<br/>32-bit paging may map&#160;linear addresses to&#160;either 4-KByte pages&#160;or 4-MByte&#160;<a href="o_fe12b1e2a880e0ce-113.html">pages.&#160;Figure&#160;4-2 illustr</a>ates the&#160;<br/>translation process when it&#160;uses a&#160;4-KByte&#160;pa<a href="o_fe12b1e2a880e0ce-113.html">ge;&#160;Figure&#160;4-3</a>&#160;covers the&#160;case&#160;of&#160;a 4-MByte page. The&#160;following&#160;<br/>items describe the&#160;32-bit paging&#160;process in&#160;more detail as&#160;well has&#160;how the&#160;page&#160;size&#160;is determined:</p>
<p style="position:absolute;top:876px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:877px;left:95px;white-space:nowrap" class="ft08">A 4-KByte&#160;naturally&#160;aligned&#160;page&#160;directory is located at&#160;the physical address specified in bits&#160;31:12&#160;of CR3&#160;(see&#160;<br/><a href="o_fe12b1e2a880e0ce-114.html">Table&#160;4-3). A page directory comprises 102</a>4&#160;32-bit entries&#160;(PDEs). A PDE&#160;is selected using the&#160;physical address&#160;<br/>defined as&#160;follows:<br/>—&#160;Bits&#160;39:32 are&#160;all 0.<br/>—&#160;Bits&#160;31:12&#160;are from CR3.</p>
<p style="position:absolute;top:221px;left:249px;white-space:nowrap" class="ft06">Table&#160;4-2.&#160;&#160; Paging&#160;Structures&#160;in&#160;the&#160;Different&#160;Paging&#160;Modes</p>
<p style="position:absolute;top:270px;left:78px;white-space:nowrap" class="ft02">Paging Structure</p>
<p style="position:absolute;top:262px;left:222px;white-space:nowrap" class="ft02">Entry&#160;</p>
<p style="position:absolute;top:277px;left:222px;white-space:nowrap" class="ft02">Name</p>
<p style="position:absolute;top:270px;left:301px;white-space:nowrap" class="ft02">Paging&#160;Mode</p>
<p style="position:absolute;top:254px;left:429px;white-space:nowrap" class="ft02">Physical&#160;</p>
<p style="position:absolute;top:270px;left:429px;white-space:nowrap" class="ft02">Address of&#160;</p>
<p style="position:absolute;top:285px;left:429px;white-space:nowrap" class="ft02">Structure</p>
<p style="position:absolute;top:262px;left:544px;white-space:nowrap" class="ft02">Bits&#160;Selecting&#160;</p>
<p style="position:absolute;top:277px;left:544px;white-space:nowrap" class="ft02">Entry</p>
<p style="position:absolute;top:270px;left:645px;white-space:nowrap" class="ft02">Page Mapping</p>
<p style="position:absolute;top:327px;left:78px;white-space:nowrap" class="ft02">PML4 table</p>
<p style="position:absolute;top:327px;left:222px;white-space:nowrap" class="ft02">PML4E</p>
<p style="position:absolute;top:313px;left:301px;white-space:nowrap" class="ft02">32-bit, PAE</p>
<p style="position:absolute;top:313px;left:617px;white-space:nowrap" class="ft02">N/A</p>
<p style="position:absolute;top:342px;left:301px;white-space:nowrap" class="ft02">IA-32e</p>
<p style="position:absolute;top:342px;left:429px;white-space:nowrap" class="ft02">CR3</p>
<p style="position:absolute;top:342px;left:544px;white-space:nowrap" class="ft02">47:39</p>
<p style="position:absolute;top:342px;left:646px;white-space:nowrap" class="ft02">N/A (PS&#160;must&#160;be&#160;0)</p>
<p style="position:absolute;top:390px;left:78px;white-space:nowrap" class="ft02">Page-directory-</p>
<p style="position:absolute;top:407px;left:78px;white-space:nowrap" class="ft02">pointer&#160;table</p>
<p style="position:absolute;top:399px;left:222px;white-space:nowrap" class="ft02">PDPTE</p>
<p style="position:absolute;top:370px;left:301px;white-space:nowrap" class="ft02">32-bit</p>
<p style="position:absolute;top:370px;left:617px;white-space:nowrap" class="ft02">N/A</p>
<p style="position:absolute;top:399px;left:301px;white-space:nowrap" class="ft02">PAE</p>
<p style="position:absolute;top:399px;left:429px;white-space:nowrap" class="ft02">CR3</p>
<p style="position:absolute;top:399px;left:544px;white-space:nowrap" class="ft02">31:30</p>
<p style="position:absolute;top:399px;left:645px;white-space:nowrap" class="ft02">N/A&#160;(PS must&#160;be 0)</p>
<p style="position:absolute;top:427px;left:301px;white-space:nowrap" class="ft02">IA-32e</p>
<p style="position:absolute;top:427px;left:429px;white-space:nowrap" class="ft02">PML4E</p>
<p style="position:absolute;top:427px;left:544px;white-space:nowrap" class="ft02">38:30</p>
<p style="position:absolute;top:427px;left:646px;white-space:nowrap" class="ft02">1-GByte&#160;page if&#160;PS=1</p>
<p style="position:absolute;top:424px;left:769px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:571px;left:70px;white-space:nowrap" class="ft01">NOTES:</p>
<p style="position:absolute;top:590px;left:69px;white-space:nowrap" class="ft02">1. Not all processors&#160;allow&#160;the PS&#160;flag to&#160;be&#160;1&#160;in&#160;PDPTEs;&#160;see<a href="o_fe12b1e2a880e0ce-109.html">&#160;Section&#160;4.1.4&#160;</a>for how&#160;to&#160;determine&#160;whether&#160;1-GByte&#160;pages&#160;are&#160;supported.</p>
<p style="position:absolute;top:470px;left:78px;white-space:nowrap" class="ft02">Page&#160;directory</p>
<p style="position:absolute;top:470px;left:223px;white-space:nowrap" class="ft02">PDE</p>
<p style="position:absolute;top:456px;left:301px;white-space:nowrap" class="ft02">32-bit</p>
<p style="position:absolute;top:456px;left:429px;white-space:nowrap" class="ft02">CR3</p>
<p style="position:absolute;top:456px;left:544px;white-space:nowrap" class="ft02">31:22</p>
<p style="position:absolute;top:456px;left:646px;white-space:nowrap" class="ft02">4-MByte&#160;page&#160;if&#160;PS=1</p>
<p style="position:absolute;top:453px;left:771px;white-space:nowrap" class="ft04">2</p>
<p style="position:absolute;top:609px;left:69px;white-space:nowrap" class="ft02">2.&#160;32-bit&#160;paging&#160;ignores&#160;the&#160;PS&#160;flag&#160;in&#160;a&#160;PDE&#160;(and&#160;uses&#160;the&#160;entry&#160;to&#160;reference&#160;a&#160;page&#160;table)&#160;unless&#160;CR4.PSE&#160;=&#160;1.&#160;Not&#160;all&#160;processors&#160;allow&#160;</p>
<p style="position:absolute;top:626px;left:84px;white-space:nowrap" class="ft02">CR4.PSE&#160;to&#160;be&#160;1; see<a href="o_fe12b1e2a880e0ce-109.html">&#160;Section 4.1.4 f</a>or how&#160;to&#160;determine&#160;whether 4-MByte&#160;pages are supported&#160;with&#160;32-bit paging.</p>
<p style="position:absolute;top:484px;left:301px;white-space:nowrap" class="ft02">PAE, IA-32e</p>
<p style="position:absolute;top:484px;left:429px;white-space:nowrap" class="ft02">PDPTE</p>
<p style="position:absolute;top:484px;left:544px;white-space:nowrap" class="ft02">29:21</p>
<p style="position:absolute;top:484px;left:645px;white-space:nowrap" class="ft02">2-MByte page if&#160;PS=1</p>
<p style="position:absolute;top:527px;left:78px;white-space:nowrap" class="ft02">Page&#160;table</p>
<p style="position:absolute;top:527px;left:222px;white-space:nowrap" class="ft02">PTE</p>
<p style="position:absolute;top:513px;left:301px;white-space:nowrap" class="ft02">32-bit</p>
<p style="position:absolute;top:527px;left:429px;white-space:nowrap" class="ft02">PDE</p>
<p style="position:absolute;top:513px;left:544px;white-space:nowrap" class="ft02">21:12</p>
<p style="position:absolute;top:513px;left:646px;white-space:nowrap" class="ft02">4-KByte&#160;page</p>
<p style="position:absolute;top:541px;left:301px;white-space:nowrap" class="ft02">PAE, IA-32e</p>
<p style="position:absolute;top:541px;left:544px;white-space:nowrap" class="ft02">20:12</p>
<p style="position:absolute;top:541px;left:646px;white-space:nowrap" class="ft02">4-KByte&#160;page</p>
<p style="position:absolute;top:988px;left:69px;white-space:nowrap" class="ft02">1.&#160;Bits&#160;in&#160;the&#160;range&#160;39:32&#160;are&#160;0&#160;in&#160;any physical&#160;address used&#160;by&#160;32-bit&#160;paging&#160;except&#160;those&#160;used&#160;to&#160;map&#160;4-MByte&#160;pages.&#160;If&#160;the&#160;proces-</p>
<p style="position:absolute;top:1005px;left:91px;white-space:nowrap" class="ft02">sor does&#160;not support the PSE-36 mechanism,&#160;this is&#160;true&#160;also for physical&#160;addresses&#160;used&#160;to&#160;map 4-MByte&#160;pages.&#160;If the&#160;processor&#160;</p>
<p style="position:absolute;top:1021px;left:91px;white-space:nowrap" class="ft02">does&#160;support&#160;the PSE-36&#160;mechanism&#160;and MAXPHYADDR&#160;&lt; 40,&#160;bits&#160;in&#160;the&#160;range 39:MAXPHYADDR are 0 in&#160;any&#160;physical&#160;address&#160;used&#160;</p>
<p style="position:absolute;top:1038px;left:91px;white-space:nowrap" class="ft02">to&#160;map a&#160;4-MByte&#160;page. (The&#160;corresponding bits are&#160;reserved&#160;in&#160;PDEs.)&#160;Se<a href="o_fe12b1e2a880e0ce-109.html">e Section 4.1.4</a>&#160;for&#160;how to&#160;determine MAXPHYADDR and&#160;</p>
<p style="position:absolute;top:1054px;left:91px;white-space:nowrap" class="ft02">whether the&#160;PSE-36&#160;mechanism is&#160;supported.</p>
</div>
</body>
</html>
