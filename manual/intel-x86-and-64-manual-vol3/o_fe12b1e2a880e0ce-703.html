<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 703</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#000000;}
	.ft04{font-size:14px;font-family:Times;color:#0860a8;}
	.ft05{font-size:16px;font-family:Times;color:#0860a8;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page703-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce703.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:761px;white-space:nowrap" class="ft00">Vol. 3B&#160;18-67</p>
<p style="position:absolute;top:47px;left:672px;white-space:nowrap" class="ft01">PERFORMANCE MONITORING</p>
<p style="position:absolute;top:202px;left:69px;white-space:nowrap" class="ft07">DataLA can&#160;use any&#160;one of the&#160;IA32_PMC0-IA32_PMC3&#160;counters. Counter&#160;overflows&#160;will initiate&#160;the generation&#160;of&#160;<br/>PEBS records. Upon counter overflow, hardware&#160;captures the linear address and possible other status information&#160;<br/>of&#160;the retiring memory uop.&#160;This information&#160;is then&#160;written to the PEBS&#160;record&#160;that&#160;is subsequently generated.<br/>To&#160;enable the DataLA facility,&#160;software&#160;must&#160;complete&#160;the&#160;following steps. Please note that the&#160;DataLA facility relies&#160;<br/>on the&#160;PEBS facility,&#160;so&#160;the&#160;PEBS&#160;configuration requirements must be completed&#160;before&#160;attempting&#160;to capture&#160;<br/>DataLA information.</p>
<p style="position:absolute;top:314px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:315px;left:95px;white-space:nowrap" class="ft02">Complete&#160;the PEBS configuration steps.</p>
<p style="position:absolute;top:337px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:337px;left:95px;white-space:nowrap" class="ft02">Program the&#160;an event listed in&#160;<a href="o_fe12b1e2a880e0ce-702.html">Table&#160;18-45&#160;using&#160;</a>any&#160;one of IA32_PERFEVTSEL0-IA32_PERFEVTSEL3.&#160;</p>
<p style="position:absolute;top:359px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:360px;left:95px;white-space:nowrap" class="ft07">Set the corresponding IA32_PEBS_ENABLE.PEBS_EN_CTRx bit.&#160;This enables the corresponding&#160;IA32_PMCx as&#160;<br/>a&#160;PEBS counter&#160;and enables&#160;the&#160;DataLA facility.</p>
<p style="position:absolute;top:400px;left:69px;white-space:nowrap" class="ft07">When&#160;the DataLA facility&#160;is enabled, the&#160;relevant information written&#160;into&#160;a PEBS record affects entries at&#160;offsets&#160;<br/>98H,&#160;A0H and&#160;A8H,&#160;as&#160;shown in&#160;<a href="o_fe12b1e2a880e0ce-703.html">Table&#160;18-46.</a>&#160;</p>
<p style="position:absolute;top:709px;left:69px;white-space:nowrap" class="ft04">18.11.3.1&#160;&#160;&#160;EventingIP&#160;Record</p>
<p style="position:absolute;top:737px;left:69px;white-space:nowrap" class="ft07">The PEBS&#160;record&#160;layout for processors based&#160;on&#160;Intel&#160;microarchitecture code name&#160;Haswell adds&#160;a new field at&#160;<br/>offset&#160;0B0H.&#160;This is&#160;the&#160;eventingIP&#160;field&#160;that records the IP&#160;address of the retired instruction that&#160;triggered&#160;the&#160;<br/>PEBS assist. The&#160;EIP/RIP field&#160;at offset&#160;08H records the&#160;IP&#160;address&#160;of&#160;the next instruction to be executed&#160;following&#160;<br/>the PEBS assist.</p>
<p style="position:absolute;top:837px;left:69px;white-space:nowrap" class="ft05">18.11.4&#160;&#160;Off-core&#160;Response Performance Monitoring&#160;</p>
<p style="position:absolute;top:868px;left:69px;white-space:nowrap" class="ft07">The core PMU facility&#160;to collect off-core response events&#160;are&#160;similar to those&#160;described&#160;in<a href="o_fe12b1e2a880e0ce-693.html">&#160;Section&#160;18.9.5</a>.&#160;The&#160;event&#160;<br/><a href="o_fe12b1e2a880e0ce-694.html">codes are listed in&#160;Table&#160;18-35.&#160;</a>Each&#160;event code for off-core response&#160;monitoring requires&#160;programming an&#160;asso-<br/>ciated configuration MSR, MSR_OFFCORE_RSP_x.&#160;Software must program MSR_OFFCORE_RSP_x according to:</p>
<p style="position:absolute;top:922px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:923px;left:95px;white-space:nowrap" class="ft02">Transaction request type encoding (bits 15:0):&#160;see&#160;<a href="o_fe12b1e2a880e0ce-704.html">Table&#160;18-47.</a></p>
<p style="position:absolute;top:945px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:946px;left:95px;white-space:nowrap" class="ft02">Supplier information&#160;(bits&#160;30<a href="o_fe12b1e2a880e0ce-704.html">:16): see Table&#160;18-48 and&#160;Table&#160;18-48.</a></p>
<p style="position:absolute;top:967px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:968px;left:95px;white-space:nowrap" class="ft02">Snoop&#160;response&#160;information&#160;(bits&#160;37:31): see<a href="o_fe12b1e2a880e0ce-696.html">&#160;Table&#160;18-38.</a></p>
<p style="position:absolute;top:144px;left:74px;white-space:nowrap" class="ft02">MEM_LOAD_UOPS_L3_HIT_RETIRED.XSNP_HIT</p>
<p style="position:absolute;top:144px;left:486px;white-space:nowrap" class="ft02">MEM_LOAD_UOPS_L3_HIT_RETIRED.XSNP_HITM</p>
<p style="position:absolute;top:166px;left:74px;white-space:nowrap" class="ft02">UOPS_RETIRED.ALL&#160;(if&#160;load&#160;or&#160;store&#160;is&#160;tagged)</p>
<p style="position:absolute;top:166px;left:486px;white-space:nowrap" class="ft02">MEM_LOAD_UOPS_LLC_HIT_RETIRED.XSNP_NONE</p>
<p style="position:absolute;top:458px;left:209px;white-space:nowrap" class="ft06">Table 18-46. &#160;Layout of&#160;Data&#160;Linear&#160;Address Information&#160;In PEBS Record</p>
<p style="position:absolute;top:483px;left:76px;white-space:nowrap" class="ft02">Field Offset&#160;</p>
<p style="position:absolute;top:483px;left:232px;white-space:nowrap" class="ft02">Description</p>
<p style="position:absolute;top:507px;left:76px;white-space:nowrap" class="ft02">Data Linear&#160;</p>
<p style="position:absolute;top:523px;left:76px;white-space:nowrap" class="ft02">Address</p>
<p style="position:absolute;top:507px;left:178px;white-space:nowrap" class="ft02">98H</p>
<p style="position:absolute;top:507px;left:232px;white-space:nowrap" class="ft02">The&#160;linear&#160;address of&#160;the&#160;load&#160;or the destination&#160;of&#160;the&#160;store.</p>
<p style="position:absolute;top:547px;left:76px;white-space:nowrap" class="ft02">Store&#160;Status</p>
<p style="position:absolute;top:547px;left:178px;white-space:nowrap" class="ft02">A0H</p>
<p style="position:absolute;top:547px;left:232px;white-space:nowrap" class="ft02">•&#160;DCU Hit&#160;(Bit 0): The store hit the data cache closest&#160;to&#160;the core&#160;(L1 cache) if this bit is set,&#160;otherwise&#160;</p>
<p style="position:absolute;top:562px;left:248px;white-space:nowrap" class="ft02">the&#160;store missed&#160;the data&#160;cache.&#160;This information is&#160;valid&#160;only for the following&#160;store&#160;events:&#160;</p>
<p style="position:absolute;top:577px;left:248px;white-space:nowrap" class="ft02">UOPS_RETIRED.ALL&#160;(if&#160;store is&#160;tagged),</p>
<p style="position:absolute;top:592px;left:248px;white-space:nowrap" class="ft02">MEM_UOPS_RETIRED.STLB_MISS_STORES,</p>
<p style="position:absolute;top:607px;left:248px;white-space:nowrap" class="ft02">MEM_UOPS_RETIRED.SPLIT_STORES,&#160;MEM_UOPS_RETIRED.ALL_STORES</p>
<p style="position:absolute;top:622px;left:232px;white-space:nowrap" class="ft02">•&#160;Other&#160;bits are&#160;zero, The&#160;STLB_MISS,&#160;LOCK&#160;bit information can be&#160;obtained&#160;by programming the&#160;</p>
<p style="position:absolute;top:637px;left:248px;white-space:nowrap" class="ft02">corresponding store event in&#160;<a href="o_fe12b1e2a880e0ce-702.html">Table&#160;18-45.</a></p>
<p style="position:absolute;top:661px;left:76px;white-space:nowrap" class="ft02">Reserved</p>
<p style="position:absolute;top:661px;left:178px;white-space:nowrap" class="ft02">A8H</p>
<p style="position:absolute;top:661px;left:232px;white-space:nowrap" class="ft02">Always zero.</p>
<p style="position:absolute;top:100px;left:180px;white-space:nowrap" class="ft06">Table&#160;18-45.&#160;&#160;Precise&#160;Events&#160;That&#160;Supports Data Linear Address Profiling&#160;(Contd.)</p>
<p style="position:absolute;top:121px;left:74px;white-space:nowrap" class="ft02">Event Name</p>
<p style="position:absolute;top:121px;left:486px;white-space:nowrap" class="ft02">Event&#160;Name</p>
</div>
</body>
</html>
