<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 289</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:14px;font-family:Times;color:#0860a8;}
	.ft04{font-size:18px;font-family:Times;color:#0860a8;}
	.ft05{font-size:8px;font-family:Times;color:#000000;}
	.ft06{font-size:16px;font-family:Times;color:#0860a8;}
	.ft07{font-size:18px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page289-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce289.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:767px;white-space:nowrap" class="ft00">Vol. 3A&#160;8-33</p>
<p style="position:absolute;top:47px;left:619px;white-space:nowrap" class="ft01">MULTIPLE-PROCESSOR&#160;MANAGEMENT</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft09">cores or&#160;different physical packages. Either logical processor that&#160;has access&#160;to the&#160;microcode&#160;update&#160;facility can&#160;<br/>initiate an update.&#160;<br/>Each&#160;logical processor has&#160;its&#160;own BIOS signature MSR&#160;(IA32_BIOS_SIGN_ID at&#160;MSR address&#160;8BH). When a&#160;logical&#160;<br/>processor&#160;performs an update&#160;for&#160;the physical processor,&#160;the&#160;IA32_BIOS_SIGN_ID&#160;MSRs for resident&#160;logical&#160;<br/>processors&#160;are&#160;updated with identical information.&#160;<br/>All microcode update steps&#160;during processor initialization should use the same update&#160;data on all cores in all phys-<br/>ical&#160;packages of the&#160;same stepping.&#160;Any subsequent&#160;microcode update&#160;must&#160;apply&#160;consistent update data to&#160;all&#160;<br/>cores in all physical packages&#160;of the&#160;same&#160;stepping. If&#160;the processor detects an attempt to load an older microcode&#160;<br/>update&#160;when a newer microcode&#160;update&#160;had previously been&#160;loaded, it may reject the older update to stay&#160;with the&#160;<br/>newer update.</p>
<p style="position:absolute;top:298px;left:433px;white-space:nowrap" class="ft03">NOTE</p>
<p style="position:absolute;top:324px;left:122px;white-space:nowrap" class="ft09">Some&#160;processors (prior&#160;to the&#160;introduction&#160;of&#160;Intel 64 Architecture and based&#160;on&#160;Intel NetBurst&#160;<br/>microarchitecture) do&#160;not support&#160;simultaneous loading of microcode&#160;update to&#160;the sibling logical&#160;<br/>processors in the&#160;same&#160;core.&#160;All&#160;other processors support logical processors initiating&#160;an update&#160;<br/>simultaneously. Intel&#160;recommends a&#160;common&#160;approach that&#160;the microcode loader use&#160;the&#160;<br/>sequential technique&#160;described&#160;in&#160;<a href="o_fe12b1e2a880e0ce-347.html">Section&#160;9.11.6.3</a>.</p>
<p style="position:absolute;top:445px;left:69px;white-space:nowrap" class="ft04">8.9 PROGRAMMING&#160;</p>
<p style="position:absolute;top:445px;left:298px;white-space:nowrap" class="ft04">CONSIDERATIONS&#160;</p>
<p style="position:absolute;top:445px;left:470px;white-space:nowrap" class="ft04">FOR&#160;HARDWARE&#160;MULTI-THREADING&#160;</p>
<p style="position:absolute;top:471px;left:147px;white-space:nowrap" class="ft04">CAPABLE PROCESSORS</p>
<p style="position:absolute;top:507px;left:69px;white-space:nowrap" class="ft09">In a&#160;multi-threading environment, there&#160;may&#160;be&#160;certain&#160;hardware resources that&#160;are physically shared&#160;at some&#160;<br/>level of the hardware&#160;topology. In the multi-processor&#160;systems, typically&#160;bus and memory sub-systems are&#160;physi-<br/>cally shared between multiple&#160;sockets. Within&#160;a hardware&#160;multi-threading&#160;capable processors,&#160;certain resources&#160;<br/>are provided for each&#160;processor&#160;core, while other&#160;resources&#160;may be provided&#160;for&#160;each&#160;logical processors (see&#160;<br/><a href="o_fe12b1e2a880e0ce-282.html">Section 8.7, “Intel</a></p>
<p style="position:absolute;top:570px;left:192px;white-space:nowrap" class="ft05"><a href="o_fe12b1e2a880e0ce-282.html">®</a></p>
<p style="position:absolute;top:573px;left:203px;white-space:nowrap" class="ft02"><a href="o_fe12b1e2a880e0ce-282.html">&#160;Hyper-Threading&#160;Technology Architecture,”</a><a href="o_fe12b1e2a880e0ce-287.html">&#160;and Section 8.8, “Multi-Core Architecture”).&#160;</a></p>
<p style="position:absolute;top:597px;left:69px;white-space:nowrap" class="ft09">From a&#160;software&#160;programming perspective, control transfer&#160;of processor operation is managed at the granularity of&#160;<br/>logical processor (operating&#160;systems&#160;dispatch a&#160;runnable task by&#160;allocating an&#160;available logical processor on&#160;the&#160;<br/>platform).&#160;To&#160;manage&#160;the topology of shared&#160;resources&#160;in&#160;a multi-threading environment, it&#160;may be useful for&#160;soft-<br/>ware&#160;to&#160;understand&#160;and manage&#160;resources&#160;that are&#160;shared by more&#160;than&#160;one&#160;logical processors.</p>
<p style="position:absolute;top:697px;left:69px;white-space:nowrap" class="ft06">8.9.1&#160;</p>
<p style="position:absolute;top:697px;left:150px;white-space:nowrap" class="ft06">Hierarchical Mapping of&#160;Shared Resources</p>
<p style="position:absolute;top:727px;left:69px;white-space:nowrap" class="ft09">The APIC_ID&#160;value associated with each&#160;logical&#160;processor&#160;in&#160;a multi-processor&#160;system&#160;is&#160;unique&#160;(see<a href="o_fe12b1e2a880e0ce-280.html">&#160;Section 8.6,&#160;<br/>“Detecting&#160;Hardware Multi-Threading Support and&#160;Topology”).&#160;</a>This 8-bit or&#160;32-bit value can&#160;be&#160;decomposed&#160;into&#160;<br/>sub-fields, where each sub-field corresponds&#160;a hierarchical&#160;level of the topological mapping of hardware&#160;resources.&#160;<br/>The decomposition of&#160;an&#160;APIC_ID may&#160;consist of several sub fields representing&#160;the&#160;topology&#160;within&#160;a physical&#160;<br/>processor package,&#160;the&#160;higher-order bits of an&#160;APIC ID&#160;may&#160;also be used by cluster&#160;vendors to represent&#160;the&#160;<br/>topology of&#160;cluster nodes of each&#160;coherent multiprocessor&#160;systems. If&#160;the processor does not support CPUID&#160;leaf&#160;<br/>0BH, the&#160;8-bit initial APIC ID can&#160;represent 4&#160;levels of hierarchy:</p>
<p style="position:absolute;top:856px;left:69px;white-space:nowrap" class="ft07">•</p>
<p style="position:absolute;top:856px;left:95px;white-space:nowrap" class="ft09"><b>Cluster</b>&#160;— Some&#160;multi-threading&#160;environments consists&#160;of&#160;multiple&#160;clusters of multi-processor systems.&#160;The&#160;<br/>CLUSTER_ID sub-field is&#160;usually&#160;supported by vendor&#160;firmware to&#160;distinguish&#160;different clusters. For non-<br/>clustered systems, CLUSTER_ID&#160;is usually 0&#160;and&#160;system&#160;topology is&#160;reduced to&#160;three&#160;levels of hierarchy.</p>
<p style="position:absolute;top:911px;left:69px;white-space:nowrap" class="ft07">•</p>
<p style="position:absolute;top:912px;left:95px;white-space:nowrap" class="ft09"><b>Package</b>&#160;—&#160;A multi-processor system consists&#160;of&#160;two&#160;or more sockets,&#160;each mates&#160;with&#160;a physical processor&#160;<br/>package. The PACKAGE_ID sub-field distinguishes&#160;different physical packages within&#160;a&#160;cluster.</p>
<p style="position:absolute;top:950px;left:69px;white-space:nowrap" class="ft07">•</p>
<p style="position:absolute;top:951px;left:95px;white-space:nowrap" class="ft09"><b>Core&#160;</b>—&#160;A physical processor package consists&#160;of&#160;one or&#160;more processor cores. The CORE_ID&#160;sub-field&#160;distin-<br/>guishes&#160;processor&#160;cores&#160;in a package. For a single-core&#160;processor,&#160;the&#160;width&#160;of&#160;this bit field&#160;is 0.</p>
<p style="position:absolute;top:989px;left:69px;white-space:nowrap" class="ft07">•</p>
<p style="position:absolute;top:990px;left:95px;white-space:nowrap" class="ft09"><b>SMT&#160;</b>—&#160;A processor core provides one&#160;or&#160;more logical processors sharing&#160;execution resources.&#160;The SMT_ID&#160;<br/>sub-field distinguishes logical processors in&#160;a core. The&#160;width of this&#160;bit&#160;field is&#160;non-zero if a&#160;processor&#160;core&#160;<br/>provides&#160;more than&#160;one&#160;logical processors.</p>
<p style="position:absolute;top:1047px;left:69px;white-space:nowrap" class="ft02">SMT&#160;and CORE sub-fields are&#160;bit-wise contiguous&#160;in the&#160;APIC_ID field (see<a href="o_fe12b1e2a880e0ce-290.html">&#160;Figure&#160;8-5).</a>&#160;</p>
</div>
</body>
</html>
