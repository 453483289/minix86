<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1706</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:14px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:12px;font-family:Times;color:#0860a8;}
	.ft05{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:20px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:21px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1706-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1706.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">36-22&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">INTEL® PROCESSOR TRACE</p>
<p style="position:absolute;top:419px;left:68px;white-space:nowrap" class="ft02">36.2.7.8 &#160;&#160;IA32_RTIT_OUTPUT_MASK_PTRS&#160;MSR</p>
<p style="position:absolute;top:446px;left:68px;white-space:nowrap" class="ft05">This MSR&#160;holds any&#160;mask&#160;or pointer values needed to&#160;indicate where the&#160;next byte&#160;of trace output&#160;should be&#160;<br/>written. The&#160;meaning of&#160;the values&#160;held&#160;in this&#160;MSR&#160;depend&#160;on whether the&#160;ToPA&#160;output mechanism is&#160;in use. See&#160;<br/><a href="o_fe12b1e2a880e0ce-1693.html">Section&#160;36.2.6.2 for d</a>etails.<br/>The processor updates this MSR while&#160;when packet generation&#160;is&#160;enabled, and those updates are asynchronous to&#160;<br/>instruction&#160;execution.&#160;Therefore,&#160;the&#160;values in&#160;this MSR should&#160;be&#160;considered&#160;unreliable unless packet generation&#160;<br/>is disabled&#160;(IA32_RTIT_CTL.TraceEn&#160;= 0).<br/>Accesses to&#160;this&#160;MSR are&#160;supported only if&#160;Intel PT&#160;output&#160;to memory&#160;is supported, hence when&#160;either&#160;<br/>CPUID.(EAX=14H, ECX=0):ECX[bit&#160;0] or&#160;CPUID.(EAX=14H, ECX=0):ECX[bit 2]&#160;are&#160;set. Otherwise WRMSR&#160;or&#160;<br/>RDMSR cause&#160;a general-protection fault (#GP). If&#160;supported,&#160;this MSR&#160;can&#160;be written only when&#160;<br/>IA32_RTIT_CTL.TraceEn&#160;is 0;&#160;otherwise WRMSR&#160;causes&#160;a general-protection fault (#GP).</p>
<p style="position:absolute;top:100px;left:306px;white-space:nowrap" class="ft04">Table&#160;36-8.&#160;IA32_RTIT_OUTPUT_BASE MSR</p>
<p style="position:absolute;top:124px;left:105px;white-space:nowrap" class="ft03">Position</p>
<p style="position:absolute;top:124px;left:211px;white-space:nowrap" class="ft03">Bit&#160;Name</p>
<p style="position:absolute;top:124px;left:293px;white-space:nowrap" class="ft03">At&#160;Reset</p>
<p style="position:absolute;top:124px;left:550px;white-space:nowrap" class="ft03">Bit&#160;Description</p>
<p style="position:absolute;top:148px;left:120px;white-space:nowrap" class="ft03">6:0</p>
<p style="position:absolute;top:148px;left:197px;white-space:nowrap" class="ft03">Reserved</p>
<p style="position:absolute;top:148px;left:292px;white-space:nowrap" class="ft03">0</p>
<p style="position:absolute;top:148px;left:358px;white-space:nowrap" class="ft03">Must&#160;be&#160;0.</p>
<p style="position:absolute;top:172px;left:76px;white-space:nowrap" class="ft03">MAXPHYADDR-1:7&#160;BasePhysAddr&#160;0</p>
<p style="position:absolute;top:172px;left:359px;white-space:nowrap" class="ft03">The&#160;base&#160;physical address.&#160;How this&#160;address is used&#160;depends on&#160;the&#160;value of&#160;</p>
<p style="position:absolute;top:189px;left:358px;white-space:nowrap" class="ft07">IA32_RTIT_CTL.ToPA:<br/>0:&#160;This is the base physical address of&#160;a&#160;single,&#160;contiguous physical&#160;output region.&#160;</p>
<p style="position:absolute;top:226px;left:358px;white-space:nowrap" class="ft07">This&#160;could&#160;be&#160;mapped&#160;to&#160;DRAM&#160;or to&#160;MMIO, depending on&#160;the&#160;value.<br/>The&#160;base&#160;address should be&#160;aligned with the size&#160;of&#160;the region,&#160;such that&#160;none of&#160;</p>
<p style="position:absolute;top:263px;left:358px;white-space:nowrap" class="ft03">the 1s&#160;in&#160;the mask&#160;value<a href="o_fe12b1e2a880e0ce-1706.html">(Section&#160;36.2.7.8</a>)&#160;overlap&#160;with&#160;1s in&#160;the base&#160;address. If&#160;</p>
<p style="position:absolute;top:280px;left:358px;white-space:nowrap" class="ft07">the&#160;base is&#160;not aligned,&#160;an&#160;operational error will result&#160;(see<a href="o_fe12b1e2a880e0ce-1719.html">&#160;Section 36.3.9</a>).<br/>1:&#160;The base&#160;physical address of&#160;the current ToPA&#160;table.&#160;The address must&#160;be 4K&#160;</p>
<p style="position:absolute;top:317px;left:358px;white-space:nowrap" class="ft03">aligned.&#160;Writing&#160;an&#160;address&#160;in&#160;which&#160;bits 11:7 are&#160;non-zero&#160;will not cause&#160;a&#160;#GP,&#160;but&#160;</p>
<p style="position:absolute;top:334px;left:358px;white-space:nowrap" class="ft03">an operational error will be&#160;signaled once TraceEn is&#160;se<a href="o_fe12b1e2a880e0ce-1698.html">t. See “ToPA Errors” in&#160;</a></p>
<p style="position:absolute;top:351px;left:358px;white-space:nowrap" class="ft03"><a href="o_fe12b1e2a880e0ce-1693.html">Section 36.2.6.2</a>&#160;as&#160;well as<a href="o_fe12b1e2a880e0ce-1719.html">&#160;Section&#160;36.3.9.</a></p>
<p style="position:absolute;top:375px;left:79px;white-space:nowrap" class="ft03">63:MAXPHYADDR&#160;Reserved</p>
<p style="position:absolute;top:375px;left:292px;white-space:nowrap" class="ft03">0</p>
<p style="position:absolute;top:375px;left:358px;white-space:nowrap" class="ft03">Must&#160;be&#160;0.</p>
<p style="position:absolute;top:645px;left:278px;white-space:nowrap" class="ft04">Table 36-9.&#160;IA32_RTIT_OUTPUT_MASK_PTRS&#160;MSR</p>
<p style="position:absolute;top:669px;left:74px;white-space:nowrap" class="ft03">Position</p>
<p style="position:absolute;top:669px;left:150px;white-space:nowrap" class="ft03">Bit&#160;Name</p>
<p style="position:absolute;top:669px;left:233px;white-space:nowrap" class="ft03">At&#160;Reset</p>
<p style="position:absolute;top:669px;left:516px;white-space:nowrap" class="ft03">Bit&#160;Description</p>
<p style="position:absolute;top:693px;left:90px;white-space:nowrap" class="ft03">6:0</p>
<p style="position:absolute;top:693px;left:137px;white-space:nowrap" class="ft03">LowerMask</p>
<p style="position:absolute;top:693px;left:232px;white-space:nowrap" class="ft03">7FH</p>
<p style="position:absolute;top:693px;left:298px;white-space:nowrap" class="ft03">Forced&#160;to&#160;1, writes&#160;are ignored.&#160;</p>
<p style="position:absolute;top:717px;left:86px;white-space:nowrap" class="ft03">31:7</p>
<p style="position:absolute;top:717px;left:137px;white-space:nowrap" class="ft03">MaskOrTableO</p>
<p style="position:absolute;top:734px;left:137px;white-space:nowrap" class="ft03">ffset</p>
<p style="position:absolute;top:717px;left:232px;white-space:nowrap" class="ft03">0</p>
<p style="position:absolute;top:717px;left:298px;white-space:nowrap" class="ft08">The&#160;use&#160;of&#160;this&#160;field depends on the&#160;value&#160;of&#160;IA32_RTIT_CTL.ToPA:<br/>0:&#160;This&#160;field&#160;holds bits 31:7&#160;of&#160;the&#160;mask value for the single,&#160;contiguous physical&#160;output&#160;</p>
<p style="position:absolute;top:755px;left:298px;white-space:nowrap" class="ft03">region. The size&#160;of&#160;this&#160;field indicates that&#160;regions can&#160;be&#160;of&#160;size&#160;128B up&#160;to&#160;4GB.&#160;This value&#160;</p>
<p style="position:absolute;top:771px;left:298px;white-space:nowrap" class="ft03">(combined with&#160;the lower&#160;7 bits,&#160;which&#160;are reserved&#160;to&#160;1) will be&#160;ANDed&#160;with&#160;the&#160;</p>
<p style="position:absolute;top:788px;left:298px;white-space:nowrap" class="ft03">OutputOffset&#160;field to&#160;determine the next&#160;write address. All 1s in this&#160;field should be&#160;</p>
<p style="position:absolute;top:804px;left:298px;white-space:nowrap" class="ft03">consecutive&#160;and starting&#160;at&#160;bit 7,&#160;otherwise the region&#160;will not&#160;be&#160;contiguous, and&#160;an&#160;</p>
<p style="position:absolute;top:821px;left:298px;white-space:nowrap" class="ft08">operational error<a href="o_fe12b1e2a880e0ce-1719.html">&#160;(Section&#160;36.3.9</a>) will&#160;be&#160;signaled&#160;when&#160;TraceEn&#160;is set.<br/>1:&#160;This&#160;field&#160;holds&#160;bits&#160;27:3&#160;of&#160;the offset&#160;pointer into&#160;the current ToPA&#160;table.&#160;This&#160;value can&#160;</p>
<p style="position:absolute;top:858px;left:298px;white-space:nowrap" class="ft03">be&#160;added&#160;to&#160;the&#160;IA32_RTIT_OUTPUT_BASE value&#160;to&#160;produce a pointer to the&#160;current ToPA&#160;</p>
<p style="position:absolute;top:875px;left:298px;white-space:nowrap" class="ft03">table&#160;entry,&#160;which&#160;itself is&#160;a&#160;pointer to&#160;the&#160;current output&#160;region. In&#160;this scenario, the lower&#160;7&#160;</p>
<p style="position:absolute;top:891px;left:298px;white-space:nowrap" class="ft03">reserved&#160;bits&#160;are ignored.&#160;This&#160;field&#160;supports tables&#160;up to&#160;256 MBytes in size.</p>
</div>
</body>
</html>
