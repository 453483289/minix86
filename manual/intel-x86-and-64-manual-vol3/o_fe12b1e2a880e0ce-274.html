<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 274</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#0860a8;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;font-family:Times;color:#000000;}
	.ft07{font-size:16px;font-family:Times;color:#0860a8;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page274-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce274.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">8-18&#160;Vol. 3A</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">MULTIPLE-PROCESSOR&#160;MANAGEMENT</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:100px;left:93px;white-space:nowrap" class="ft08">The&#160;Pentium processor and more recent processor families use&#160;branch-prediction techniques&#160;to&#160;improve&#160;<br/>performance by prefetching&#160;the destination&#160;of a&#160;branch&#160;instruction&#160;before&#160;the branch instruction is&#160;executed.&#160;<br/>Consequently,&#160;instruction&#160;execution is&#160;not deterministically serialized&#160;when a&#160;branch&#160;instruction&#160;is executed.</p>
<p style="position:absolute;top:189px;left:68px;white-space:nowrap" class="ft04">8.4&#160;</p>
<p style="position:absolute;top:189px;left:147px;white-space:nowrap" class="ft04">MULTIPLE-PROCESSOR (MP) INITIALIZATION</p>
<p style="position:absolute;top:225px;left:68px;white-space:nowrap" class="ft08">The IA-32 architecture&#160;(beginning with the&#160;P6&#160;family processors) defines a&#160;multiple-processor (MP) initialization&#160;<br/>protocol called the&#160;<i>Multiprocessor&#160;Specification Version 1.4</i>. This specification&#160;defines&#160;the boot protocol to&#160;be used&#160;<br/>by IA-32 processors in&#160;multiple-processor systems. (Here,&#160;<b>multiple processors</b>&#160;is defined as two or more proces-<br/>sors.) The MP initialization protocol&#160;has&#160;the following important features:</p>
<p style="position:absolute;top:296px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:297px;left:93px;white-space:nowrap" class="ft03">It&#160;supports&#160;controlled booting of multiple&#160;processors without&#160;requiring&#160;dedicated&#160;system hardware.</p>
<p style="position:absolute;top:319px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:319px;left:93px;white-space:nowrap" class="ft08">It allows hardware to&#160;initiate the&#160;booting&#160;of&#160;a system&#160;without the&#160;need for a&#160;dedicated&#160;signal or&#160;a predefined&#160;<br/>boot processor.</p>
<p style="position:absolute;top:358px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:358px;left:93px;white-space:nowrap" class="ft08">It&#160;allows&#160;all IA-32 processors to&#160;be&#160;booted in the same&#160;manner,&#160;including those&#160;supporting&#160;Intel Hyper-<br/>Threading Technology.</p>
<p style="position:absolute;top:397px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:397px;left:93px;white-space:nowrap" class="ft03">The&#160;MP initialization protocol&#160;also applies to&#160;MP&#160;systems using&#160;Intel 64 processors.</p>
<p style="position:absolute;top:421px;left:68px;white-space:nowrap" class="ft08">The mechanism for&#160;carrying&#160;out the&#160;MP initialization protocol&#160;differs&#160;depending&#160;on the&#160;Intel&#160;processor&#160;generations.&#160;<br/>The following bullets summarizes&#160;the&#160;evolution of the&#160;changes:</p>
<p style="position:absolute;top:460px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:460px;left:93px;white-space:nowrap" class="ft08"><b>For P6 family or older processors supporting&#160;MP operations</b>— The&#160;selection&#160;of the&#160;BSP&#160;and APs&#160;(see&#160;<br/><a href="o_fe12b1e2a880e0ce-274.html">Section 8.4.1, “BSP&#160;and AP&#160;Processors”) i</a>s&#160;handled through arbitration on the APIC&#160;bus, using&#160;BIPI and&#160;FIPI&#160;<br/>messages. These&#160;processor generations have&#160;CPUID signatures&#160;of (family=06H,&#160;extended_model=0,&#160;<br/>model&lt;=0DH),&#160;or family&#160;&lt;06H.&#160;See&#160;<a href="o_fe12b1e2a880e0ce-308.html">Section 8.11.1,&#160;“Overview of the&#160;MP Initialization Process For P6&#160;Family&#160;<br/>Processors” for a&#160;</a>complete&#160;discussion of MP initialization for&#160;P6&#160;family processors.</p>
<p style="position:absolute;top:548px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:549px;left:93px;white-space:nowrap" class="ft08"><b>Early generations of IA processors with&#160;family 0FH</b>&#160;— The&#160;selection of the&#160;BSP&#160;and&#160;APs&#160;(see&#160;<a href="o_fe12b1e2a880e0ce-274.html">Section&#160;<br/>8.4.1, “BSP&#160;and AP&#160;Processors”) is</a>&#160;handled through&#160;arbitration on the&#160;system&#160;bus, using&#160;BIPI&#160;and FIPI&#160;<br/>messages&#160;(see<a href="o_fe12b1e2a880e0ce-275.html">&#160;Section 8.4.3,&#160;“MP&#160;Initialization&#160;Protocol Algorithm for MP Systems”). These processor&#160;<br/></a>generations have&#160;CPUID&#160;signatures&#160;of&#160;family=0FH, model=0H, stepping&lt;=09H.</p>
<p style="position:absolute;top:620px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:621px;left:93px;white-space:nowrap" class="ft08"><b>Later generations of IA&#160;processors with family&#160;0FH,&#160;and&#160;IA&#160;processors with system bus&#160;</b>— The&#160;<br/>selection of the&#160;BSP&#160;and APs&#160;is handled through&#160;a special&#160;system bus&#160;cycle, without using&#160;BIPI and&#160;FIPI&#160;<br/>message arbitration (see<a href="o_fe12b1e2a880e0ce-275.html">&#160;Section 8.4.3, “MP Initialization&#160;Protocol Algorithm for MP Systems”). These&#160;<br/></a>processor generations have&#160;CPUID signatures&#160;of family=0FH&#160;with (model=0H,&#160;stepping&gt;=0AH) or (model &gt;0,&#160;<br/>all steppings);&#160;or family=06H,&#160;extended_model=0,&#160;model&gt;=0EH.</p>
<p style="position:absolute;top:709px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:709px;left:93px;white-space:nowrap" class="ft08"><b>All other modern IA&#160;processor&#160;generations supporting MP&#160;operations</b>— The&#160;selection of the&#160;BSP&#160;and&#160;<br/>APs in&#160;the system&#160;is handled by platform-specific arrangement of the&#160;combination of hardware,&#160;BIOS, and/or&#160;<br/>configuration input&#160;options.&#160;The basis of&#160;the selection&#160;mechanism is&#160;similar to those&#160;of the Later generations&#160;of&#160;<br/>family&#160;0FH&#160;and other Intel processor using system bus (see<a href="o_fe12b1e2a880e0ce-275.html">&#160;Section 8.4.3, “MP Initialization Protocol Algorithm&#160;<br/>for MP Systems”). Thes</a>e processor generations&#160;have&#160;CPUID signatures of family=06H, extended_model&gt;0.</p>
<p style="position:absolute;top:799px;left:68px;white-space:nowrap" class="ft08">The family,&#160;model,&#160;and stepping ID for a&#160;processor&#160;is given&#160;in the&#160;EAX register when the&#160;CPUID&#160;instruction is&#160;<br/>executed&#160;with&#160;a value of&#160;1 in&#160;the EAX register.</p>
<p style="position:absolute;top:866px;left:68px;white-space:nowrap" class="ft07">8.4.1&#160;</p>
<p style="position:absolute;top:866px;left:148px;white-space:nowrap" class="ft07">BSP and AP Processors</p>
<p style="position:absolute;top:897px;left:68px;white-space:nowrap" class="ft08">The MP initialization&#160;protocol defines two&#160;classes&#160;of&#160;processors: the&#160;bootstrap processor (BSP) and the application&#160;<br/>processors (APs).&#160;Following&#160;a power-up or RESET of an&#160;MP&#160;system, system hardware dynamically selects one of the&#160;<br/>processors on&#160;the system&#160;bus as&#160;the BSP.&#160;The&#160;remaining&#160;processors&#160;are designated&#160;as&#160;APs.<br/>As&#160;part&#160;of&#160;the BSP selection mechanism,&#160;the BSP flag&#160;is&#160;set in&#160;the&#160;IA32_APIC_BASE MSR&#160;(see&#160;<a href="o_fe12b1e2a880e0ce-371.html">Figure&#160;10-5</a>)&#160;of the&#160;<br/>BSP,&#160;indicating that&#160;it is&#160;the BSP.&#160;This&#160;flag is&#160;cleared for all&#160;other processors.&#160;<br/>The&#160;BSP&#160;executes&#160;the BIOS’s&#160;boot-strap code&#160;to&#160;configure the&#160;APIC&#160;environment, sets&#160;up&#160;system-wide&#160;data struc-<br/>tures, and starts&#160;and initializes&#160;the&#160;APs. When&#160;the BSP and APs are initialized, the BSP then&#160;begins&#160;executing&#160;the&#160;<br/>operating-system initialization code.</p>
</div>
</body>
</html>
