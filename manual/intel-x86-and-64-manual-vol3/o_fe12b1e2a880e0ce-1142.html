<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1142</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:16px;font-family:Times;color:#000000;}
	.ft05{font-size:18px;font-family:Times;color:#000000;}
	.ft06{font-size:8px;font-family:Times;color:#000000;}
	.ft07{font-size:18px;font-family:Times;color:#0860a8;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1142-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1142.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">27-24&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">VM&#160;EXITS</p>
<p style="position:absolute;top:100px;left:170px;white-space:nowrap" class="ft08"><a href="˛ˇ">Support,‚Äù</a>&#160;of&#160;<a href="˛ˇ"><i>Intel¬Æ 64&#160;and IA-32 Architectures Software&#160;Developer‚Äôs Manual, Volume 1</i></a>). (This does&#160;<br/>not&#160;apply&#160;to VM&#160;exits with basic&#160;exit reason ‚Äúmonitor&#160;trap&#160;flag.‚Äù)</p>
<p style="position:absolute;top:141px;left:144px;white-space:nowrap" class="ft02">In other&#160;cases, bit&#160;12&#160;is&#160;cleared to&#160;0.</p>
<p style="position:absolute;top:166px;left:119px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:165px;left:144px;white-space:nowrap" class="ft09">Bit&#160;14&#160;(BS)&#160;is set&#160;if&#160;RFLAGS.TF&#160;=&#160;1 in either of the&#160;following&#160;cases:<br/>‚Äî&#160;IA32_DEBUGCTL.BTF&#160;=&#160;0&#160;and the cause of&#160;a pending debug exception was the execution of a single&#160;</p>
<p style="position:absolute;top:205px;left:170px;white-space:nowrap" class="ft02">instruction.</p>
<p style="position:absolute;top:229px;left:144px;white-space:nowrap" class="ft02">‚Äî&#160;IA32_DEBUGCTL.BTF&#160;=&#160;1&#160;and&#160;the&#160;cause&#160;of a pending&#160;debug exception&#160;was a&#160;taken&#160;branch.</p>
<p style="position:absolute;top:255px;left:119px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:253px;left:144px;white-space:nowrap" class="ft08">Bit&#160;16 (RTM)&#160;is&#160;set if&#160;a debug exception&#160;(#DB) or&#160;a breakpoint exception&#160;(#BP)&#160;occurred&#160;inside&#160;an RTM&#160;<br/>region&#160;while&#160;advanced&#160;debugging&#160;of&#160;RTM&#160;transactional regions had&#160;been&#160;enabled.&#160;(This&#160;does&#160;not apply&#160;<br/>to VM&#160;exits with basic exit&#160;reason ‚Äúmonitor&#160;trap&#160;flag.‚Äù)</p>
<p style="position:absolute;top:310px;left:93px;white-space:nowrap" class="ft02">‚Äî&#160;Suppose that a VM&#160;exit is&#160;due to another&#160;reason (but&#160;not a&#160;debug exception) and&#160;occurs&#160;while&#160;there is&#160;MOV-</p>
<p style="position:absolute;top:327px;left:119px;white-space:nowrap" class="ft08">SS&#160;blocking&#160;of debug exceptions. In&#160;this case, the&#160;value saved sets bits corresponding&#160;to the causes of any&#160;<br/>debug&#160;exceptions that&#160;were pending&#160;at the&#160;time of&#160;the&#160;VM&#160;exit. If&#160;the VM&#160;exit occurs&#160;immediately after&#160;<br/>VM&#160;entry (no instructions were&#160;executed&#160;in&#160;VMX&#160;non-root operation),&#160;the&#160;value&#160;saved&#160;may&#160;match that&#160;<br/>which was&#160;loaded&#160;on VM&#160;entry (see<a href="o_fe12b1e2a880e0ce-1114.html">&#160;Section 26.6.3).</a>&#160;Otherwise,&#160;the&#160;following&#160;items apply:</p>
<p style="position:absolute;top:402px;left:119px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:400px;left:144px;white-space:nowrap" class="ft08">Bit&#160;12 (enabled breakpoint) is set to 1 if there&#160;was at&#160;least&#160;one matched data or I/O breakpoint&#160;that&#160;was&#160;<br/>enabled in DR7.&#160;Bit&#160;12&#160;is also&#160;set if it&#160;had been set&#160;on&#160;VM&#160;entry,&#160;causing there&#160;to be&#160;valid pending debug&#160;<br/>exceptions&#160;(see<a href="o_fe12b1e2a880e0ce-1114.html">&#160;Section&#160;26.6.3</a>)&#160;and&#160;the&#160;VM&#160;exit&#160;occurred&#160;before&#160;those&#160;exceptions&#160;were&#160;either&#160;delivered&#160;<br/>or lost. In&#160;other cases,&#160;bit&#160;12&#160;is cleared&#160;to 0.</p>
<p style="position:absolute;top:475px;left:119px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:474px;left:144px;white-space:nowrap" class="ft08">The setting of bit&#160;14 (BS) is&#160;implementation-specific. However,&#160;it is&#160;not set&#160;if&#160;RFLAGS.TF&#160;=&#160;0 or&#160;<br/>IA32_DEBUGCTL.BTF&#160;=&#160;1.</p>
<p style="position:absolute;top:514px;left:93px;white-space:nowrap" class="ft02">‚Äî&#160;The reserved&#160;bits in the&#160;field&#160;are&#160;cleared.</p>
<p style="position:absolute;top:536px;left:68px;white-space:nowrap" class="ft05">‚Ä¢</p>
<p style="position:absolute;top:537px;left:93px;white-space:nowrap" class="ft08">If the ‚Äúsave&#160;VMX-preemption timer&#160;value‚Äù VM-exit control is&#160;1, the&#160;value&#160;of timer&#160;is saved&#160;into&#160;the VMX-<br/>preemption timer-value&#160;field. This is&#160;the value loaded&#160;from this field&#160;on&#160;VM&#160;entry as subsequently decremented&#160;<br/>(see<a href="o_fe12b1e2a880e0ce-1085.html">&#160;Section 25.5.1)</a>.&#160;VM&#160;exits&#160;due to&#160;timer expiration save&#160;the&#160;value&#160;0.&#160;Other&#160;VM&#160;exits&#160;may also&#160;save&#160;the value&#160;<br/>0 if&#160;the timer&#160;expired during&#160;VM&#160;exit. (If the&#160;‚Äúsave&#160;VMX-preemption timer&#160;value‚Äù&#160;VM-exit control is&#160;0,&#160;VM&#160;exit&#160;<br/>does not modify&#160;the value of&#160;the VMX-preemption&#160;timer-value&#160;field.)</p>
<p style="position:absolute;top:625px;left:68px;white-space:nowrap" class="ft05">‚Ä¢</p>
<p style="position:absolute;top:625px;left:93px;white-space:nowrap" class="ft010">If&#160;the&#160;logical&#160;processor&#160;supports the&#160;1-setting of the ‚Äúenable&#160;EPT‚Äù VM-execution control, values are&#160;saved&#160;into&#160;<br/>the four (4)&#160;PDPTE fields as&#160;follows:<br/>‚Äî&#160;If the ‚Äúenable EPT‚Äù VM-execution&#160;control is 1 and the&#160;logical&#160;processor was using PAE paging at the time of&#160;</p>
<p style="position:absolute;top:682px;left:119px;white-space:nowrap" class="ft02">the&#160;VM&#160;exit,&#160;the&#160;PDPTE&#160;values&#160;currently in use&#160;are&#160;saved:</p>
<p style="position:absolute;top:680px;left:507px;white-space:nowrap" class="ft06">1</p>
<p style="position:absolute;top:708px;left:119px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:706px;left:144px;white-space:nowrap" class="ft02">The&#160;values&#160;saved into&#160;bits&#160;11:9&#160;of&#160;each of the&#160;fields&#160;is undefined.</p>
<p style="position:absolute;top:732px;left:119px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:730px;left:144px;white-space:nowrap" class="ft08">If the&#160;value saved into&#160;one of the&#160;fields&#160;has&#160;bit&#160;0&#160;(present) clear,&#160;the&#160;value saved into bits&#160;63:1&#160;of that&#160;<br/>field is&#160;undefined. That&#160;value need not&#160;correspond&#160;to&#160;the&#160;value that was&#160;loaded by VM&#160;entry or to&#160;any&#160;<br/>value&#160;that might&#160;have been loaded in&#160;VMX non-root operation.</p>
<p style="position:absolute;top:789px;left:119px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:787px;left:144px;white-space:nowrap" class="ft08">If the&#160;value saved into&#160;one of the&#160;fields&#160;has&#160;bit&#160;0&#160;(present) set, the&#160;value saved into&#160;bits&#160;63:12 of&#160;the&#160;<br/>field is&#160;a guest-physical&#160;address.</p>
<p style="position:absolute;top:828px;left:93px;white-space:nowrap" class="ft02">‚Äî&#160;If the ‚Äúenable EPT‚Äù VM-execution control is 0 or the&#160;logical processor was not using PAE paging at the&#160;time&#160;</p>
<p style="position:absolute;top:844px;left:119px;white-space:nowrap" class="ft02">of&#160;the&#160;VM&#160;exit, the&#160;values saved are undefined.</p>
<p style="position:absolute;top:900px;left:68px;white-space:nowrap" class="ft07">27.4 SAVING&#160;</p>
<p style="position:absolute;top:900px;left:224px;white-space:nowrap" class="ft07">MSRS</p>
<p style="position:absolute;top:936px;left:68px;white-space:nowrap" class="ft08">After processor state is&#160;saved&#160;to the&#160;guest-state area,&#160;values&#160;of&#160;MSRs may&#160;be&#160;stored into the&#160;VM-exit MSR-store&#160;<br/>area (see<a href="o_fe12b1e2a880e0ce-1064.html">&#160;Section 24.7.2). Specifically eac</a>h&#160;entry&#160;in that&#160;area&#160;(up&#160;to the&#160;number&#160;specified in the&#160;VM-exit&#160;MSR-store&#160;</p>
<p style="position:absolute;top:1005px;left:68px;white-space:nowrap" class="ft02">1.&#160;A logical processor uses&#160;PAE paging&#160;if&#160;CR0.PG&#160;= 1, CR4.PAE&#160;=&#160;1 and IA32_EFER.LMA&#160;= 0. Se<a href="o_fe12b1e2a880e0ce-117.html">e Section&#160;4.4</a>&#160;in&#160;the&#160;<a href="˛ˇ"><i>Intel¬Æ 64&#160;and&#160;IA-32&#160;</i></a></p>
<p style="position:absolute;top:1021px;left:89px;white-space:nowrap" class="ft03"><a href="˛ˇ"><i>Architectures Software&#160;Developer‚Äôs Manual, Volume 3A</i></a>. ‚ÄúEnable EPT‚Äù&#160;is&#160;a secondary processor-based VM-execution&#160;control.&#160;If&#160;bit&#160;31&#160;</p>
<p style="position:absolute;top:1038px;left:89px;white-space:nowrap" class="ft02">of&#160;the&#160;primary processor-based&#160;VM-execution&#160;controls&#160;is&#160;0,&#160;VM&#160;exit&#160;functions as if the ‚Äúenable EPT‚Äù&#160;VM-execution&#160;control&#160;were&#160;0.&#160;</p>
<p style="position:absolute;top:1054px;left:89px;white-space:nowrap" class="ft02">See<a href="o_fe12b1e2a880e0ce-1055.html">&#160;Section&#160;24.6.2.</a></p>
</div>
</body>
</html>
