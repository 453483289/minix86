<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1014</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:14px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1014-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1014.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">22-10&#160;Vol. 3B</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">ARCHITECTURE&#160;COMPATIBILITY</p>
<p style="position:absolute;top:99px;left:68px;white-space:nowrap" class="ft02">22.18.6.3&#160;&#160;&#160;Numeric Underflow Exception (#U)</p>
<p style="position:absolute;top:127px;left:68px;white-space:nowrap" class="ft05">When&#160;the underflow exception&#160;is masked on&#160;the 32-bit&#160;x87&#160;FPUs,&#160;the&#160;underflow&#160;exception is&#160;signaled&#160;when&#160;the&#160;<br/>result is&#160;tiny&#160;and inexact&#160;(see&#160;<a href="˛ˇ">Section&#160;4.9.1.5, ‚ÄúNumeric Underflow Exception&#160;(#U)‚Äù in&#160;<i>Intel¬Æ 64&#160;and&#160;IA-32&#160;Archi-<br/>tectures&#160;Software&#160;Developer‚Äôs Manual,&#160;Volume 1</i>). When</a>&#160;the underflow exception is unmasked and&#160;the instruction&#160;<br/>is supposed&#160;to store&#160;the&#160;result on the&#160;stack,&#160;the significand&#160;is rounded to&#160;the appropriate&#160;precision&#160;(according&#160;to&#160;<br/>the PC&#160;flag in the&#160;FPU&#160;control word, for those instructions&#160;controlled by&#160;PC,&#160;otherwise to extended&#160;precision), after&#160;<br/>adjusting&#160;the&#160;exponent.</p>
<p style="position:absolute;top:254px;left:68px;white-space:nowrap" class="ft02">22.18.6.4&#160;&#160;&#160;Exception Precedence</p>
<p style="position:absolute;top:283px;left:68px;white-space:nowrap" class="ft05">There is no difference&#160;in&#160;the precedence of&#160;the&#160;denormal-operand&#160;exception on the 32-bit x87 FPUs,&#160;whether it be&#160;<br/>masked&#160;or not. When&#160;the denormal-operand&#160;exception is&#160;not masked on&#160;the 16-bit&#160;IA-32&#160;math&#160;coprocessors, it&#160;<br/>takes precedence over all&#160;other&#160;exceptions.&#160;This difference&#160;causes no&#160;impact on existing&#160;software, but&#160;some&#160;<br/>unneeded&#160;normalization of&#160;denormalized operands&#160;is prevented&#160;on the&#160;Intel486&#160;processor and&#160;Intel&#160;387&#160;math&#160;<br/>coprocessor.</p>
<p style="position:absolute;top:393px;left:68px;white-space:nowrap" class="ft02">22.18.6.5&#160;&#160;&#160;CS&#160;and EIP For&#160;FPU&#160;Exceptions</p>
<p style="position:absolute;top:421px;left:68px;white-space:nowrap" class="ft05">On the Intel 32-bit x87 FPUs, the values from the CS and EIP registers saved for floating-point exceptions point to&#160;<br/>any prefixes that&#160;come&#160;before&#160;the&#160;floating-point instruction.&#160;On&#160;the 8087&#160;math coprocessor,&#160;the&#160;saved&#160;CS&#160;and&#160;IP&#160;<br/>registers points&#160;to the&#160;floating-point instruction.</p>
<p style="position:absolute;top:499px;left:68px;white-space:nowrap" class="ft02">22.18.6.6&#160;&#160;&#160;FPU Error Signals</p>
<p style="position:absolute;top:527px;left:68px;white-space:nowrap" class="ft05">The floating-point&#160;error signals&#160;to&#160;the P6&#160;family,&#160;Pentium,&#160;and Intel486&#160;processors do&#160;not pass through an interrupt&#160;<br/>controller; an INT#&#160;signal from an&#160;Intel&#160;387,&#160;Intel&#160;287 or&#160;8087&#160;math coprocessors does. If&#160;an 8086 processor uses&#160;<br/>another&#160;exception for the&#160;8087 interrupt, both&#160;exception&#160;vectors&#160;should call&#160;the&#160;floating-point-error exception&#160;<br/>handler.&#160;Some instructions in&#160;a floating-point-error exception handler may&#160;need to&#160;be&#160;deleted&#160;if they&#160;use the&#160;inter-<br/>rupt controller.&#160;The&#160;P6&#160;family,&#160;Pentium,&#160;and Intel486&#160;processors&#160;have&#160;signals that,&#160;with&#160;the addition of external&#160;<br/>logic, support reporting for emulation of&#160;the&#160;interrupt mechanism&#160;used in&#160;many&#160;personal&#160;computers.<br/>On the&#160;P6&#160;family, Pentium, and Intel486&#160;processors, an&#160;undefined floating-point&#160;opcode&#160;will cause&#160;an invalid-<br/>opcode&#160;exception (#UD,&#160;interrupt vector 6).&#160;Undefined floating-point&#160;opcodes, like legal floating-point&#160;opcodes,&#160;<br/>cause&#160;a device&#160;not available&#160;exception (#NM, interrupt vector&#160;7) when either the&#160;TS&#160;or EM&#160;flag in&#160;control&#160;register&#160;<br/>CR0&#160;is set.&#160;The P6&#160;family,&#160;Pentium, and&#160;Intel486 processors do not check&#160;for&#160;floating-point error&#160;conditions on&#160;<br/>encountering&#160;an undefined floating-point&#160;opcode.</p>
<p style="position:absolute;top:744px;left:68px;white-space:nowrap" class="ft02">22.18.6.7&#160;&#160;&#160;Assertion of&#160;the FERR#&#160;Pin</p>
<p style="position:absolute;top:772px;left:68px;white-space:nowrap" class="ft05">When using&#160;the MS-DOS compatibility mode&#160;for handing&#160;floating-point exceptions, the&#160;FERR# pin&#160;must&#160;be&#160;<br/>connected&#160;to an&#160;input to an&#160;external interrupt controller.&#160;An external&#160;interrupt is&#160;then generated when the&#160;FERR#&#160;<br/>output&#160;drives the&#160;input to&#160;the interrupt&#160;controller and the&#160;interrupt controller&#160;in turn drives&#160;the INTR pin&#160;on the&#160;<br/>processor.&#160;<br/>For&#160;the P6 family and&#160;Intel386 processors,&#160;an unmasked&#160;floating-point exception&#160;always&#160;causes the FERR# pin&#160;to&#160;<br/>be&#160;asserted&#160;upon&#160;completion of the&#160;instruction that caused&#160;the exception. For the&#160;Pentium&#160;and Intel486&#160;proces-<br/>sors,&#160;an unmasked&#160;floating-point exception&#160;may cause the&#160;FERR#&#160;pin to&#160;be&#160;asserted either at&#160;the end of the&#160;<br/>instruction causing&#160;the&#160;exception or immediately before execution of the next floating-point instruction. (Note that&#160;<br/>the next floating-point&#160;instruction would not be executed&#160;until the&#160;pending&#160;unmasked exception has been handled.)&#160;<br/>Se<a href="˛ˇ">e Appendix D,&#160;‚ÄúGuidelines&#160;for Writing x87 FPU&#160;Extension Handlers,‚Äù</a>&#160;<a href="˛ˇ">in the&#160;<i>Intel¬Æ 64&#160;and&#160;IA-32&#160;Architectures&#160;<br/>Software Developer‚Äôs Manual, Volume&#160;1</i>, for a&#160;</a>complete&#160;description of the&#160;required&#160;mechanism for handling&#160;<br/>floating-point&#160;exceptions using&#160;the MS-DOS compatibility&#160;mode.<br/>Using FERR# and&#160;IGNNE#&#160;to handle&#160;floating-point exception is&#160;deprecated by modern&#160;operating systems;&#160;this&#160;<br/>approach&#160;also limits&#160;newer processors to operate&#160;with&#160;one logical processor active.</p>
</div>
</body>
</html>
