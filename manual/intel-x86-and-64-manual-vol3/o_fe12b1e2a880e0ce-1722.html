<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1722</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:14px;font-family:Times;color:#0860a8;}
	.ft03{font-size:12px;font-family:Times;color:#0860a8;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:8px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:20px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:19px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1722-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1722.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">36-38&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">INTEL® PROCESSOR TRACE</p>
<p style="position:absolute;top:99px;left:68px;white-space:nowrap" class="ft02">36.4.2.2 &#160;&#160;Target&#160;IP (TIP) Packet</p>
<p style="position:absolute;top:742px;left:68px;white-space:nowrap" class="ft03">IP Compression</p>
<p style="position:absolute;top:767px;left:68px;white-space:nowrap" class="ft06">The IP&#160;payload in a&#160;TIP.&#160;FUP,&#160;TIP.PGE, or TIP.PGD&#160;packet&#160;can vary&#160;in&#160;size,&#160;based&#160;on&#160;the mode&#160;of execution,&#160;and&#160;the&#160;<br/>use of IP compression.&#160;IP&#160;compression&#160;is an&#160;optional&#160;compression technique the processor may choose to&#160;employ&#160;<br/>to reduce bandwidth.&#160;With IP compression, the&#160;IP&#160;to&#160;be&#160;represented&#160;in the&#160;payload&#160;is compared&#160;with the&#160;last IP&#160;<br/>sent&#160;out,&#160;via&#160;any&#160;of&#160;FUP,&#160;TIP,&#160;TIP.PGE,&#160;or&#160;TIP.PGD.&#160;If&#160;that&#160;previous IP had&#160;the same upper (most significant) address&#160;<br/>bytes, those matching bytes may be suppressed in the current packet. The processor maintains an internal state of&#160;<br/>the “Last IP”&#160;that was&#160;encoded in trace&#160;packets, thus&#160;the&#160;decoder&#160;will&#160;need to keep track of&#160;the&#160;“Last&#160;IP” state in&#160;<br/>software,&#160;to&#160;match fidelity with packets generated by hardware. “Last IP” is initialized&#160;to&#160;zero, hence if the first IP&#160;<br/>in&#160;the trace may be compressed&#160;if&#160;the upper&#160;bytes are&#160;zeroes.<br/>The “IPBytes” field of&#160;the IP packets&#160;(FUP,&#160;TIP,&#160;TIP.PGE, TIP.PGD) serves&#160;to indicate how many&#160;bytes of payload&#160;are&#160;<br/>provided, and&#160;how&#160;the decoder&#160;should fill in&#160;any suppressed bytes. The&#160;algorithm for&#160;reconstructing the&#160;IP for&#160;a&#160;<br/>TIP/FUP&#160;packet is&#160;shown&#160;in&#160;the table&#160;below.</p>
<p style="position:absolute;top:142px;left:342px;white-space:nowrap" class="ft03">Table&#160;36-17.&#160;IP&#160;Packet&#160;Definition</p>
<p style="position:absolute;top:166px;left:74px;white-space:nowrap" class="ft04">Name</p>
<p style="position:absolute;top:166px;left:177px;white-space:nowrap" class="ft04">Target&#160;IP (TIP) Packet</p>
<p style="position:absolute;top:190px;left:74px;white-space:nowrap" class="ft04">Packet&#160;Format</p>
<p style="position:absolute;top:442px;left:74px;white-space:nowrap" class="ft04">Dependencies</p>
<p style="position:absolute;top:442px;left:177px;white-space:nowrap" class="ft04">PacketEn</p>
<p style="position:absolute;top:442px;left:311px;white-space:nowrap" class="ft04">Generation&#160;Sce-</p>
<p style="position:absolute;top:459px;left:311px;white-space:nowrap" class="ft04">nario</p>
<p style="position:absolute;top:442px;left:427px;white-space:nowrap" class="ft08">Indirect branch&#160;(including un-compressed RET), far branch, interrupt,&#160;<br/>exception,&#160;INIT, SIPI, (VM exit, VM&#160;entry,)</p>
<p style="position:absolute;top:460px;left:656px;white-space:nowrap" class="ft05">1</p>
<p style="position:absolute;top:462px;left:662px;white-space:nowrap" class="ft04">&#160;TSX abort,&#160;(EENTER,&#160;EEXIT,&#160;</p>
<p style="position:absolute;top:483px;left:427px;white-space:nowrap" class="ft04">ERESUME,&#160;AEX)</p>
<p style="position:absolute;top:480px;left:515px;white-space:nowrap" class="ft05">2</p>
<p style="position:absolute;top:483px;left:522px;white-space:nowrap" class="ft04">.</p>
<p style="position:absolute;top:662px;left:70px;white-space:nowrap" class="ft01">NOTES:</p>
<p style="position:absolute;top:683px;left:68px;white-space:nowrap" class="ft09">1.&#160;If IA32_VMX_MISC[bit&#160;14] reports 1.<br/>2.&#160;In a debug&#160;enclave.</p>
<p style="position:absolute;top:507px;left:74px;white-space:nowrap" class="ft04">Description</p>
<p style="position:absolute;top:507px;left:177px;white-space:nowrap" class="ft04">Provides&#160;the&#160;target&#160;for&#160;some&#160;control&#160;flow&#160;transfers</p>
<p style="position:absolute;top:531px;left:74px;white-space:nowrap" class="ft04">Application</p>
<p style="position:absolute;top:531px;left:177px;white-space:nowrap" class="ft010">Anytime&#160;a TIP&#160;is encountered,&#160;it indicates that&#160;control was transferred to&#160;the IP&#160;provided&#160;in the payload.<br/>The source of&#160;this control flow&#160;change, and hence the IP&#160;or&#160;instruction to which&#160;it binds,&#160;depends on&#160;the packets&#160;</p>
<p style="position:absolute;top:571px;left:177px;white-space:nowrap" class="ft04">that&#160;precede the&#160;TIP.&#160;If a&#160;TIP is&#160;encountered and all preceding&#160;packets&#160;have&#160;already been&#160;bound, then&#160;the TIP will&#160;</p>
<p style="position:absolute;top:588px;left:177px;white-space:nowrap" class="ft04">apply to&#160;the&#160;upcoming&#160;indirect branch, far branch, or VMRESUME. However,&#160;if&#160;there&#160;was&#160;a preceding FUP that&#160;</p>
<p style="position:absolute;top:604px;left:177px;white-space:nowrap" class="ft04">remains unbound,&#160;it will bind&#160;to&#160;the TIP.&#160;Here, the TIP provides the target&#160;of&#160;an asynchronous event or&#160;TSX abort&#160;</p>
<p style="position:absolute;top:621px;left:177px;white-space:nowrap" class="ft04">that&#160;occurred at&#160;the IP given in the FUP payload.&#160;Note that&#160;there&#160;may&#160;be&#160;other&#160;packets,&#160;in&#160;addition&#160;to&#160;the&#160;FUP,&#160;which&#160;</p>
<p style="position:absolute;top:637px;left:177px;white-space:nowrap" class="ft04">will bind&#160;to&#160;the&#160;TIP packet.&#160;See the&#160;packet&#160;application descriptions&#160;for&#160;other&#160;packets for details.</p>
<p style="position:absolute;top:212px;left:249px;white-space:nowrap" class="ft04">7</p>
<p style="position:absolute;top:212px;left:311px;white-space:nowrap" class="ft04">6</p>
<p style="position:absolute;top:212px;left:373px;white-space:nowrap" class="ft04">5</p>
<p style="position:absolute;top:212px;left:435px;white-space:nowrap" class="ft04">4</p>
<p style="position:absolute;top:212px;left:497px;white-space:nowrap" class="ft04">3</p>
<p style="position:absolute;top:212px;left:559px;white-space:nowrap" class="ft04">2</p>
<p style="position:absolute;top:212px;left:621px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:212px;left:684px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:233px;left:187px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:233px;left:249px;white-space:nowrap" class="ft04">IPBytes</p>
<p style="position:absolute;top:233px;left:435px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:233px;left:497px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:233px;left:559px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:233px;left:621px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:233px;left:684px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:254px;left:187px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:254px;left:249px;white-space:nowrap" class="ft04">TargetIP[7:0]</p>
<p style="position:absolute;top:275px;left:187px;white-space:nowrap" class="ft04">2</p>
<p style="position:absolute;top:275px;left:249px;white-space:nowrap" class="ft04">TargetIP[15:8]</p>
<p style="position:absolute;top:296px;left:187px;white-space:nowrap" class="ft04">3</p>
<p style="position:absolute;top:296px;left:249px;white-space:nowrap" class="ft04">TargetIP[23:16]</p>
<p style="position:absolute;top:317px;left:187px;white-space:nowrap" class="ft04">4</p>
<p style="position:absolute;top:317px;left:249px;white-space:nowrap" class="ft04">TargetIP[31:24]</p>
<p style="position:absolute;top:338px;left:187px;white-space:nowrap" class="ft04">5</p>
<p style="position:absolute;top:338px;left:249px;white-space:nowrap" class="ft04">TargetIP[39:32]</p>
<p style="position:absolute;top:359px;left:187px;white-space:nowrap" class="ft04">6</p>
<p style="position:absolute;top:359px;left:249px;white-space:nowrap" class="ft04">TargetIP[47:40]</p>
<p style="position:absolute;top:380px;left:187px;white-space:nowrap" class="ft04">7</p>
<p style="position:absolute;top:380px;left:249px;white-space:nowrap" class="ft04">TargetIP[55:48]</p>
<p style="position:absolute;top:401px;left:187px;white-space:nowrap" class="ft04">8</p>
<p style="position:absolute;top:401px;left:249px;white-space:nowrap" class="ft04">TargetIP[63:56]</p>
</div>
</body>
</html>
