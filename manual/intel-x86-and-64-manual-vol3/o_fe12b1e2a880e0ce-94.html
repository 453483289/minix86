<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 94</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#0860a8;}
	.ft04{font-size:8px;font-family:Times;color:#000000;}
	.ft05{font-size:3px;font-family:Times;color:#000000;}
	.ft06{font-size:18px;font-family:Times;color:#000000;}
	.ft07{font-size:16px;font-family:Times;color:#0860a8;}
	.ft08{font-size:9px;font-family:Times;color:#0860a8;}
	.ft09{font-size:11px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft012{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft013{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page94-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce094.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">3-6&#160;Vol. 3A</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">PROTECTED-MODE&#160;MEMORY&#160;MANAGEMENT</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft010">protection facilities.&#160;For example,&#160;it lets read-write&#160;protection be enforced on a&#160;page-by-page&#160;basis. The paging&#160;<br/>mechanism&#160;also provides two-level user-supervisor protection that&#160;can&#160;also be specified on a&#160;page-by-page&#160;basis.</p>
<p style="position:absolute;top:172px;left:68px;white-space:nowrap" class="ft03">3.3 PHYSICAL&#160;</p>
<p style="position:absolute;top:172px;left:245px;white-space:nowrap" class="ft03">ADDRESS&#160;</p>
<p style="position:absolute;top:172px;left:339px;white-space:nowrap" class="ft03">SPACE</p>
<p style="position:absolute;top:208px;left:68px;white-space:nowrap" class="ft02">In&#160;protected mode,&#160;the IA-32 architecture&#160;provides&#160;a normal physical address&#160;space&#160;of 4&#160;GBytes (2</p>
<p style="position:absolute;top:206px;left:737px;white-space:nowrap" class="ft04">32</p>
<p style="position:absolute;top:216px;left:750px;white-space:nowrap" class="ft05">&#160;</p>
<p style="position:absolute;top:208px;left:752px;white-space:nowrap" class="ft02">bytes).&#160;This&#160;</p>
<p style="position:absolute;top:225px;left:68px;white-space:nowrap" class="ft010">is the&#160;address space that the&#160;processor&#160;can address on&#160;its&#160;address bus.&#160;This address space is&#160;flat (unsegmented),&#160;<br/>with addresses&#160;ranging continuously&#160;from 0 to&#160;FFFFFFFFH.&#160;This physical address&#160;space&#160;can be&#160;mapped&#160;to read-<br/>write&#160;memory,&#160;read-only memory, and memory&#160;mapped I/O.&#160;The memory mapping facilities described in&#160;this&#160;<br/>chapter&#160;can be&#160;used&#160;to&#160;divide&#160;this&#160;physical&#160;memory&#160;up&#160;into segments and/or&#160;pages.<br/>Starting&#160;with&#160;the&#160;Pentium Pro processor,&#160;the IA-32 architecture also supports an extension&#160;of the physical address&#160;<br/>space&#160;to 2</p>
<p style="position:absolute;top:312px;left:137px;white-space:nowrap" class="ft04">36</p>
<p style="position:absolute;top:315px;left:151px;white-space:nowrap" class="ft02">&#160;bytes (64&#160;GBytes); with a&#160;maximum physical&#160;address&#160;of FFFFFFFFFH.&#160;This extension&#160;is invoked in&#160;</p>
<p style="position:absolute;top:331px;left:68px;white-space:nowrap" class="ft02">either of two ways:</p>
<p style="position:absolute;top:353px;left:68px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:354px;left:93px;white-space:nowrap" class="ft02">Using&#160;the&#160;physical address&#160;extension&#160;(PAE) flag,&#160;located in&#160;bit&#160;5 of control&#160;register&#160;CR4.&#160;</p>
<p style="position:absolute;top:376px;left:68px;white-space:nowrap" class="ft06">‚Ä¢</p>
<p style="position:absolute;top:376px;left:93px;white-space:nowrap" class="ft02">Using&#160;the&#160;36-bit page&#160;size extension&#160;(PSE-36)&#160;feature (introduced in&#160;the Pentium&#160;III&#160;processors).</p>
<p style="position:absolute;top:400px;left:68px;white-space:nowrap" class="ft010">Physical&#160;address support has&#160;since&#160;been extended&#160;beyond&#160;36 bits.&#160;<a href="o_fe12b1e2a880e0ce-105.html">See Chapter&#160;4,&#160;‚ÄúPaging‚Äù for more&#160;</a>information&#160;<br/>about&#160;36-bit physical addressing.</p>
<p style="position:absolute;top:467px;left:68px;white-space:nowrap" class="ft07">3.3.1 Intel</p>
<p style="position:absolute;top:468px;left:185px;white-space:nowrap" class="ft08">¬Æ&#160;</p>
<p style="position:absolute;top:467px;left:201px;white-space:nowrap" class="ft07">64&#160;Processors and Physical Address Space</p>
<p style="position:absolute;top:498px;left:68px;white-space:nowrap" class="ft012">On processors that support Intel&#160;64&#160;architecture&#160;(CPUID.80000001H:EDX[29]&#160;=&#160;1), the&#160;size of the physical&#160;<br/>address range is&#160;implementation-specific and&#160;indicated&#160;by CPUID.80000008H:EAX[bits&#160;7-0].&#160;<br/>For&#160;the format of information&#160;returned&#160;in EAX,&#160;see&#160;‚ÄúCPUID‚ÄîCPU Identification‚Äù&#160;<a href="˛ˇ">in Chapter&#160;3 of t</a>he&#160;<a href="˛ˇ"><i>Intel¬Æ 64 and&#160;<br/>IA-32&#160;Architectures&#160;Software Developer‚Äôs Manual, Volume&#160;2A</i>. See&#160;</a><a href="o_fe12b1e2a880e0ce-105.html">also: Chapter 4,&#160;‚ÄúPaging.‚Äù</a></p>
<p style="position:absolute;top:610px;left:68px;white-space:nowrap" class="ft03">3.4&#160;</p>
<p style="position:absolute;top:610px;left:147px;white-space:nowrap" class="ft03">LOGICAL AND LINEAR ADDRESSES</p>
<p style="position:absolute;top:646px;left:68px;white-space:nowrap" class="ft010">At&#160;the&#160;system-architecture level&#160;in protected mode, the processor uses two stages&#160;of address&#160;translation to arrive&#160;<br/>at&#160;a physical address:&#160;logical-address translation&#160;and linear&#160;address space&#160;paging.<br/>Even with the&#160;minimum use&#160;of segments,&#160;every&#160;byte&#160;in&#160;the processor‚Äôs&#160;address space&#160;is accessed&#160;with&#160;a&#160;logical&#160;<br/>address. A&#160;logical&#160;address consists of a 16-bit&#160;segment&#160;selector and a&#160;32-bit offset&#160;(see<a href="o_fe12b1e2a880e0ce-95.html">&#160;Figure&#160;3-5).</a>&#160;The segment&#160;<br/>selector&#160;identifies&#160;the&#160;segment&#160;the&#160;byte is located in and&#160;the&#160;offset specifies the location&#160;of the byte&#160;in the segment&#160;<br/>relative to&#160;the base address&#160;of the&#160;segment.&#160;<br/>The processor translates every logical address&#160;into&#160;a linear address. A linear address is&#160;a 32-bit&#160;address in&#160;the&#160;<br/>processor‚Äôs linear address&#160;space. Like&#160;the physical address&#160;space, the&#160;linear address&#160;space is&#160;a flat&#160;(unsegmented),&#160;<br/>2</p>
<p style="position:absolute;top:791px;left:76px;white-space:nowrap" class="ft04">32</p>
<p style="position:absolute;top:793px;left:90px;white-space:nowrap" class="ft02">-byte address&#160;space,&#160;with&#160;addresses ranging from&#160;0&#160;to&#160;FFFFFFFFH. The&#160;linear&#160;address space contains&#160;all the&#160;</p>
<p style="position:absolute;top:810px;left:68px;white-space:nowrap" class="ft011">segments and&#160;system&#160;tables defined&#160;for&#160;a system.&#160;<br/>To&#160;translate a&#160;logical&#160;address into&#160;a linear&#160;address,&#160;the processor does&#160;the&#160;following:<br/>1.&#160;Uses the offset in the segment selector to locate the&#160;segment descriptor for the&#160;segment in the GDT or LDT and&#160;</p>
<p style="position:absolute;top:874px;left:93px;white-space:nowrap" class="ft010">reads&#160;it into&#160;the processor.&#160;(This step is&#160;needed only&#160;when&#160;a new segment selector is&#160;loaded&#160;into&#160;a segment&#160;<br/>register.)</p>
<p style="position:absolute;top:915px;left:68px;white-space:nowrap" class="ft02">2.&#160;Examines&#160;the segment descriptor to&#160;check the&#160;access&#160;rights&#160;and range&#160;of&#160;the segment to&#160;insure that the&#160;</p>
<p style="position:absolute;top:931px;left:93px;white-space:nowrap" class="ft02">segment is&#160;accessible and that the&#160;offset is&#160;within the&#160;limits of the segment.</p>
<p style="position:absolute;top:955px;left:68px;white-space:nowrap" class="ft02">3.&#160;Adds&#160;the base address&#160;of the&#160;segment&#160;from the&#160;segment&#160;descriptor&#160;to the&#160;offset to&#160;form&#160;a&#160;linear address.</p>
</div>
</body>
</html>
