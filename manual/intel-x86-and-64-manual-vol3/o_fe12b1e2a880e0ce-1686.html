<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1686</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:18px;font-family:Times;color:#0860a8;}
	.ft07{font-size:16px;font-family:Times;color:#0860a8;}
	.ft08{font-size:12px;font-family:Times;color:#0860a8;}
	.ft09{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft012{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1686-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1686.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">36-2&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">INTEL¬Æ PROCESSOR TRACE</p>
<p style="position:absolute;top:100px;left:93px;white-space:nowrap" class="ft02">‚Äî&#160;Overflow&#160;&#160;(<b>OVF</b>) packets: OVF packets are&#160;sent when the&#160;processor experiences&#160;an internal buffer overflow,&#160;</p>
<p style="position:absolute;top:117px;left:119px;white-space:nowrap" class="ft09">resulting in packets being&#160;dropped. This packet&#160;notifies the decoder of the loss and can&#160;help&#160;the&#160;decoder to&#160;<br/>respond&#160;to this situation.</p>
<p style="position:absolute;top:155px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:156px;left:93px;white-space:nowrap" class="ft010">Packets&#160;about control flow&#160;information:<br/>‚Äî&#160;Taken&#160;&#160;Not-Taken&#160;&#160;(<b>TNT</b>)&#160;packets:&#160;TNT packets&#160;track the ‚Äúdirection‚Äù of direct conditional branches (taken&#160;or&#160;</p>
<p style="position:absolute;top:196px;left:119px;white-space:nowrap" class="ft02">not taken).</p>
<p style="position:absolute;top:220px;left:93px;white-space:nowrap" class="ft02">‚Äî&#160;Target&#160;&#160;IP&#160;&#160;(<b>TIP</b>)&#160;packets: TIP packets&#160;record&#160;the target IP of indirect branches,&#160;exceptions,&#160;interrupts, and&#160;</p>
<p style="position:absolute;top:237px;left:119px;white-space:nowrap" class="ft09">other branches or events. These&#160;packets can contain the IP, although that IP value&#160;may be&#160;compressed by&#160;<br/>eliminating upper bytes that match the last IP. There are&#160;various&#160;types of TIP packets; they are covered in&#160;<br/>more&#160;de<a href="o_fe12b1e2a880e0ce-1722.html">tail in Section 36.4.2.2.</a></p>
<p style="position:absolute;top:294px;left:93px;white-space:nowrap" class="ft02">‚Äî&#160;Flow Update Packets (<b>FUP</b>):&#160;FUPs&#160;provide&#160;the&#160;source IP addresses for&#160;asynchronous events (interrupt and&#160;</p>
<p style="position:absolute;top:310px;left:119px;white-space:nowrap" class="ft02">exceptions),&#160;as&#160;well as&#160;other cases where&#160;the&#160;source&#160;address cannot be determined&#160;from&#160;the binary.</p>
<p style="position:absolute;top:334px;left:93px;white-space:nowrap" class="ft02">‚Äî&#160;<b>MODE</b>&#160;packets: These&#160;packets provide&#160;the&#160;decoder with&#160;important processor execution information so&#160;that&#160;</p>
<p style="position:absolute;top:351px;left:119px;white-space:nowrap" class="ft09">it can properly interpret&#160;the&#160;dis-assembled&#160;binary&#160;and trace log. MODE&#160;packets&#160;have&#160;a&#160;variety of formats&#160;<br/>that indicate details&#160;such&#160;as the&#160;execution&#160;mode (16-bit, 32-bit, or&#160;64-bit).</p>
<p style="position:absolute;top:389px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:390px;left:93px;white-space:nowrap" class="ft011">Packets&#160;inserted by software:<br/>‚Äî&#160;PTWRITE&#160;(PTW) packets: includes the&#160;value&#160;of the&#160;operand passed&#160;to the&#160;PTWRITE instruction (see&#160;</p>
<p style="position:absolute;top:430px;left:119px;white-space:nowrap" class="ft012"><a href="˛ˇ">‚ÄúPTWRITE&#160;- Write&#160;Data to a&#160;Processor&#160;Trace&#160;Packet‚Äù i</a>n<a href="˛ˇ">&#160;<i>Intel¬Æ 64&#160;and&#160;IA-32 Architectures Software&#160;<br/>Developer‚Äôs Manual, Volume&#160;2B</i></a>).</p>
<p style="position:absolute;top:469px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:469px;left:93px;white-space:nowrap" class="ft010">Packets&#160;about processor power&#160;management events:<br/>‚Äî&#160;MWAIT&#160;packets:&#160;Indicate&#160;successful completion of&#160;an MWAIT&#160;operation&#160;to a&#160;C-state deeper than C0.0.<br/>‚Äî&#160;Power State&#160;Entry (PWRE) packets: Indicate entry&#160;to a&#160;C-state deeper than C0.0.<br/>‚Äî&#160;Power&#160;State Exit (PWRX)&#160;packets: Indicate exit&#160;from a&#160;C-state deeper than C0.0,&#160;returning to&#160;C0.<br/>‚Äî&#160;Execution Stopped (EXSTOP) packets: Indicate&#160;that&#160;software&#160;execution has stopped, due&#160;to events&#160;such&#160;as&#160;</p>
<p style="position:absolute;top:582px;left:119px;white-space:nowrap" class="ft02">P-state&#160;change, C-state&#160;change, or thermal&#160;throttling.</p>
<p style="position:absolute;top:637px;left:68px;white-space:nowrap" class="ft06">36.2&#160;</p>
<p style="position:absolute;top:637px;left:147px;white-space:nowrap" class="ft06">INTEL¬Æ PROCESSOR TRACE OPERATIONAL MODEL</p>
<p style="position:absolute;top:672px;left:68px;white-space:nowrap" class="ft09">This section describes&#160;the overall&#160;Intel Processor Trace&#160;mechanism and&#160;the essential concepts relevant&#160;to how it&#160;<br/>operates.</p>
<p style="position:absolute;top:739px;left:68px;white-space:nowrap" class="ft07">36.2.1&#160;</p>
<p style="position:absolute;top:739px;left:148px;white-space:nowrap" class="ft07">Change of&#160;Flow&#160;Instruction (COFI) Tracing</p>
<p style="position:absolute;top:768px;left:68px;white-space:nowrap" class="ft09">A&#160;basic&#160;program&#160;block is&#160;a section&#160;of code&#160;where no&#160;jumps or&#160;branches&#160;occur.&#160;The instruction pointers (IPs) in this&#160;<br/>block&#160;of&#160;code&#160;need not be traced, as&#160;the processor will&#160;execute them from start&#160;to end without&#160;redirecting code&#160;<br/>flow. Instructions such as&#160;branches, and events such as&#160;exceptions or&#160;interrupts, can change&#160;the&#160;program&#160;flow.&#160;<br/>These&#160;instructions&#160;and events that&#160;change program flow&#160;are&#160;called Change of Flow Instructions (COFI).&#160;There&#160;are&#160;<br/>three&#160;categories of COFI:</p>
<p style="position:absolute;top:856px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:856px;left:93px;white-space:nowrap" class="ft02">Direct transfer&#160;COFI.</p>
<p style="position:absolute;top:878px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:879px;left:93px;white-space:nowrap" class="ft02">Indirect transfer&#160;COFI.</p>
<p style="position:absolute;top:901px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:901px;left:93px;white-space:nowrap" class="ft02">Far&#160;transfer&#160;COFI.</p>
<p style="position:absolute;top:924px;left:68px;white-space:nowrap" class="ft012">The following subsections&#160;describe&#160;the COFI events&#160;that&#160;result&#160;in trace packet&#160;genera<a href="o_fe12b1e2a880e0ce-1686.html">tion.&#160;Table&#160;36-1</a>&#160;lists&#160;branch&#160;<br/>instruction by&#160;COFI&#160;types. For detailed&#160;description of specific instructions,&#160;see&#160;<a href="˛ˇ"><i>Intel¬Æ 64 and IA-32 Architectures&#160;<br/>Software Developer‚Äôs Manual</i>.</a></p>
<p style="position:absolute;top:988px;left:288px;white-space:nowrap" class="ft08">Table&#160;36-1. COFI&#160;Type for Branch Instructions&#160;</p>
<p style="position:absolute;top:1012px;left:126px;white-space:nowrap" class="ft02">COFI Type</p>
<p style="position:absolute;top:1012px;left:492px;white-space:nowrap" class="ft02">Instructions</p>
<p style="position:absolute;top:1036px;left:74px;white-space:nowrap" class="ft02">Conditional Branch</p>
<p style="position:absolute;top:1036px;left:250px;white-space:nowrap" class="ft02">JA, JAE,&#160;JB, JBE, JC, JCXZ&lt; JECXZ,&#160;JRCXZ,&#160;JE,&#160;JG,&#160;JGE,&#160;JL,&#160;JLE, JNA, JNAE, JNB, JNBE, JNC, JNE,&#160;JNG,&#160;JNGE,&#160;</p>
<p style="position:absolute;top:1053px;left:250px;white-space:nowrap" class="ft02">JNL,&#160;JNLE, JNO,&#160;JNP,&#160;JNS,&#160;JNZ,&#160;JO, JP, JPE,&#160;JPO,&#160;JS, JZ, LOOP, LOOPE, LOOPNE, LOOPNZ, LOOPZ</p>
</div>
</body>
</html>
