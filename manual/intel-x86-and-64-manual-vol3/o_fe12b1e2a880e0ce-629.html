<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 629</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:14px;font-family:Times;color:#0860a8;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:8px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:8px;line-height:11px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page629-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce629.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:761px;white-space:nowrap" class="ft00">Vol. 3B&#160;17-55</p>
<p style="position:absolute;top:47px;left:425px;white-space:nowrap" class="ft01">DEBUG, BRANCH&#160;PROFILE, TSC, AND RESOURCE MONITORING FEATURES</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:100px;left:95px;white-space:nowrap" class="ft07">IA32_PQR_ASSOC.CLOS:&#160;The&#160;IA32_PQR_ASSOC MSR provides&#160;a&#160;COS&#160;field&#160;that OS/VMM&#160;can&#160;use&#160;to&#160;assign a&#160;<br/>logical processor to&#160;an available&#160;COS.&#160;The&#160;set&#160;of COS&#160;are common across&#160;all allocation features, meaning that&#160;<br/>multiple features may&#160;be&#160;supported in&#160;the same&#160;processor&#160;without additional software&#160;COS management&#160;<br/>overhead at&#160;context swap&#160;time.&#160;See&#160;<a href="o_fe12b1e2a880e0ce-632.html">Section&#160;17.17.3.4 for d</a>etails.&#160;</p>
<p style="position:absolute;top:194px;left:69px;white-space:nowrap" class="ft04">17.17.3.2&#160;&#160;&#160;Cache Allocation&#160;Technology: Resource&#160;Type and Capability Enumeration</p>
<p style="position:absolute;top:223px;left:69px;white-space:nowrap" class="ft03">CPUID leaf&#160;function&#160;10H (Cache Allocation Technology&#160;Enumeration&#160;leaf) provides two or&#160;more sub-functions:</p>
<p style="position:absolute;top:244px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:245px;left:95px;white-space:nowrap" class="ft07">CAT Enumeration&#160;leaf sub-function 0 enumerates available&#160;resource types that&#160;support allocation&#160;control,&#160;i.e.&#160;<br/>by&#160;executing CPUID&#160;with&#160;EAX=10H&#160;and&#160;ECX=0H. Each&#160;supported resource&#160;type&#160;is&#160;represented&#160;by&#160;a bit field&#160;in&#160;<br/>CPUID.(EAX=10H, ECX=0):EBX[31:1]. The&#160;bit&#160;position of&#160;each&#160;set bit corresponds to&#160;a Resource ID&#160;(ResID),&#160;<br/>for instance ResID=1&#160;is used to indicate&#160;L3&#160;CAT&#160;support, and ResID=2&#160;indicates&#160;L2&#160;CAT support.&#160;The ResID is&#160;<br/>also&#160;the sub-leaf index&#160;that software&#160;must&#160;use&#160;to query&#160;details of the&#160;CAT capability of&#160;that resource&#160;type&#160;(see&#160;<br/><a href="o_fe12b1e2a880e0ce-629.html">Figure&#160;17-31).</a>&#160;</p>
<p style="position:absolute;top:547px;left:95px;white-space:nowrap" class="ft03">—&#160;EAX[4:0] reports the&#160;length&#160;of&#160;the capacity&#160;bitmask&#160;length&#160;using minus-one notation,&#160;i.e.&#160;a value of&#160;15&#160;</p>
<p style="position:absolute;top:564px;left:120px;white-space:nowrap" class="ft03">corresponds to&#160;the capability bitmask&#160;having&#160;length&#160;of 16&#160;bits. Bits&#160;31:5&#160;of EAX are&#160;reserved.</p>
<p style="position:absolute;top:585px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:586px;left:95px;white-space:nowrap" class="ft07">Sub-functions of&#160;CPUID.EAX=10H with a&#160;non-zero&#160;ECX&#160;input&#160;matching a&#160;supported ResID enumerate the&#160;<br/>specific enforcement&#160;details of&#160;the corresponding&#160;ResID.&#160;The capabilities enumerated&#160;include&#160;the&#160;length&#160;of the&#160;<br/>capacity&#160;bitmasks and the number of Classes of Service&#160;for a given ResID.&#160;Software&#160;should query the capability&#160;<br/>of each available ResID that supports CAT from a&#160;sub-leaf&#160;of leaf 10H using&#160;the&#160;sub-leaf&#160;index reported&#160;by the&#160;<br/>corresponding non-zero bit in CPUID.(EAX=10H,&#160;ECX=0):EBX[31:1]&#160;in order to obtain additional feature&#160;<br/>details.&#160;</p>
<p style="position:absolute;top:690px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:691px;left:95px;white-space:nowrap" class="ft07">CAT capability for L3&#160;is enumerated&#160;by&#160;CPUID.(EAX=10H,&#160;ECX=1H), see<a href="o_fe12b1e2a880e0ce-629.html">&#160;Figure&#160;17-32. The</a>&#160;specific&#160;CAT&#160;<br/>capabilities reported&#160;by CPUID.(EAX=10H, ECX=1)&#160;are:</p>
<p style="position:absolute;top:492px;left:182px;white-space:nowrap" class="ft05">Figure&#160;17-31.&#160;&#160;CPUID.(EAX=10H, ECX=0H)&#160;Available Resource&#160;Type&#160;Identification</p>
<p style="position:absolute;top:1057px;left:222px;white-space:nowrap" class="ft05">Figure&#160;17-32.&#160;&#160;L3 Cache Allocation&#160;Technology&#160;and&#160;CDP Enumeration&#160;</p>
<p style="position:absolute;top:428px;left:680px;white-space:nowrap" class="ft06">0</p>
<p style="position:absolute;top:428px;left:645px;white-space:nowrap" class="ft06">2</p>
<p style="position:absolute;top:428px;left:281px;white-space:nowrap" class="ft06">31</p>
<p style="position:absolute;top:409px;left:232px;white-space:nowrap" class="ft00">CPUID.(EAX=10H, ECX=0H) Output: (EAX: Reserved; ECX: Reserved; EDX: Reserved)</p>
<p style="position:absolute;top:442px;left:233px;white-space:nowrap" class="ft00">EBX</p>
<p style="position:absolute;top:443px;left:659px;white-space:nowrap" class="ft08">L<br/>3</p>
<p style="position:absolute;top:428px;left:660px;white-space:nowrap" class="ft06">1</p>
<p style="position:absolute;top:449px;left:413px;white-space:nowrap" class="ft06">Reserved</p>
<p style="position:absolute;top:442px;left:645px;white-space:nowrap" class="ft06">L</p>
<p style="position:absolute;top:455px;left:644px;white-space:nowrap" class="ft06">2</p>
<p style="position:absolute;top:428px;left:631px;white-space:nowrap" class="ft06">3</p>
<p style="position:absolute;top:988px;left:613px;white-space:nowrap" class="ft06">0</p>
<p style="position:absolute;top:987px;left:395px;white-space:nowrap" class="ft06">16</p>
<p style="position:absolute;top:988px;left:215px;white-space:nowrap" class="ft06">31</p>
<p style="position:absolute;top:779px;left:254px;white-space:nowrap" class="ft00">CPUID.(EAX=10H, ECX=ResID=1)&#160;Output:&#160;</p>
<p style="position:absolute;top:1002px;left:166px;white-space:nowrap" class="ft00">EDX</p>
<p style="position:absolute;top:910px;left:167px;white-space:nowrap" class="ft00">ECX</p>
<p style="position:absolute;top:897px;left:613px;white-space:nowrap" class="ft06">0</p>
<p style="position:absolute;top:897px;left:214px;white-space:nowrap" class="ft06">31</p>
<p style="position:absolute;top:919px;left:288px;white-space:nowrap" class="ft06">Reserved</p>
<p style="position:absolute;top:987px;left:408px;white-space:nowrap" class="ft06">15</p>
<p style="position:absolute;top:858px;left:168px;white-space:nowrap" class="ft00">EBX</p>
<p style="position:absolute;top:846px;left:612px;white-space:nowrap" class="ft06">0</p>
<p style="position:absolute;top:846px;left:215px;white-space:nowrap" class="ft06">31</p>
<p style="position:absolute;top:867px;left:289px;white-space:nowrap" class="ft06">Bitmask of Shareable Resource with&#160;Other executing entities</p>
<p style="position:absolute;top:1009px;left:293px;white-space:nowrap" class="ft06">Reserved</p>
<p style="position:absolute;top:1007px;left:459px;white-space:nowrap" class="ft00">COS_MAX</p>
<p style="position:absolute;top:799px;left:613px;white-space:nowrap" class="ft06">0</p>
<p style="position:absolute;top:797px;left:516px;white-space:nowrap" class="ft06">5</p>
<p style="position:absolute;top:798px;left:214px;white-space:nowrap" class="ft06">31</p>
<p style="position:absolute;top:812px;left:166px;white-space:nowrap" class="ft00">EAX</p>
<p style="position:absolute;top:797px;left:529px;white-space:nowrap" class="ft06">4</p>
<p style="position:absolute;top:818px;left:344px;white-space:nowrap" class="ft06">Reserved</p>
<p style="position:absolute;top:819px;left:544px;white-space:nowrap" class="ft00">CBM_LEN</p>
<p style="position:absolute;top:897px;left:594px;white-space:nowrap" class="ft06">1</p>
<p style="position:absolute;top:897px;left:579px;white-space:nowrap" class="ft06">2</p>
<p style="position:absolute;top:947px;left:643px;white-space:nowrap" class="ft06">CDP&#160;</p>
</div>
</body>
</html>
