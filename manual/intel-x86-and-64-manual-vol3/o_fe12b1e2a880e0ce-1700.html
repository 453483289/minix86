<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1700</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#000000;}
	.ft04{font-size:14px;font-family:Times;color:#0860a8;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:20px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:21px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1700-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1700.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">36-16&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">INTEL® PROCESSOR TRACE</p>
<p style="position:absolute;top:100px;left:93px;white-space:nowrap" class="ft02">Note: Software may write the&#160;same&#160;value&#160;back to&#160;IA32_RTIT_CTL without #GP,&#160;even&#160;if&#160;TraceEn=1.</p>
<p style="position:absolute;top:122px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:123px;left:93px;white-space:nowrap" class="ft02">All configuration MSRs&#160;for&#160;Intel&#160;PT&#160;are duplicated per logical&#160;processor</p>
<p style="position:absolute;top:145px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:145px;left:93px;white-space:nowrap" class="ft06">For each configuration MSR, any MSR write that attempts&#160;to change&#160;bits&#160;marked reserved,&#160;or&#160;utilize&#160;encodings&#160;<br/>marked&#160;reserved, will cause&#160;a #GP&#160;fault.</p>
<p style="position:absolute;top:184px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:184px;left:93px;white-space:nowrap" class="ft07">All configuration MSRs&#160;for&#160;Intel&#160;PT&#160;are cleared&#160;on a cold RESET.&#160;<br/>—&#160;If&#160;CPUID.(EAX=14H, ECX=0):EBX.IPFILT_WRSTPRSV[bit&#160;2]&#160;= 1,&#160;only&#160;the TraceEn bit is&#160;cleared on warm&#160;</p>
<p style="position:absolute;top:225px;left:119px;white-space:nowrap" class="ft06">RESET;&#160;though&#160;this&#160;may&#160;have&#160;the&#160;impact&#160;of&#160;clearing&#160;other&#160;bits&#160;in&#160;IA32_RTIT_STATUS.&#160;Other&#160;MSR&#160;values&#160;of&#160;<br/>the trace configuration MSRs&#160;are&#160;preserved&#160;on warm RESET.</p>
<p style="position:absolute;top:263px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:264px;left:93px;white-space:nowrap" class="ft06">The&#160;semantics of&#160;MSR&#160;writes&#160;to trace configuration&#160;MSRs&#160;in&#160;this chapter generally apply to&#160;explicit WRMSR&#160;to&#160;<br/>these&#160;registers,&#160;using&#160;VM-exit&#160;or VM-entry MSR load&#160;list to&#160;these&#160;MSRs, XRSTORS with requested&#160;feature bit&#160;<br/>map including&#160;XSAVE map&#160;component of state_8&#160;(corresponding&#160;to IA32_XSS[bit 8]),&#160;and the&#160;write to&#160;<br/>IA32_RTIT_CTL.TraceEn by XSAVES<a href="o_fe12b1e2a880e0ce-1715.html">&#160;(Section 36.3.5.2).</a></p>
<p style="position:absolute;top:358px;left:68px;white-space:nowrap" class="ft04">36.2.7.2 &#160;&#160;IA32_RTIT_CTL MSR</p>
<p style="position:absolute;top:385px;left:68px;white-space:nowrap" class="ft06">IA32_RTIT_CTL,&#160;at address&#160;570H, is the&#160;primary enable and control&#160;MSR for trace&#160;packet generation. Bit positions&#160;<br/>are listed in&#160;<a href="o_fe12b1e2a880e0ce-1700.html">Table&#160;36-6.</a></p>
<p style="position:absolute;top:432px;left:339px;white-space:nowrap" class="ft05">Table 36-6.&#160;IA32_RTIT_CTL&#160;MSR</p>
<p style="position:absolute;top:456px;left:74px;white-space:nowrap" class="ft02">Position</p>
<p style="position:absolute;top:456px;left:149px;white-space:nowrap" class="ft02">Bit&#160;Name</p>
<p style="position:absolute;top:456px;left:229px;white-space:nowrap" class="ft02">At&#160;Reset</p>
<p style="position:absolute;top:456px;left:515px;white-space:nowrap" class="ft02">Bit&#160;Description</p>
<p style="position:absolute;top:480px;left:95px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:480px;left:137px;white-space:nowrap" class="ft02">TraceEn</p>
<p style="position:absolute;top:480px;left:228px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:480px;left:294px;white-space:nowrap" class="ft08">If&#160;&#160;1,&#160;&#160;enables&#160;&#160;tracing;&#160;&#160;else&#160;tracing is&#160;disabled&#160;if&#160;0.<br/>When this bit transitions&#160;from 1&#160;to&#160;0,&#160;all buffered&#160;packets are flushed&#160;out of&#160;internal&#160;buffers.&#160;</p>
<p style="position:absolute;top:518px;left:294px;white-space:nowrap" class="ft02">A further store, fence,&#160;or&#160;architecturally serializing&#160;instruction&#160;may be&#160;required&#160;to&#160;ensure&#160;that&#160;</p>
<p style="position:absolute;top:534px;left:294px;white-space:nowrap" class="ft02">packet&#160;data can be&#160;observed&#160;at&#160;the&#160;trace endpoint. See<a href="o_fe12b1e2a880e0ce-1703.html">&#160;Section&#160;36.2.7.3 f</a>or details of&#160;</p>
<p style="position:absolute;top:551px;left:294px;white-space:nowrap" class="ft09">enabling and&#160;disabling packet&#160;generation.<br/>Note that&#160;the processor will clear&#160;this bit on #S<a href="o_fe12b1e2a880e0ce-1708.html">MI (Section ) and warm r</a>eset. Other MSR bits&#160;</p>
<p style="position:absolute;top:588px;left:294px;white-space:nowrap" class="ft02">of&#160;IA32_RTIT_CTL&#160;(and&#160;other trace configuration&#160;MSRs) are not impacted&#160;by&#160;these events.</p>
<p style="position:absolute;top:612px;left:95px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:612px;left:137px;white-space:nowrap" class="ft02">CYCEn</p>
<p style="position:absolute;top:612px;left:228px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:612px;left:294px;white-space:nowrap" class="ft08">0: Disables&#160;CYC Packet&#160;(see<a href="o_fe12b1e2a880e0ce-1736.html">&#160;Section 36.4.2.14).<br/></a>1:&#160;Enables&#160;CYC Packet.<br/>This&#160;bit is&#160;reserved&#160;if&#160;CPUID.(EAX=14H, ECX=0):EBX.CPSB_CAM[bit 1]&#160;= 0.</p>
<p style="position:absolute;top:678px;left:95px;white-space:nowrap" class="ft02">2</p>
<p style="position:absolute;top:678px;left:137px;white-space:nowrap" class="ft02">OS</p>
<p style="position:absolute;top:678px;left:228px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:678px;left:294px;white-space:nowrap" class="ft08">0:&#160;Packet&#160;generation&#160;is&#160;disabled when CPL = 0.<br/>1:&#160;Packet&#160;generation may&#160;be enabled when&#160;CPL = 0.</p>
<p style="position:absolute;top:723px;left:95px;white-space:nowrap" class="ft02">3</p>
<p style="position:absolute;top:723px;left:137px;white-space:nowrap" class="ft02">User</p>
<p style="position:absolute;top:723px;left:228px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:723px;left:294px;white-space:nowrap" class="ft08">0:&#160;Packet&#160;generation&#160;is&#160;disabled when CPL &gt; 0.<br/>1:&#160;Packet&#160;generation may&#160;be enabled when&#160;CPL &gt; 0.</p>
<p style="position:absolute;top:768px;left:95px;white-space:nowrap" class="ft02">4</p>
<p style="position:absolute;top:768px;left:137px;white-space:nowrap" class="ft02">PwrEvtEn</p>
<p style="position:absolute;top:768px;left:228px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:768px;left:295px;white-space:nowrap" class="ft08">0:&#160;Power Event Trace packets are&#160;disabled.<br/>1:&#160;Power Event Trace packets are&#160;enabled (see<a href="o_fe12b1e2a880e0ce-1688.html">&#160;Section&#160;36.2.3,&#160;“Power&#160;Event Tracing”).</a></p>
<p style="position:absolute;top:813px;left:95px;white-space:nowrap" class="ft02">5</p>
<p style="position:absolute;top:813px;left:137px;white-space:nowrap" class="ft02">FUPonPTW</p>
<p style="position:absolute;top:813px;left:228px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:813px;left:294px;white-space:nowrap" class="ft08">0:&#160;PTW packets are not followed by FUPs.<br/>1:&#160;PTW&#160;packets&#160;are followed by&#160;FUPs.</p>
<p style="position:absolute;top:858px;left:95px;white-space:nowrap" class="ft02">6</p>
<p style="position:absolute;top:858px;left:137px;white-space:nowrap" class="ft02">FabricEn</p>
<p style="position:absolute;top:858px;left:228px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:858px;left:294px;white-space:nowrap" class="ft02">0:&#160;Trace output&#160;is&#160;directed&#160;to&#160;the&#160;memory&#160;subsystem,&#160;mechanism depends&#160;on&#160;</p>
<p style="position:absolute;top:875px;left:294px;white-space:nowrap" class="ft09">IA32_RTIT_CTL.ToPA.<br/>1:&#160;Trace output is&#160;directed to&#160;the trace transport&#160;subsystem, IA32_RTIT_CTL.ToPA&#160;is&#160;ignored.&#160;</p>
<p style="position:absolute;top:912px;left:294px;white-space:nowrap" class="ft02">This bit is&#160;reserved if&#160;CPUID.(EAX=14H, ECX=0):ECX[bit&#160;3] = 0.</p>
<p style="position:absolute;top:936px;left:95px;white-space:nowrap" class="ft02">7</p>
<p style="position:absolute;top:936px;left:137px;white-space:nowrap" class="ft02">CR3Filter</p>
<p style="position:absolute;top:936px;left:228px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:936px;left:294px;white-space:nowrap" class="ft08">0: Disables&#160;CR3 filtering.<br/>1:&#160;Enables CR3 filtering.</p>
</div>
</body>
</html>
