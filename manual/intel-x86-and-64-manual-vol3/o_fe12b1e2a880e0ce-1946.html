<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1946</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:16px;font-family:Times;color:#0860a8;}
	.ft06{font-size:18px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1946-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1946.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">A-4&#160;Vol. 3D</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">VMX CAPABILITY&#160;REPORTING FACILITY</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft07">If bit&#160;55&#160;in&#160;the&#160;IA32_VMX_BASIC MSR is&#160;read&#160;as 1,&#160;the&#160;IA32_VMX_TRUE_PROCBASED_CTLS&#160;MSR (index&#160;48EH)&#160;<br/>reports&#160;on the&#160;allowed settings of&#160;<b>all</b>&#160;of the&#160;primary processor-based&#160;VM-execution controls:</p>
<p style="position:absolute;top:139px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:139px;left:93px;white-space:nowrap" class="ft07">Bits&#160;31:0 indicate the allowed 0-settings of these controls. VM&#160;entry allows control X to be 0 if bit&#160;X in the MSR&#160;<br/>is cleared&#160;to 0;&#160;if bit&#160;X&#160;in the&#160;MSR is&#160;set to&#160;1,&#160;VM&#160;entry&#160;fails if control&#160;X&#160;is 0. There&#160;are no&#160;exceptions.</p>
<p style="position:absolute;top:178px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:178px;left:93px;white-space:nowrap" class="ft07">Bits&#160;63:32 indicate the&#160;allowed 1-settings&#160;of&#160;these&#160;controls. VM&#160;entry&#160;allows&#160;control X to be 1 if bit 32+X in the&#160;<br/>MSR is&#160;set&#160;to 1; if bit 32+X in the MSR is&#160;cleared to&#160;0, VM entry fails&#160;if control X is&#160;1.</p>
<p style="position:absolute;top:219px;left:68px;white-space:nowrap" class="ft07">It&#160;is necessary for software&#160;to consult only one&#160;of&#160;the&#160;capability MSRs to&#160;determine&#160;the&#160;allowed settings of the&#160;<br/>primary&#160;processor-based VM-execution&#160;controls:</p>
<p style="position:absolute;top:257px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:258px;left:93px;white-space:nowrap" class="ft07">If bit&#160;55&#160;in&#160;the IA32_VMX_BASIC MSR&#160;is read&#160;as&#160;0,&#160;all&#160;information about&#160;the allowed settings of the&#160;primary&#160;<br/>processor-based&#160;VM-execution controls is&#160;contained in the&#160;IA32_VMX_PROCBASED_CTLS&#160;MSR. (The&#160;<br/>IA32_VMX_TRUE_PROCBASED_CTLS MSR is&#160;not supported.)</p>
<p style="position:absolute;top:313px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:313px;left:93px;white-space:nowrap" class="ft07">If bit&#160;55 in the&#160;IA32_VMX_BASIC MSR is read as 1,&#160;all&#160;information about the&#160;allowed&#160;settings of the processor-<br/>based VM-execution&#160;controls&#160;is contained in&#160;the&#160;IA32_VMX_TRUE_PROCBASED_CTLS&#160;MSR. Assuming&#160;that&#160;<br/>software&#160;knows that the&#160;default1&#160;class&#160;of&#160;processor-based&#160;VM-execution&#160;controls&#160;contains bits&#160;1,&#160;4–6,&#160;8,&#160;13–<br/>16, and&#160;26, there is&#160;no&#160;need for software&#160;to consult the&#160;IA32_VMX_PROCBASED_CTLS MSR.</p>
<p style="position:absolute;top:413px;left:68px;white-space:nowrap" class="ft05">A.3.3 &#160;</p>
<p style="position:absolute;top:413px;left:148px;white-space:nowrap" class="ft05">Secondary Processor-Based&#160;VM-Execution Controls</p>
<p style="position:absolute;top:444px;left:68px;white-space:nowrap" class="ft07">The IA32_VMX_PROCBASED_CTLS2&#160;MSR (index&#160;48BH) reports&#160;on the&#160;allowed settings of&#160;the&#160;secondary&#160;processor-<br/>based VM-execution&#160;controls&#160;(see&#160;<a href="o_fe12b1e2a880e0ce-1055.html">Section 24.6.2</a>).&#160;VM&#160;entries perform&#160;the following checks:</p>
<p style="position:absolute;top:482px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:483px;left:93px;white-space:nowrap" class="ft07">Bits&#160;31:0&#160;indicate&#160;the allowed&#160;0-settings of these controls. These&#160;bits are&#160;always 0.&#160;This fact indicates&#160;that&#160;<br/>VM&#160;entry allows each bit&#160;of the&#160;secondary processor-based&#160;VM-execution controls&#160;to be&#160;0&#160;(reserved&#160;bits&#160;must&#160;<br/>be&#160;0)</p>
<p style="position:absolute;top:538px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:538px;left:93px;white-space:nowrap" class="ft07">Bits&#160;63:32 indicate the allowed&#160;1-settings&#160;of these&#160;controls;&#160;the 1-setting&#160;is not allowed&#160;for any&#160;reserved bit.&#160;<br/>VM&#160;entry allows&#160;control X (bit&#160;X of the secondary processor-based&#160;VM-execution controls)&#160;to be&#160;1&#160;if bit 32+X&#160;in&#160;<br/>the MSR is&#160;set to 1; if bit 32+X in the MSR is&#160;cleared to 0, VM&#160;entry fails if control X and the “activate&#160;secondary&#160;<br/>controls” primary processor-based&#160;VM-execution control are&#160;both&#160;1.</p>
<p style="position:absolute;top:612px;left:68px;white-space:nowrap" class="ft07">The&#160;IA32_VMX_PROCBASED_CTLS2 MSR&#160;exists only on processors that&#160;support&#160;the 1-setting of&#160;the “activate&#160;<br/>secondary&#160;controls”&#160;VM-execution&#160;control (only if&#160;bit&#160;63&#160;of the&#160;IA32_VMX_PROCBASED_CTLS&#160;MSR&#160;is 1).</p>
<p style="position:absolute;top:684px;left:68px;white-space:nowrap" class="ft06">A.4 VM-EXIT&#160;</p>
<p style="position:absolute;top:684px;left:231px;white-space:nowrap" class="ft06">CONTROLS</p>
<p style="position:absolute;top:720px;left:68px;white-space:nowrap" class="ft07">The&#160;&#160;IA32_VMX_EXIT_CTLS&#160;MSR (index 483H)&#160;reports on the allowed settings of&#160;<b>most</b>&#160;of the VM-exit controls&#160;(see&#160;<br/><a href="o_fe12b1e2a880e0ce-1063.html">Section 24.7.1):</a></p>
<p style="position:absolute;top:758px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:759px;left:93px;white-space:nowrap" class="ft09">Bits&#160;31:0&#160;indicate&#160;the allowed&#160;0-settings of these controls. VM&#160;entry allows control X (bit X of the&#160;VM-exit&#160;<br/>controls) to be 0&#160;if bit X in the MSR is cleared to 0; if bit X in the MSR is set to 1, VM&#160;entry fails if control X is 0.<br/>Exceptions&#160;are made for the VM-exit controls&#160;in the&#160;default1&#160;class&#160;(see<a href="o_fe12b1e2a880e0ce-1944.html">&#160;Appendix&#160;A.2).</a>&#160;These are&#160;bits&#160;0–8,&#160;10,&#160;<br/>11, 13,&#160;14, 16,&#160;and 17; the&#160;corresponding bits of the IA32_VMX_EXIT_CTLS&#160;MSR&#160;are always read&#160;as 1.&#160;The&#160;<br/>treatment of these controls&#160;by&#160;VM&#160;entry is&#160;determined&#160;by bit&#160;55 in&#160;the&#160;IA32_VMX_BASIC MSR:<br/>—&#160;If bit&#160;55 in&#160;the IA32_VMX_BASIC MSR&#160;is&#160;read as&#160;0,&#160;VM&#160;entry&#160;fails if any VM-exit control in&#160;the&#160;default1&#160;class&#160;</p>
<p style="position:absolute;top:871px;left:119px;white-space:nowrap" class="ft02">is 0.</p>
<p style="position:absolute;top:895px;left:93px;white-space:nowrap" class="ft02">—&#160;If bit&#160;55 in&#160;the IA32_VMX_BASIC MSR&#160;is read as&#160;1,&#160;the&#160;IA32_VMX_TRUE_EXIT_CTLS&#160;MSR (see&#160;below)&#160;</p>
<p style="position:absolute;top:912px;left:119px;white-space:nowrap" class="ft02">reports&#160;which of the&#160;VM-exit controls in&#160;the default1&#160;class&#160;can&#160;be&#160;0 on&#160;VM&#160;entry.</p>
<p style="position:absolute;top:934px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:934px;left:93px;white-space:nowrap" class="ft07">Bits&#160;63:32&#160;indicate&#160;the allowed&#160;1-settings of these controls. VM&#160;entry&#160;allows&#160;control 32+X to be 1&#160;if bit X in the&#160;<br/>MSR is&#160;set&#160;to 1; if bit 32+X in the MSR is&#160;cleared to&#160;0, VM&#160;entry&#160;fails if control X&#160;is 1.</p>
<p style="position:absolute;top:975px;left:68px;white-space:nowrap" class="ft07">If&#160;bit&#160;55&#160;in the&#160;IA32_VMX_BASIC MSR is read as&#160;1,&#160;the&#160;IA32_VMX_TRUE_EXIT_CTLS&#160;MSR (index 48FH)&#160;reports&#160;on&#160;<br/>the allowed settings of&#160;<b>all</b>&#160;of the&#160;VM-exit controls:</p>
<p style="position:absolute;top:1013px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:1014px;left:93px;white-space:nowrap" class="ft07">Bits&#160;31:0 indicate the allowed 0-settings of these controls. VM&#160;entry allows control X to be 0 if bit&#160;X in the MSR&#160;<br/>is cleared&#160;to 0;&#160;if bit&#160;X&#160;in the&#160;MSR is&#160;set to&#160;1,&#160;VM&#160;entry&#160;fails if control&#160;X&#160;is 0. There&#160;are no&#160;exceptions.</p>
</div>
</body>
</html>
