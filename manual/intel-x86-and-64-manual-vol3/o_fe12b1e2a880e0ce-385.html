<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 385</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:14px;font-family:Times;color:#0860a8;}
	.ft04{font-size:12px;font-family:Times;color:#0860a8;}
	.ft05{font-size:8px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:9px;line-height:12px;font-family:Times;color:#000000;}
	.ft010{font-size:9px;line-height:13px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page385-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce385.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:760px;white-space:nowrap" class="ft00">Vol. 3A&#160;10-23</p>
<p style="position:absolute;top:47px;left:484px;white-space:nowrap" class="ft01">ADVANCED PROGRAMMABLE&#160;INTERRUPT CONTROLLER&#160;(APIC)</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft06">A broadcast IPI (bits 28-31&#160;of&#160;the MDA are&#160;1's)&#160;or I/O&#160;subsystem initiated interrupt&#160;with&#160;lowest priority&#160;delivery&#160;<br/>mode&#160;is not supported&#160;in physical destination&#160;mode&#160;and&#160;must&#160;not be configured&#160;by software. Also, for any&#160;non-<br/>broadcast IPI or&#160;I/O subsystem&#160;initiated&#160;interrupt with lowest&#160;priority delivery&#160;mode,&#160;software must ensure that&#160;<br/>APICs defined in&#160;the interrupt address&#160;are&#160;present and enabled&#160;to receive&#160;interrupts.&#160;<br/>For&#160;the&#160;P6&#160;family&#160;and Pentium processors, a&#160;single&#160;destination is&#160;specified in physical destination mode&#160;with a&#160;local&#160;<br/>APIC&#160;ID&#160;of&#160;0H&#160;through&#160;0EH,&#160;allowing&#160;up&#160;to&#160;15&#160;local&#160;APICs&#160;to&#160;be&#160;addressed&#160;on&#160;the&#160;APIC&#160;bus.&#160;A&#160;broadcast&#160;to&#160;all&#160;local&#160;<br/>APICs is&#160;specified with 0FH.</p>
<p style="position:absolute;top:241px;left:433px;white-space:nowrap" class="ft03">NOTE</p>
<p style="position:absolute;top:267px;left:122px;white-space:nowrap" class="ft06">The&#160;number of local APICs&#160;that can&#160;be&#160;addressed&#160;on the&#160;system&#160;bus may be&#160;restricted&#160;by&#160;<br/>hardware.</p>
<p style="position:absolute;top:328px;left:69px;white-space:nowrap" class="ft03">10.6.2.2 &#160;&#160;Logical Destination Mode</p>
<p style="position:absolute;top:356px;left:69px;white-space:nowrap" class="ft06">In logical destination&#160;mode, IPI destination&#160;is specified using an&#160;8-bit&#160;message&#160;destination&#160;address (MDA),&#160;which&#160;<br/>is entered in&#160;the&#160;destination field of the ICR. Upon receiving an IPI message that was sent using logical destination&#160;<br/>mode, a local&#160;APIC compares the MDA in the message&#160;with the&#160;values&#160;in its LDR&#160;and DFR to determine&#160;if&#160;it should&#160;<br/>accept&#160;and handle&#160;the IPI.&#160;For&#160;both configurations of logical destination mode, when combined with&#160;lowest priority&#160;<br/>delivery mode, software is&#160;responsible for ensuring&#160;that&#160;all&#160;of&#160;the local&#160;APICs included in&#160;or addressed by&#160;the&#160;IPI or&#160;<br/>I/O subsystem&#160;interrupt are present and&#160;enabled to&#160;receive&#160;the interrupt.<br/><a href="o_fe12b1e2a880e0ce-385.html">Figure&#160;10-13&#160;</a>shows the&#160;layout of&#160;the&#160;logical destination&#160;register (LDR). The&#160;8-bit logical APIC ID field&#160;in this&#160;<br/>register&#160;is&#160;used&#160;to create&#160;an identifier that&#160;can be compared with the&#160;MDA.</p>
<p style="position:absolute;top:514px;left:433px;white-space:nowrap" class="ft03">NOTE</p>
<p style="position:absolute;top:539px;left:122px;white-space:nowrap" class="ft06">The&#160;logical APIC ID should&#160;not&#160;be&#160;confused&#160;with the&#160;local APIC ID that&#160;is contained&#160;in the&#160;local APIC&#160;<br/>ID register.</p>
<p style="position:absolute;top:757px;left:69px;white-space:nowrap" class="ft06"><a href="o_fe12b1e2a880e0ce-385.html">Figure&#160;10-14 shows the la</a>yout of the&#160;destination format register&#160;(DFR). The&#160;4-bit model field in this register selects&#160;<br/>one of two models (flat or&#160;cluster)&#160;that&#160;can be&#160;used to&#160;interpret&#160;the MDA&#160;when&#160;using logical destination mode.</p>
<p style="position:absolute;top:1014px;left:69px;white-space:nowrap" class="ft02">The&#160;interpretation&#160;of&#160;MDA for the two models&#160;is described&#160;in&#160;the following paragraphs.</p>
<p style="position:absolute;top:711px;left:289px;white-space:nowrap" class="ft04">Figure&#160;10-13.&#160;&#160;Logical Destination&#160;Register&#160;(LDR)</p>
<p style="position:absolute;top:968px;left:288px;white-space:nowrap" class="ft04">Figure&#160;10-14.&#160;&#160;Destination&#160;Format&#160;Register&#160;(DFR)</p>
<p style="position:absolute;top:620px;left:250px;white-space:nowrap" class="ft05">31</p>
<p style="position:absolute;top:620px;left:646px;white-space:nowrap" class="ft05">0</p>
<p style="position:absolute;top:620px;left:386px;white-space:nowrap" class="ft05">23</p>
<p style="position:absolute;top:620px;left:370px;white-space:nowrap" class="ft05">24</p>
<p style="position:absolute;top:644px;left:495px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:644px;left:276px;white-space:nowrap" class="ft00">Logical APIC ID</p>
<p style="position:absolute;top:672px;left:264px;white-space:nowrap" class="ft09">Address: 0FEE0 00D0H<br/>Value&#160;after reset: 0000 0000H</p>
<p style="position:absolute;top:834px;left:252px;white-space:nowrap" class="ft05">31</p>
<p style="position:absolute;top:835px;left:648px;white-space:nowrap" class="ft05">0</p>
<p style="position:absolute;top:859px;left:273px;white-space:nowrap" class="ft00">Model</p>
<p style="position:absolute;top:835px;left:313px;white-space:nowrap" class="ft05">28</p>
<p style="position:absolute;top:859px;left:446px;white-space:nowrap" class="ft00">Reserved (All&#160;1s)</p>
<p style="position:absolute;top:933px;left:252px;white-space:nowrap" class="ft09">Address: 0FEE0 00E0H<br/>Value after&#160;reset: FFFF&#160;FFFFH</p>
<p style="position:absolute;top:895px;left:349px;white-space:nowrap" class="ft010">Flat model: 1111B<br/>Cluster model: 0000B</p>
</div>
</body>
</html>
