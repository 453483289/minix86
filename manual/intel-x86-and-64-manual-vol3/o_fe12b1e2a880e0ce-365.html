<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 365</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:8px;font-family:Times;color:#000000;}
	.ft04{font-size:3px;font-family:Times;color:#000000;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page365-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce365.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:767px;white-space:nowrap" class="ft00">Vol. 3A&#160;10-3</p>
<p style="position:absolute;top:47px;left:484px;white-space:nowrap" class="ft01">ADVANCED PROGRAMMABLE&#160;INTERRUPT CONTROLLER&#160;(APIC)</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft06">Both&#160;the local&#160;APIC&#160;and the&#160;I/O APIC are designed&#160;to&#160;operate in&#160;MP&#160;<a href="o_fe12b1e2a880e0ce-365.html">systems (see Figures 10-2&#160;and&#160;10-3).</a>&#160;Each&#160;<br/>local APIC&#160;handles interrupts from the I/O APIC, IPIs from processors on the system bus, and self-generated&#160;inter-<br/>rupts. Interrupts can&#160;also be delivered to&#160;the individual&#160;processors through the&#160;local interrupt pins;&#160;however,&#160;this&#160;<br/>mechanism&#160;is commonly&#160;not used&#160;in MP systems.</p>
<p style="position:absolute;top:869px;left:69px;white-space:nowrap" class="ft06">The IPI&#160;mechanism is typically used in MP systems to send&#160;fixed interrupts (interrupts for a&#160;specific vector&#160;number)&#160;<br/>and special-purpose interrupts to&#160;processors&#160;on&#160;the system&#160;bus.&#160;For&#160;example,&#160;a local APIC&#160;can use&#160;an IPI to&#160;<br/>forward&#160;a fixed&#160;interrupt&#160;to another processor for servicing. Special-purpose IPIs (including&#160;NMI,&#160;INIT,&#160;SMI&#160;and&#160;<br/>SIPI IPIs) allow one or more processors on the system&#160;bus&#160;to&#160;perform&#160;system-wide boot-up and control functions.<br/>The&#160;following sections focus on the&#160;local APIC and its&#160;implementation in the&#160;Pentium&#160;4, Intel Xeon, and P6&#160;family&#160;<br/>processors. In&#160;these&#160;sections, the terms&#160;“local APIC” and “I/O APIC” refer to&#160;local and I/O APICs used with&#160;the P6&#160;<br/>family processors and&#160;to local&#160;and I/O&#160;xAPICs used with the&#160;Pentium&#160;4 and&#160;Intel&#160;Xeon<a href="o_fe12b1e2a880e0ce-366.html">&#160;processors (see Section&#160;<br/>10.3,&#160;“The&#160;Intel</a></p>
<p style="position:absolute;top:989px;left:175px;white-space:nowrap" class="ft03"><a href="o_fe12b1e2a880e0ce-366.html">®</a></p>
<p style="position:absolute;top:992px;left:186px;white-space:nowrap" class="ft02"><a href="o_fe12b1e2a880e0ce-366.html">&#160;82489DX&#160;External APIC,&#160;the&#160;APIC,&#160;the xAPIC,&#160;and&#160;the&#160;X2APIC”).&#160;</a></p>
<p style="position:absolute;top:189px;left:172px;white-space:nowrap" class="ft04">&#160;</p>
<p style="position:absolute;top:524px;left:95px;white-space:nowrap" class="ft05">Figure&#160;10-2. &#160;Local&#160;APICs and&#160;I/O APIC When&#160;Intel&#160;Xeon&#160;Processors Are Used&#160;in&#160;Multiple-Processor&#160;Systems</p>
<p style="position:absolute;top:584px;left:172px;white-space:nowrap" class="ft04">&#160;</p>
<p style="position:absolute;top:823px;left:97px;white-space:nowrap" class="ft05">Figure&#160;10-3. &#160;Local APICs&#160;and&#160;I/O&#160;APIC&#160;When&#160;P6 Family&#160;Processors&#160;Are&#160;Used&#160;in&#160;Multiple-Processor Systems</p>
<p style="position:absolute;top:461px;left:411px;white-space:nowrap" class="ft00">I/O APIC</p>
<p style="position:absolute;top:458px;left:516px;white-space:nowrap" class="ft00">External</p>
<p style="position:absolute;top:468px;left:515px;white-space:nowrap" class="ft00">Interrupts</p>
<p style="position:absolute;top:501px;left:366px;white-space:nowrap" class="ft00">System Chip Set</p>
<p style="position:absolute;top:317px;left:417px;white-space:nowrap" class="ft00">Processor System Bus</p>
<p style="position:absolute;top:227px;left:377px;white-space:nowrap" class="ft00">CPU</p>
<p style="position:absolute;top:256px;left:361px;white-space:nowrap" class="ft00">Local&#160;APIC</p>
<p style="position:absolute;top:198px;left:357px;white-space:nowrap" class="ft00">Processor #2</p>
<p style="position:absolute;top:227px;left:505px;white-space:nowrap" class="ft00">CPU</p>
<p style="position:absolute;top:256px;left:489px;white-space:nowrap" class="ft00">Local APIC</p>
<p style="position:absolute;top:198px;left:485px;white-space:nowrap" class="ft00">Processor #3</p>
<p style="position:absolute;top:227px;left:254px;white-space:nowrap" class="ft00">CPU</p>
<p style="position:absolute;top:256px;left:238px;white-space:nowrap" class="ft00">Local APIC</p>
<p style="position:absolute;top:198px;left:234px;white-space:nowrap" class="ft00">Processor #1</p>
<p style="position:absolute;top:228px;left:629px;white-space:nowrap" class="ft00">CPU</p>
<p style="position:absolute;top:256px;left:613px;white-space:nowrap" class="ft00">Local APIC</p>
<p style="position:absolute;top:199px;left:609px;white-space:nowrap" class="ft00">Processor #3</p>
<p style="position:absolute;top:370px;left:363px;white-space:nowrap" class="ft00">Bridge</p>
<p style="position:absolute;top:407px;left:415px;white-space:nowrap" class="ft00">PCI</p>
<p style="position:absolute;top:286px;left:284px;white-space:nowrap" class="ft00">IPIs</p>
<p style="position:absolute;top:286px;left:409px;white-space:nowrap" class="ft00">IPIs</p>
<p style="position:absolute;top:286px;left:536px;white-space:nowrap" class="ft00">IPIs</p>
<p style="position:absolute;top:318px;left:330px;white-space:nowrap" class="ft00">Interrupt</p>
<p style="position:absolute;top:329px;left:321px;white-space:nowrap" class="ft00">Messages</p>
<p style="position:absolute;top:286px;left:658px;white-space:nowrap" class="ft00">IPIs</p>
<p style="position:absolute;top:280px;left:463px;white-space:nowrap" class="ft00">Interrupt</p>
<p style="position:absolute;top:291px;left:453px;white-space:nowrap" class="ft00">Messages</p>
<p style="position:absolute;top:281px;left:335px;white-space:nowrap" class="ft00">Interrupt</p>
<p style="position:absolute;top:292px;left:326px;white-space:nowrap" class="ft00">Messages</p>
<p style="position:absolute;top:280px;left:585px;white-space:nowrap" class="ft00">Interrupt</p>
<p style="position:absolute;top:291px;left:576px;white-space:nowrap" class="ft00">Messages</p>
<p style="position:absolute;top:279px;left:213px;white-space:nowrap" class="ft00">Interrupt</p>
<p style="position:absolute;top:290px;left:204px;white-space:nowrap" class="ft00">Messages</p>
<p style="position:absolute;top:618px;left:388px;white-space:nowrap" class="ft00">CPU</p>
<p style="position:absolute;top:647px;left:371px;white-space:nowrap" class="ft00">Local APIC</p>
<p style="position:absolute;top:588px;left:366px;white-space:nowrap" class="ft00">Processor #2</p>
<p style="position:absolute;top:618px;left:519px;white-space:nowrap" class="ft00">CPU</p>
<p style="position:absolute;top:647px;left:502px;white-space:nowrap" class="ft00">Local APIC</p>
<p style="position:absolute;top:588px;left:498px;white-space:nowrap" class="ft00">Processor&#160;#3</p>
<p style="position:absolute;top:618px;left:257px;white-space:nowrap" class="ft00">CPU</p>
<p style="position:absolute;top:647px;left:240px;white-space:nowrap" class="ft00">Local APIC</p>
<p style="position:absolute;top:588px;left:236px;white-space:nowrap" class="ft00">Processor #1</p>
<p style="position:absolute;top:673px;left:213px;white-space:nowrap" class="ft00">Interrupt</p>
<p style="position:absolute;top:684px;left:203px;white-space:nowrap" class="ft00">Messages</p>
<p style="position:absolute;top:764px;left:423px;white-space:nowrap" class="ft00">I/O APIC</p>
<p style="position:absolute;top:758px;left:303px;white-space:nowrap" class="ft00">External</p>
<p style="position:absolute;top:769px;left:297px;white-space:nowrap" class="ft00">Interrupts</p>
<p style="position:absolute;top:799px;left:391px;white-space:nowrap" class="ft00">System Chip&#160;Set</p>
<p style="position:absolute;top:711px;left:554px;white-space:nowrap" class="ft00">3-wire APIC Bus&#160;</p>
<p style="position:absolute;top:619px;left:652px;white-space:nowrap" class="ft00">CPU</p>
<p style="position:absolute;top:648px;left:635px;white-space:nowrap" class="ft00">Local APIC</p>
<p style="position:absolute;top:588px;left:631px;white-space:nowrap" class="ft00">Processor #4</p>
<p style="position:absolute;top:673px;left:684px;white-space:nowrap" class="ft00">IPIs</p>
<p style="position:absolute;top:672px;left:554px;white-space:nowrap" class="ft00">IPIs</p>
<p style="position:absolute;top:673px;left:421px;white-space:nowrap" class="ft00">IPIs</p>
<p style="position:absolute;top:672px;left:288px;white-space:nowrap" class="ft00">IPIs</p>
<p style="position:absolute;top:671px;left:475px;white-space:nowrap" class="ft00">Interrupt</p>
<p style="position:absolute;top:682px;left:465px;white-space:nowrap" class="ft00">Messages</p>
<p style="position:absolute;top:672px;left:343px;white-space:nowrap" class="ft00">Interrupt</p>
<p style="position:absolute;top:683px;left:333px;white-space:nowrap" class="ft00">Messages</p>
<p style="position:absolute;top:712px;left:398px;white-space:nowrap" class="ft00">Interrupt</p>
<p style="position:absolute;top:723px;left:388px;white-space:nowrap" class="ft00">Messages</p>
<p style="position:absolute;top:673px;left:609px;white-space:nowrap" class="ft00">Interrupt</p>
<p style="position:absolute;top:684px;left:599px;white-space:nowrap" class="ft00">Messages</p>
</div>
</body>
</html>
