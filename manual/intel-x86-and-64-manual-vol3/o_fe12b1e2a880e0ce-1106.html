<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1106</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:8px;font-family:Times;color:#000000;}
	.ft05{font-size:14px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;font-family:Times;color:#000000;}
	.ft08{font-size:18px;font-family:Times;color:#000000;}
	.ft09{font-size:16px;font-family:Times;color:#0860a8;}
	.ft010{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft012{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1106-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1106.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">26-14&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">VM&#160;ENTRIES</p>
<p style="position:absolute;top:102px;left:119px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:100px;left:144px;white-space:nowrap" class="ft03">Bit&#160;31 must&#160;contain&#160;the setting&#160;of the&#160;‚ÄúVMCS&#160;shadowing‚Äù VM-execution control.</p>
<p style="position:absolute;top:98px;left:680px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:100px;left:687px;white-space:nowrap" class="ft03">&#160;This implies that&#160;the&#160;</p>
<p style="position:absolute;top:117px;left:143px;white-space:nowrap" class="ft010">referenced&#160;VMCS is&#160;a shadow VMCS&#160;(see<a href="o_fe12b1e2a880e0ce-1070.html">&#160;Section 24.10</a>)&#160;if and&#160;only&#160;if&#160;the ‚ÄúVMCS shadowing‚Äù VM-<br/>execution control is&#160;1.</p>
<p style="position:absolute;top:157px;left:93px;white-space:nowrap" class="ft03">‚Äî&#160;If&#160;the processor is&#160;not in SMM&#160;or the&#160;‚Äúentry&#160;to SMM‚Äù&#160;VM-entry control&#160;is 1, the&#160;field&#160;must&#160;not contain the&#160;</p>
<p style="position:absolute;top:174px;left:119px;white-space:nowrap" class="ft03">current&#160;VMCS&#160;pointer.</p>
<p style="position:absolute;top:198px;left:93px;white-space:nowrap" class="ft03">‚Äî&#160;If&#160;the processor is&#160;in SMM&#160;and the&#160;‚Äúentry&#160;to SMM‚Äù VM-entry control&#160;is 0, the field&#160;must differ from the&#160;</p>
<p style="position:absolute;top:214px;left:119px;white-space:nowrap" class="ft03">executive-VMCS&#160;pointer.</p>
<p style="position:absolute;top:259px;left:68px;white-space:nowrap" class="ft05">26.3.1.6</p>
<p style="position:absolute;top:259px;left:152px;white-space:nowrap" class="ft05">Checks on Guest Page-Directory-Pointer-Table&#160;Entries</p>
<p style="position:absolute;top:287px;left:68px;white-space:nowrap" class="ft010">If CR0.PG&#160;=1, CR4.PAE&#160;=&#160;1,&#160;and IA32_EFER.LME&#160;= 0,&#160;the&#160;logical&#160;processor&#160;uses&#160;<b>PAE&#160;paging</b>&#160;(see<a href="o_fe12b1e2a880e0ce-117.html">&#160;Section 4.4&#160;</a>in&#160;<br/><a href="˛ˇ">the&#160;<i>Intel¬Æ 64&#160;and IA-32&#160;Architectures Software&#160;Developer‚Äôs Manual, Volume 3A</i>).</a></p>
<p style="position:absolute;top:301px;left:616px;white-space:nowrap" class="ft04">2</p>
<p style="position:absolute;top:304px;left:622px;white-space:nowrap" class="ft03">&#160;When&#160;PAE&#160;paging&#160;is&#160;in&#160;use,&#160;the&#160;</p>
<p style="position:absolute;top:320px;left:68px;white-space:nowrap" class="ft010">physical address&#160;in CR3&#160;references&#160;a table of&#160;<b>page-directory-pointer-table entries</b>&#160;(PDPTEs). A MOV to&#160;CR3&#160;<br/>when&#160;PAE paging is&#160;in use&#160;checks the&#160;validity of the&#160;PDPTEs.<br/>A&#160;VM&#160;entry is&#160;to a&#160;guest&#160;that uses&#160;PAE paging if&#160;(1)&#160;bit&#160;31&#160;(corresponding&#160;to CR0.PG)&#160;is set&#160;in the&#160;CR0 field in the&#160;<br/>guest-state&#160;area; (2)&#160;bit&#160;5 (corresponding&#160;to&#160;CR4.PAE)&#160;is set in the&#160;CR4 field; and&#160;(3)&#160;the&#160;‚ÄúIA-32e mode guest‚Äù&#160;<br/>VM-entry control&#160;is 0. Such&#160;a VM&#160;entry checks the validity&#160;of&#160;the PDPTEs:</p>
<p style="position:absolute;top:415px;left:68px;white-space:nowrap" class="ft08">‚Ä¢</p>
<p style="position:absolute;top:416px;left:93px;white-space:nowrap" class="ft010">If&#160;the&#160;‚Äúenable&#160;EPT‚Äù VM-execution&#160;control is&#160;0,&#160;VM&#160;entry checks the validity of the PDPTEs&#160;referenced by&#160;the&#160;CR3&#160;<br/>field&#160;in the&#160;guest-state&#160;area if either&#160;(1)&#160;PAE&#160;paging&#160;was not&#160;in&#160;use before the&#160;VM&#160;entry; or (2)&#160;the value of CR3&#160;<br/>is&#160;changing as&#160;a result of the&#160;VM&#160;entry.&#160;VM&#160;entry&#160;may&#160;check their&#160;validity even&#160;if&#160;neither&#160;(1) nor (2) hold.</p>
<p style="position:absolute;top:447px;left:802px;white-space:nowrap" class="ft04">3</p>
<p style="position:absolute;top:471px;left:68px;white-space:nowrap" class="ft08">‚Ä¢</p>
<p style="position:absolute;top:472px;left:93px;white-space:nowrap" class="ft010">If the&#160;‚Äúenable EPT‚Äù&#160;VM-execution control&#160;is 1,&#160;VM&#160;entry checks&#160;the&#160;validity of&#160;the&#160;PDPTE fields&#160;in&#160;the&#160;guest-state&#160;<br/>area&#160;(see<a href="o_fe12b1e2a880e0ce-1051.html">&#160;Section 24.4.2</a>).</p>
<p style="position:absolute;top:512px;left:68px;white-space:nowrap" class="ft010">A VM&#160;entry&#160;to a&#160;guest&#160;that does not use&#160;PAE paging&#160;does&#160;not&#160;check the&#160;validity of any&#160;PDPTEs.<br/>A&#160;VM&#160;entry that&#160;checks the&#160;validity&#160;of the PDPTEs&#160;uses the same&#160;checks that&#160;are used when CR3&#160;is loaded with&#160;<br/>MOV&#160;to&#160;CR3 when&#160;PAE paging&#160;is&#160;in&#160;use.</p>
<p style="position:absolute;top:550px;left:333px;white-space:nowrap" class="ft04">4</p>
<p style="position:absolute;top:553px;left:340px;white-space:nowrap" class="ft03">&#160;If MOV to CR3&#160;would&#160;cause&#160;a general-protection exception due to&#160;the&#160;</p>
<p style="position:absolute;top:569px;left:68px;white-space:nowrap" class="ft03">PDPTEs&#160;that would be loaded&#160;(e.g.,&#160;because a&#160;reserved&#160;bit&#160;is set), the&#160;VM&#160;entry&#160;fails.</p>
<p style="position:absolute;top:620px;left:68px;white-space:nowrap" class="ft09">26.3.2&#160;Loading Guest State</p>
<p style="position:absolute;top:650px;left:68px;white-space:nowrap" class="ft03">Processor&#160;state&#160;is updated&#160;on VM&#160;entries in&#160;the following ways:</p>
<p style="position:absolute;top:672px;left:68px;white-space:nowrap" class="ft08">‚Ä¢</p>
<p style="position:absolute;top:673px;left:93px;white-space:nowrap" class="ft03">Some&#160;state is&#160;loaded from&#160;the&#160;guest-state area.</p>
<p style="position:absolute;top:694px;left:68px;white-space:nowrap" class="ft08">‚Ä¢</p>
<p style="position:absolute;top:695px;left:93px;white-space:nowrap" class="ft03">Some&#160;state&#160;is determined by VM-entry controls.</p>
<p style="position:absolute;top:717px;left:68px;white-space:nowrap" class="ft08">‚Ä¢</p>
<p style="position:absolute;top:718px;left:93px;white-space:nowrap" class="ft03">The&#160;page-directory pointers are&#160;loaded based&#160;on the&#160;values&#160;of certain control registers.</p>
<p style="position:absolute;top:742px;left:68px;white-space:nowrap" class="ft010">This loading may be&#160;performed&#160;in&#160;any order&#160;and&#160;in&#160;parallel with the&#160;checking of VMCS&#160;contents (see<a href="o_fe12b1e2a880e0ce-1100.html">&#160;Section&#160;<br/>26.3.1).<br/></a>The loading of&#160;guest&#160;state&#160;is de<a href="o_fe12b1e2a880e0ce-1107.html">tailed in&#160;Section 26.3.2.1&#160;</a>to<a href="o_fe12b1e2a880e0ce-1109.html">&#160;Section 26.3.2.4. These</a>&#160;sections&#160;reference&#160;VMCS fields&#160;<br/>that&#160;correspond to&#160;processor&#160;state. Unless otherwise stated,&#160;these references&#160;are&#160;to fields in the&#160;guest-state area.<br/>In addition to&#160;the&#160;state&#160;loading described in this&#160;section, VM&#160;entries&#160;may&#160;load MSRs&#160;from the VM-entry&#160;MSR-load&#160;<br/>area (s<a href="o_fe12b1e2a880e0ce-1109.html">ee Section 26.4).&#160;</a>This loading occurs only after the&#160;state&#160;loading described&#160;in&#160;this&#160;section and the checking&#160;<br/>of VMCS&#160;contents described&#160;<a href="o_fe12b1e2a880e0ce-1100.html">in Section 26.3.1.</a></p>
<p style="position:absolute;top:909px;left:68px;white-space:nowrap" class="ft03">1.&#160;‚ÄúVMCS shadowing‚Äù&#160;is a secondary processor-based&#160;VM-execution&#160;control. If&#160;bit&#160;31&#160;of&#160;the&#160;primary processor-based&#160;VM-execution&#160;</p>
<p style="position:absolute;top:925px;left:89px;white-space:nowrap" class="ft03">controls&#160;is 0, VM&#160;entry functions as&#160;if the ‚ÄúVMCS shadowing‚Äù&#160;VM-execution&#160;control were&#160;0.&#160;See&#160;<a href="o_fe12b1e2a880e0ce-1055.html">Section&#160;24.6.2</a>.</p>
<p style="position:absolute;top:946px;left:68px;white-space:nowrap" class="ft03">2.&#160;On processors&#160;that&#160;support Intel 64&#160;architecture, the physical-address extension may support&#160;more&#160;than&#160;36&#160;physical-address&#160;bits.&#160;</p>
<p style="position:absolute;top:963px;left:89px;white-space:nowrap" class="ft03">Software&#160;can&#160;determine&#160;the&#160;number&#160;physical-address&#160;bits&#160;supported&#160;by executing CPUID with&#160;80000008H in&#160;EAX.&#160;The physical-</p>
<p style="position:absolute;top:979px;left:89px;white-space:nowrap" class="ft03">address&#160;width is&#160;returned&#160;in&#160;bits&#160;7:0 of&#160;EAX.</p>
<p style="position:absolute;top:1000px;left:68px;white-space:nowrap" class="ft03">3.&#160;‚ÄúEnable EPT‚Äù is&#160;a secondary processor-based&#160;VM-execution&#160;control. If&#160;bit&#160;31 of&#160;the primary processor-based VM-execution&#160;controls&#160;</p>
<p style="position:absolute;top:1017px;left:89px;white-space:nowrap" class="ft03">is 0, VM&#160;entry functions as if the ‚Äúenable&#160;EPT‚Äù VM-execution&#160;control were&#160;0.&#160;Se<a href="o_fe12b1e2a880e0ce-1055.html">e Section 24.6.2</a>.</p>
<p style="position:absolute;top:1038px;left:68px;white-space:nowrap" class="ft03">4.&#160;This implies that&#160;(1)&#160;bits&#160;11:9&#160;in&#160;each&#160;PDPTE&#160;are ignored;&#160;and&#160;(2)&#160;if bit&#160;0&#160;(present) is clear&#160;in&#160;one of&#160;the PDPTEs,&#160;bits 63:1&#160;of&#160;that&#160;</p>
<p style="position:absolute;top:1054px;left:89px;white-space:nowrap" class="ft03">PDPTE are ignored.</p>
</div>
</body>
</html>
