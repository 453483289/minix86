<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 425</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:14px;font-family:Times;color:#0860a8;}
	.ft06{font-size:16px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:20px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:21px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page425-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce425.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:760px;white-space:nowrap" class="ft00">Vol. 3A&#160;11-13</p>
<p style="position:absolute;top:47px;left:686px;white-space:nowrap" class="ft01">MEMORY CACHE CONTROL</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:100px;left:95px;white-space:nowrap" class="ft07"><b>NW flag, bit&#160;29 of control&#160;register CR0</b>&#160;—&#160;Controls the&#160;write policy&#160;for&#160;system memory&#160;locations (see&#160;<br/><a href="o_fe12b1e2a880e0ce-75.html">Section 2.5,&#160;“Control&#160;Registers”).&#160;</a>If the&#160;NW and&#160;CD&#160;flags are&#160;clear,&#160;write-back is&#160;enabled for&#160;the&#160;whole&#160;of&#160;<br/>system memory,&#160;but may be&#160;restricted&#160;for&#160;individual pages&#160;or regions&#160;of memory&#160;by other&#160;cache-control&#160;<br/><a href="o_fe12b1e2a880e0ce-424.html">mechanisms. Table 11-5 shows ho</a>w&#160;the&#160;other&#160;combinations of CD&#160;and&#160;NW flags&#160;affects caching.</p>
<p style="position:absolute;top:184px;left:428px;white-space:nowrap" class="ft05">NOTES</p>
<p style="position:absolute;top:210px;left:122px;white-space:nowrap" class="ft07">For&#160;the&#160;Pentium 4 and Intel Xeon&#160;processors, the NW&#160;flag is a don’t care&#160;flag;&#160;that is, when the CD&#160;<br/>flag&#160;is set,&#160;the&#160;processor uses&#160;the no-fill cache&#160;mode, regardless of the&#160;setting&#160;of&#160;the NW&#160;flag.<br/>For&#160;Intel Atom&#160;processors,&#160;the NW flag&#160;is a&#160;don’t&#160;care flag;&#160;that is, when the&#160;CD flag&#160;is set,&#160;the&#160;<br/>processor&#160;disables caching, regardless of&#160;the&#160;setting&#160;of&#160;the NW flag.<br/>For the&#160;Pentium&#160;processor,&#160;when&#160;the&#160;L1 cache&#160;is&#160;disabled&#160;(the&#160;CD&#160;and NW&#160;flags in&#160;control&#160;register&#160;<br/>CR0 are set), external snoops are accepted&#160;in&#160;DP&#160;(dual-processor) systems&#160;and inhibited&#160;in&#160;unipro-<br/>cessor&#160;systems.&#160;<br/>When snoops are inhibited, address parity is not&#160;checked&#160;and&#160;APCHK#&#160;is not asserted&#160;for a corrupt&#160;<br/>address; however,&#160;when&#160;snoops are accepted, address&#160;parity&#160;is checked&#160;and APCHK#&#160;is asserted&#160;<br/>for corrupt&#160;addresses.</p>
<p style="position:absolute;top:410px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:411px;left:95px;white-space:nowrap" class="ft07"><b>PCD and&#160;PWT flags&#160;in&#160;paging-structure entries</b>&#160;—&#160;Control&#160;the&#160;memory type&#160;used&#160;to access paging&#160;<br/>structures and&#160;pa<a href="o_fe12b1e2a880e0ce-138.html">ges (see Section 4.9, “Paging&#160;and Memory&#160;Typing”).</a></p>
<p style="position:absolute;top:449px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:450px;left:95px;white-space:nowrap" class="ft07"><b>PCD and&#160;PWT flags&#160;in&#160;control register CR3</b>&#160;— Control&#160;the memory type used to access the&#160;first paging&#160;<br/>structure of&#160;the&#160;current paging-structure hierarchy&#160;(see&#160;<a href="o_fe12b1e2a880e0ce-138.html">Section&#160;4.9,&#160;“Paging and&#160;Memory Typing”).</a></p>
<p style="position:absolute;top:488px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:489px;left:95px;white-space:nowrap" class="ft07"><b>G&#160;(global)&#160;flag&#160;in&#160;the&#160;page-directory&#160;and&#160;page-table&#160;entries (introduced to the IA-32 architecture in&#160;<br/>the P6&#160;family processors)</b>&#160;— Controls the&#160;flushing&#160;of TLB&#160;entries&#160;for&#160;individual&#160;pages.&#160;See<a href="o_fe12b1e2a880e0ce-139.html">&#160;Section 4.10,&#160;<br/>“Caching Translation Information,” for&#160;</a>more&#160;information about this flag.</p>
<p style="position:absolute;top:544px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:544px;left:95px;white-space:nowrap" class="ft07"><b>PGE (page global enable) flag&#160;in control&#160;register&#160;CR4&#160;</b>— Enables&#160;the establishment of&#160;global&#160;pages with&#160;<br/>the&#160;G flag.&#160;S<a href="o_fe12b1e2a880e0ce-139.html">ee&#160;Section&#160;4.10,&#160;“Caching&#160;Translation Information,” for more</a>&#160;information about&#160;this&#160;flag.</p>
<p style="position:absolute;top:583px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:583px;left:95px;white-space:nowrap" class="ft07"><b>Memory type range registers&#160;(MTRRs)&#160;(introduced in&#160;P6&#160;family processors)</b>&#160;— Control&#160;the&#160;type&#160;of&#160;<br/>caching used in specific&#160;regions of&#160;physical memory.&#160;Any&#160;of&#160;the caching&#160;types described in<a href="o_fe12b1e2a880e0ce-418.html">&#160;Section&#160;11.3,&#160;<br/>“Methods&#160;of Caching&#160;Available,” can&#160;</a>be&#160;selected.&#160;See<a href="o_fe12b1e2a880e0ce-432.html">&#160;Section 11.11,&#160;“Memory Type&#160;Range&#160;Registers&#160;(MTRRs),”&#160;<br/></a>for&#160;a detailed&#160;description&#160;of the&#160;MTRRs.</p>
<p style="position:absolute;top:655px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:655px;left:95px;white-space:nowrap" class="ft07"><b>Page Attribute Table (PAT) MSR (introduced in the&#160;Pentium&#160;III&#160;processor)</b>&#160;—&#160;Extends&#160;the memory&#160;<br/>typing&#160;capabilities of the&#160;processor&#160;to permit memory&#160;types&#160;to&#160;be&#160;assigned&#160;on&#160;a page-by-page&#160;basis (see&#160;<br/><a href="o_fe12b1e2a880e0ce-445.html">Section 11.12,&#160;“Page Attribute Table&#160;(PAT)”).</a></p>
<p style="position:absolute;top:710px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:711px;left:95px;white-space:nowrap" class="ft07"><b>Third-Level Cache Disable&#160;flag, bit 6 of the IA32_MISC_ENABLE&#160;MSR (Available only in&#160;processors&#160;<br/>based on Intel NetBurst microarchitecture)</b>&#160;— Allows&#160;the L3&#160;cache to&#160;be&#160;disabled&#160;and enabled,&#160;indepen-<br/>dently&#160;of&#160;the&#160;L1&#160;and&#160;L2&#160;caches.&#160;</p>
<p style="position:absolute;top:766px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:766px;left:95px;white-space:nowrap" class="ft07"><b>KEN# and&#160;WB/WT# pins&#160;(Pentium processor)</b>&#160;— Allow external hardware&#160;to control&#160;the caching&#160;method&#160;<br/>used for specific areas&#160;of memory. They&#160;perform similar&#160;(but&#160;not identical) functions&#160;to the&#160;MTRRs in&#160;the P6&#160;<br/>family processors.</p>
<p style="position:absolute;top:821px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:822px;left:95px;white-space:nowrap" class="ft07"><b>PCD and PWT pins (Pentium&#160;processor)</b>&#160;— These pins (which&#160;are associated with the PCD and&#160;PWT flags in&#160;<br/>control register&#160;CR3&#160;and&#160;in the&#160;page-directory and&#160;page-table&#160;entries) permit caching&#160;in an&#160;external L2 cache&#160;<br/>to&#160;be&#160;controlled on&#160;a page-by-page&#160;basis,&#160;consistent with the&#160;control&#160;exercised on&#160;the&#160;L1 cache&#160;of these&#160;<br/>processors.&#160;The P6&#160;and more&#160;recent processor families&#160;do not provide these pins&#160;because the&#160;L2&#160;cache in&#160;<br/>internal to&#160;the chip&#160;package.</p>
<p style="position:absolute;top:938px;left:69px;white-space:nowrap" class="ft06">11.5.2&#160;</p>
<p style="position:absolute;top:938px;left:150px;white-space:nowrap" class="ft06">Precedence&#160;of&#160;Cache Controls</p>
<p style="position:absolute;top:969px;left:69px;white-space:nowrap" class="ft07">The&#160;cache control flags and&#160;MTRRs operate&#160;hierarchically for&#160;restricting caching. That&#160;is, if the&#160;CD flag&#160;is set,&#160;<br/>caching&#160;is&#160;prevented globally&#160;(see<a href="o_fe12b1e2a880e0ce-424.html">&#160;Table 11-5</a>).&#160;If&#160;the CD&#160;flag&#160;is clear,&#160;the page-level&#160;cache control&#160;flags and/or the&#160;<br/>MTRRs&#160;can be&#160;used&#160;to restrict&#160;caching. If there is an&#160;overlap of page-level and MTRR caching&#160;controls,&#160;the&#160;mecha-<br/>nism&#160;that&#160;prevents caching has precedence.&#160;For example,&#160;if&#160;an&#160;MTRR&#160;makes a region of system memory&#160;uncache-<br/>able, a page-level caching control cannot be&#160;used to enable&#160;caching for a page in that region. The converse is also&#160;</p>
</div>
</body>
</html>
