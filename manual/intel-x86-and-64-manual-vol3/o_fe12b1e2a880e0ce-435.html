<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 435</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:14px;font-family:Times;color:#0860a8;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:8px;font-family:Times;color:#000000;}
	.ft08{font-size:7px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft011{font-size:7px;line-height:8px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page435-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce435.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:760px;white-space:nowrap" class="ft00">Vol. 3A&#160;11-23</p>
<p style="position:absolute;top:47px;left:686px;white-space:nowrap" class="ft01">MEMORY CACHE CONTROL</p>
<p style="position:absolute;top:319px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:320px;left:95px;white-space:nowrap" class="ft09"><b>FE (fixed MTRRs enabled)&#160;flag, bit&#160;10&#160;</b>— Fixed-range MTRRs are enabled when&#160;set;&#160;fixed-range MTRRs are&#160;<br/>disabled&#160;when&#160;clear.&#160;When the&#160;fixed-range&#160;MTRRs&#160;are&#160;enabled, they take&#160;priority&#160;over&#160;the variable-range&#160;<br/>MTRRs when overlaps&#160;in ranges&#160;occur.&#160;If&#160;the&#160;fixed-range&#160;MTRRs are&#160;disabled,&#160;the&#160;variable-range&#160;MTRRs&#160;can&#160;<br/>still be used and&#160;can map&#160;the range&#160;ordinarily covered&#160;by the&#160;fixed-range&#160;MTRRs.</p>
<p style="position:absolute;top:391px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:392px;left:95px;white-space:nowrap" class="ft09"><b>E (MTRRs enabled) flag, bit 11&#160;</b>— MTRRs are&#160;enabled&#160;when&#160;set; all&#160;MTRRs&#160;are disabled&#160;when&#160;clear,&#160;and&#160;the&#160;<br/>UC&#160;memory&#160;type&#160;is applied to all&#160;of physical memory. When this flag&#160;is set,&#160;the FE&#160;flag can&#160;disable the&#160;fixed-<br/>range MTRRs; when the flag&#160;is clear,&#160;the&#160;FE&#160;flag has no affect. When&#160;the E flag is&#160;set, the type specified&#160;in the&#160;<br/>default memory&#160;type&#160;field&#160;is&#160;used&#160;for areas of&#160;memory&#160;not already mapped by&#160;either&#160;a fixed or&#160;variable&#160;MTRR.</p>
<p style="position:absolute;top:465px;left:69px;white-space:nowrap" class="ft09">Bits 8&#160;and 9,&#160;and bits 12&#160;through 63,&#160;in the&#160;IA32_MTRR_DEF_TYPE MSR are reserved; the&#160;processor&#160;generates a&#160;<br/>general-protection&#160;exception (#GP) if&#160;software attempts to&#160;write&#160;nonzero&#160;values to them.</p>
<p style="position:absolute;top:526px;left:69px;white-space:nowrap" class="ft05">11.11.2.2&#160;&#160;&#160;Fixed Range&#160;MTRRs</p>
<p style="position:absolute;top:555px;left:69px;white-space:nowrap" class="ft09">The&#160;fixed memory ranges are&#160;mapped&#160;with 11&#160;fixed-range&#160;registers of 64&#160;bits each. Each of&#160;these registers&#160;is&#160;<br/>divided&#160;into 8-bit fields that are used to&#160;specify the&#160;memory type&#160;for each&#160;of the&#160;sub-ranges&#160;the&#160;register&#160;controls:</p>
<p style="position:absolute;top:593px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:594px;left:95px;white-space:nowrap" class="ft09"><b>Register&#160;IA32_MTRR_FIX64K_00000&#160;</b>— Maps&#160;the&#160;512-KByte&#160;address range&#160;from 0H&#160;to 7FFFFH. This&#160;range&#160;<br/>is&#160;divided&#160;into eight 64-KByte&#160;sub-ranges.</p>
<p style="position:absolute;top:632px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:633px;left:95px;white-space:nowrap" class="ft09"><b>Registers IA32_MTRR_FIX16K_80000&#160;and&#160;IA32_MTRR_FIX16K_A0000&#160;</b>— Maps the&#160;two&#160;128-KByte&#160;<br/>address ranges from&#160;80000H&#160;to&#160;BFFFFH.&#160;This range is&#160;divided into sixteen&#160;16-KByte&#160;sub-ranges, 8&#160;ranges&#160;per&#160;<br/>register.</p>
<p style="position:absolute;top:687px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:688px;left:95px;white-space:nowrap" class="ft09"><b>Registers IA32_MTRR_FIX4K_C0000&#160;through IA32_MTRR_FIX4K_F8000&#160;</b>— Maps eight 32-KByte&#160;<br/>address ranges from C0000H&#160;to&#160;FFFFFH.&#160;This range is&#160;divided into&#160;sixty-four 4-KByte sub-ranges, 8&#160;ranges&#160;per&#160;<br/>register.</p>
<p style="position:absolute;top:745px;left:69px;white-space:nowrap" class="ft010"><a href="o_fe12b1e2a880e0ce-436.html">Table 11-9</a>&#160;shows the&#160;relationship&#160;between&#160;the fixed&#160;physical-address ranges&#160;and the&#160;corresponding fields of&#160;the&#160;<br/>fixed-range MTRRs;&#160;<a href="o_fe12b1e2a880e0ce-433.html">Table&#160;11-8&#160;</a>shows&#160;memory type&#160;encoding&#160;for MTRRs.<br/>For&#160;the&#160;P6&#160;family&#160;processors,&#160;the prefix&#160;for&#160;the fixed&#160;range&#160;MTRRs is&#160;MTRRfix.</p>
<p style="position:absolute;top:830px;left:69px;white-space:nowrap" class="ft05">11.11.2.3&#160;&#160;&#160;Variable&#160;Range MTRRs</p>
<p style="position:absolute;top:858px;left:69px;white-space:nowrap" class="ft010">The&#160;Pentium&#160;4,&#160;Intel Xeon,&#160;and P6 family processors permit&#160;software to&#160;specify&#160;the memory type for m variable-<br/>size&#160;address&#160;ranges,&#160;using&#160;a pair of&#160;MTRRs&#160;for each range.&#160;The number m of&#160;ranges supported&#160;is given in bits 7:0&#160;<br/>of&#160;the IA32_MTRRCAP&#160;MSR&#160;<a href="o_fe12b1e2a880e0ce-434.html">(see&#160;Figure&#160;11-5</a><a href="o_fe12b1e2a880e0ce-433.html">&#160;in Section 11.11.1).<br/></a>The first entry&#160;in&#160;each&#160;pair (IA32_MTRR_PHYSBASEn) defines&#160;the&#160;base&#160;address&#160;and memory type&#160;for the&#160;range;&#160;<br/>the second entry&#160;(IA32_MTRR_PHYSMASKn)&#160;contains a&#160;mask&#160;used&#160;to&#160;determine&#160;the&#160;address&#160;range.&#160;The&#160;“n” suffix&#160;<br/>is in&#160;the&#160;range 0&#160;through m–1&#160;and&#160;identifies&#160;a specific register&#160;pair.<br/>For P6 family&#160;processors,&#160;the prefixes for these variable&#160;range MTRRs are MTRRphysBase&#160;and MTRRphysMask.</p>
<p style="position:absolute;top:274px;left:313px;white-space:nowrap" class="ft06">Figure&#160;11-6.&#160;&#160;IA32_MTRR_DEF_TYPE&#160;MSR</p>
<p style="position:absolute;top:225px;left:266px;white-space:nowrap" class="ft00">Type&#160;— Default memory type</p>
<p style="position:absolute;top:207px;left:267px;white-space:nowrap" class="ft00">FE — Fixed-range MTRRs enable/disable</p>
<p style="position:absolute;top:191px;left:267px;white-space:nowrap" class="ft00">E — MTRR&#160;enable/disable</p>
<p style="position:absolute;top:132px;left:250px;white-space:nowrap" class="ft07">63</p>
<p style="position:absolute;top:133px;left:649px;white-space:nowrap" class="ft07">0</p>
<p style="position:absolute;top:158px;left:357px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:154px;left:516px;white-space:nowrap" class="ft011">F<br/>E</p>
<p style="position:absolute;top:133px;left:552px;white-space:nowrap" class="ft07">7</p>
<p style="position:absolute;top:133px;left:512px;white-space:nowrap" class="ft07">10</p>
<p style="position:absolute;top:133px;left:501px;white-space:nowrap" class="ft07">11</p>
<p style="position:absolute;top:158px;left:586px;white-space:nowrap" class="ft00">Type</p>
<p style="position:absolute;top:133px;left:540px;white-space:nowrap" class="ft07">8</p>
<p style="position:absolute;top:133px;left:528px;white-space:nowrap" class="ft07">9</p>
<p style="position:absolute;top:133px;left:488px;white-space:nowrap" class="ft07">12</p>
<p style="position:absolute;top:158px;left:504px;white-space:nowrap" class="ft08">E</p>
<p style="position:absolute;top:250px;left:299px;white-space:nowrap" class="ft00">Reserved</p>
</div>
</body>
</html>
