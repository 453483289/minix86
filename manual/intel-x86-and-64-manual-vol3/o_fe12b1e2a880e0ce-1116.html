<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1116</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#000000;}
	.ft04{font-size:16px;font-family:Times;color:#0860a8;}
	.ft05{font-size:8px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1116-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1116.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">26-24&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">VM&#160;ENTRIES</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft02">The following items&#160;detail&#160;the&#160;treatment of&#160;these VM&#160;exits:</p>
<p style="position:absolute;top:122px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:123px;left:93px;white-space:nowrap" class="ft02">These VM&#160;exits follow event injection if such&#160;injection&#160;is specified&#160;for&#160;VM&#160;entry.</p>
<p style="position:absolute;top:145px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:145px;left:93px;white-space:nowrap" class="ft06">Debug-trap&#160;exceptions&#160;(see<a href="o_fe12b1e2a880e0ce-1114.html">&#160;Section 26.6.3)&#160;</a>and higher&#160;priority events take&#160;priority&#160;over&#160;VM&#160;exits&#160;caused&#160;by&#160;<br/>this&#160;control. VM&#160;exits caused&#160;by this&#160;control take&#160;priority over non-maskable interrupts (NMIs)&#160;and&#160;lower&#160;<br/>priority events.&#160;</p>
<p style="position:absolute;top:200px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:201px;left:93px;white-space:nowrap" class="ft06">VM&#160;exits caused by this control wake&#160;the logical processor&#160;if it just entered&#160;either the HLT state or the shutdown&#160;<br/>state&#160;because&#160;of&#160;a VM&#160;en<a href="o_fe12b1e2a880e0ce-1114.html">try (see Section 26.6.2). They&#160;</a>do&#160;not occur&#160;if&#160;the logical processor just entered the&#160;<br/>wait-for-SIPI state.</p>
<p style="position:absolute;top:284px;left:68px;white-space:nowrap" class="ft04">26.6.7&#160;</p>
<p style="position:absolute;top:284px;left:148px;white-space:nowrap" class="ft04">VM Exits Induced by&#160;the TPR Threshold</p>
<p style="position:absolute;top:315px;left:68px;white-space:nowrap" class="ft06">If the “use TPR shadow” and “virtualize&#160;APIC accesses”&#160;VM-execution&#160;controls&#160;are both&#160;1 and&#160;the&#160;“virtual-interrupt&#160;<br/>delivery” VM-execution control&#160;is 0,&#160;a VM&#160;exit occurs&#160;immediately after&#160;VM&#160;entry if&#160;the value&#160;of&#160;bits&#160;3:0 of the TPR&#160;<br/>threshold VM-execution&#160;control&#160;field is&#160;greater than&#160;the value of bits&#160;7:4&#160;of&#160;VT<a href="o_fe12b1e2a880e0ce-1167.html">PR (see Section 29.1.1).</a></p>
<p style="position:absolute;top:345px;left:759px;white-space:nowrap" class="ft05">1</p>
<p style="position:absolute;top:372px;left:68px;white-space:nowrap" class="ft02">The following items&#160;detail&#160;the&#160;treatment of&#160;these VM&#160;exits:</p>
<p style="position:absolute;top:394px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:394px;left:93px;white-space:nowrap" class="ft06">The&#160;VM&#160;exits are&#160;not&#160;blocked if&#160;RFLAGS.IF =&#160;0&#160;or&#160;by the&#160;setting&#160;of bits in&#160;the interruptibility-state field in&#160;guest-<br/>state area.</p>
<p style="position:absolute;top:433px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:433px;left:93px;white-space:nowrap" class="ft02">The&#160;VM&#160;exits follow&#160;event&#160;injection&#160;if such injection is&#160;specified for VM&#160;entry.</p>
<p style="position:absolute;top:455px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:456px;left:93px;white-space:nowrap" class="ft06">VM&#160;exits&#160;caused&#160;by&#160;this control take&#160;priority&#160;over&#160;system-management interrupts (SMIs),&#160;INIT&#160;signals, and&#160;<br/>lower priority events.&#160;They thus have&#160;priority&#160;over&#160;the&#160;VM&#160;exits&#160;described&#160;<a href="o_fe12b1e2a880e0ce-1115.html">in Section 26.6.5, Section 26.6.6,</a>&#160;<br/><a href="o_fe12b1e2a880e0ce-1116.html">and Section 26.6.8,</a>&#160;as well&#160;as any&#160;interrupts or&#160;debug exceptions&#160;that may be pending&#160;at the&#160;time of VM&#160;entry.</p>
<p style="position:absolute;top:511px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:511px;left:93px;white-space:nowrap" class="ft06">These VM&#160;exits wake the&#160;logical&#160;processor&#160;if it&#160;just entered&#160;the HLT&#160;state as&#160;part&#160;of&#160;a VM&#160;entry (see<a href="o_fe12b1e2a880e0ce-1114.html">&#160;Section&#160;<br/>26.6.2).&#160;</a>They&#160;do not occur&#160;if&#160;the logical processor just&#160;entered the&#160;shutdown state&#160;or the&#160;wait-for-SIPI state.<br/>If such&#160;a VM&#160;exit is suppressed&#160;because the processor just entered the shutdown state,&#160;it&#160;occurs after the<br/>delivery of&#160;any event&#160;that cause the logical processor&#160;to leave the&#160;shutdown&#160;state while remaining in&#160;VMX<br/>non-root&#160;operation (e.g.,&#160;due&#160;to an NMI that&#160;occurs&#160;while&#160;the “NMI-exiting” VM-execution&#160;control is 0).</p>
<p style="position:absolute;top:605px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:606px;left:93px;white-space:nowrap" class="ft02">The&#160;basic&#160;exit reason&#160;is “TPR below threshold.”</p>
<p style="position:absolute;top:656px;left:68px;white-space:nowrap" class="ft04">26.6.8&#160;</p>
<p style="position:absolute;top:656px;left:148px;white-space:nowrap" class="ft04">Pending MTF VM&#160;Exits</p>
<p style="position:absolute;top:687px;left:68px;white-space:nowrap" class="ft06"><a href="o_fe12b1e2a880e0ce-1113.html">As noted in Section&#160;26.5.2,</a>&#160;VM&#160;entry may&#160;cause&#160;an&#160;MTF&#160;VM&#160;exit&#160;to be&#160;pending immediately after&#160;VM&#160;entry.&#160;The&#160;<br/>following items&#160;detail&#160;the&#160;treatment of these VM&#160;exits:</p>
<p style="position:absolute;top:725px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:726px;left:93px;white-space:nowrap" class="ft06">System-management&#160;interrupts (SMIs), INIT&#160;signals,&#160;and&#160;higher priority events take&#160;priority over these&#160;<br/>VM&#160;exits. These VM&#160;exits take&#160;priority&#160;over&#160;debug-trap exceptions&#160;and lower priority&#160;events.&#160;</p>
<p style="position:absolute;top:764px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:765px;left:93px;white-space:nowrap" class="ft06">These VM&#160;exits wake the&#160;logical&#160;processor&#160;if it&#160;just entered&#160;the HLT&#160;state because&#160;of&#160;a VM&#160;entry (see<a href="o_fe12b1e2a880e0ce-1114.html">&#160;Section&#160;<br/>26.6.2).&#160;</a>They&#160;do not occur&#160;if&#160;the logical processor just&#160;entered the&#160;shutdown state&#160;or the&#160;wait-for-SIPI state.</p>
<p style="position:absolute;top:832px;left:68px;white-space:nowrap" class="ft04">26.6.9&#160;</p>
<p style="position:absolute;top:832px;left:148px;white-space:nowrap" class="ft04">VM&#160;Entries and Advanced Debugging Features</p>
<p style="position:absolute;top:862px;left:68px;white-space:nowrap" class="ft06">VM&#160;entries are not logged with&#160;last-branch&#160;records, do&#160;not produce branch-trace messages, and do not&#160;update the&#160;<br/>branch-trace&#160;store.</p>
<p style="position:absolute;top:1038px;left:68px;white-space:nowrap" class="ft02">1.&#160;“Virtualize&#160;APIC&#160;accesses” and&#160;“virtual-interrupt&#160;delivery” are secondary processor-based VM-execution&#160;controls.&#160;If bit&#160;31&#160;of&#160;the pri-</p>
<p style="position:absolute;top:1054px;left:89px;white-space:nowrap" class="ft02">mary processor-based&#160;VM-execution controls is&#160;0, VM&#160;entry functions as if&#160;these&#160;controls were&#160;0.&#160;Se<a href="o_fe12b1e2a880e0ce-1055.html">e Section 24.6.2</a>.</p>
</div>
</body>
</html>
