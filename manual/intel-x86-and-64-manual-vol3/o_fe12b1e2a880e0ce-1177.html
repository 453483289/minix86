<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1177</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:14px;font-family:Times;color:#0860a8;}
	.ft06{font-size:8px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1177-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1177.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:761px;white-space:nowrap" class="ft00">Vol. 3C&#160;29-11</p>
<p style="position:absolute;top:47px;left:549px;white-space:nowrap" class="ft01">APIC VIRTUALIZATION&#160;AND VIRTUAL&#160;INTERRUPTS</p>
<p style="position:absolute;top:100px;left:94px;white-space:nowrap" class="ft07">access’s linear&#160;<a href="o_fe12b1e2a880e0ce-1177.html">address.&#160;Section 29.4.6.1 discusses&#160;</a>the&#160;treatment of guest-physical&#160;accesses to&#160;the APIC-<br/>access page.</p>
<p style="position:absolute;top:139px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:139px;left:95px;white-space:nowrap" class="ft07">An&#160;access is&#160;called a&#160;<b>physical access</b>&#160;if (1)&#160;either (a)&#160;the&#160;“enable&#160;EPT” VM-execution&#160;control&#160;is 0; or (b)&#160;the&#160;<br/>access’s physical address&#160;is not&#160;the&#160;result&#160;of&#160;a translation&#160;through the&#160;EPT paging&#160;structures; and&#160;(2)&#160;either&#160;<br/>(a)&#160;the access is&#160;not generated by a&#160;linear&#160;address;&#160;or (b)&#160;the&#160;access’s physical address&#160;is not the&#160;translation&#160;<br/>of its&#160;<a href="o_fe12b1e2a880e0ce-1177.html">linear address. Section 29.4.6.2&#160;</a>discusses the&#160;treatment of physical accesses&#160;to the&#160;APIC-access&#160;page.</p>
<p style="position:absolute;top:233px;left:69px;white-space:nowrap" class="ft05">29.4.6.1 &#160;&#160;Guest-Physical Accesses to&#160;the APIC-Access Page</p>
<p style="position:absolute;top:262px;left:69px;white-space:nowrap" class="ft02">Guest-physical accesses include&#160;the&#160;following&#160;when guest-physical addresses are&#160;being translated&#160;using EPT:</p>
<p style="position:absolute;top:283px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:284px;left:95px;white-space:nowrap" class="ft07">Reads from the&#160;guest&#160;paging&#160;structures when&#160;translating a&#160;linear address&#160;(such&#160;an&#160;access uses&#160;a guest-<br/>physical&#160;address that is&#160;not the&#160;translation of that&#160;linear address).</p>
<p style="position:absolute;top:322px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:323px;left:95px;white-space:nowrap" class="ft07">Loads of the&#160;page-directory-pointer-table&#160;entries by MOV to&#160;CR&#160;when&#160;the logical processor is&#160;using (or&#160;that&#160;<br/>causes&#160;the logical processor to&#160;use) PAE&#160;paging&#160;(see<a href="o_fe12b1e2a880e0ce-117.html">&#160;Section 4.4).</a></p>
<p style="position:absolute;top:361px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:362px;left:95px;white-space:nowrap" class="ft07">Updates to&#160;the&#160;accessed&#160;and dirty flags&#160;in the&#160;guest&#160;paging&#160;structures when using&#160;a linear&#160;address (such&#160;an&#160;<br/>access uses&#160;a guest-physical&#160;address that is&#160;not the&#160;translation of that&#160;linear address).</p>
<p style="position:absolute;top:403px;left:69px;white-space:nowrap" class="ft07">Every guest-physical&#160;access to&#160;an address on&#160;the APIC-access page causes an&#160;APIC-access VM&#160;exit. Such accesses&#160;<br/>are never virtualized&#160;regardless of the page offset.<br/>The&#160;following items specify&#160;the priority&#160;relative&#160;to other events&#160;of&#160;APIC-access VM&#160;exits caused by guest-physical&#160;<br/>accesses to the&#160;APIC-access page.</p>
<p style="position:absolute;top:481px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:482px;left:95px;white-space:nowrap" class="ft07">The&#160;priority&#160;of&#160;an APIC-access VM&#160;exit caused by a&#160;guest-physical access to&#160;memory&#160;is below&#160;that&#160;of any&#160;EPT&#160;<br/>violation that that access&#160;may incur.&#160;That&#160;is, a&#160;guest-physical access does not cause&#160;an&#160;APIC-access&#160;VM&#160;exit if&#160;<br/>it would cause&#160;an EPT&#160;violation.</p>
<p style="position:absolute;top:537px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:538px;left:95px;white-space:nowrap" class="ft07">With&#160;respect to all&#160;other events, any&#160;APIC-access&#160;VM&#160;exit&#160;caused&#160;by a&#160;guest-physical access&#160;has the&#160;same&#160;<br/>priority as&#160;any EPT violation that the&#160;guest-physical access could&#160;cause.</p>
<p style="position:absolute;top:598px;left:69px;white-space:nowrap" class="ft05">29.4.6.2 &#160;&#160;Physical&#160;Accesses to the&#160;APIC-Access&#160;Page</p>
<p style="position:absolute;top:627px;left:69px;white-space:nowrap" class="ft02">Physical accesses&#160;include the&#160;following:</p>
<p style="position:absolute;top:649px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:649px;left:95px;white-space:nowrap" class="ft08">If&#160;the “enable EPT”&#160;VM-execution control is&#160;0:<br/>—&#160;Reads&#160;from&#160;the&#160;paging&#160;structures when translating&#160;a&#160;linear address.<br/>—&#160;Loads of&#160;the page-directory-pointer-table entries by MOV to&#160;CR when the&#160;logical processor&#160;is using&#160;(or&#160;that&#160;</p>
<p style="position:absolute;top:714px;left:120px;white-space:nowrap" class="ft02">causes&#160;the&#160;logical&#160;processor&#160;to use)&#160;PAE paging&#160;(see&#160;<a href="o_fe12b1e2a880e0ce-117.html">Section 4.4)</a>.</p>
<p style="position:absolute;top:738px;left:95px;white-space:nowrap" class="ft02">—&#160;Updates&#160;to the&#160;accessed and&#160;dirty flags in the&#160;paging structures.</p>
<p style="position:absolute;top:760px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:760px;left:95px;white-space:nowrap" class="ft07">If the “enable EPT” VM-execution control is&#160;1,&#160;accesses&#160;to the EPT paging&#160;structures (including&#160;updates&#160;to the&#160;<br/>accessed and&#160;dirty&#160;flags for EPT).</p>
<p style="position:absolute;top:799px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:799px;left:95px;white-space:nowrap" class="ft09">Any&#160;of&#160;the following accesses made by the&#160;processor&#160;to support VMX&#160;non-root&#160;operation:<br/>—&#160;Accesses to&#160;the&#160;VMCS region.<br/>—&#160;Accesses to&#160;data structures&#160;referenced&#160;(directly or&#160;indirectly) by physical addresses in VM-execution&#160;</p>
<p style="position:absolute;top:864px;left:120px;white-space:nowrap" class="ft02">control fields in the&#160;VMCS. These include the&#160;I/O bitmaps, the&#160;MSR bitmaps,&#160;and&#160;the&#160;virtual-APIC&#160;page.</p>
<p style="position:absolute;top:886px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:886px;left:95px;white-space:nowrap" class="ft02">Accesses&#160;that effect&#160;transitions into and out of SMM.</p>
<p style="position:absolute;top:884px;left:448px;white-space:nowrap" class="ft06">13</p>
<p style="position:absolute;top:886px;left:461px;white-space:nowrap" class="ft02">&#160;These&#160;include the&#160;following:</p>
<p style="position:absolute;top:910px;left:95px;white-space:nowrap" class="ft09">—&#160;Accesses to&#160;SMRAM&#160;during SMI&#160;delivery and&#160;during execution of RSM.<br/>—&#160;Accesses during&#160;SMM VM&#160;exits (including&#160;accesses to&#160;MSEG)&#160;and during&#160;VM&#160;entries&#160;that&#160;return from SMM.</p>
<p style="position:absolute;top:1017px;left:69px;white-space:nowrap" class="ft02">12.&#160;“Enable&#160;EPT” is&#160;a&#160;secondary processor-based VM-execution&#160;control.&#160;If&#160;bit&#160;31&#160;of&#160;the&#160;primary processor-based&#160;VM-execution&#160;controls&#160;</p>
<p style="position:absolute;top:1033px;left:91px;white-space:nowrap" class="ft02">is&#160;0,&#160;VMX non-root&#160;operation functions as&#160;if&#160;the “enable&#160;EPT”&#160;VM-execution&#160;control were&#160;0.&#160;Se<a href="o_fe12b1e2a880e0ce-1055.html">e Section 24.6.2.</a></p>
<p style="position:absolute;top:1054px;left:69px;white-space:nowrap" class="ft02">13.&#160;Technically,&#160;these&#160;accesses&#160;do not occur&#160;in&#160;VMX non-root&#160;operation.&#160;They&#160;are&#160;included&#160;here&#160;for&#160;clarity.</p>
</div>
</body>
</html>
