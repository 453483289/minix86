<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 580</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#0860a8;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page580-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce580.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">17-6&#160;Vol. 3B</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">DEBUG,&#160;BRANCH&#160;PROFILE,&#160;TSC,&#160;AND RESOURCE&#160;MONITORING&#160;FEATURES</p>
<p style="position:absolute;top:511px;left:68px;white-space:nowrap" class="ft02">17.2.6&#160;</p>
<p style="position:absolute;top:511px;left:148px;white-space:nowrap" class="ft02">Debug Registers and Intel</p>
<p style="position:absolute;top:510px;left:357px;white-space:nowrap" class="ft01">®</p>
<p style="position:absolute;top:511px;left:370px;white-space:nowrap" class="ft02">&#160;64&#160;Processors</p>
<p style="position:absolute;top:541px;left:68px;white-space:nowrap" class="ft07">For&#160;Intel 64&#160;architecture&#160;processors,&#160;debug registers&#160;DR0–DR7&#160;are&#160;64&#160;bits. In&#160;16-bit or 32-bit&#160;modes&#160;(protected&#160;<br/>mode&#160;and compatibility mode), writes&#160;to&#160;a debug&#160;register fill the&#160;upper 32 bits&#160;with zeros. Reads&#160;from&#160;a debug&#160;<br/>register return&#160;the lower 32 bits.&#160;In 64-bit mode,&#160;MOV&#160;DRn&#160;instructions&#160;read&#160;or write all 64&#160;bits. Operand-size&#160;<br/>prefixes are ignored.&#160;<br/>In 64-bit mode,&#160;the upper 32 bits of DR6&#160;and DR7 are reserved&#160;and must be&#160;written with zeros. Writing&#160;1 to any of&#160;<br/>the&#160;upper 32 bits results&#160;in a&#160;#GP(0) exception&#160;(see<a href="o_fe12b1e2a880e0ce-581.html">&#160;Figure&#160;17-2)</a>.&#160;All 64 bits&#160;of DR0–DR3&#160;are writable by software.&#160;<br/>However,&#160;MOV DRn&#160;instructions do not check that addresses written to DR0–DR3&#160;are in the linear-address limits of&#160;<br/>the processor implementation&#160;(address matching is supported only&#160;on valid&#160;addresses generated&#160;by the&#160;processor&#160;<br/>implementation). Break point&#160;conditions for 8-byte&#160;memory&#160;read/writes&#160;are supported in all&#160;modes.</p>
<p style="position:absolute;top:736px;left:68px;white-space:nowrap" class="ft04">17.3 DEBUG&#160;</p>
<p style="position:absolute;top:736px;left:218px;white-space:nowrap" class="ft04">EXCEPTIONS</p>
<p style="position:absolute;top:772px;left:68px;white-space:nowrap" class="ft07">The&#160;Intel 64&#160;and IA-32 architectures&#160;dedicate two interrupt&#160;vectors&#160;to handling debug&#160;exceptions: vector 1 (debug&#160;<br/>exception,&#160;#DB) and&#160;vector&#160;3 (breakpoint exception,&#160;#BP). The following&#160;sections&#160;describe how these&#160;exceptions&#160;<br/>are generated and&#160;typical&#160;exception handler&#160;operations.</p>
<p style="position:absolute;top:865px;left:68px;white-space:nowrap" class="ft02">17.3.1&#160;</p>
<p style="position:absolute;top:865px;left:148px;white-space:nowrap" class="ft02">Debug Exception (#DB)—Interrupt&#160;Vector 1</p>
<p style="position:absolute;top:895px;left:68px;white-space:nowrap" class="ft07">The debug-exception&#160;handler is&#160;usually&#160;a debugger program&#160;or part of a&#160;larger&#160;software&#160;system. The&#160;processor&#160;<br/>generates a debug exception&#160;for any&#160;of several conditions.&#160;The&#160;debugger checks&#160;flags&#160;in the DR6&#160;and&#160;DR7 registers&#160;<br/>to determine which condition&#160;caused&#160;the&#160;exception and&#160;which other&#160;conditions might&#160;apply.<a href="o_fe12b1e2a880e0ce-581.html">&#160;Table 17-2 shows the&#160;<br/></a>states of these flags&#160;following&#160;the generation of each&#160;kind&#160;of breakpoint condition.<br/>Instruction-breakpoint and general-detect condition (see&#160;<a href="o_fe12b1e2a880e0ce-583.html">Section 17.3.1.3,&#160;“General-Detect&#160;Exception Condition”)&#160;<br/></a>result&#160;in&#160;faults; other&#160;debug-exception conditions&#160;result&#160;in traps.&#160;The&#160;debug exception&#160;may report one&#160;or both&#160;at&#160;<br/>one time. The&#160;following sections&#160;describe&#160;each class&#160;of&#160;debug exception.&#160;</p>
<p style="position:absolute;top:172px;left:76px;white-space:nowrap" class="ft03">Data&#160;operations&#160;that&#160;trap</p>
<p style="position:absolute;top:189px;left:76px;white-space:nowrap" class="ft03">- Read or&#160;write</p>
<p style="position:absolute;top:205px;left:76px;white-space:nowrap" class="ft03">- Read or&#160;write</p>
<p style="position:absolute;top:222px;left:76px;white-space:nowrap" class="ft03">- Write</p>
<p style="position:absolute;top:238px;left:76px;white-space:nowrap" class="ft03">- Write</p>
<p style="position:absolute;top:254px;left:76px;white-space:nowrap" class="ft03">- Read or&#160;write</p>
<p style="position:absolute;top:271px;left:76px;white-space:nowrap" class="ft03">- Read or&#160;write</p>
<p style="position:absolute;top:288px;left:76px;white-space:nowrap" class="ft03">- Read or&#160;write</p>
<p style="position:absolute;top:304px;left:76px;white-space:nowrap" class="ft03">- Write</p>
<p style="position:absolute;top:321px;left:76px;white-space:nowrap" class="ft03">- Write</p>
<p style="position:absolute;top:337px;left:76px;white-space:nowrap" class="ft03">- Write</p>
<p style="position:absolute;top:189px;left:440px;white-space:nowrap" class="ft03">A0001H</p>
<p style="position:absolute;top:205px;left:440px;white-space:nowrap" class="ft03">A0001H</p>
<p style="position:absolute;top:222px;left:440px;white-space:nowrap" class="ft03">A0002H</p>
<p style="position:absolute;top:238px;left:440px;white-space:nowrap" class="ft03">A0002H</p>
<p style="position:absolute;top:254px;left:440px;white-space:nowrap" class="ft03">B0001H</p>
<p style="position:absolute;top:271px;left:440px;white-space:nowrap" class="ft03">B0002H</p>
<p style="position:absolute;top:288px;left:440px;white-space:nowrap" class="ft03">B0002H</p>
<p style="position:absolute;top:304px;left:440px;white-space:nowrap" class="ft03">C0000H</p>
<p style="position:absolute;top:321px;left:440px;white-space:nowrap" class="ft03">C0001H</p>
<p style="position:absolute;top:337px;left:440px;white-space:nowrap" class="ft03">C0003H</p>
<p style="position:absolute;top:189px;left:641px;white-space:nowrap" class="ft03">1</p>
<p style="position:absolute;top:205px;left:641px;white-space:nowrap" class="ft03">2</p>
<p style="position:absolute;top:222px;left:641px;white-space:nowrap" class="ft03">1</p>
<p style="position:absolute;top:238px;left:641px;white-space:nowrap" class="ft03">2</p>
<p style="position:absolute;top:254px;left:641px;white-space:nowrap" class="ft03">4</p>
<p style="position:absolute;top:271px;left:641px;white-space:nowrap" class="ft03">1</p>
<p style="position:absolute;top:288px;left:641px;white-space:nowrap" class="ft03">2</p>
<p style="position:absolute;top:304px;left:641px;white-space:nowrap" class="ft03">4</p>
<p style="position:absolute;top:321px;left:641px;white-space:nowrap" class="ft03">2</p>
<p style="position:absolute;top:337px;left:641px;white-space:nowrap" class="ft03">1</p>
<p style="position:absolute;top:361px;left:76px;white-space:nowrap" class="ft03">Data operations that&#160;do not trap</p>
<p style="position:absolute;top:378px;left:76px;white-space:nowrap" class="ft03">- Read or&#160;write</p>
<p style="position:absolute;top:394px;left:76px;white-space:nowrap" class="ft03">- Read</p>
<p style="position:absolute;top:411px;left:76px;white-space:nowrap" class="ft03">- Read or&#160;write</p>
<p style="position:absolute;top:427px;left:76px;white-space:nowrap" class="ft03">- Read or&#160;write</p>
<p style="position:absolute;top:444px;left:76px;white-space:nowrap" class="ft03">- Read</p>
<p style="position:absolute;top:460px;left:76px;white-space:nowrap" class="ft03">- Read or&#160;write</p>
<p style="position:absolute;top:378px;left:440px;white-space:nowrap" class="ft03">A0000H</p>
<p style="position:absolute;top:394px;left:440px;white-space:nowrap" class="ft03">A0002H</p>
<p style="position:absolute;top:411px;left:440px;white-space:nowrap" class="ft03">A0003H</p>
<p style="position:absolute;top:427px;left:440px;white-space:nowrap" class="ft03">B0000H</p>
<p style="position:absolute;top:444px;left:440px;white-space:nowrap" class="ft03">C0000H</p>
<p style="position:absolute;top:460px;left:440px;white-space:nowrap" class="ft03">C0004H</p>
<p style="position:absolute;top:378px;left:641px;white-space:nowrap" class="ft03">1</p>
<p style="position:absolute;top:394px;left:641px;white-space:nowrap" class="ft03">1</p>
<p style="position:absolute;top:411px;left:641px;white-space:nowrap" class="ft03">4</p>
<p style="position:absolute;top:427px;left:641px;white-space:nowrap" class="ft03">2</p>
<p style="position:absolute;top:444px;left:641px;white-space:nowrap" class="ft03">2</p>
<p style="position:absolute;top:460px;left:641px;white-space:nowrap" class="ft03">4</p>
<p style="position:absolute;top:100px;left:310px;white-space:nowrap" class="ft05">Table&#160;17-1. &#160;Breakpoint&#160;Examples (Contd.)</p>
<p style="position:absolute;top:124px;left:386px;white-space:nowrap" class="ft03">Debug Register Setup</p>
<p style="position:absolute;top:148px;left:76px;white-space:nowrap" class="ft03">Debug Register</p>
<p style="position:absolute;top:148px;left:242px;white-space:nowrap" class="ft03">R/W<i>n</i></p>
<p style="position:absolute;top:148px;left:440px;white-space:nowrap" class="ft03">Breakpoint&#160;Address</p>
<p style="position:absolute;top:148px;left:641px;white-space:nowrap" class="ft03">LEN<i>n</i></p>
</div>
</body>
</html>
