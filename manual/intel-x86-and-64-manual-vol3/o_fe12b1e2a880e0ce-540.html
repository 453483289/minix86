<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 540</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:14px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:9px;line-height:15px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page540-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce540.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">15-34&#160;Vol. 3B</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">MACHINE-CHECK&#160;ARCHITECTURE</p>
<p style="position:absolute;top:101px;left:181px;white-space:nowrap" class="ft00">GOTO LOG&#160;MCA&#160;REGISTER;</p>
<p style="position:absolute;top:116px;left:162px;white-space:nowrap" class="ft00">ELSE &#160;(*&#160;It is a corrected error;&#160;continue to the&#160;next IA32_MCi_STATUS *)&#160;</p>
<p style="position:absolute;top:131px;left:181px;white-space:nowrap" class="ft00">GOTO CONTINUE;</p>
<p style="position:absolute;top:146px;left:143px;white-space:nowrap" class="ft00">FI; UC</p>
<p style="position:absolute;top:161px;left:105px;white-space:nowrap" class="ft00">FI; VAL&#160;</p>
<p style="position:absolute;top:176px;left:68px;white-space:nowrap" class="ft00">LOG MCA REGISTER:</p>
<p style="position:absolute;top:191px;left:105px;white-space:nowrap" class="ft00">SAVE IA32_MCi_STATUS;</p>
<p style="position:absolute;top:206px;left:105px;white-space:nowrap" class="ft00">If MISCV&#160;in IA32_MCi_STATUS&#160;</p>
<p style="position:absolute;top:221px;left:124px;white-space:nowrap" class="ft00">THEN</p>
<p style="position:absolute;top:236px;left:143px;white-space:nowrap" class="ft00">SAVE IA32_MCi_MISC;</p>
<p style="position:absolute;top:251px;left:105px;white-space:nowrap" class="ft05">FI;<br/>IF ADDRV in IA32_MCi_STATUS</p>
<p style="position:absolute;top:281px;left:124px;white-space:nowrap" class="ft00">THEN</p>
<p style="position:absolute;top:296px;left:143px;white-space:nowrap" class="ft00">SAVE IA32_MCi_ADDR;</p>
<p style="position:absolute;top:311px;left:105px;white-space:nowrap" class="ft05">FI;<br/>IF CLEAR_MC_BANK =&#160;TRUE</p>
<p style="position:absolute;top:341px;left:124px;white-space:nowrap" class="ft00">THEN</p>
<p style="position:absolute;top:356px;left:143px;white-space:nowrap" class="ft05">SET&#160;all&#160;0 to IA32_MCi_STATUS;<br/>If MISCV&#160;in IA32_MCi_STATUS&#160;</p>
<p style="position:absolute;top:386px;left:162px;white-space:nowrap" class="ft00">THEN</p>
<p style="position:absolute;top:401px;left:181px;white-space:nowrap" class="ft00">SET&#160;all&#160;0 to IA32_MCi_MISC;</p>
<p style="position:absolute;top:416px;left:143px;white-space:nowrap" class="ft00">FI;</p>
<p style="position:absolute;top:431px;left:143px;white-space:nowrap" class="ft00">IF ADDRV in IA32_MCi_STATUS</p>
<p style="position:absolute;top:446px;left:162px;white-space:nowrap" class="ft00">THEN</p>
<p style="position:absolute;top:461px;left:181px;white-space:nowrap" class="ft00">SET&#160;all&#160;0 to IA32_MCi_ADDR;</p>
<p style="position:absolute;top:476px;left:143px;white-space:nowrap" class="ft00">FI;</p>
<p style="position:absolute;top:491px;left:105px;white-space:nowrap" class="ft05">FI;<br/>CONTINUE:</p>
<p style="position:absolute;top:521px;left:87px;white-space:nowrap" class="ft00">OD;</p>
<p style="position:absolute;top:536px;left:68px;white-space:nowrap" class="ft05">( *END FOR *)<br/>RETURN;</p>
<p style="position:absolute;top:566px;left:68px;white-space:nowrap" class="ft00">(* End of MCA ERROR PROCESSING*)</p>
<p style="position:absolute;top:608px;left:68px;white-space:nowrap" class="ft02">15.10.4.2&#160;&#160;&#160;Corrected Machine-Check Handler&#160;for Error Recovery</p>
<p style="position:absolute;top:635px;left:68px;white-space:nowrap" class="ft06">When&#160;writing a&#160;corrected&#160;machine check handler,&#160;which is&#160;invoked as&#160;a result&#160;of&#160;CMCI&#160;or called from an OS CMC&#160;<br/>Polling&#160;dispatcher, consider the&#160;following:&#160;</p>
<p style="position:absolute;top:673px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:674px;left:93px;white-space:nowrap" class="ft06">The&#160;VAL&#160;(valid) flag in each IA32_MCi_STATUS&#160;register&#160;indicates whether the error&#160;information in the register&#160;<br/>is valid. If this flag is clear,&#160;the&#160;registers in that bank&#160;does not contain&#160;valid error information and does not need&#160;<br/>to be checked.</p>
<p style="position:absolute;top:729px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:730px;left:93px;white-space:nowrap" class="ft06">The&#160;CMCI&#160;or CMC polling handler&#160;is responsible&#160;for logging&#160;and clearing corrected&#160;errors. The UC&#160;flag in&#160;each&#160;<br/>IA32_MCi_Status register indicates&#160;whether&#160;the reported&#160;error was&#160;corrected (UC=0)&#160;or not (UC=1).&#160;</p>
<p style="position:absolute;top:768px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:769px;left:93px;white-space:nowrap" class="ft06">When IA32_MCG_CAP [24]&#160;is&#160;one, the&#160;CMC handler&#160;is also responsible for logging and&#160;clearing uncorrected no-<br/>action&#160;required (UCNA) errors. When&#160;the UC flag&#160;is&#160;one&#160;but the&#160;PCC,&#160;S,&#160;and&#160;AR&#160;flags are&#160;zero&#160;in&#160;the&#160;<br/>IA32_MCi_STATUS&#160;register, the&#160;reported&#160;error&#160;in&#160;this bank is an&#160;uncorrected no-action required (UCNA) error.&#160;<br/>In cases when&#160;SRAO error are signaled as UCNA error via&#160;CMCI, software can perform&#160;recovery for those errors&#160;<br/>identified<a href="o_fe12b1e2a880e0ce-529.html">&#160;in Table&#160;15-15.</a></p>
<p style="position:absolute;top:856px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:857px;left:93px;white-space:nowrap" class="ft06">In addition to&#160;corrected&#160;errors and&#160;UCNA errors, the CMC handler&#160;optionally logs&#160;uncorrected&#160;(UC=1 and&#160;<br/>PCC=1),&#160;software&#160;recoverable machine&#160;check&#160;errors (UC=1, PCC=0 and&#160;S=1), but should avoid&#160;clearing&#160;those&#160;<br/>errors from&#160;the MC banks. Clearing these&#160;errors&#160;may&#160;result&#160;in accidentally&#160;removing these errors before these&#160;<br/>errors are actually&#160;handled and&#160;processed&#160;by&#160;the&#160;MCE&#160;handler for attempted&#160;software error&#160;recovery.</p>
<p style="position:absolute;top:929px;left:68px;white-space:nowrap" class="ft03"><a href="o_fe12b1e2a880e0ce-541.html">Example&#160;15-5&#160;</a>gives pseudocode for a&#160;CMCI&#160;handler with UCR&#160;support.</p>
</div>
</body>
</html>
