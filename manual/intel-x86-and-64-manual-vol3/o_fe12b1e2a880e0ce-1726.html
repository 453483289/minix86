<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1726</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:14px;font-family:Times;color:#0860a8;}
	.ft03{font-size:12px;font-family:Times;color:#0860a8;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1726-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1726.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">36-42&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">INTEL® PROCESSOR TRACE</p>
<p style="position:absolute;top:99px;left:68px;white-space:nowrap" class="ft02">36.4.2.5 &#160;&#160;Packet&#160;Generation&#160;Disable (TIP.PGD)</p>
<p style="position:absolute;top:142px;left:322px;white-space:nowrap" class="ft03">Table 36-21. TIP.PGD Packet&#160;Definition</p>
<p style="position:absolute;top:166px;left:74px;white-space:nowrap" class="ft04">Name</p>
<p style="position:absolute;top:166px;left:177px;white-space:nowrap" class="ft04">Target&#160;IP&#160;-&#160;Packet&#160;Generation&#160;Disable&#160;(TIP.PGD)</p>
<p style="position:absolute;top:190px;left:74px;white-space:nowrap" class="ft04">Packet&#160;Format</p>
<p style="position:absolute;top:446px;left:74px;white-space:nowrap" class="ft04">Dependencies</p>
<p style="position:absolute;top:446px;left:177px;white-space:nowrap" class="ft04">PacketEn transitions to&#160;</p>
<p style="position:absolute;top:463px;left:177px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:446px;left:326px;white-space:nowrap" class="ft04">Generation&#160;</p>
<p style="position:absolute;top:463px;left:326px;white-space:nowrap" class="ft04">Scenario</p>
<p style="position:absolute;top:446px;left:422px;white-space:nowrap" class="ft04">Any branch instruction, control flow&#160;transfer, or MOV CR3 that&#160;clears&#160;</p>
<p style="position:absolute;top:463px;left:422px;white-space:nowrap" class="ft04">PacketEn,&#160;a&#160;WRMSR that&#160;disables&#160;packet&#160;generation&#160;and clears&#160;PacketEn</p>
<p style="position:absolute;top:487px;left:74px;white-space:nowrap" class="ft04">Description</p>
<p style="position:absolute;top:487px;left:177px;white-space:nowrap" class="ft04">Indicates&#160;that&#160;PacketEn&#160;has&#160;transitioned&#160;to&#160;0.&#160;It&#160;will include the IP at&#160;which&#160;the&#160;tracing ends, unless ContextEn= 0&#160;or&#160;</p>
<p style="position:absolute;top:503px;left:177px;white-space:nowrap" class="ft04">TraceEn=0 at&#160;the conclusion&#160;of&#160;the instruction or event that&#160;cleared PacketEn.</p>
<p style="position:absolute;top:520px;left:177px;white-space:nowrap" class="ft04">PacketEn can be cleared due to&#160;any of&#160;the enables that&#160;comprise PacketEn&#160;transitioning from&#160;1 to&#160;0.&#160;Examples:</p>
<p style="position:absolute;top:536px;left:177px;white-space:nowrap" class="ft04">•&#160;TriggerEn: This is&#160;cleared on&#160;software&#160;write to&#160;clear&#160;IA32_RTIT_CTL.TraceEn, or&#160;when&#160;</p>
<p style="position:absolute;top:551px;left:192px;white-space:nowrap" class="ft04">IA32_RTIT_STATUS.Stopped&#160;is set, or&#160;on&#160;operational error.&#160;The&#160;IP payload&#160;will&#160;be&#160;suppressed&#160;in&#160;this&#160;case, and&#160;the&#160;</p>
<p style="position:absolute;top:566px;left:192px;white-space:nowrap" class="ft04">“IPBytes” field will have&#160;the value 0.</p>
<p style="position:absolute;top:581px;left:177px;white-space:nowrap" class="ft04">•&#160;FilterEn:&#160;This is set when&#160;software&#160;jumps&#160;out of&#160;the&#160;tracing&#160;region. This&#160;region&#160;is&#160;defined by&#160;enabling&#160;IP&#160;filtering&#160;</p>
<p style="position:absolute;top:596px;left:192px;white-space:nowrap" class="ft04">in&#160;IA32_RTIT_CTL.ADDRn_CFG,&#160;and defining&#160;the range&#160;in&#160;IA32_RTIT_ADDRn_[AB],&#160;see.&#160;<a href="o_fe12b1e2a880e0ce-1689.html">Section 36.2.4.3</a>.&#160;</p>
<p style="position:absolute;top:612px;left:192px;white-space:nowrap" class="ft04">The IP payload will depend on the&#160;type&#160;of the branch. For conditional&#160;branches,&#160;</p>
<p style="position:absolute;top:611px;left:737px;white-space:nowrap" class="ft04">the payload is&#160;</p>
<p style="position:absolute;top:626px;left:192px;white-space:nowrap" class="ft04">suppressed (IPBytes&#160;= 0), and in&#160;this&#160;case the destination&#160;can&#160;be&#160;inferred&#160;from the&#160;disassembly.&#160;For any other&#160;</p>
<p style="position:absolute;top:641px;left:192px;white-space:nowrap" class="ft04">type&#160;of&#160;branch, the IP&#160;payload&#160;will be the target&#160;of&#160;the branch.</p>
<p style="position:absolute;top:656px;left:177px;white-space:nowrap" class="ft04">•&#160;ContextEn: This can happen&#160;on&#160;a&#160;CPL change, a&#160;CR3 write or any other means of&#160;changing&#160;ContextEn.&#160;See&#160;</p>
<p style="position:absolute;top:672px;left:192px;white-space:nowrap" class="ft04"><a href="o_fe12b1e2a880e0ce-1689.html">Section 36.2.4.3</a></p>
<p style="position:absolute;top:671px;left:304px;white-space:nowrap" class="ft04">&#160;for&#160;details.&#160;In&#160;this&#160;case,&#160;when&#160;ContextEn&#160;is&#160;cleared,&#160;there&#160;will&#160;be&#160;no&#160;IP&#160;payload.&#160;The&#160;“IPBytes”&#160;</p>
<p style="position:absolute;top:686px;left:192px;white-space:nowrap" class="ft04">field will have&#160;value 0.</p>
<p style="position:absolute;top:701px;left:177px;white-space:nowrap" class="ft04">Note that,&#160;in&#160;cases where a branch that&#160;would&#160;normally produce&#160;a&#160;TIP&#160;packet&#160;(i.e.,&#160;far&#160;transfer, indirect branch, inter-</p>
<p style="position:absolute;top:718px;left:177px;white-space:nowrap" class="ft04">rupt,&#160;etc)&#160;or&#160;TNT&#160;update&#160;(conditional&#160;branch&#160;or&#160;compressed&#160;RT)&#160;causes&#160;PacketEn&#160;to&#160;transition&#160;from&#160;1&#160;to&#160;0,&#160;the&#160;TIP&#160;or&#160;</p>
<p style="position:absolute;top:734px;left:177px;white-space:nowrap" class="ft04">TNI&#160;bit will be&#160;replaced&#160;with&#160;TIP.PGD. The&#160;payload&#160;of&#160;the&#160;TIP.PGD will be the target&#160;of&#160;the branch, unless the result&#160;</p>
<p style="position:absolute;top:751px;left:177px;white-space:nowrap" class="ft04">of&#160;the instruction causes&#160;TraceEn or&#160;ContextEn to&#160;be&#160;cleared (ie,&#160;SYSCALL when&#160;IA32_RTIT_CTL.OS=0, In&#160;the&#160;case&#160;</p>
<p style="position:absolute;top:767px;left:177px;white-space:nowrap" class="ft04">where a&#160;conditional branch clears FilterEn&#160;and hence PacketEn, there will be&#160;no&#160;TNT bit&#160;for&#160;this&#160;branch, replaced&#160;</p>
<p style="position:absolute;top:784px;left:177px;white-space:nowrap" class="ft04">instead by&#160;the TIP.PGD.</p>
<p style="position:absolute;top:808px;left:74px;white-space:nowrap" class="ft04">Application</p>
<p style="position:absolute;top:808px;left:177px;white-space:nowrap" class="ft04">TIP.PGD&#160;can&#160;be&#160;produced&#160;by any branch&#160;instructions,&#160;as well as some&#160;non-branch&#160;instructions, that&#160;clear PacketEn.&#160;</p>
<p style="position:absolute;top:824px;left:177px;white-space:nowrap" class="ft04">When&#160;produced&#160;by a&#160;branch, it&#160;replaces&#160;any TIP or&#160;TNT&#160;update that&#160;the&#160;branch would&#160;normally produce.&#160;</p>
<p style="position:absolute;top:841px;left:177px;white-space:nowrap" class="ft04">In&#160;cases where there is&#160;an&#160;unbound&#160;FUP preceding&#160;the&#160;TIP.PGD,&#160;then&#160;the TIP.PGD&#160;is&#160;part&#160;of&#160;compound&#160;operation&#160;(i.e.,&#160;</p>
<p style="position:absolute;top:857px;left:177px;white-space:nowrap" class="ft04">asynchronous event or TSX abort) which cleared PacketEn.&#160;For most&#160;such cases, the TIP.PGD is&#160;simply replacing&#160;a&#160;</p>
<p style="position:absolute;top:874px;left:177px;white-space:nowrap" class="ft04">TIP,&#160;and should be&#160;treated the same&#160;way. The TIP.PGD may or may not have&#160;an&#160;IP&#160;payload,&#160;depending&#160;on&#160;whether&#160;</p>
<p style="position:absolute;top:890px;left:177px;white-space:nowrap" class="ft04">the&#160;operation&#160;cleared ContextEn.</p>
<p style="position:absolute;top:907px;left:177px;white-space:nowrap" class="ft04">If&#160;there&#160;is&#160;not&#160;an&#160;associated&#160;FUP,&#160;the&#160;binding&#160;will&#160;depend&#160;on&#160;whether&#160;there&#160;is&#160;an&#160;IP&#160;payload.&#160;If&#160;there&#160;is&#160;an&#160;IP&#160;payload,&#160;</p>
<p style="position:absolute;top:923px;left:177px;white-space:nowrap" class="ft04">then the TIP.PGD should be applied to&#160;either&#160;the next&#160;direct branch&#160;whose target&#160;matches the TIP.PGD payload, or&#160;</p>
<p style="position:absolute;top:940px;left:177px;white-space:nowrap" class="ft04">the&#160;next&#160;branch&#160;that&#160;would&#160;normally&#160;generate&#160;a&#160;TIP&#160;or&#160;TNT&#160;packet.&#160;If&#160;there&#160;is&#160;no&#160;IP&#160;payload,&#160;then&#160;the&#160;TIP.PGD&#160;should&#160;</p>
<p style="position:absolute;top:956px;left:177px;white-space:nowrap" class="ft04">apply to the next branch or&#160;MOV&#160;CR3 instruction.</p>
<p style="position:absolute;top:214px;left:251px;white-space:nowrap" class="ft04">7</p>
<p style="position:absolute;top:214px;left:313px;white-space:nowrap" class="ft04">6</p>
<p style="position:absolute;top:214px;left:375px;white-space:nowrap" class="ft04">5</p>
<p style="position:absolute;top:214px;left:437px;white-space:nowrap" class="ft04">4</p>
<p style="position:absolute;top:214px;left:499px;white-space:nowrap" class="ft04">3</p>
<p style="position:absolute;top:214px;left:562px;white-space:nowrap" class="ft04">2</p>
<p style="position:absolute;top:214px;left:624px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:214px;left:686px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:235px;left:189px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:235px;left:251px;white-space:nowrap" class="ft04">IPBytes</p>
<p style="position:absolute;top:235px;left:437px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:235px;left:499px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:235px;left:562px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:235px;left:624px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:235px;left:686px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:256px;left:189px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:256px;left:251px;white-space:nowrap" class="ft04">TargetIP[7:0]</p>
<p style="position:absolute;top:277px;left:189px;white-space:nowrap" class="ft04">2</p>
<p style="position:absolute;top:277px;left:251px;white-space:nowrap" class="ft04">TargetIP[15:8]</p>
<p style="position:absolute;top:298px;left:189px;white-space:nowrap" class="ft04">3</p>
<p style="position:absolute;top:298px;left:251px;white-space:nowrap" class="ft04">TargetIP[23:16]</p>
<p style="position:absolute;top:319px;left:189px;white-space:nowrap" class="ft04">4</p>
<p style="position:absolute;top:319px;left:251px;white-space:nowrap" class="ft04">TargetIP[31:24]</p>
<p style="position:absolute;top:340px;left:189px;white-space:nowrap" class="ft04">5</p>
<p style="position:absolute;top:340px;left:251px;white-space:nowrap" class="ft04">TargetIP[39:32]</p>
<p style="position:absolute;top:361px;left:189px;white-space:nowrap" class="ft04">6</p>
<p style="position:absolute;top:361px;left:251px;white-space:nowrap" class="ft04">TargetIP[47:40]</p>
<p style="position:absolute;top:382px;left:189px;white-space:nowrap" class="ft04">7</p>
<p style="position:absolute;top:382px;left:251px;white-space:nowrap" class="ft04">TargetIP[55:48]</p>
<p style="position:absolute;top:403px;left:189px;white-space:nowrap" class="ft04">8</p>
<p style="position:absolute;top:403px;left:251px;white-space:nowrap" class="ft04">TargetIP[63:56]</p>
</div>
</body>
</html>
