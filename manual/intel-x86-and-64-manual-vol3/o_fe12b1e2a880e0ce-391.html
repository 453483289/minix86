<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 391</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:16px;font-family:Times;color:#0860a8;}
	.ft07{font-size:14px;font-family:Times;color:#0860a8;}
	.ft08{font-size:3px;font-family:Times;color:#000000;}
	.ft09{font-size:12px;font-family:Times;color:#0860a8;}
	.ft010{font-size:8px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft012{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft013{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft014{font-size:9px;line-height:12px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page391-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce391.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:760px;white-space:nowrap" class="ft00">Vol. 3A&#160;10-29</p>
<p style="position:absolute;top:47px;left:484px;white-space:nowrap" class="ft01">ADVANCED PROGRAMMABLE&#160;INTERRUPT CONTROLLER&#160;(APIC)</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft011">The&#160;<b>processor-priority class</b>&#160;is&#160;a value&#160;in the&#160;range 0–15&#160;that is&#160;maintained in&#160;bits&#160;7:4 of the&#160;processor-priority&#160;<br/>register&#160;(PPR); se<a href="o_fe12b1e2a880e0ce-391.html">e Figure&#160;10-19</a>.&#160;The&#160;PPR&#160;is a&#160;read-only&#160;register.&#160;The processor-priority class&#160;represents the&#160;<br/>current priority&#160;at which the&#160;processor&#160;is executing.</p>
<p style="position:absolute;top:350px;left:69px;white-space:nowrap" class="ft011">The value of&#160;the PPR is&#160;based on&#160;the&#160;value&#160;of TPR and&#160;the value&#160;ISRV; ISRV&#160;is&#160;the&#160;vector number&#160;of&#160;the&#160;highest&#160;<br/>priority&#160;bit that is&#160;set in the ISR or 00H if no bit is set&#160;in the ISR.&#160;(See<a href="o_fe12b1e2a880e0ce-391.html">&#160;Section 10.8.4&#160;for more details on the ISR.)&#160;<br/></a>The value of&#160;PPR&#160;is determined&#160;as follows:</p>
<p style="position:absolute;top:405px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:405px;left:95px;white-space:nowrap" class="ft011">PPR[7:4] (the processor-priority&#160;class)&#160;the maximum&#160;of&#160;TPR[7:4] (the&#160;task-&#160;priority&#160;class)&#160;and ISRV[7:4]&#160;(the&#160;<br/>priority&#160;of&#160;the highest priority&#160;interrupt&#160;in service).</p>
<p style="position:absolute;top:444px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:444px;left:95px;white-space:nowrap" class="ft013">PPR[3:0]&#160;(the processor-priority&#160;sub-class) is&#160;determined as&#160;follows:<br/>—&#160;If&#160;TPR[7:4] &gt; ISRV[7:4], PPR[3:0]&#160;is&#160;TPR[3:0]&#160;(the task-priority sub-class).<br/>—&#160;If&#160;TPR[7:4] &lt; ISRV[7:4], PPR[3:0]&#160;is 0.<br/>—&#160;If TPR[7:4]&#160;=&#160;ISRV[7:4],&#160;PPR[3:0] may be either&#160;TPR[3:0]&#160;or 0. The actual&#160;behavior&#160;is model-specific.</p>
<p style="position:absolute;top:540px;left:69px;white-space:nowrap" class="ft011">The&#160;processor-priority class&#160;determines the&#160;priority&#160;threshold<i>&#160;</i>for&#160;interrupting&#160;the processor.&#160;The processor will&#160;<br/>deliver&#160;only those&#160;interrupts&#160;that have&#160;an interrupt-priority class&#160;higher than&#160;the&#160;processor-priority&#160;class in&#160;the&#160;<br/>PPR. If the&#160;processor-priority&#160;class is&#160;0,&#160;the&#160;PPR does not&#160;inhibit&#160;the&#160;delivery&#160;any interrupt; if it is&#160;15, the&#160;processor&#160;<br/>inhibits the&#160;delivery of all interrupts. (The&#160;processor-priority&#160;mechanism&#160;does&#160;not affect the delivery of&#160;interrupts&#160;<br/>with the&#160;NMI, SMI,&#160;INIT, ExtINT,&#160;INIT-deassert, and&#160;start-up delivery&#160;modes.)<br/>The processor does not&#160;use the processor-priority sub-class to&#160;determine&#160;which&#160;interrupts&#160;to delivery&#160;and which to&#160;<br/>inhibit. (The processor uses&#160;the processor-priority&#160;sub-class only to&#160;satisfy reads of the&#160;PPR.)</p>
<p style="position:absolute;top:697px;left:69px;white-space:nowrap" class="ft06">10.8.4&#160;</p>
<p style="position:absolute;top:697px;left:150px;white-space:nowrap" class="ft06">Interrupt&#160;Acceptance&#160;for Fixed Interrupts</p>
<p style="position:absolute;top:728px;left:69px;white-space:nowrap" class="ft011">The&#160;local APIC queues&#160;the&#160;fixed interrupts that it&#160;accepts&#160;in&#160;one of two interrupt&#160;pending registers:&#160;the interrupt&#160;<br/>request&#160;register (IRR) or in-service&#160;register (ISR).&#160;These two 256-bit&#160;read-only registers&#160;are&#160;shown in&#160;<br/><a href="o_fe12b1e2a880e0ce-392.html">Figure&#160;10-20.</a>&#160;The 256 bits&#160;in&#160;these&#160;registers represent the 256&#160;possible vectors; vectors 0 through 15 are reserved&#160;<br/>by the APIC&#160;(see&#160;also<a href="o_fe12b1e2a880e0ce-376.html">: Section&#160;10.5.2,&#160;“Valid Interrupt Vectors”).</a></p>
<p style="position:absolute;top:812px;left:433px;white-space:nowrap" class="ft07">NOTE</p>
<p style="position:absolute;top:837px;left:122px;white-space:nowrap" class="ft011">All interrupts&#160;with&#160;an NMI, SMI, INIT, ExtINT,&#160;start-up,&#160;or INIT-deassert delivery&#160;mode bypass&#160;the&#160;<br/>IRR and ISR registers&#160;and are&#160;sent&#160;directly to&#160;the processor core&#160;for servicing.</p>
<p style="position:absolute;top:887px;left:69px;white-space:nowrap" class="ft011">The IRR contains the active interrupt&#160;requests&#160;that have&#160;been accepted, but not yet&#160;dispatched to the&#160;processor for&#160;<br/>servicing.&#160;When the&#160;local APIC&#160;accepts an&#160;interrupt,&#160;it sets&#160;the bit in the IRR&#160;that corresponds the&#160;vector&#160;of&#160;the&#160;<br/>accepted interrupt. When&#160;the processor core is&#160;ready to handle&#160;the next interrupt, the&#160;local APIC&#160;clears the&#160;highest&#160;<br/>priority&#160;IRR bit that is&#160;set&#160;and sets the&#160;corresponding ISR&#160;bit. The vector for the highest&#160;priority&#160;bit set in the ISR&#160;<br/>is then&#160;dispatched&#160;to&#160;the processor core&#160;for servicing.&#160;<br/>While the processor is servicing the&#160;highest priority&#160;interrupt, the local APIC can&#160;send&#160;additional fixed interrupts by&#160;<br/>setting bits in&#160;the IRR. When&#160;the interrupt service&#160;routine&#160;issues a&#160;write to&#160;the EOI register&#160;(see&#160;<a href="o_fe12b1e2a880e0ce-392.html">Section&#160;10.8.5,&#160;<br/>“Signaling&#160;Interrupt Servicing Completion”),&#160;</a>the local&#160;APIC responds by clearing the&#160;highest priority ISR&#160;bit&#160;that&#160;is&#160;<br/>set. It&#160;then repeats the process of clearing&#160;the&#160;highest&#160;priority&#160;bit in the IRR&#160;and setting the&#160;corresponding&#160;bit in&#160;<br/>the ISR. The&#160;processor&#160;core then&#160;begins executing the&#160;service routing&#160;for&#160;the highest priority&#160;bit&#160;set&#160;in&#160;the ISR.</p>
<p style="position:absolute;top:172px;left:172px;white-space:nowrap" class="ft08">&#160;</p>
<p style="position:absolute;top:304px;left:292px;white-space:nowrap" class="ft09">Figure&#160;10-19.&#160;&#160;Processor-Priority Register (PPR)</p>
<p style="position:absolute;top:185px;left:251px;white-space:nowrap" class="ft010">31</p>
<p style="position:absolute;top:185px;left:650px;white-space:nowrap" class="ft010">0</p>
<p style="position:absolute;top:185px;left:556px;white-space:nowrap" class="ft010">7</p>
<p style="position:absolute;top:185px;left:546px;white-space:nowrap" class="ft010">8</p>
<p style="position:absolute;top:209px;left:388px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:265px;left:253px;white-space:nowrap" class="ft014">Address: FEE0 00A0H<br/>Value after reset: 0H</p>
<p style="position:absolute;top:262px;left:443px;white-space:nowrap" class="ft00">Processor-Priority Sub-Class</p>
<p style="position:absolute;top:244px;left:411px;white-space:nowrap" class="ft00">Processor-Priority Class</p>
<p style="position:absolute;top:185px;left:597px;white-space:nowrap" class="ft010">4&#160;3</p>
</div>
</body>
</html>
