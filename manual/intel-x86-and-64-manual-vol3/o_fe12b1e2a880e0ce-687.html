<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 687</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:12px;font-family:Times;color:#0860a8;}
	.ft05{font-size:8px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft08{font-size:8px;line-height:13px;font-family:Times;color:#000000;}
	.ft09{font-size:8px;line-height:12px;font-family:Times;color:#000000;}
	.ft010{font-size:8px;line-height:10px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page687-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce687.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:761px;white-space:nowrap" class="ft00">Vol. 3B&#160;18-51</p>
<p style="position:absolute;top:47px;left:672px;white-space:nowrap" class="ft01">PERFORMANCE MONITORING</p>
<p style="position:absolute;top:272px;left:69px;white-space:nowrap" class="ft02">18.9.1&#160;</p>
<p style="position:absolute;top:272px;left:150px;white-space:nowrap" class="ft02">Global Counter Control Facilities In Intel</p>
<p style="position:absolute;top:271px;left:467px;white-space:nowrap" class="ft01">®</p>
<p style="position:absolute;top:272px;left:480px;white-space:nowrap" class="ft02">&#160;Microarchitecture&#160;Code Name Sandy Bridge</p>
<p style="position:absolute;top:303px;left:69px;white-space:nowrap" class="ft06">The&#160;number&#160;of general-purpose performance&#160;counters visible&#160;to&#160;a logical&#160;processor&#160;can vary across&#160;Processors&#160;<br/>based on Intel microarchitecture&#160;code&#160;name&#160;Sandy&#160;Bridge. Software must use&#160;CPUID&#160;to determine&#160;the&#160;number&#160;<br/>performance counters/event select&#160;registers (See&#160;<a href="o_fe12b1e2a880e0ce-639.html">Section&#160;18.2.1.1)</a>.&#160;</p>
<p style="position:absolute;top:693px;left:69px;white-space:nowrap" class="ft06"><a href="o_fe12b1e2a880e0ce-654.html">Figure&#160;18-15&#160;</a>depicts the&#160;layout of IA32_PERF_GLOBAL_CTRL MSR. The&#160;enable bits (PMC4_EN,&#160;PMC5_EN,&#160;<br/>PMC6_EN,&#160;PMC7_EN) corresponding to&#160;IA32_PMC4-IA32_PMC7 are&#160;valid&#160;only&#160;if&#160;CPUID.0AH:EAX[15:8] reports a&#160;<br/>value&#160;of ‘8’.&#160;If&#160;CPUID.0AH:EAX[15:8]&#160;= 4,&#160;attempts to&#160;set&#160;the invalid bits&#160;will cause&#160;#GP.&#160;<br/>Each&#160;enable&#160;bit&#160;in IA32_PERF_GLOBAL_CTRL&#160;is AND’ed&#160;with the enable&#160;bits for&#160;all privilege levels&#160;in the&#160;respective&#160;<br/>IA32_PERFEVTSELx or IA32_PERF_FIXED_CTR_CTRL&#160;MSRs&#160;to start/stop the&#160;counting of&#160;respective&#160;counters.&#160;<br/>Counting is&#160;enabled if the&#160;AND’ed results&#160;is&#160;true;&#160;counting&#160;is disabled when the&#160;result is&#160;false.<br/>IA32_PERF_GLOBAL_STATUS&#160;MSR provides&#160;single-bit&#160;status&#160;used&#160;by software&#160;to&#160;query the overflow condition&#160;of&#160;<br/>each performance&#160;counter.&#160;IA32_PERF_GLOBAL_STATUS[bit&#160;62]&#160;indicates overflow conditions&#160;of&#160;the DS area&#160;data&#160;<br/>buffer&#160;(see<a href="o_fe12b1e2a880e0ce-688.html">&#160;Figure&#160;18-33</a>). A&#160;value of 1 in each bit&#160;of&#160;the&#160;PMCx_OVF field indicates an overflow&#160;condition&#160;has&#160;<br/>occurred in&#160;the&#160;associated counter.&#160;</p>
<p style="position:absolute;top:164px;left:75px;white-space:nowrap" class="ft03">PEBS-PDIR</p>
<p style="position:absolute;top:164px;left:251px;white-space:nowrap" class="ft03">Yes&#160;(using precise&#160;</p>
<p style="position:absolute;top:181px;left:251px;white-space:nowrap" class="ft03">INST_RETIRED.ALL).</p>
<p style="position:absolute;top:164px;left:466px;white-space:nowrap" class="ft03">No</p>
<p style="position:absolute;top:205px;left:75px;white-space:nowrap" class="ft03">Off-core&#160;Response Event</p>
<p style="position:absolute;top:205px;left:251px;white-space:nowrap" class="ft03">MSR&#160;1A6H and 1A7H, extended&#160;</p>
<p style="position:absolute;top:222px;left:251px;white-space:nowrap" class="ft03">request and response&#160;types.</p>
<p style="position:absolute;top:205px;left:466px;white-space:nowrap" class="ft03">MSR 1A6H and 1A7H, limited&#160;</p>
<p style="position:absolute;top:222px;left:466px;white-space:nowrap" class="ft03">response types.</p>
<p style="position:absolute;top:205px;left:662px;white-space:nowrap" class="ft03">Nehalem supports&#160;1A6H&#160;</p>
<p style="position:absolute;top:222px;left:662px;white-space:nowrap" class="ft03">only.</p>
<p style="position:absolute;top:647px;left:123px;white-space:nowrap" class="ft04">Figure&#160;18-32. &#160;IA32_PERF_GLOBAL_CTRL MSR in&#160;Intel®&#160;Microarchitecture Code&#160;Name&#160;Sandy Bridge</p>
<p style="position:absolute;top:100px;left:304px;white-space:nowrap" class="ft04">Table 18-30. &#160;Core&#160;PMU Comparison (Contd.)</p>
<p style="position:absolute;top:141px;left:75px;white-space:nowrap" class="ft03">Box</p>
<p style="position:absolute;top:124px;left:251px;white-space:nowrap" class="ft03">Intel® microarchitecture code&#160;</p>
<p style="position:absolute;top:141px;left:251px;white-space:nowrap" class="ft03">name Sandy&#160;Bridge</p>
<p style="position:absolute;top:124px;left:466px;white-space:nowrap" class="ft03">Intel® microarchitecture&#160;code&#160;</p>
<p style="position:absolute;top:141px;left:466px;white-space:nowrap" class="ft03">name Westmere</p>
<p style="position:absolute;top:141px;left:662px;white-space:nowrap" class="ft03">Comment</p>
<p style="position:absolute;top:471px;left:199px;white-space:nowrap" class="ft08">FIXED_CTR2 enable<br/>FIXED_CTR1 enable<br/>FIXED_CTR0 enable</p>
<p style="position:absolute;top:514px;left:199px;white-space:nowrap" class="ft05">PMC7_EN&#160;(if PMC7 present)</p>
<p style="position:absolute;top:389px;left:627px;white-space:nowrap" class="ft05">2&#160;1&#160;0</p>
<p style="position:absolute;top:526px;left:199px;white-space:nowrap" class="ft05">PMC6_EN&#160;(if&#160;PMC6&#160;present)</p>
<p style="position:absolute;top:390px;left:408px;white-space:nowrap" class="ft05">31</p>
<p style="position:absolute;top:390px;left:395px;white-space:nowrap" class="ft05">32</p>
<p style="position:absolute;top:390px;left:382px;white-space:nowrap" class="ft05">33</p>
<p style="position:absolute;top:390px;left:369px;white-space:nowrap" class="ft05">34</p>
<p style="position:absolute;top:390px;left:357px;white-space:nowrap" class="ft05">35</p>
<p style="position:absolute;top:619px;left:228px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:389px;left:218px;white-space:nowrap" class="ft05">63</p>
<p style="position:absolute;top:539px;left:199px;white-space:nowrap" class="ft010">PMC5_EN (if&#160;PMC5 present)<br/>PMC4_EN&#160;(if&#160;PMC4&#160;present)<br/>PMC3_EN<br/>PMC2_EN<br/>PMC1_EN</p>
<p style="position:absolute;top:621px;left:365px;white-space:nowrap" class="ft00">Valid if&#160;CPUID.0AH:EAX[15:8]&#160;=&#160;8,&#160;else reserved.</p>
<p style="position:absolute;top:598px;left:199px;white-space:nowrap" class="ft05">PMC0_EN</p>
<p style="position:absolute;top:389px;left:547px;white-space:nowrap" class="ft05">8&#160;7&#160;6&#160;5&#160;4&#160;3</p>
</div>
</body>
</html>
