<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1117</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:16px;font-family:Times;color:#000000;}
	.ft05{font-size:18px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1117-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1117.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:761px;white-space:nowrap" class="ft00">Vol. 3C&#160;26-25</p>
<p style="position:absolute;top:47px;left:766px;white-space:nowrap" class="ft01">VM&#160;ENTRIES</p>
<p style="position:absolute;top:97px;left:69px;white-space:nowrap" class="ft02">26.7 VM-ENTRY&#160;</p>
<p style="position:absolute;top:97px;left:254px;white-space:nowrap" class="ft02">FAILURES&#160;</p>
<p style="position:absolute;top:97px;left:350px;white-space:nowrap" class="ft02">DURING&#160;OR AFTER LOADING GUEST STATE</p>
<p style="position:absolute;top:133px;left:69px;white-space:nowrap" class="ft07">VM-entry&#160;failures due&#160;to the&#160;checks identified&#160;<a href="o_fe12b1e2a880e0ce-1100.html">in Section&#160;26.3.1</a>&#160;and&#160;failures during&#160;the&#160;MSR loading identified&#160;in&#160;<br/><a href="o_fe12b1e2a880e0ce-1109.html">Section 26.4 are&#160;</a>treated differently&#160;from those&#160;that occur&#160;earlier in VM&#160;entry.&#160;In these&#160;cases,&#160;the&#160;following&#160;steps&#160;<br/>take&#160;place:<br/>1.&#160;Information about the VM-entry&#160;failure is&#160;recorded in the VM-exit information fields:</p>
<p style="position:absolute;top:214px;left:95px;white-space:nowrap" class="ft03">—&#160;Exit&#160;&#160;reason.</p>
<p style="position:absolute;top:240px;left:120px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:238px;left:146px;white-space:nowrap" class="ft03">Bits&#160;15:0 of this&#160;field&#160;contain&#160;the basic exit&#160;reason. It&#160;is loaded&#160;with&#160;a number indicating the general&#160;</p>
<p style="position:absolute;top:255px;left:145px;white-space:nowrap" class="ft03">cause&#160;of&#160;the VM-entry failure. The following&#160;numbers are used:</p>
<p style="position:absolute;top:279px;left:145px;white-space:nowrap" class="ft03">33.&#160;VM-entry failure due to invalid guest&#160;state. A&#160;VM&#160;entry failed&#160;one&#160;of the checks identifi<a href="o_fe12b1e2a880e0ce-1100.html">ed in Section&#160;</a></p>
<p style="position:absolute;top:295px;left:171px;white-space:nowrap" class="ft03"><a href="o_fe12b1e2a880e0ce-1100.html">26.3.1</a>.</p>
<p style="position:absolute;top:319px;left:145px;white-space:nowrap" class="ft03">34.&#160;VM-entry failure&#160;due to&#160;MSR loading.&#160;A VM&#160;entry&#160;failed&#160;in&#160;an attempt to load MSRs&#160;(see&#160;<a href="o_fe12b1e2a880e0ce-1109.html">Section&#160;</a></p>
<p style="position:absolute;top:336px;left:171px;white-space:nowrap" class="ft03"><a href="o_fe12b1e2a880e0ce-1109.html">26.4).</a></p>
<p style="position:absolute;top:360px;left:145px;white-space:nowrap" class="ft03">41.&#160;VM-entry&#160;failure&#160;due&#160;to machine-check event.&#160;A&#160;machine-check event occurred&#160;during&#160;VM&#160;entry&#160;</p>
<p style="position:absolute;top:376px;left:171px;white-space:nowrap" class="ft03"><a href="o_fe12b1e2a880e0ce-1117.html">(see Section 26.8).</a></p>
<p style="position:absolute;top:402px;left:120px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:400px;left:146px;white-space:nowrap" class="ft03">Bit&#160;31&#160;is set to&#160;1 to&#160;indicate&#160;a VM-entry failure.</p>
<p style="position:absolute;top:426px;left:120px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:424px;left:146px;white-space:nowrap" class="ft03">The remainder of the&#160;field&#160;(bits&#160;30:16) is&#160;cleared.</p>
<p style="position:absolute;top:448px;left:94px;white-space:nowrap" class="ft03">—&#160;Exit qualification. This&#160;field&#160;is set based&#160;on&#160;the exit&#160;reason.</p>
<p style="position:absolute;top:474px;left:120px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:472px;left:146px;white-space:nowrap" class="ft03">VM-entry&#160;failure&#160;due&#160;to invalid guest state.&#160;In most&#160;cases,&#160;the&#160;exit&#160;qualification is&#160;cleared to 0.&#160;The&#160;</p>
<p style="position:absolute;top:489px;left:145px;white-space:nowrap" class="ft03">following non-zero values&#160;are used in&#160;the cases indicated:</p>
<p style="position:absolute;top:513px;left:145px;white-space:nowrap" class="ft07">1.&#160;Not used.<br/>2.&#160;Failure&#160;was&#160;due to&#160;a problem loading the&#160;PDPTEs&#160;<a href="o_fe12b1e2a880e0ce-1106.html">(see&#160;Section&#160;26.3.1.6</a>).<br/>3.&#160;Failure was due to an attempt to inject a non-maskable interrupt (NMI) into a guest that is blocking&#160;</p>
<p style="position:absolute;top:577px;left:171px;white-space:nowrap" class="ft06">events through&#160;the STI blocking bit&#160;in the&#160;interruptibility-state field.&#160;Such&#160;failures&#160;are implemen-<br/>tation-s<a href="o_fe12b1e2a880e0ce-1104.html">pecific (see Section 26.3.1.5)</a>.&#160;</p>
<p style="position:absolute;top:618px;left:145px;white-space:nowrap" class="ft07">4.&#160;Failure&#160;was&#160;due to&#160;an invalid VMCS link pointer (see<a href="o_fe12b1e2a880e0ce-1104.html">&#160;Section 26.3.1.5).<br/></a>VM-entry&#160;checks&#160;on&#160;guest-state&#160;fields&#160;may&#160;be&#160;performed in&#160;any order.&#160;Thus, an&#160;indication&#160;by&#160;exit</p>
<p style="position:absolute;top:655px;left:146px;white-space:nowrap" class="ft03">qualification of&#160;one cause does not&#160;imply&#160;that&#160;there are not also other errors. Different processors</p>
<p style="position:absolute;top:669px;left:146px;white-space:nowrap" class="ft03">may give different&#160;exit qualifications for&#160;the same VMCS.</p>
<p style="position:absolute;top:691px;left:120px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:690px;left:146px;white-space:nowrap" class="ft03">VM-entry&#160;failure&#160;due&#160;to MSR&#160;loading. The&#160;exit&#160;qualification&#160;is loaded&#160;to indicate which entry in&#160;the&#160;</p>
<p style="position:absolute;top:706px;left:145px;white-space:nowrap" class="ft03">VM-entry&#160;MSR-load area caused the&#160;problem&#160;(1&#160;for the first entry,&#160;2&#160;for&#160;the second,&#160;etc.).</p>
<p style="position:absolute;top:730px;left:94px;white-space:nowrap" class="ft03">—&#160;All&#160;other&#160;VM-exit&#160;information fields are&#160;unmodified.</p>
<p style="position:absolute;top:754px;left:69px;white-space:nowrap" class="ft03">2.&#160;Processor state&#160;is loaded&#160;as would be&#160;done on&#160;a VM&#160;exit&#160;(see<a href="o_fe12b1e2a880e0ce-1143.html">&#160;Section 27.5).</a>&#160;If&#160;this results&#160;in&#160;</p>
<p style="position:absolute;top:771px;left:94px;white-space:nowrap" class="ft06">[CR4.PAE&#160;&amp;&#160;CR0.PG&#160;&amp;&#160;~IA32_EFER.LMA]&#160;=&#160;1, page-directory-pointer-table entries (PDPTEs) may be checked&#160;<br/>and&#160;<a href="o_fe12b1e2a880e0ce-1146.html">loaded (see Section 27.5.4).</a></p>
<p style="position:absolute;top:811px;left:69px;white-space:nowrap" class="ft06">3.&#160;The&#160;state&#160;of&#160;blocking&#160;by&#160;NMI&#160;is what&#160;it was before&#160;VM&#160;entry.<br/>4.&#160;MSRs&#160;are&#160;loaded as&#160;specified in&#160;the VM-exit MSR-load&#160;<a href="o_fe12b1e2a880e0ce-1147.html">area (see Section 27.6).<br/></a>Although&#160;this process resembles&#160;that of a&#160;VM&#160;exit, many&#160;steps taken during&#160;a VM&#160;exit do&#160;not occur for these&#160;<br/>VM-entry failures:</p>
<p style="position:absolute;top:898px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:898px;left:95px;white-space:nowrap" class="ft03">Most&#160;VM-exit information&#160;fields&#160;are not updated&#160;(see&#160;step&#160;<a href="o_fe12b1e2a880e0ce-1117.html">1 ab</a>ove).</p>
<p style="position:absolute;top:920px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:921px;left:95px;white-space:nowrap" class="ft03">The&#160;valid&#160;bit in&#160;the VM-entry interruption-information&#160;field&#160;is not cleared.</p>
<p style="position:absolute;top:943px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:943px;left:95px;white-space:nowrap" class="ft03">The&#160;guest-state area&#160;is&#160;not&#160;modified.</p>
<p style="position:absolute;top:965px;left:69px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:966px;left:95px;white-space:nowrap" class="ft03">No MSRs are saved into&#160;the VM-exit&#160;MSR-store&#160;area.</p>
<p style="position:absolute;top:1021px;left:69px;white-space:nowrap" class="ft02">26.8&#160;</p>
<p style="position:absolute;top:1021px;left:148px;white-space:nowrap" class="ft02">MACHINE-CHECK EVENTS DURING VM&#160;ENTRY</p>
<p style="position:absolute;top:1057px;left:69px;white-space:nowrap" class="ft03">If&#160;a machine-check event occurs&#160;during&#160;a VM&#160;entry,&#160;one of the&#160;following&#160;occurs:</p>
</div>
</body>
</html>
