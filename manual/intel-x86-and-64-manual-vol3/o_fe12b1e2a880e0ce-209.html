<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 209</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:12px;font-family:Times;color:#0860a8;}
	.ft04{font-size:14px;font-family:Times;color:#0860a8;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page209-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce209.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:767px;white-space:nowrap" class="ft00">Vol. 3A&#160;6-23</p>
<p style="position:absolute;top:47px;left:609px;white-space:nowrap" class="ft01">INTERRUPT&#160;AND&#160;EXCEPTION HANDLING</p>
<p style="position:absolute;top:98px;left:69px;white-space:nowrap" class="ft02">Interrupt&#160;3‚ÄîBreakpoint&#160;Exception&#160;(#BP)</p>
<p style="position:absolute;top:146px;left:69px;white-space:nowrap" class="ft03">Exception&#160;Class</p>
<p style="position:absolute;top:144px;left:207px;white-space:nowrap" class="ft04">Trap.</p>
<p style="position:absolute;top:185px;left:69px;white-space:nowrap" class="ft03">Description</p>
<p style="position:absolute;top:211px;left:69px;white-space:nowrap" class="ft011">Indicates that&#160;a breakpoint instruction (INT&#160;3,&#160;opcode&#160;CCH)&#160;was executed, causing&#160;a breakpoint&#160;trap to&#160;be&#160;gener-<br/>ated.&#160;Typically, a&#160;debugger sets&#160;a breakpoint by replacing&#160;the&#160;first opcode byte&#160;of&#160;an instruction with the&#160;opcode&#160;<br/>for&#160;the INT 3&#160;instruction.&#160;(The INT 3&#160;instruction is&#160;one&#160;byte long,&#160;which makes it&#160;easy to replace&#160;an opcode in&#160;a&#160;<br/>code segment in&#160;RAM&#160;with&#160;the breakpoint opcode.) The&#160;operating&#160;system or a&#160;debugging&#160;tool can&#160;use a&#160;data&#160;<br/>segment&#160;mapped to&#160;the&#160;same&#160;physical&#160;address space as&#160;the code&#160;segment to&#160;place&#160;an INT 3&#160;instruction in places&#160;<br/>where&#160;it&#160;is desired&#160;to call&#160;the debugger.<br/>With the&#160;P6&#160;family,&#160;Pentium,&#160;Intel486,&#160;and Intel386&#160;processors,&#160;it&#160;is more&#160;convenient to&#160;set breakpoints with the&#160;<br/>debug&#160;registers.&#160;(S<a href="o_fe12b1e2a880e0ce-584.html">ee Section 17.3.2,&#160;‚ÄúBreakpoint Exception (#BP)‚ÄîInterrupt Vector 3,‚Äù&#160;</a>for&#160;information about&#160;the&#160;<br/>breakpoint exception.) If more&#160;breakpoints&#160;are needed beyond what&#160;the&#160;debug registers allow,&#160;the&#160;INT&#160;3 instruc-<br/>tion can be used.<br/>Any breakpoint&#160;exception inside an&#160;RTM region&#160;causes&#160;a transactional abort&#160;and,&#160;by default, redirects control&#160;flow&#160;<br/>to the&#160;fallback instruction address. If advanced&#160;debugging of&#160;RTM transactional&#160;regions&#160;has been enabled, any&#160;<br/>transactional abort due&#160;to a&#160;break&#160;exception&#160;instead causes&#160;execution to&#160;roll back&#160;to just&#160;before&#160;the XBEGIN&#160;<br/>instruction and&#160;then delivers&#160;a&#160;<b>debug exception</b>&#160;(#DB)&#160;‚Äî&#160;<b>not</b>&#160;a&#160;breakpoint&#160;exception.&#160;See<a href="˛ˇ">&#160;Section 16.3.7,&#160;‚ÄúRTM-<br/>Enabled&#160;Debugger Support,‚Äù of&#160;<i>Intel¬Æ&#160;64&#160;and IA-32&#160;Architectures&#160;Software&#160;Developer‚Äôs Manual,&#160;Volume&#160;1</i>.<br/></a>A breakpoint exception can&#160;also be generated by&#160;executing&#160;the INT&#160;<i>n</i>&#160;instruction with an&#160;operand&#160;of&#160;3. The action&#160;<br/>of&#160;this instruction (INT 3)&#160;is slightly&#160;different&#160;than&#160;that of the&#160;INT&#160;3 instruction (see&#160;‚ÄúINTn/INTO/INT3‚ÄîCall&#160;to&#160;<br/>Interrupt Procedure‚Äù in&#160;<a href="˛ˇ">Chapter 3 of the&#160;<i>Intel¬Æ 64&#160;and&#160;IA-32 Architectures&#160;Software&#160;Developer‚Äôs Manual,&#160;Volume&#160;<br/>2A</i>).</a></p>
<p style="position:absolute;top:568px;left:69px;white-space:nowrap" class="ft03">Exception&#160;Error&#160;Code</p>
<p style="position:absolute;top:594px;left:69px;white-space:nowrap" class="ft05">None.</p>
<p style="position:absolute;top:631px;left:69px;white-space:nowrap" class="ft03">Saved Instruction&#160;Pointer</p>
<p style="position:absolute;top:657px;left:69px;white-space:nowrap" class="ft05">Saved contents&#160;of CS and&#160;EIP&#160;registers point&#160;to&#160;the instruction following&#160;the&#160;INT 3 instruction.</p>
<p style="position:absolute;top:694px;left:69px;white-space:nowrap" class="ft03">Program State&#160;Change</p>
<p style="position:absolute;top:720px;left:69px;white-space:nowrap" class="ft08">Even though&#160;the EIP&#160;points to&#160;the instruction following&#160;the breakpoint instruction,&#160;the state of the&#160;program&#160;is&#160;<br/>essentially unchanged&#160;because the&#160;INT&#160;3 instruction does&#160;not affect any&#160;register&#160;or memory locations. The&#160;<br/>debugger&#160;can thus resume&#160;the&#160;suspended&#160;program by replacing&#160;the INT&#160;3&#160;instruction&#160;that caused&#160;the&#160;breakpoint&#160;<br/>with the&#160;original opcode&#160;and decrementing&#160;the saved&#160;contents of&#160;the EIP&#160;register. Upon returning from&#160;the&#160;<br/>debugger,&#160;program execution&#160;resumes with the&#160;replaced&#160;instruction.</p>
</div>
</body>
</html>
