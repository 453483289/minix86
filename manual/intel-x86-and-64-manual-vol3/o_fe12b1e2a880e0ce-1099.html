<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1099</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:16px;font-family:Times;color:#0860a8;}
	.ft05{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1099-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1099.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:769px;white-space:nowrap" class="ft00">Vol. 3C&#160;26-7</p>
<p style="position:absolute;top:47px;left:766px;white-space:nowrap" class="ft01">VM&#160;ENTRIES</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:100px;left:95px;white-space:nowrap" class="ft05">On processors that support&#160;Intel 64&#160;architecture,&#160;the IA32_SYSENTER_ESP field&#160;and the&#160;IA32_SYSENTER_EIP&#160;<br/>field must each&#160;contain&#160;a canonical&#160;address.</p>
<p style="position:absolute;top:139px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:139px;left:95px;white-space:nowrap" class="ft05">If the&#160;“load IA32_PERF_GLOBAL_CTRL”&#160;VM-exit control&#160;is 1,&#160;bits reserved&#160;in the&#160;IA32_PERF_GLOBAL_CTRL&#160;<br/>MSR must&#160;be&#160;0 in&#160;the&#160;field&#160;for that register&#160;<a href="o_fe12b1e2a880e0ce-643.html">(see&#160;Figure&#160;18-3)</a>.</p>
<p style="position:absolute;top:178px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:178px;left:95px;white-space:nowrap" class="ft05">If the&#160;“load IA32_PAT”&#160;VM-exit control is 1, the value&#160;of&#160;the field for&#160;the IA32_PAT&#160;MSR must&#160;be&#160;one that&#160;could&#160;<br/>be written by WRMSR without fault at CPL 0. Specifically, each of&#160;the&#160;8&#160;bytes&#160;in the field must have one of the&#160;<br/>values 0&#160;(UC), 1&#160;(WC),&#160;4&#160;(WT), 5&#160;(WP), 6&#160;(WB),&#160;or 7&#160;(UC-).</p>
<p style="position:absolute;top:233px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:234px;left:95px;white-space:nowrap" class="ft05">If the “load&#160;IA32_EFER” VM-exit control is&#160;1, bits reserved&#160;in the IA32_EFER&#160;MSR must&#160;be&#160;0 in&#160;the field&#160;for that&#160;<br/>register. In&#160;addition, the&#160;values of&#160;the&#160;LMA and&#160;LME&#160;bits&#160;in&#160;the field must each&#160;be&#160;that of the&#160;“host&#160;address-<br/>space&#160;size” VM-exit control.</p>
<p style="position:absolute;top:317px;left:69px;white-space:nowrap" class="ft04">26.2.3&#160;</p>
<p style="position:absolute;top:317px;left:149px;white-space:nowrap" class="ft04">Checks on Host&#160;Segment&#160;and Descriptor-Table&#160;Registers</p>
<p style="position:absolute;top:348px;left:69px;white-space:nowrap" class="ft05">The following&#160;checks are performed on&#160;fields&#160;in the&#160;host-state area&#160;that&#160;correspond to&#160;segment&#160;and descriptor-<br/>table registers:</p>
<p style="position:absolute;top:386px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:387px;left:95px;white-space:nowrap" class="ft05">In the selector field for each&#160;of&#160;CS, SS,&#160;DS, ES, FS, GS and&#160;TR, the&#160;RPL (bits&#160;1:0) and&#160;the&#160;TI flag&#160;(bit&#160;2)&#160;must&#160;<br/>be&#160;0.</p>
<p style="position:absolute;top:425px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:426px;left:95px;white-space:nowrap" class="ft03">The&#160;selector fields&#160;for CS and&#160;TR&#160;cannot be&#160;0000H.</p>
<p style="position:absolute;top:448px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:448px;left:95px;white-space:nowrap" class="ft03">The&#160;selector&#160;field for&#160;SS&#160;cannot be 0000H if&#160;the “host address-space size”&#160;VM-exit&#160;control is&#160;0.</p>
<p style="position:absolute;top:470px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:471px;left:95px;white-space:nowrap" class="ft05">On processors that support&#160;Intel 64&#160;architecture, the base-address fields&#160;for FS, GS, GDTR, IDTR, and&#160;TR must&#160;<br/>contain canonical&#160;addresses.</p>
<p style="position:absolute;top:538px;left:69px;white-space:nowrap" class="ft04">26.2.4&#160;</p>
<p style="position:absolute;top:538px;left:149px;white-space:nowrap" class="ft04">Checks Related to&#160;Address-Space Size</p>
<p style="position:absolute;top:568px;left:69px;white-space:nowrap" class="ft05">On&#160;processors that support Intel 64 architecture, the following checks related to&#160;address-space size are performed&#160;<br/>on&#160;VMX controls&#160;and fields in&#160;the&#160;host-state&#160;area:</p>
<p style="position:absolute;top:607px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:607px;left:95px;white-space:nowrap" class="ft07">If the&#160;logical&#160;processor&#160;is outside IA-32e&#160;mode&#160;(if IA32_EFER.LMA&#160;=&#160;0) at&#160;the time&#160;of VM&#160;entry,&#160;the&#160;following&#160;<br/>must hold:<br/>—&#160;The “IA-32e mode&#160;guest”&#160;VM-entry control is&#160;0.<br/>—&#160;The “host address-space&#160;size”&#160;VM-exit control is&#160;0.</p>
<p style="position:absolute;top:694px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:694px;left:95px;white-space:nowrap" class="ft05">If&#160;the logical processor is&#160;in IA-32e mode (if IA32_EFER.LMA&#160;=&#160;1)&#160;at&#160;the time&#160;of VM&#160;entry,&#160;the&#160;“host&#160;address-<br/>space size”&#160;VM-exit&#160;control must be&#160;1.</p>
<p style="position:absolute;top:733px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:733px;left:95px;white-space:nowrap" class="ft06">If the&#160;“host&#160;address-space&#160;size” VM-exit&#160;control&#160;is 0,&#160;the following&#160;must hold:<br/>—&#160;The “IA-32e mode&#160;guest”&#160;VM-entry control is&#160;0.<br/>—&#160;Bit&#160;17&#160;of the&#160;CR4&#160;field&#160;(corresponding&#160;to&#160;CR4.PCIDE)&#160;is 0.<br/>—&#160;Bits&#160;63:32 in the RIP&#160;field&#160;is 0.</p>
<p style="position:absolute;top:827px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:828px;left:95px;white-space:nowrap" class="ft07">If the&#160;“host&#160;address-space&#160;size” VM-exit&#160;control&#160;is 1,&#160;the following&#160;must hold:<br/>—&#160;Bit&#160;5 of the&#160;CR4 field (corresponding&#160;to&#160;CR4.PAE)&#160;is 1.<br/>—&#160;The RIP field contains a&#160;canonical address.</p>
<p style="position:absolute;top:900px;left:69px;white-space:nowrap" class="ft05">On&#160;processors&#160;that do not support Intel&#160;64&#160;architecture,&#160;checks are&#160;performed&#160;to&#160;ensure that&#160;the&#160;“IA-32e&#160;mode&#160;<br/>guest”&#160;VM-entry&#160;control and&#160;the “host address-space&#160;size”&#160;VM-exit control are&#160;both&#160;0.</p>
<p style="position:absolute;top:1000px;left:69px;white-space:nowrap" class="ft03">3.&#160;Software&#160;can&#160;determine&#160;a&#160;processor’s physical-address&#160;width by&#160;executing CPUID with 80000008H&#160;in&#160;EAX.&#160;The&#160;physical-address&#160;</p>
<p style="position:absolute;top:1017px;left:91px;white-space:nowrap" class="ft03">width is&#160;returned&#160;in&#160;bits&#160;7:0 of&#160;EAX.</p>
<p style="position:absolute;top:1038px;left:69px;white-space:nowrap" class="ft03">4.&#160;Bit&#160;63 of&#160;the CR3&#160;field in&#160;the host-state area must&#160;be 0. This is&#160;true even though, If&#160;CR4.PCIDE&#160;=&#160;1, bit&#160;63 of&#160;the source operand&#160;to&#160;</p>
<p style="position:absolute;top:1054px;left:91px;white-space:nowrap" class="ft03">MOV to CR3&#160;is&#160;used&#160;to&#160;determine&#160;whether cached&#160;translation&#160;information is&#160;invalidated.</p>
</div>
</body>
</html>
