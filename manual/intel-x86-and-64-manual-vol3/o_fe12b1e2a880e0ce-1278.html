<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1278</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#000000;}
	.ft04{font-size:16px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1278-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1278.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">34-28&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">SYSTEM&#160;MANAGEMENT&#160;MODE</p>
<p style="position:absolute;top:100px;left:93px;white-space:nowrap" class="ft02">—&#160;If the&#160;IA-32e mode&#160;SMM feature&#160;bit&#160;is clear,&#160;PSE is&#160;set&#160;to&#160;1 if supported&#160;by the&#160;processor;&#160;if&#160;the bit is&#160;set,&#160;</p>
<p style="position:absolute;top:117px;left:119px;white-space:nowrap" class="ft02">PSE is&#160;cleared.</p>
<p style="position:absolute;top:141px;left:93px;white-space:nowrap" class="ft02">—&#160;All other&#160;bits are unchanged.</p>
<p style="position:absolute;top:163px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:163px;left:93px;white-space:nowrap" class="ft02">DR7 is&#160;set to&#160;400H.</p>
<p style="position:absolute;top:185px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:186px;left:93px;white-space:nowrap" class="ft02">The&#160;IA32_DEBUGCTL&#160;MSR&#160;is&#160;cleared&#160;to 00000000_00000000H.</p>
<p style="position:absolute;top:208px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:208px;left:93px;white-space:nowrap" class="ft06">The&#160;registers CS,&#160;SS,&#160;DS,&#160;ES,&#160;FS,&#160;and GS&#160;are&#160;loaded&#160;as follows:<br/>—&#160;All registers are usable.<br/>—&#160;CS.selector is loaded from&#160;the&#160;corresponding field in&#160;the MSEG header (the high&#160;16&#160;bits are ignored), with&#160;</p>
<p style="position:absolute;top:273px;left:119px;white-space:nowrap" class="ft02">bits&#160;2:0&#160;cleared&#160;to&#160;0.&#160;If the&#160;result is&#160;0000H,&#160;CS.selector is&#160;set&#160;to 0008H.</p>
<p style="position:absolute;top:297px;left:93px;white-space:nowrap" class="ft02">—&#160;The selectors for&#160;SS, DS,&#160;ES, FS, and GS are&#160;set&#160;to&#160;CS.selector+0008H. If&#160;the result&#160;is 0000H (if&#160;the CS&#160;</p>
<p style="position:absolute;top:313px;left:119px;white-space:nowrap" class="ft02">selector&#160;was FFF8H),&#160;these&#160;selectors are&#160;instead&#160;set&#160;to 0008H.</p>
<p style="position:absolute;top:337px;left:93px;white-space:nowrap" class="ft06">—&#160;The base addresses of all&#160;registers are&#160;cleared&#160;to&#160;zero.<br/>—&#160;The&#160;segment&#160;limits for all&#160;registers are set&#160;to FFFFFFFFH.<br/>—&#160;The AR bytes&#160;for the&#160;registers&#160;are&#160;set as&#160;follows:</p>
<p style="position:absolute;top:411px;left:119px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:409px;left:144px;white-space:nowrap" class="ft02">CS.Type is&#160;set&#160;to 11 (execute/read, accessed, non-conforming&#160;code&#160;segment).</p>
<p style="position:absolute;top:435px;left:119px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:433px;left:144px;white-space:nowrap" class="ft02">For SS,&#160;DS, FS,&#160;and GS, the&#160;Type is&#160;set to&#160;3&#160;(read/write,&#160;accessed,&#160;expand-up data&#160;segment).</p>
<p style="position:absolute;top:459px;left:119px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:457px;left:144px;white-space:nowrap" class="ft02">The S bits for all&#160;registers are&#160;set&#160;to&#160;1.</p>
<p style="position:absolute;top:483px;left:119px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:481px;left:144px;white-space:nowrap" class="ft02">The&#160;DPL for each register is&#160;set&#160;to 0.</p>
<p style="position:absolute;top:507px;left:119px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:505px;left:144px;white-space:nowrap" class="ft02">The&#160;P bits for all registers are&#160;set&#160;to 1.</p>
<p style="position:absolute;top:531px;left:119px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:529px;left:144px;white-space:nowrap" class="ft02">On&#160;processors that support&#160;Intel&#160;64&#160;architecture, CS.L&#160;is loaded&#160;with the value&#160;of the IA-32e mode SMM&#160;</p>
<p style="position:absolute;top:546px;left:143px;white-space:nowrap" class="ft02">feature bit.</p>
<p style="position:absolute;top:571px;left:119px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:570px;left:144px;white-space:nowrap" class="ft02">CS.D&#160;is loaded&#160;with&#160;the inverse&#160;of the&#160;value of&#160;the IA-32e mode SMM&#160;feature bit.</p>
<p style="position:absolute;top:595px;left:119px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:594px;left:144px;white-space:nowrap" class="ft02">For&#160;each of SS,&#160;DS,&#160;FS,&#160;and GS, the D/B&#160;bit&#160;is set&#160;to 1.</p>
<p style="position:absolute;top:619px;left:119px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:618px;left:144px;white-space:nowrap" class="ft02">The&#160;G bits for all&#160;registers are&#160;set&#160;to 1.</p>
<p style="position:absolute;top:640px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:640px;left:93px;white-space:nowrap" class="ft07">LDTR is unusable. The LDTR selector is cleared to 0000H, and the register is otherwise undefined (although&#160;the&#160;<br/>base address&#160;is always canonical)</p>
<p style="position:absolute;top:679px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:679px;left:93px;white-space:nowrap" class="ft07">GDTR.base&#160;is set to&#160;the sum of the&#160;MSEG&#160;base&#160;address and&#160;the&#160;GDTR base-offset field in the&#160;MSEG&#160;header&#160;<br/>(bits&#160;63:32 are always cleared&#160;on&#160;processors&#160;that support IA-32e mode).&#160;GDTR.limit&#160;is set to&#160;the corre-<br/>sponding&#160;field in the MSEG&#160;header&#160;(the&#160;high 16 bits are&#160;ignored).</p>
<p style="position:absolute;top:734px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:735px;left:93px;white-space:nowrap" class="ft02">IDTR.base&#160;is&#160;unchanged.&#160;IDTR.limit is&#160;cleared&#160;to&#160;0000H.</p>
<p style="position:absolute;top:757px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:757px;left:93px;white-space:nowrap" class="ft07">RIP is&#160;set to&#160;the sum&#160;of&#160;the MSEG base address&#160;and the value of the RIP-offset&#160;field&#160;in&#160;the MSEG header&#160;<br/>(bits&#160;63:32&#160;are&#160;always&#160;cleared&#160;on logical processors that&#160;support IA-32e&#160;mode).</p>
<p style="position:absolute;top:796px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:796px;left:93px;white-space:nowrap" class="ft07">RSP is&#160;set to&#160;the sum&#160;of&#160;the MSEG&#160;base&#160;address and&#160;the value&#160;of&#160;the RSP-offset field in&#160;the&#160;MSEG header&#160;<br/>(bits&#160;63:32&#160;are&#160;always&#160;cleared&#160;on logical processor that&#160;supports IA-32e&#160;mode).</p>
<p style="position:absolute;top:835px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:835px;left:93px;white-space:nowrap" class="ft02">RFLAGS is&#160;cleared,&#160;except bit&#160;1,&#160;which is&#160;always set.</p>
<p style="position:absolute;top:857px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:858px;left:93px;white-space:nowrap" class="ft02">The&#160;logical&#160;processor&#160;is left&#160;in the&#160;active&#160;state.</p>
<p style="position:absolute;top:880px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:880px;left:93px;white-space:nowrap" class="ft06">Event blocking&#160;after the&#160;SMM VM&#160;exit is&#160;as&#160;follows:<br/>—&#160;There&#160;is no blocking by STI or&#160;by&#160;MOV&#160;SS.<br/>—&#160;There is&#160;blocking by&#160;non-maskable&#160;interrupts (NMIs) and&#160;by SMIs.</p>
<p style="position:absolute;top:950px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:951px;left:93px;white-space:nowrap" class="ft02">There are&#160;no pending&#160;debug&#160;exceptions&#160;after the&#160;SMM&#160;VM&#160;exit.</p>
<p style="position:absolute;top:973px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:973px;left:93px;white-space:nowrap" class="ft07">For processors that support IA-32e&#160;mode,&#160;the IA32_EFER&#160;MSR&#160;is&#160;modified so&#160;that LME and&#160;LMA both&#160;contain&#160;<br/>the&#160;value&#160;of the&#160;IA-32e&#160;mode&#160;SMM&#160;feature&#160;bit.</p>
<p style="position:absolute;top:1014px;left:68px;white-space:nowrap" class="ft07">If&#160;any of CR3[63:5],&#160;CR4.PAE, CR4.PSE, or&#160;IA32_EFER.LMA&#160;is&#160;changing,&#160;the TLBs are&#160;updated&#160;so that,&#160;after&#160;<br/>VM&#160;exit,&#160;the logical processor does not&#160;use translations&#160;that&#160;were&#160;cached before&#160;the&#160;transition.&#160;This is&#160;not neces-</p>
</div>
</body>
</html>
