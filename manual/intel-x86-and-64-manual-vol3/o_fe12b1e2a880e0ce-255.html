<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 255</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page255-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce255.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:767px;white-space:nowrap" class="ft00">Vol. 3A&#160;7-17</p>
<p style="position:absolute;top:47px;left:720px;white-space:nowrap" class="ft01">TASK&#160;MANAGEMENT</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft06">Although hardware task-switching&#160;is&#160;not supported&#160;in 64-bit mode,&#160;a 64-bit&#160;task state&#160;segment (TSS)&#160;must&#160;exist.&#160;<br/><a href="o_fe12b1e2a880e0ce-255.html">Figure&#160;7-11&#160;shows the format of&#160;</a>a 64-bit TSS.&#160;The TSS holds information important to&#160;64-bit mode and that is not&#160;<br/>directly&#160;related to the task-switch mechanism. This&#160;information includes:</p>
<p style="position:absolute;top:155px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:156px;left:95px;white-space:nowrap" class="ft04"><b>RSPn</b>&#160;—&#160;The&#160;full&#160;64-bit canonical forms of the&#160;stack pointers (RSP) for privilege&#160;levels 0-2.</p>
<p style="position:absolute;top:178px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:178px;left:95px;white-space:nowrap" class="ft04"><b>ISTn</b>&#160;—&#160;The full 64-bit&#160;canonical&#160;forms&#160;of&#160;the interrupt stack table&#160;(IST)&#160;pointers.</p>
<p style="position:absolute;top:200px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:201px;left:95px;white-space:nowrap" class="ft04"><b>I/O&#160;map base address</b>&#160;— The 16-bit&#160;offset&#160;to the&#160;I/O permission&#160;bit&#160;map from the&#160;64-bit TSS base.</p>
<p style="position:absolute;top:225px;left:69px;white-space:nowrap" class="ft06">The&#160;operating&#160;system must create&#160;at least&#160;one 64-bit&#160;TSS&#160;after activating&#160;IA-32e&#160;mode.&#160;It&#160;must&#160;execute&#160;the&#160;LTR&#160;<br/>instruction&#160;(in 64-bit&#160;mode) to&#160;load the&#160;TR&#160;register with&#160;a pointer&#160;to the&#160;64-bit TSS responsible&#160;for both&#160;64-bit-<br/>mode programs and&#160;compatibility-mode programs.</p>
<p style="position:absolute;top:922px;left:347px;white-space:nowrap" class="ft05">Figure&#160;7-11.&#160;&#160;64-Bit&#160;TSS Format</p>
<p style="position:absolute;top:328px;left:644px;white-space:nowrap" class="ft00">0</p>
<p style="position:absolute;top:328px;left:236px;white-space:nowrap" class="ft00">31</p>
<p style="position:absolute;top:349px;left:660px;white-space:nowrap" class="ft00">100</p>
<p style="position:absolute;top:370px;left:662px;white-space:nowrap" class="ft00">96</p>
<p style="position:absolute;top:390px;left:662px;white-space:nowrap" class="ft00">92</p>
<p style="position:absolute;top:411px;left:662px;white-space:nowrap" class="ft00">88</p>
<p style="position:absolute;top:431px;left:662px;white-space:nowrap" class="ft00">84</p>
<p style="position:absolute;top:452px;left:662px;white-space:nowrap" class="ft00">80</p>
<p style="position:absolute;top:473px;left:662px;white-space:nowrap" class="ft00">76</p>
<p style="position:absolute;top:349px;left:274px;white-space:nowrap" class="ft00">I/O Map Base&#160;Address</p>
<p style="position:absolute;top:328px;left:446px;white-space:nowrap" class="ft00">15</p>
<p style="position:absolute;top:495px;left:663px;white-space:nowrap" class="ft00">72</p>
<p style="position:absolute;top:515px;left:662px;white-space:nowrap" class="ft00">68</p>
<p style="position:absolute;top:536px;left:662px;white-space:nowrap" class="ft00">64</p>
<p style="position:absolute;top:556px;left:662px;white-space:nowrap" class="ft00">60</p>
<p style="position:absolute;top:577px;left:662px;white-space:nowrap" class="ft00">56</p>
<p style="position:absolute;top:597px;left:662px;white-space:nowrap" class="ft00">52</p>
<p style="position:absolute;top:619px;left:662px;white-space:nowrap" class="ft00">48</p>
<p style="position:absolute;top:641px;left:663px;white-space:nowrap" class="ft00">44</p>
<p style="position:absolute;top:661px;left:662px;white-space:nowrap" class="ft00">40</p>
<p style="position:absolute;top:682px;left:662px;white-space:nowrap" class="ft00">36</p>
<p style="position:absolute;top:702px;left:662px;white-space:nowrap" class="ft00">32</p>
<p style="position:absolute;top:723px;left:662px;white-space:nowrap" class="ft00">28</p>
<p style="position:absolute;top:744px;left:662px;white-space:nowrap" class="ft00">24</p>
<p style="position:absolute;top:765px;left:662px;white-space:nowrap" class="ft00">20</p>
<p style="position:absolute;top:787px;left:663px;white-space:nowrap" class="ft00">16</p>
<p style="position:absolute;top:807px;left:662px;white-space:nowrap" class="ft00">12</p>
<p style="position:absolute;top:828px;left:662px;white-space:nowrap" class="ft00">8</p>
<p style="position:absolute;top:848px;left:662px;white-space:nowrap" class="ft00">4</p>
<p style="position:absolute;top:869px;left:662px;white-space:nowrap" class="ft00">0</p>
<p style="position:absolute;top:849px;left:429px;white-space:nowrap" class="ft00">RSP0 (lower 32 bits)</p>
<p style="position:absolute;top:808px;left:429px;white-space:nowrap" class="ft00">RSP1 (lower 32 bits)</p>
<p style="position:absolute;top:765px;left:429px;white-space:nowrap" class="ft00">RSP2 (lower 32 bits)</p>
<p style="position:absolute;top:899px;left:284px;white-space:nowrap" class="ft00">Reserved bits. Set to 0.</p>
<p style="position:absolute;top:828px;left:429px;white-space:nowrap" class="ft00">RSP0 (upper 32&#160;bits)</p>
<p style="position:absolute;top:786px;left:429px;white-space:nowrap" class="ft00">RSP1 (upper 32&#160;bits)</p>
<p style="position:absolute;top:745px;left:429px;white-space:nowrap" class="ft00">RSP2 (upper 32&#160;bits)</p>
<p style="position:absolute;top:680px;left:426px;white-space:nowrap" class="ft00">IST1&#160;(lower&#160;32 bits)</p>
<p style="position:absolute;top:662px;left:426px;white-space:nowrap" class="ft00">IST1&#160;(upper 32 bits)</p>
<p style="position:absolute;top:641px;left:426px;white-space:nowrap" class="ft00">IST2&#160;(lower&#160;32 bits)</p>
<p style="position:absolute;top:597px;left:426px;white-space:nowrap" class="ft00">IST3&#160;(lower&#160;32 bits)</p>
<p style="position:absolute;top:555px;left:426px;white-space:nowrap" class="ft00">IST4&#160;(lower&#160;32 bits)</p>
<p style="position:absolute;top:515px;left:426px;white-space:nowrap" class="ft00">IST5&#160;(lower&#160;32 bits)</p>
<p style="position:absolute;top:474px;left:426px;white-space:nowrap" class="ft00">IST6&#160;(lower&#160;32 bits)</p>
<p style="position:absolute;top:430px;left:426px;white-space:nowrap" class="ft00">IST7&#160;(lower&#160;32 bits)</p>
<p style="position:absolute;top:618px;left:426px;white-space:nowrap" class="ft00">IST2&#160;(upper 32 bits)</p>
<p style="position:absolute;top:576px;left:426px;white-space:nowrap" class="ft00">IST3&#160;(upper 32 bits)</p>
<p style="position:absolute;top:535px;left:426px;white-space:nowrap" class="ft00">IST4&#160;(upper 32 bits)</p>
<p style="position:absolute;top:493px;left:426px;white-space:nowrap" class="ft00">IST5&#160;(upper 32 bits)</p>
<p style="position:absolute;top:451px;left:426px;white-space:nowrap" class="ft00">IST6&#160;(upper 32 bits)</p>
<p style="position:absolute;top:410px;left:426px;white-space:nowrap" class="ft00">IST7&#160;(upper 32 bits)</p>
<p style="position:absolute;top:868px;left:430px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:701px;left:427px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:721px;left:428px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:389px;left:425px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:347px;left:522px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:369px;left:426px;white-space:nowrap" class="ft00">Reserved</p>
</div>
</body>
</html>
