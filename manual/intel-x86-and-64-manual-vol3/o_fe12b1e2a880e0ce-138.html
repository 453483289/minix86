<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 138</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:8px;font-family:Times;color:#000000;}
	.ft06{font-size:16px;font-family:Times;color:#0860a8;}
	.ft07{font-size:14px;font-family:Times;color:#0860a8;}
	.ft08{font-size:18px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft012{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft013{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page138-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce138.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">4-34&#160;Vol. 3A</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">PAGING</p>
<p style="position:absolute;top:97px;left:68px;white-space:nowrap" class="ft02">4.9&#160;</p>
<p style="position:absolute;top:97px;left:147px;white-space:nowrap" class="ft02">PAGING AND MEMORY TYPING</p>
<p style="position:absolute;top:133px;left:68px;white-space:nowrap" class="ft012">The&#160;<b>memory&#160;type</b>&#160;of&#160;a&#160;memory access refers to&#160;the type of caching used for that&#160;<a href="˛ˇ">access. Chapter&#160;11, ‚ÄúMemory&#160;<br/>Cache&#160;Control‚Äù pro</a>vides many&#160;details&#160;regarding memory&#160;typing&#160;in&#160;the Intel-64 and IA-32&#160;architectures. This&#160;<br/>section describes&#160;how paging contributes&#160;to&#160;the&#160;determination&#160;of memory typing.<br/>The way&#160;in&#160;which paging&#160;contributes to&#160;memory&#160;typing depends on&#160;whether&#160;the processor supports the&#160;<b>Page&#160;<br/>Attribute&#160;Table</b>&#160;(<b>PAT</b><a href="o_fe12b1e2a880e0ce-445.html">; see Section 11.12).</a></p>
<p style="position:absolute;top:204px;left:362px;white-space:nowrap" class="ft05">1</p>
<p style="position:absolute;top:207px;left:369px;white-space:nowrap" class="ft03"><a href="o_fe12b1e2a880e0ce-138.html">&#160;Section 4.9.1&#160;</a>and<a href="o_fe12b1e2a880e0ce-138.html">&#160;Section 4.9.2 e</a>xplain how&#160;paging&#160;contributes&#160;to&#160;</p>
<p style="position:absolute;top:223px;left:68px;white-space:nowrap" class="ft03">memory typing depending on&#160;whether the PAT is&#160;supported.</p>
<p style="position:absolute;top:274px;left:68px;white-space:nowrap" class="ft06">4.9.1&#160;</p>
<p style="position:absolute;top:274px;left:148px;white-space:nowrap" class="ft06">Paging and Memory Typing When the PAT&#160;is Not Supported (Pentium Pro and Pentium&#160;</p>
<p style="position:absolute;top:295px;left:148px;white-space:nowrap" class="ft06">II Processors)</p>
<p style="position:absolute;top:336px;left:432px;white-space:nowrap" class="ft07">NOTE</p>
<p style="position:absolute;top:361px;left:120px;white-space:nowrap" class="ft010">The&#160;PAT&#160;is&#160;supported&#160;on all&#160;processors&#160;that support IA-32e paging. Thus, this section&#160;applies only&#160;<br/>to&#160;32-bit paging and&#160;PAE paging.</p>
<p style="position:absolute;top:402px;left:68px;white-space:nowrap" class="ft010">If the PAT is not supported, paging contributes&#160;to memory&#160;typing&#160;in conjunction with the memory-type range regis-<br/>ters&#160;(MTRRs)&#160;<a href="o_fe12b1e2a880e0ce-426.html">as specified in Table&#160;11-6&#160;in Section 11.5.2.1.<br/></a>For&#160;any access to&#160;a physical&#160;address, the&#160;table&#160;combines&#160;the&#160;memory type specified&#160;for&#160;that physical address&#160;by&#160;<br/>the&#160;MTRRs with a&#160;PCD value&#160;and a&#160;PWT value.&#160;The&#160;latter two&#160;values&#160;are&#160;determined&#160;as follows:</p>
<p style="position:absolute;top:481px;left:68px;white-space:nowrap" class="ft08">‚Ä¢</p>
<p style="position:absolute;top:481px;left:93px;white-space:nowrap" class="ft03">For an access to&#160;a PDE with 32-bit paging, the&#160;PCD&#160;and PWT values&#160;come from CR3.</p>
<p style="position:absolute;top:503px;left:68px;white-space:nowrap" class="ft08">‚Ä¢</p>
<p style="position:absolute;top:504px;left:93px;white-space:nowrap" class="ft03">For an access to&#160;a PDE with PAE paging, the&#160;PCD&#160;and PWT&#160;values&#160;come&#160;from the&#160;relevant PDPTE&#160;register.</p>
<p style="position:absolute;top:526px;left:68px;white-space:nowrap" class="ft08">‚Ä¢</p>
<p style="position:absolute;top:526px;left:93px;white-space:nowrap" class="ft03">For an access to&#160;a PTE, the&#160;PCD&#160;and PWT&#160;values&#160;come&#160;from the&#160;relevant PDE.</p>
<p style="position:absolute;top:548px;left:68px;white-space:nowrap" class="ft08">‚Ä¢</p>
<p style="position:absolute;top:549px;left:93px;white-space:nowrap" class="ft010">For&#160;an access to the physical address that&#160;is the translation of a linear address, the PCD and PWT&#160;values come&#160;<br/>from the&#160;relevant PTE&#160;(if the&#160;translation uses&#160;a 4-KByte&#160;page) or the relevant&#160;PDE (otherwise).</p>
<p style="position:absolute;top:587px;left:68px;white-space:nowrap" class="ft08">‚Ä¢</p>
<p style="position:absolute;top:588px;left:93px;white-space:nowrap" class="ft03">With&#160;PAE paging,&#160;the UC memory&#160;type&#160;is used&#160;when loading&#160;the&#160;PDPTEs (see<a href="o_fe12b1e2a880e0ce-117.html">&#160;Section&#160;4.4.1</a>).</p>
<p style="position:absolute;top:638px;left:68px;white-space:nowrap" class="ft06">4.9.2&#160;</p>
<p style="position:absolute;top:638px;left:148px;white-space:nowrap" class="ft06">Paging and Memory Typing When the PAT&#160;is Supported (Pentium III and More&#160;Recent&#160;</p>
<p style="position:absolute;top:659px;left:148px;white-space:nowrap" class="ft06">Processor Families)</p>
<p style="position:absolute;top:690px;left:68px;white-space:nowrap" class="ft010">If the&#160;PAT&#160;is supported, paging&#160;contributes to&#160;memory&#160;typing in&#160;conjunction&#160;with&#160;the PAT and&#160;the memory-type&#160;<br/>range&#160;registers&#160;(MTRRs) as&#160;specified in&#160;<a href="o_fe12b1e2a880e0ce-427.html">Table&#160;11-7 in Section 11.5.2.2.<br/></a>The&#160;PAT&#160;is a&#160;64-bit MSR (IA32_PAT;&#160;MSR&#160;index 277H)&#160;comprising&#160;eight&#160;(8) 8-bit entries (entry&#160;<i>i</i>&#160;comprises&#160;<br/>bits&#160;8<i>i</i>+7:8<i>i</i>&#160;of&#160;the MSR).<br/>For&#160;any access to&#160;a physical&#160;address, the&#160;table&#160;combines&#160;the&#160;memory type specified&#160;for&#160;that physical address&#160;by&#160;<br/>the MTRRs&#160;with a&#160;memory&#160;type selected from&#160;the PAT.<a href="o_fe12b1e2a880e0ce-447.html">&#160;Table&#160;11-11</a>&#160;in&#160;<a href="o_fe12b1e2a880e0ce-447.html">Section 11.12.3 spe</a>cifies&#160;how a&#160;memory&#160;type&#160;<br/>is selected&#160;from the&#160;PAT.&#160;Specifically, it&#160;comes from entry&#160;<i>i</i>&#160;of the&#160;PAT,&#160;where&#160;<i>i</i>&#160;is&#160;defined as&#160;follows:</p>
<p style="position:absolute;top:826px;left:68px;white-space:nowrap" class="ft08">‚Ä¢</p>
<p style="position:absolute;top:826px;left:93px;white-space:nowrap" class="ft013">For an access to&#160;an entry in&#160;a paging structure&#160;whose&#160;address is&#160;in CR3&#160;(e.g.,&#160;the PML4&#160;table with IA-32e&#160;<br/>paging):<br/>‚Äî&#160;For&#160;IA-32e paging with CR4.PCIDE&#160;=&#160;1,&#160;<i>i&#160;</i>= 0.<br/>‚Äî&#160;Otherwise,&#160;<i>i&#160;</i>= 2*PCD+PWT,&#160;where the&#160;PCD&#160;and PWT&#160;values&#160;come from CR3.&#160;</p>
<p style="position:absolute;top:913px;left:68px;white-space:nowrap" class="ft08">‚Ä¢</p>
<p style="position:absolute;top:913px;left:93px;white-space:nowrap" class="ft010">For an access to&#160;a PDE with PAE paging,&#160;<i>i&#160;</i>= 2*PCD+PWT, where&#160;the PCD and&#160;PWT values&#160;come from the&#160;<br/>relevant PDPTE&#160;register.</p>
<p style="position:absolute;top:952px;left:68px;white-space:nowrap" class="ft08">‚Ä¢</p>
<p style="position:absolute;top:952px;left:93px;white-space:nowrap" class="ft010">For an access to&#160;a paging-structure entry&#160;X&#160;whose&#160;address is&#160;in another paging-structure&#160;entry Y,&#160;<i>i&#160;</i>=&#160;<br/>2*PCD+PWT,&#160;where the&#160;PCD&#160;and PWT&#160;values&#160;come from Y.</p>
<p style="position:absolute;top:1038px;left:68px;white-space:nowrap" class="ft03">1.&#160;The PAT is&#160;supported on&#160;Pentium&#160;III&#160;and more&#160;recent&#160;processor&#160;fami<a href="o_fe12b1e2a880e0ce-109.html">lies. See Section 4.1.4</a>&#160;for how&#160;to&#160;determine&#160;whether the PAT&#160;is&#160;</p>
<p style="position:absolute;top:1054px;left:89px;white-space:nowrap" class="ft03">supported.</p>
</div>
</body>
</html>
