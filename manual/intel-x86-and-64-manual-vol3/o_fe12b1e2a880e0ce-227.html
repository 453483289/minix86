<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 227</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#000000;}
	.ft04{font-size:8px;font-family:Times;color:#000000;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:8px;font-family:Times;color:#000000;-moz-transform: matrix(         0,          1, -0.8071343252,          0, 0, 0);-webkit-transform: matrix(         0,          1, -0.8071343252,          0, 0, 0);-o-transform: matrix(         0,          1, -0.8071343252,          0, 0, 0);-ms-transform: matrix(         0,          1, -0.8071343252,          0, 0, 0);-moz-transform-origin: left 75%;-webkit-transform-origin: left 75%;-o-transform-origin: left 75%;-ms-transform-origin: left 75%;}
	.ft07{font-size:8px;font-family:Times;color:#000000;-moz-transform: matrix(         0,          1, -0.9539081452,          0, 0, 0);-webkit-transform: matrix(         0,          1, -0.9539081452,          0, 0, 0);-o-transform: matrix(         0,          1, -0.9539081452,          0, 0, 0);-ms-transform: matrix(         0,          1, -0.9539081452,          0, 0, 0);-moz-transform-origin: left 75%;-webkit-transform-origin: left 75%;-o-transform-origin: left 75%;-ms-transform-origin: left 75%;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:9px;line-height:12px;font-family:Times;color:#000000;}
	.ft010{font-size:9px;line-height:13px;font-family:Times;color:#000000;}
	.ft011{font-size:9px;line-height:14px;font-family:Times;color:#000000;}
	.ft012{font-size:8px;line-height:12px;font-family:Times;color:#000000;-moz-transform: matrix(         0,          1, -0.9539081452,          0, 0, 0);-webkit-transform: matrix(         0,          1, -0.9539081452,          0, 0, 0);-o-transform: matrix(         0,          1, -0.9539081452,          0, 0, 0);-ms-transform: matrix(         0,          1, -0.9539081452,          0, 0, 0);-moz-transform-origin: left 75%;-webkit-transform-origin: left 75%;-o-transform-origin: left 75%;-ms-transform-origin: left 75%;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page227-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce227.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:767px;white-space:nowrap" class="ft00">Vol. 3A&#160;6-41</p>
<p style="position:absolute;top:47px;left:609px;white-space:nowrap" class="ft01">INTERRUPT&#160;AND&#160;EXCEPTION HANDLING</p>
<p style="position:absolute;top:100px;left:95px;white-space:nowrap" class="ft02">—&#160;I/D flag (bit&#160;4).</p>
<p style="position:absolute;top:117px;left:120px;white-space:nowrap" class="ft08">This flag is&#160;1 if the&#160;access causing the page-fault exception was&#160;an instruction&#160;fetch. This&#160;flag describes&#160;the&#160;<br/>access&#160;causing&#160;the page-fault exception, not&#160;the access rights&#160;specified by&#160;paging.</p>
<p style="position:absolute;top:157px;left:95px;white-space:nowrap" class="ft02">—&#160;PK&#160;&#160;flag&#160;&#160;(bit&#160;5).</p>
<p style="position:absolute;top:174px;left:120px;white-space:nowrap" class="ft08">This&#160;flag is 1 if&#160;the access&#160;causing the page-fault&#160;exception was a&#160;data&#160;access to&#160;a user-mode&#160;address with&#160;<br/>protection key&#160;disallowed by&#160;the&#160;value of&#160;&#160;the PKRU&#160;register.</p>
<p style="position:absolute;top:214px;left:94px;white-space:nowrap" class="ft02">—&#160;SGX&#160;flag (bit 15).</p>
<p style="position:absolute;top:231px;left:120px;white-space:nowrap" class="ft08">This flag&#160;is 1&#160;if the&#160;exception is&#160;unrelated&#160;to paging and resulted&#160;from violation of SGX-specific&#160;access-<br/>control&#160;requirements. Because&#160;such&#160;a violation can occur only&#160;if there&#160;is no ordinary page&#160;fault, this flag&#160;is&#160;<br/>set only if the&#160;P&#160;flag (bit 0)&#160;is 1&#160;and&#160;the RSVD&#160;flag&#160;(bit 3) and&#160;the PK&#160;flag (bit 5) are&#160;both&#160;0.</p>
<p style="position:absolute;top:286px;left:94px;white-space:nowrap" class="ft08"><a href="o_fe12b1e2a880e0ce-132.html">See Section 4.6,&#160;“Access&#160;Rights”&#160;</a><a href="o_fe12b1e2a880e0ce-135.html">and Section 4.7, “Page-Fault&#160;Exceptions” for m</a>ore&#160;information about&#160;page-<br/>fault exceptions&#160;and the&#160;error codes that&#160;they produce.</p>
<p style="position:absolute;top:811px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:812px;left:95px;white-space:nowrap" class="ft08">The&#160;contents of the&#160;CR2 register.&#160;The&#160;processor&#160;loads&#160;the&#160;CR2 register&#160;with the&#160;32-bit linear address&#160;that&#160;<br/>generated&#160;the exception. The page-fault handler&#160;can&#160;use this&#160;address to locate the&#160;corresponding&#160;page&#160;<br/>directory&#160;and page-table&#160;entries.&#160;Another&#160;page&#160;fault can potentially&#160;occur during&#160;execution of&#160;the page-fault&#160;<br/>handler;&#160;the handler should&#160;save&#160;the&#160;contents&#160;of&#160;the CR2&#160;register&#160;before&#160;a second page&#160;fault&#160;can occur.</p>
<p style="position:absolute;top:859px;left:791px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:861px;left:798px;white-space:nowrap" class="ft02">&#160;If&#160;a&#160;</p>
<p style="position:absolute;top:878px;left:95px;white-space:nowrap" class="ft08">page&#160;fault is caused&#160;by a page-level protection violation,&#160;the access flag in the page-directory entry is set when&#160;<br/>the fault occurs. The&#160;behavior of IA-32 processors regarding&#160;the access flag&#160;in the&#160;corresponding page-table&#160;<br/>entry&#160;is model specific and&#160;not architecturally&#160;defined.</p>
<p style="position:absolute;top:766px;left:340px;white-space:nowrap" class="ft05">Figure&#160;6-9.&#160;&#160;Page-Fault&#160;Error Code</p>
<p style="position:absolute;top:1021px;left:69px;white-space:nowrap" class="ft02">1.&#160;Processors update CR2&#160;whenever&#160;a&#160;page&#160;fault is&#160;detected.&#160;If a&#160;second&#160;page&#160;fault occurs while&#160;an&#160;earlier page&#160;fault is&#160;being deliv-</p>
<p style="position:absolute;top:1038px;left:91px;white-space:nowrap" class="ft02">ered, the faulting&#160;linear&#160;address of&#160;the second&#160;fault will overwrite the contents of&#160;CR2&#160;(replacing&#160;the&#160;previous&#160;address).&#160;These&#160;</p>
<p style="position:absolute;top:1054px;left:91px;white-space:nowrap" class="ft02">updates&#160;to&#160;CR2 occur even&#160;if&#160;the page&#160;fault results in&#160;a double fault or occurs during&#160;the delivery&#160;of&#160;a double fault.</p>
<p style="position:absolute;top:425px;left:323px;white-space:nowrap" class="ft09">The fault was caused by&#160;a non-present&#160;page.<br/>The fault was caused by&#160;a page-level protection&#160;violation.</p>
<p style="position:absolute;top:467px;left:323px;white-space:nowrap" class="ft09">The access causing the fault was a read.<br/>The access causing the fault was a write.</p>
<p style="position:absolute;top:509px;left:323px;white-space:nowrap" class="ft010">A supervisor-mode access caused the fault.<br/>A user-mode access caused&#160;the fault.</p>
<p style="position:absolute;top:361px;left:240px;white-space:nowrap" class="ft04">31</p>
<p style="position:absolute;top:359px;left:635px;white-space:nowrap" class="ft04">0</p>
<p style="position:absolute;top:385px;left:368px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:359px;left:622px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:359px;left:610px;white-space:nowrap" class="ft04">2</p>
<p style="position:absolute;top:359px;left:598px;white-space:nowrap" class="ft04">3</p>
<p style="position:absolute;top:359px;left:584px;white-space:nowrap" class="ft04">4</p>
<p style="position:absolute;top:549px;left:323px;white-space:nowrap" class="ft010">The fault was not caused by&#160;reserved bit violation.<br/>The fault was caused by&#160;a reserved bit set to&#160;1 in some</p>
<p style="position:absolute;top:425px;left:258px;white-space:nowrap" class="ft00">P</p>
<p style="position:absolute;top:425px;left:310px;white-space:nowrap" class="ft00">0</p>
<p style="position:absolute;top:438px;left:309px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:466px;left:259px;white-space:nowrap" class="ft00">W/R</p>
<p style="position:absolute;top:467px;left:310px;white-space:nowrap" class="ft00">0</p>
<p style="position:absolute;top:480px;left:309px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:508px;left:258px;white-space:nowrap" class="ft00">U/S</p>
<p style="position:absolute;top:509px;left:309px;white-space:nowrap" class="ft00">0</p>
<p style="position:absolute;top:551px;left:257px;white-space:nowrap" class="ft00">RSVD</p>
<p style="position:absolute;top:549px;left:309px;white-space:nowrap" class="ft010">0<br/>1</p>
<p style="position:absolute;top:522px;left:309px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:365px;left:582px;white-space:nowrap" class="ft06">I/D</p>
<p style="position:absolute;top:600px;left:259px;white-space:nowrap" class="ft00">I/D</p>
<p style="position:absolute;top:598px;left:309px;white-space:nowrap" class="ft011">0&#160;&#160;The&#160;fault was not caused by&#160;an instruction fetch.<br/>1&#160;The&#160;fault&#160;was&#160;caused by an instruction&#160;fetch.</p>
<p style="position:absolute;top:366px;left:636px;white-space:nowrap" class="ft07">P</p>
<p style="position:absolute;top:366px;left:622px;white-space:nowrap" class="ft07">W/R</p>
<p style="position:absolute;top:366px;left:610px;white-space:nowrap" class="ft07">U/S</p>
<p style="position:absolute;top:365px;left:596px;white-space:nowrap" class="ft07">RSVD</p>
<p style="position:absolute;top:576px;left:323px;white-space:nowrap" class="ft00">paging-structure entry.</p>
<p style="position:absolute;top:365px;left:568px;white-space:nowrap" class="ft07">PK&#160;5</p>
<p style="position:absolute;top:648px;left:259px;white-space:nowrap" class="ft00">PK</p>
<p style="position:absolute;top:646px;left:309px;white-space:nowrap" class="ft011">0&#160;&#160;The&#160;fault was not&#160;caused by&#160;protection keys.<br/>1&#160;There was a protection-key violation.</p>
<p style="position:absolute;top:688px;left:259px;white-space:nowrap" class="ft00">SGX</p>
<p style="position:absolute;top:689px;left:321px;white-space:nowrap" class="ft00">The fault is not related&#160;to SGX.</p>
<p style="position:absolute;top:688px;left:309px;white-space:nowrap" class="ft010">0<br/>1&#160;The fault resulted&#160;from violation of SGX-specific&#160;access-control</p>
<p style="position:absolute;top:715px;left:321px;white-space:nowrap" class="ft00">requirements.</p>
<p style="position:absolute;top:386px;left:484px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:367px;left:447px;white-space:nowrap" class="ft012">SG<br/>X</p>
<p style="position:absolute;top:360px;left:444px;white-space:nowrap" class="ft04">15</p>
</div>
</body>
</html>
