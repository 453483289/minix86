<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 401</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:21px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#0860a8;}
	.ft05{font-size:8px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page401-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a401.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:775px;white-space:nowrap" class="ft00">Vol. 1&#160;18-1</p>
<p style="position:absolute;top:96px;left:699px;white-space:nowrap" class="ft01">CHAPTER 18</p>
<p style="position:absolute;top:120px;left:670px;white-space:nowrap" class="ft01">INPUT/OUTPUT</p>
<p style="position:absolute;top:190px;left:68px;white-space:nowrap" class="ft07">In&#160;addition&#160;to transferring data&#160;to&#160;and from external&#160;memory, IA-32 processors can&#160;also transfer&#160;data to&#160;and from&#160;<br/>input/output ports&#160;(I/O ports). I/O&#160;ports are&#160;created in&#160;system hardware&#160;by&#160;circuity&#160;that decodes&#160;the control, data,&#160;<br/>and&#160;address pins on the&#160;processor.&#160;These&#160;I/O ports are&#160;then&#160;configured&#160;to communicate&#160;with peripheral&#160;devices.&#160;An&#160;<br/>I/O port can be an&#160;input port, an output port, or a bidirectional port. Some I/O ports are used for transmitting data,&#160;<br/>such as to and from the&#160;transmit and receive registers, respectively, of a serial interface device. Other I/O ports are&#160;<br/>used&#160;to control peripheral devices,&#160;such&#160;as&#160;the&#160;control&#160;registers of a&#160;disk controller.<br/>This&#160;chapter&#160;describes&#160;the&#160;processor’s&#160;I/O architecture. The topics discussed&#160;include:</p>
<p style="position:absolute;top:319px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:319px;left:93px;white-space:nowrap" class="ft02">I/O port&#160;addressing</p>
<p style="position:absolute;top:341px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:342px;left:93px;white-space:nowrap" class="ft02">I/O instructions</p>
<p style="position:absolute;top:364px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:364px;left:93px;white-space:nowrap" class="ft02">I/O protection&#160;mechanism</p>
<p style="position:absolute;top:420px;left:68px;white-space:nowrap" class="ft04">18.1&#160;</p>
<p style="position:absolute;top:420px;left:147px;white-space:nowrap" class="ft04">I/O PORT ADDRESSING</p>
<p style="position:absolute;top:456px;left:68px;white-space:nowrap" class="ft02">The&#160;processor&#160;permits&#160;applications&#160;to access&#160;I/O&#160;ports in&#160;either of two ways:</p>
<p style="position:absolute;top:478px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:478px;left:93px;white-space:nowrap" class="ft02">Through a&#160;separate&#160;I/O&#160;address space</p>
<p style="position:absolute;top:500px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:501px;left:93px;white-space:nowrap" class="ft02">Through memory-mapped&#160;I/O</p>
<p style="position:absolute;top:525px;left:68px;white-space:nowrap" class="ft06">Accessing&#160;I/O ports&#160;through the&#160;I/O address&#160;space&#160;is handled through&#160;a set&#160;of&#160;I/O instructions and a&#160;special&#160;I/O&#160;<br/>protection mechanism.&#160;Accessing&#160;I/O&#160;ports through&#160;memory-mapped I/O&#160;is handled with the&#160;processor’s general-<br/>purpose move and string instructions, with&#160;protection provided through segmentation or paging. I/O ports can be&#160;<br/>mapped so&#160;that they&#160;appear&#160;in the&#160;I/O address&#160;space or the physical-memory address&#160;space (memory&#160;mapped&#160;<br/>I/O) or&#160;both.<br/>One benefit of using&#160;the I/O&#160;address space is&#160;that writes&#160;to&#160;I/O ports&#160;are guaranteed to be&#160;completed before&#160;the&#160;<br/>next instruction in the&#160;instruction&#160;stream&#160;is executed. Thus, I/O writes&#160;to control system hardware&#160;cause the hard-<br/>ware&#160;to be&#160;set to&#160;its new state&#160;before&#160;any&#160;other instructions are&#160;executed.&#160;Se<a href="o_7281d5ea06a5b67a-405.html">e Section 18.6,&#160;“Ordering I/O,” for&#160;<br/></a>more&#160;information on serializing of I/O&#160;operations.</p>
<p style="position:absolute;top:720px;left:68px;white-space:nowrap" class="ft04">18.2&#160;</p>
<p style="position:absolute;top:720px;left:147px;white-space:nowrap" class="ft04">I/O&#160;PORT&#160;HARDWARE</p>
<p style="position:absolute;top:756px;left:68px;white-space:nowrap" class="ft06">From a&#160;hardware point&#160;of view,&#160;I/O addressing is&#160;handled&#160;through the&#160;processor’s address lines. For the P6 family,&#160;<br/>Pentium 4, and Intel Xeon processors,&#160;the&#160;request command&#160;lines signal whether the address lines are being driven&#160;<br/>with&#160;a&#160;memory&#160;address or an I/O&#160;address; for&#160;Pentium processors and earlier&#160;IA-32 processors, the&#160;M/IO# pin indi-<br/>cates a&#160;memory address&#160;(1)&#160;or an I/O&#160;address (0). When&#160;the&#160;separate I/O&#160;address space is&#160;selected, it&#160;is the&#160;<br/>responsibility of the&#160;hardware&#160;to decode&#160;the memory-I/O&#160;bus&#160;transaction to&#160;select I/O ports rather&#160;than memory.&#160;<br/>Data is&#160;transmitted&#160;between&#160;the processor and an I/O&#160;device&#160;through the&#160;data lines.</p>
<p style="position:absolute;top:894px;left:68px;white-space:nowrap" class="ft04">18.3&#160;</p>
<p style="position:absolute;top:894px;left:147px;white-space:nowrap" class="ft04">I/O ADDRESS SPACE</p>
<p style="position:absolute;top:930px;left:68px;white-space:nowrap" class="ft06">The&#160;processor’s&#160;I/O address space&#160;is separate&#160;and&#160;distinct from the&#160;physical-memory address&#160;space. The&#160;I/O&#160;<br/>address space consists of 2</p>
<p style="position:absolute;top:944px;left:251px;white-space:nowrap" class="ft05">16</p>
<p style="position:absolute;top:946px;left:265px;white-space:nowrap" class="ft02">&#160;(64K) individually addressable&#160;8-bit I/O ports, numbered 0 through FFFFH. I/O port&#160;</p>
<p style="position:absolute;top:963px;left:68px;white-space:nowrap" class="ft06">addresses 0F8H&#160;through&#160;0FFH are&#160;reserved. Do not&#160;assign&#160;I/O ports to&#160;these addresses.&#160;The result of&#160;an&#160;attempt&#160;<br/>to address beyond the I/O address space&#160;limit&#160;of FFFFH is&#160;implementation-specific; see the Developer’s Manuals for&#160;<br/>specific processors for more&#160;details.<br/>Any two consecutive 8-bit ports can be treated as a&#160;16-bit port, and any&#160;four consecutive ports can be a&#160;32-bit port.&#160;<br/>In this&#160;manner,&#160;the processor can&#160;transfer 8, 16,&#160;or 32 bits&#160;to&#160;or from&#160;a device in&#160;the I/O&#160;address space.&#160;Like&#160;words&#160;<br/>in memory,&#160;16-bit ports should&#160;be&#160;aligned&#160;to even&#160;addresses (0,&#160;2,&#160;4,&#160;...) so&#160;that all 16 bits&#160;can be transferred in a&#160;</p>
</div>
</body>
</html>
