<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 215</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:14px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:16px;font-family:Times;color:#0860a8;}
	.ft05{font-size:18px;font-family:Times;color:#0860a8;}
	.ft06{font-size:18px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:20px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft012{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page215-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a215.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:775px;white-space:nowrap" class="ft00">Vol. 1&#160;8-25</p>
<p style="position:absolute;top:47px;left:634px;white-space:nowrap" class="ft01">PROGRAMMING&#160;WITH&#160;THE X87&#160;FPU</p>
<p style="position:absolute;top:99px;left:428px;white-space:nowrap" class="ft02">NOTES</p>
<p style="position:absolute;top:124px;left:122px;white-space:nowrap" class="ft08">When operating&#160;a Pentium or&#160;Intel486&#160;processor&#160;in MS-DOS compatibility mode,&#160;it is&#160;possible&#160;<br/>(under unusual circumstances)&#160;for&#160;a non-waiting&#160;instruction to&#160;be&#160;interrupted&#160;prior&#160;to&#160;being&#160;<br/>executed to&#160;handle a&#160;pending x87&#160;FPU&#160;exception. The circumstances where&#160;this can&#160;happen&#160;and&#160;<br/>the resulting action&#160;of&#160;the processor are&#160;described&#160;in&#160;<a href="o_7281d5ea06a5b67a-427.html">Section&#160;D.2.1.3,&#160;“No-Wait x87&#160;FPU&#160;Instruc-<br/>tions Can Get x87&#160;FPU Interrupt in Window.”&#160;<br/></a>When operating&#160;a P6 family,&#160;Pentium 4,&#160;or Intel Xeon processor&#160;in MS-DOS compatibility mode,&#160;<br/>non-waiting instructions can not be interrupted&#160;in&#160;this way (see&#160;<a href="o_7281d5ea06a5b67a-429.html">Section D.2.2,&#160;“MS-DOS*&#160;Compat-<br/>ibility Sub-mode in&#160;the P6 Family and&#160;Pentium® 4&#160;Processors”).</a></p>
<p style="position:absolute;top:295px;left:69px;white-space:nowrap" class="ft04">8.3.13&#160;</p>
<p style="position:absolute;top:295px;left:149px;white-space:nowrap" class="ft04">Unsupported x87 FPU Instructions</p>
<p style="position:absolute;top:325px;left:69px;white-space:nowrap" class="ft08">The Intel&#160;8087 instructions FENI&#160;and FDISI and&#160;the Intel&#160;287 math coprocessor instruction FSETPM&#160;perform no&#160;<br/>function in the Intel 387 math coprocessor and later IA-32&#160;processors. If these opcodes are detected&#160;in the instruc-<br/>tion stream,&#160;the&#160;x87 FPU&#160;performs no&#160;specific&#160;operation&#160;and no internal&#160;x87&#160;FPU states are&#160;affected.</p>
<p style="position:absolute;top:414px;left:69px;white-space:nowrap" class="ft05">8.4&#160;</p>
<p style="position:absolute;top:414px;left:148px;white-space:nowrap" class="ft05">X87 FPU FLOATING-POINT&#160;EXCEPTION HANDLING</p>
<p style="position:absolute;top:450px;left:69px;white-space:nowrap" class="ft08">The&#160;x87 FPU&#160;detects the&#160;six classes of exception&#160;conditions&#160;described&#160;<a href="o_7281d5ea06a5b67a-102.html">in&#160;Section 4.9,&#160;“Overview of Floating-Point&#160;<br/>Exceptions”:</a></p>
<p style="position:absolute;top:488px;left:69px;white-space:nowrap" class="ft06">•</p>
<p style="position:absolute;top:489px;left:95px;white-space:nowrap" class="ft011">Invalid&#160;operation&#160;(#I), with two subclasses:<br/>—&#160;Stack overflow or&#160;underflow&#160;(#IS)<br/>—&#160;Invalid arithmetic&#160;operation (#IA)</p>
<p style="position:absolute;top:559px;left:69px;white-space:nowrap" class="ft06">•</p>
<p style="position:absolute;top:559px;left:95px;white-space:nowrap" class="ft03">Denormalized&#160;operand&#160;(#D)</p>
<p style="position:absolute;top:581px;left:69px;white-space:nowrap" class="ft06">•</p>
<p style="position:absolute;top:582px;left:95px;white-space:nowrap" class="ft03">Divide-by-zero (#Z)</p>
<p style="position:absolute;top:604px;left:69px;white-space:nowrap" class="ft06">•</p>
<p style="position:absolute;top:604px;left:95px;white-space:nowrap" class="ft03">Numeric overflow (#O)</p>
<p style="position:absolute;top:626px;left:69px;white-space:nowrap" class="ft06">•</p>
<p style="position:absolute;top:627px;left:95px;white-space:nowrap" class="ft03">Numeric underflow&#160;(#U)</p>
<p style="position:absolute;top:649px;left:69px;white-space:nowrap" class="ft06">•</p>
<p style="position:absolute;top:649px;left:95px;white-space:nowrap" class="ft03">Inexact&#160;result (precision) (#P)</p>
<p style="position:absolute;top:673px;left:69px;white-space:nowrap" class="ft08">Each&#160;of&#160;the&#160;six exception classes has a&#160;corresponding flag&#160;bit in the&#160;x87 FPU status&#160;word&#160;and a&#160;mask bit in the&#160;x87&#160;<br/>FPU control&#160;word&#160;(see<a href="o_7281d5ea06a5b67a-194.html">&#160;Section 8.1.3,&#160;“x87&#160;FPU&#160;Status&#160;Register,”</a>&#160;and<a href="o_7281d5ea06a5b67a-197.html">&#160;Section&#160;8.1.5,&#160;“x87&#160;FPU&#160;Control&#160;Word,”</a>&#160;respec-<br/>tively). In&#160;addition, the&#160;exception summary (ES) flag&#160;in&#160;the&#160;status&#160;word indicates when one&#160;or more unmasked&#160;<br/>exceptions has&#160;been&#160;detected. The&#160;stack fault (SF)&#160;flag (also&#160;in&#160;the status&#160;word) distinguishes between the&#160;two&#160;<br/>types of invalid-operation exceptions.<br/>The mask bits&#160;can&#160;be set with FLDCW,&#160;FRSTOR,&#160;or FXRSTOR;&#160;they&#160;can&#160;be read with either FSTCW/FNSTCW,&#160;<br/>FSAVE/FNSAVE, or&#160;FXSAVE. The flag&#160;bits&#160;can&#160;be&#160;read&#160;with&#160;the&#160;FSTSW/FNSTSW,&#160;FSAVE/FNSAVE, or&#160;FXSAVE&#160;<br/>instruction.</p>
<p style="position:absolute;top:831px;left:433px;white-space:nowrap" class="ft02">NOTE</p>
<p style="position:absolute;top:856px;left:122px;white-space:nowrap" class="ft08"><a href="o_7281d5ea06a5b67a-103.html">Section 4.9.1, “Floating-Point Exception Conditions,”</a>&#160;provides a general&#160;overview of how the IA-32&#160;<br/>processor&#160;detects and&#160;handles&#160;the various classes of&#160;floating-point&#160;exceptions.&#160;This information&#160;<br/>pertains to&#160;x87 FPU&#160;as well&#160;as SSE/SSE2/SSE3 extensions.&#160;</p>
<p style="position:absolute;top:913px;left:69px;white-space:nowrap" class="ft08">The following&#160;sections&#160;give&#160;specific information&#160;about how the x87&#160;FPU handles floating-point&#160;exceptions that are&#160;<br/>unique to&#160;the x87 FPU.</p>
<p style="position:absolute;top:980px;left:69px;white-space:nowrap" class="ft04">8.4.1&#160;</p>
<p style="position:absolute;top:980px;left:150px;white-space:nowrap" class="ft04">Arithmetic vs. Non-arithmetic Instructions</p>
<p style="position:absolute;top:1011px;left:69px;white-space:nowrap" class="ft08">When dealing with floating-point&#160;exceptions,&#160;it is useful&#160;to distinguish&#160;between&#160;<b>arithmetic instructions</b>&#160;and&#160;<b>non-<br/>arithmetic instructions</b>. Non-arithmetic instructions have&#160;no operands&#160;or&#160;do&#160;not&#160;make&#160;substantial changes&#160;to&#160;<br/>their operands. Arithmetic instructions do make&#160;significant changes&#160;to their&#160;operands; in&#160;particular,&#160;they make&#160;<br/>changes that could result&#160;in floating-point&#160;exceptions&#160;<a href="o_7281d5ea06a5b67a-216.html">being signaled. Table&#160;8-9&#160;</a>lists&#160;the non-arithmetic&#160;and arith-</p>
</div>
</body>
</html>
