<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 224</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page224-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a224.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">8-34&#160;Vol. 1</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">PROGRAMMING WITH THE X87 FPU</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft03">If the&#160;faulting&#160;floating-point instruction&#160;is followed by one or&#160;more non-floating-point instructions,&#160;it may not be&#160;<br/>useful to re-execute the faulting&#160;in<a href="o_7281d5ea06a5b67a-221.html">struction. See Section 8.6, “x87 FPU Exception&#160;Synchronization,” for mor</a>e&#160;infor-<br/>mation&#160;on&#160;synchronizing floating-point&#160;exceptions.<br/>In cases where the&#160;handler&#160;needs&#160;to restart program execution&#160;with&#160;the&#160;faulting instruction, the&#160;IRET instruction&#160;<br/>cannot&#160;be used&#160;directly. The reason&#160;for&#160;this is&#160;that because the&#160;exception is&#160;not generated until the&#160;next floating-<br/>point&#160;or WAIT/FWAIT&#160;instruction&#160;following the faulting floating-point instruction,&#160;the return instruction pointer on&#160;<br/>the stack&#160;may not&#160;point to&#160;the faulting instruction. To&#160;restart program execution at&#160;the faulting instruction,&#160;the&#160;<br/>exception handler must obtain a pointer to the instruction from the saved x87 FPU state information, load it into the&#160;<br/>return instruction pointer location on&#160;the stack,&#160;and&#160;then&#160;execute the&#160;IRET instruction.<br/>Se<a href="o_7281d5ea06a5b67a-434.html">e Section D.3.4,&#160;“x87&#160;FPU&#160;Exception&#160;Handling Examples,”&#160;</a>for&#160;general examples of&#160;floating-point&#160;exception&#160;<br/>handlers&#160;and for specific examples&#160;of how to write&#160;a&#160;floating-point exception&#160;handler when&#160;using&#160;the MS-DOS&#160;<br/>compatibility mode.</p>
</div>
</body>
</html>
