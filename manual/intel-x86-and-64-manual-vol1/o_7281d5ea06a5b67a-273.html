<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 273</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:8px;font-family:Times;color:#000000;}
	.ft05{font-size:18px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;font-family:Times;color:#000000;}
	.ft07{font-size:16px;font-family:Times;color:#0860a8;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page273-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a273.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:768px;white-space:nowrap" class="ft00">Vol. 1&#160;11-19</p>
<p style="position:absolute;top:47px;left:401px;white-space:nowrap" class="ft01">PROGRAMMING&#160;WITH INTEL¬Æ STREAMING SIMD EXTENSIONS 2&#160;(INTEL¬Æ SSE2)</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:100px;left:95px;white-space:nowrap" class="ft08">The&#160;denormals-are-zeros mode set&#160;in the MXCSR register&#160;for SSE/SSE2/SSE3&#160;instructions has no&#160;counterpart&#160;<br/>in the&#160;x87&#160;FPU.&#160;For compatibility with the&#160;x87&#160;FPU,&#160;set the&#160;denormals-are-zeros bit&#160;to&#160;0.</p>
<p style="position:absolute;top:139px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:139px;left:95px;white-space:nowrap" class="ft08">An&#160;application that expects to&#160;detect x87&#160;FPU exceptions that&#160;occur during&#160;the execution&#160;of x87&#160;FPU instruc-<br/>tions&#160;will not be notified&#160;if&#160;exceptions&#160;occurs&#160;during the&#160;execution of corresponding&#160;SSE/SSE2/SSE3</p>
<p style="position:absolute;top:153px;left:767px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:156px;left:774px;white-space:nowrap" class="ft03">&#160;instruc-</p>
<p style="position:absolute;top:172px;left:94px;white-space:nowrap" class="ft09">tions, unless&#160;the&#160;exception masks that are enabled in the x87&#160;FPU control word have&#160;also&#160;been enabled in the&#160;<br/>MXCSR register&#160;and the&#160;application is&#160;capable of&#160;handling SIMD floating-point&#160;exceptions (#XM).<br/>‚Äî&#160;Masked exceptions&#160;that occur during an SSE/SSE2/SSE3 library call cannot be detected by unmasking the&#160;</p>
<p style="position:absolute;top:229px;left:120px;white-space:nowrap" class="ft08">exceptions&#160;after&#160;the call&#160;(in&#160;an&#160;attempt to&#160;generate the&#160;fault based on&#160;the&#160;fact that an&#160;exception flag&#160;is set).&#160;<br/>A SIMD floating-point&#160;exception flag&#160;that&#160;is&#160;set&#160;when the&#160;corresponding exception is&#160;unmasked&#160;will&#160;not&#160;<br/>generate&#160;a fault; only the&#160;next occurrence&#160;of&#160;that unmasked&#160;exception will generate a&#160;fault.</p>
<p style="position:absolute;top:286px;left:94px;white-space:nowrap" class="ft03">‚Äî&#160;An application which&#160;checks the x87&#160;FPU status word to determine if&#160;any&#160;masked&#160;exception flags were set&#160;</p>
<p style="position:absolute;top:303px;left:120px;white-space:nowrap" class="ft08">during an x87&#160;FPU library call&#160;will&#160;also&#160;need to check&#160;the&#160;MXCSR&#160;register&#160;to detect&#160;a similar occurrence&#160;of&#160;a&#160;<br/>masked&#160;exception flag&#160;being set during&#160;an SSE/SSE2/SSE3&#160;library&#160;call.</p>
<p style="position:absolute;top:375px;left:69px;white-space:nowrap" class="ft05">11.6 WRITING&#160;</p>
<p style="position:absolute;top:375px;left:236px;white-space:nowrap" class="ft05">APPLICATIONS&#160;WITH SSE/SSE2 EXTENSIONS</p>
<p style="position:absolute;top:411px;left:69px;white-space:nowrap" class="ft08">The following sections give&#160;some guidelines&#160;for writing application programs and operating-system code&#160;that uses&#160;<br/>the&#160;SSE&#160;and&#160;SSE2&#160;extensions.&#160;Because&#160;SSE&#160;and&#160;SSE2&#160;extensions&#160;share the&#160;same&#160;state and perform companion&#160;<br/>operations, these guidelines&#160;apply&#160;to both&#160;sets of&#160;extensions.<br/><a href="˛ˇ"><i>Chapter 13</i></a><i>&#160;</i>in the&#160;<i>Intel¬Æ 64&#160;and IA-32 Architectures Software&#160;Developer‚Äôs&#160;Manual,&#160;Volume 3A,</i>&#160;discusses the&#160;inter-<br/>face to the&#160;processor for context switching as well as other operating system&#160;considerations when&#160;writing code&#160;that&#160;<br/>uses&#160;SSE/SSE2/SSE3&#160;extensions.</p>
<p style="position:absolute;top:551px;left:69px;white-space:nowrap" class="ft07">11.6.1&#160;</p>
<p style="position:absolute;top:551px;left:149px;white-space:nowrap" class="ft07">General Guidelines for Using SSE/SSE2 Extensions</p>
<p style="position:absolute;top:582px;left:69px;white-space:nowrap" class="ft08">The following&#160;guidelines describe how&#160;to take&#160;full advantage of&#160;the performance&#160;gains&#160;available&#160;with the SSE and&#160;<br/>SSE2&#160;extensions:</p>
<p style="position:absolute;top:620px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:621px;left:95px;white-space:nowrap" class="ft03">Ensure that&#160;the processor supports&#160;the&#160;SSE and&#160;SSE2 extensions.</p>
<p style="position:absolute;top:643px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:643px;left:95px;white-space:nowrap" class="ft08">Ensure&#160;that your operating system&#160;supports the&#160;SSE and SSE2 extensions.&#160;(Operating system support for&#160;the&#160;<br/>SSE extensions implies support for SSE2 extension and vice&#160;versa.)</p>
<p style="position:absolute;top:682px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:682px;left:95px;white-space:nowrap" class="ft03">Use stack and&#160;data&#160;alignment techniques to&#160;keep data properly aligned for&#160;efficient&#160;memory&#160;use.</p>
<p style="position:absolute;top:704px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:705px;left:95px;white-space:nowrap" class="ft03">Use the&#160;non-temporal store&#160;instructions offered with the&#160;SSE and&#160;SSE2 extensions.</p>
<p style="position:absolute;top:727px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:727px;left:95px;white-space:nowrap" class="ft011">Employ&#160;the&#160;optimization&#160;and scheduling techniques described in&#160;the&#160;<i>Intel&#160;Pentium 4 Optimization Reference&#160;<br/>Manual</i><a href="o_7281d5ea06a5b67a-30.html">&#160;(see Section 1.4, ‚ÄúRelated&#160;Literature,‚Äù</a>&#160;for&#160;the order&#160;number for&#160;this&#160;manual).</p>
<p style="position:absolute;top:794px;left:69px;white-space:nowrap" class="ft07">11.6.2&#160;</p>
<p style="position:absolute;top:794px;left:149px;white-space:nowrap" class="ft07">Checking for SSE/SSE2 Support</p>
<p style="position:absolute;top:825px;left:69px;white-space:nowrap" class="ft09">Before&#160;an application attempts to&#160;use the&#160;SSE and/or&#160;SSE2&#160;extensions, it&#160;should check&#160;that&#160;they are present on&#160;the&#160;<br/>processor:<br/>1.&#160;Check&#160;that&#160;the processor supports the&#160;CPUID instruction.&#160;Bit 21 of the&#160;EFLAGS&#160;register&#160;can be used to&#160;check&#160;</p>
<p style="position:absolute;top:882px;left:94px;white-space:nowrap" class="ft03">processor‚Äôs&#160;support the&#160;CPUID&#160;instruction.&#160;</p>
<p style="position:absolute;top:906px;left:69px;white-space:nowrap" class="ft03">2.&#160;Check&#160;that&#160;the processor supports the&#160;SSE and/or&#160;SSE2&#160;extensions&#160;(true if&#160;CPUID.01H:EDX.SSE[bit 25] = 1&#160;</p>
<p style="position:absolute;top:922px;left:94px;white-space:nowrap" class="ft03">and/or&#160;CPUID.01H:EDX.SSE2[bit 26] = 1).</p>
<p style="position:absolute;top:946px;left:69px;white-space:nowrap" class="ft011">Operating system must provide system level support for handling SSE state,&#160;exceptions before&#160;an application can&#160;<br/>use the&#160;SSE and/or&#160;SSE2&#160;extensions&#160;(see<a href="˛ˇ">&#160;<i>Chapter 13&#160;</i></a>in&#160;the&#160;<i>Intel¬Æ 64 and&#160;IA-32 Architectures&#160;Software&#160;Devel-<br/>oper‚Äôs&#160;Manual, Volume&#160;3A</i>).</p>
<p style="position:absolute;top:1038px;left:69px;white-space:nowrap" class="ft03">1.&#160;SSE3 refers to&#160;ADDSUBPD, ADDSUBPS, HADDPD, HADDPS, HSUBPD&#160;and&#160;HSUBPS; the only other&#160;SSE3 instruction that&#160;can&#160;raise&#160;</p>
<p style="position:absolute;top:1054px;left:91px;white-space:nowrap" class="ft03">floating-point&#160;exceptions&#160;is FISTTP: it&#160;can&#160;generate x87 FPU&#160;invalid operation&#160;and inexact result exceptions.</p>
</div>
</body>
</html>
