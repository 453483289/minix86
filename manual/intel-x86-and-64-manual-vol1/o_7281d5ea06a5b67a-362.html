<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 362</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:12px;font-family:Times;color:#0860a8;}
	.ft05{font-size:11px;font-family:Times;color:#000000;-moz-transform: matrix(         0,         -1,          1,          0, 0, 0);-webkit-transform: matrix(         0,         -1,          1,          0, 0, 0);-o-transform: matrix(         0,         -1,          1,          0, 0, 0);-ms-transform: matrix(         0,         -1,          1,          0, 0, 0);-moz-transform-origin: left 75%;-webkit-transform-origin: left 75%;-o-transform-origin: left 75%;-ms-transform-origin: left 75%;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page362-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a362.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">14-34&#160;Vol. 1</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">PROGRAMMING WITH AVX, FMA&#160;AND&#160;AVX2</p>
<p style="position:absolute;top:100px;left:93px;white-space:nowrap" class="ft06">causing #GP(0)&#160;on any&#160;byte-granularity&#160;alignment&#160;(unlike&#160;Legacy SSE&#160;instructions). The&#160;instructions that&#160;<br/>require explicit memory alignment&#160;requirements are&#160;lis<a href="o_7281d5ea06a5b67a-362.html">ted in Table 14-22</a>.</p>
<p style="position:absolute;top:162px;left:68px;white-space:nowrap" class="ft06">Software&#160;may see&#160;performance&#160;penalties when unaligned&#160;accesses cross&#160;cacheline boundaries,&#160;so reasonable&#160;<br/>attempts&#160;to align&#160;commonly used data sets&#160;should continue&#160;to be pursued.<br/>Atomic&#160;memory operation in&#160;Intel 64 and IA-32 architecture&#160;is&#160;guaranteed only for a&#160;subset&#160;of memory&#160;operand&#160;<br/>sizes and alignment&#160;scenarios.&#160;The&#160;list of guaranteed atomic operations are&#160;described in&#160;<a href="˛ˇ">Section&#160;8.1.1</a>&#160;of&#160;<i>IA-32&#160;<br/>Intel¬Æ Architecture Software&#160;Developer‚Äôs Manual, Volumes&#160;3A.&#160;</i>AVX and&#160;FMA instructions do not introduce&#160;any&#160;new&#160;<br/>guaranteed&#160;atomic memory operations.<br/>AVX instructions&#160;can&#160;generate&#160;an #AC(0) fault on&#160;misaligned 4&#160;or 8-byte memory&#160;references&#160;in Ring-3 when&#160;<br/>CR0.AM=1.&#160;16&#160;and 32-byte memory references will&#160;not&#160;generate #AC(0)&#160;fault. See&#160;<a href="o_7281d5ea06a5b67a-362.html">Table&#160;14-21</a>&#160;for details.<br/>Certain AVX&#160;instructions&#160;always&#160;require 16- or 32-byte alignment (see&#160;the complete list&#160;of&#160;such instructions in&#160;<br/><a href="o_7281d5ea06a5b67a-362.html">Table 14-22).&#160;</a>These instructions&#160;will #GP(0) if&#160;not aligned&#160;to&#160;16-byte&#160;boundaries (for&#160;16-byte granularity loads and&#160;<br/>stores) or&#160;32-byte boundaries&#160;(for&#160;32-byte&#160;loads and&#160;stores).</p>
<p style="position:absolute;top:413px;left:181px;white-space:nowrap" class="ft04">Table 14-21. &#160;Alignment Faulting&#160;Conditions when Memory&#160;Access is&#160;Not Aligned&#160;</p>
<p style="position:absolute;top:433px;left:198px;white-space:nowrap" class="ft02">EFLAGS.AC==1&#160;&amp;&amp;&#160;Ring-3 &amp;&amp; CR0.AM ==&#160;1</p>
<p style="position:absolute;top:433px;left:640px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:433px;left:765px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:590px;left:98px;white-space:nowrap" class="ft05">In</p>
<p style="position:absolute;top:579px;left:98px;white-space:nowrap" class="ft05">st</p>
<p style="position:absolute;top:568px;left:98px;white-space:nowrap" class="ft05">ru</p>
<p style="position:absolute;top:556px;left:98px;white-space:nowrap" class="ft05">ct</p>
<p style="position:absolute;top:546px;left:98px;white-space:nowrap" class="ft05">io</p>
<p style="position:absolute;top:535px;left:98px;white-space:nowrap" class="ft05">n T</p>
<p style="position:absolute;top:518px;left:98px;white-space:nowrap" class="ft05">ype</p>
<p style="position:absolute;top:531px;left:151px;white-space:nowrap" class="ft05">AV</p>
<p style="position:absolute;top:514px;left:151px;white-space:nowrap" class="ft05">X</p>
<p style="position:absolute;top:506px;left:151px;white-space:nowrap" class="ft05">,&#160;F</p>
<p style="position:absolute;top:493px;left:151px;white-space:nowrap" class="ft05">M</p>
<p style="position:absolute;top:483px;left:151px;white-space:nowrap" class="ft05">A,</p>
<p style="position:absolute;top:454px;left:185px;white-space:nowrap" class="ft02">16-&#160;or 32-byte ‚Äúexplicitly unaligned‚Äù&#160;loads and stores&#160;(see<a href="o_7281d5ea06a5b67a-363.html">&#160;Table&#160;</a></p>
<p style="position:absolute;top:471px;left:185px;white-space:nowrap" class="ft02"><a href="o_7281d5ea06a5b67a-363.html">14-23)</a></p>
<p style="position:absolute;top:462px;left:622px;white-space:nowrap" class="ft02">no&#160;fault</p>
<p style="position:absolute;top:462px;left:747px;white-space:nowrap" class="ft02">no fault</p>
<p style="position:absolute;top:492px;left:185px;white-space:nowrap" class="ft02">VEX op YMM,&#160;m256</p>
<p style="position:absolute;top:492px;left:622px;white-space:nowrap" class="ft02">no&#160;fault</p>
<p style="position:absolute;top:492px;left:747px;white-space:nowrap" class="ft02">no fault</p>
<p style="position:absolute;top:513px;left:185px;white-space:nowrap" class="ft02">VEX op XMM, m128&#160;</p>
<p style="position:absolute;top:513px;left:622px;white-space:nowrap" class="ft02">no fault</p>
<p style="position:absolute;top:513px;left:747px;white-space:nowrap" class="ft02">no fault</p>
<p style="position:absolute;top:534px;left:185px;white-space:nowrap" class="ft02">‚Äúexplicitly aligned‚Äù&#160;loads and&#160;stores&#160;(see<a href="o_7281d5ea06a5b67a-362.html">&#160;Table 14-22)</a></p>
<p style="position:absolute;top:534px;left:624px;white-space:nowrap" class="ft02">#GP(0)</p>
<p style="position:absolute;top:534px;left:750px;white-space:nowrap" class="ft02">#GP(0)</p>
<p style="position:absolute;top:555px;left:185px;white-space:nowrap" class="ft02">2, 4, or 8-byte&#160;loads and&#160;stores</p>
<p style="position:absolute;top:555px;left:622px;white-space:nowrap" class="ft02">no&#160;fault</p>
<p style="position:absolute;top:555px;left:750px;white-space:nowrap" class="ft02">#AC(0)</p>
<p style="position:absolute;top:615px;left:151px;white-space:nowrap" class="ft05">SS</p>
<p style="position:absolute;top:600px;left:151px;white-space:nowrap" class="ft05">E</p>
<p style="position:absolute;top:576px;left:185px;white-space:nowrap" class="ft02">16&#160;byte ‚Äúexplicitly unaligned‚Äù loads&#160;and stores&#160;(see<a href="o_7281d5ea06a5b67a-363.html">&#160;Table&#160;14-23)</a></p>
<p style="position:absolute;top:576px;left:622px;white-space:nowrap" class="ft02">no&#160;fault</p>
<p style="position:absolute;top:576px;left:747px;white-space:nowrap" class="ft02">no fault</p>
<p style="position:absolute;top:597px;left:185px;white-space:nowrap" class="ft02">op&#160;XMM, m128</p>
<p style="position:absolute;top:597px;left:624px;white-space:nowrap" class="ft02">#GP(0)</p>
<p style="position:absolute;top:597px;left:750px;white-space:nowrap" class="ft02">#GP(0)</p>
<p style="position:absolute;top:618px;left:185px;white-space:nowrap" class="ft02">‚Äúexplicitly aligned‚Äù&#160;loads and&#160;stores&#160;(see<a href="o_7281d5ea06a5b67a-362.html">&#160;Table 14-22)</a></p>
<p style="position:absolute;top:618px;left:625px;white-space:nowrap" class="ft02">#GP(0)</p>
<p style="position:absolute;top:618px;left:750px;white-space:nowrap" class="ft02">#GP(0)</p>
<p style="position:absolute;top:638px;left:185px;white-space:nowrap" class="ft02">2, 4, or 8-byte&#160;loads and&#160;stores</p>
<p style="position:absolute;top:638px;left:622px;white-space:nowrap" class="ft02">no&#160;fault</p>
<p style="position:absolute;top:638px;left:750px;white-space:nowrap" class="ft02">#AC(0)</p>
<p style="position:absolute;top:716px;left:242px;white-space:nowrap" class="ft04">Table 14-22.&#160;&#160;Instructions&#160;Requiring Explicitly&#160;Aligned Memory</p>
<p style="position:absolute;top:741px;left:179px;white-space:nowrap" class="ft02">Require 16-byte alignment</p>
<p style="position:absolute;top:741px;left:562px;white-space:nowrap" class="ft02">Require&#160;32-byte alignment</p>
<p style="position:absolute;top:764px;left:191px;white-space:nowrap" class="ft02">(V)MOVDQA xmm, m128</p>
<p style="position:absolute;top:764px;left:578px;white-space:nowrap" class="ft02">VMOVDQA ymm, m256</p>
<p style="position:absolute;top:789px;left:191px;white-space:nowrap" class="ft02">(V)MOVDQA m128, xmm</p>
<p style="position:absolute;top:789px;left:578px;white-space:nowrap" class="ft02">VMOVDQA&#160;m256, ymm</p>
<p style="position:absolute;top:813px;left:192px;white-space:nowrap" class="ft02">(V)MOVAPS xmm, m128</p>
<p style="position:absolute;top:813px;left:579px;white-space:nowrap" class="ft02">VMOVAPS&#160;ymm,&#160;m256</p>
<p style="position:absolute;top:836px;left:192px;white-space:nowrap" class="ft02">(V)MOVAPS m128, xmm</p>
<p style="position:absolute;top:836px;left:579px;white-space:nowrap" class="ft02">VMOVAPS&#160;m256, ymm</p>
<p style="position:absolute;top:861px;left:192px;white-space:nowrap" class="ft02">(V)MOVAPD xmm, m128</p>
<p style="position:absolute;top:861px;left:579px;white-space:nowrap" class="ft02">VMOVAPD ymm, m256</p>
<p style="position:absolute;top:885px;left:192px;white-space:nowrap" class="ft02">(V)MOVAPD m128, xmm</p>
<p style="position:absolute;top:885px;left:579px;white-space:nowrap" class="ft02">VMOVAPD m256, ymm</p>
<p style="position:absolute;top:908px;left:188px;white-space:nowrap" class="ft02">(V)MOVNTPS m128, xmm</p>
<p style="position:absolute;top:908px;left:575px;white-space:nowrap" class="ft02">VMOVNTPS m256, ymm</p>
<p style="position:absolute;top:933px;left:187px;white-space:nowrap" class="ft02">(V)MOVNTPD m128, xmm</p>
<p style="position:absolute;top:933px;left:575px;white-space:nowrap" class="ft02">VMOVNTPD m256, ymm</p>
<p style="position:absolute;top:957px;left:187px;white-space:nowrap" class="ft02">(V)MOVNTDQ m128, xmm</p>
<p style="position:absolute;top:957px;left:574px;white-space:nowrap" class="ft02">VMOVNTDQ m256, ymm</p>
<p style="position:absolute;top:980px;left:183px;white-space:nowrap" class="ft02">(V)MOVNTDQA xmm, m128</p>
<p style="position:absolute;top:980px;left:570px;white-space:nowrap" class="ft02">VMOVNTDQA ymm, m256</p>
</div>
</body>
</html>
