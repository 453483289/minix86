<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 391</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:16px;font-family:Times;color:#0860a8;}
	.ft04{font-size:12px;font-family:Times;color:#0860a8;}
	.ft05{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page391-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a391.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:775px;white-space:nowrap" class="ft00">Vol. 1&#160;17-3</p>
<p style="position:absolute;top:47px;left:590px;white-space:nowrap" class="ft01">INTEL®&#160;MEMORY PROTECTION EXTENSIONS</p>
<p style="position:absolute;top:274px;left:69px;white-space:nowrap" class="ft06">The bounds&#160;are unsigned&#160;effective addresses, and&#160;are inclusive.&#160;The&#160;upper&#160;bounds are architecturally&#160;represented&#160;<br/>in 1/’s&#160;complement&#160;form. Lower bound = 0,&#160;and upper bound&#160;= 0 (1’s&#160;complement of all 1s) will allow access to the&#160;<br/>entire address&#160;space. The bounds&#160;are&#160;considered as&#160;INIT&#160;when&#160;both lower&#160;and&#160;upper bounds are&#160;0&#160;(cover&#160;the&#160;<br/>entire address&#160;space). The two Intel&#160;MPX instructions&#160;which&#160;operate on the upper bound&#160;(BNDMK&#160;and BNDCU)&#160;<br/>account for&#160;the 1’s complement&#160;representation of&#160;the&#160;upper&#160;bounds.&#160;<br/>The&#160;instruction&#160;set does not&#160;impose&#160;any conventions on the&#160;use of&#160;bounds registers. Software&#160;has full&#160;flexibility&#160;<br/>associating pointers&#160;to&#160;bounds registers&#160;including sharing&#160;them for multiple&#160;pointers.<br/>RESET or&#160;INIT# will initialize&#160;(write&#160;zero&#160;to) BND0–BND3.</p>
<p style="position:absolute;top:452px;left:69px;white-space:nowrap" class="ft03">17.3.3&#160;</p>
<p style="position:absolute;top:452px;left:149px;white-space:nowrap" class="ft03">Configuration and Status Registers</p>
<p style="position:absolute;top:481px;left:69px;white-space:nowrap" class="ft05">Intel&#160;MPX defines two configuration&#160;registers&#160;and one&#160;status&#160;register. The two configuration&#160;registers&#160;are&#160;defined&#160;<br/>for&#160;user mode&#160;(CPL&#160;= 3)&#160;and&#160;supervisor mode&#160;(CPL&#160;&lt;&#160;3).&#160;The&#160;user-mode configuration&#160;register&#160;BNDCFGU is&#160;acces-<br/>sible&#160;only&#160;with&#160;the XSAVE&#160;feature&#160;set instructions.&#160;<br/>The supervisor&#160;mode&#160;configuration register is an MSR,&#160;referred&#160;to as IA32_BNDCFGS&#160;(MSR&#160;0D90H).&#160;Because both&#160;<br/>configuration registers share&#160;a&#160;common layout&#160;(see&#160;<a href="o_7281d5ea06a5b67a-391.html">Figure&#160;17-2), when describ</a>ing&#160;the&#160;common behavior,&#160;these&#160;<br/>configuration registers are often denoted&#160;as BNDCFGx, where x&#160;can&#160;be&#160;U or S,&#160;for user&#160;and&#160;supervisor mode&#160;<br/>respectively.</p>
<p style="position:absolute;top:804px;left:69px;white-space:nowrap" class="ft05">The Enable bit in BNDCFGU enables Intel MPX in&#160;user mode&#160;(CPL&#160;= 3), and the Enable bit in BNDCFGS enables Intel&#160;<br/>MPX in supervisor&#160;mode (CPL&#160;&lt; 3). The BNDPRESERVE bit controls the initialization behavior of CALL/RET/JMP/Jcc&#160;<br/>instructions&#160;without the BND&#160;(F2H)&#160;prefix&#160;--&#160;se<a href="o_7281d5ea06a5b67a-398.html">e Section 17.5.3</a>.<br/>WRMSR to&#160;BNDCFGS will #GP if any of&#160;the reserved&#160;bits&#160;of&#160;BNDCFGS is not&#160;zero or if the base&#160;address of&#160;the&#160;bound&#160;<br/>directory is&#160;not canonical. XRSTOR of BNDCFGU&#160;ignores the&#160;reserved&#160;bits and does not fault if&#160;any is&#160;non-zero;&#160;<br/>similarly,&#160;it&#160;ignores&#160;the upper&#160;bits of&#160;the&#160;base address&#160;of&#160;the bound&#160;directory&#160;and sign-extends&#160;the&#160;highest&#160;imple-<br/>mented bit of&#160;the&#160;linear address&#160;to guarantee&#160;the canonicality of&#160;this&#160;address.<br/>Intel MPX&#160;also defines a&#160;status register (BNDSTATUS) primarily&#160;used&#160;to communicate&#160;status&#160;information for #BR&#160;<br/>exception. The layout of&#160;the status&#160;register&#160;is&#160;<a href="o_7281d5ea06a5b67a-392.html">shown in Figure&#160;17-3.</a>&#160;</p>
<p style="position:absolute;top:219px;left:259px;white-space:nowrap" class="ft04">Figure&#160;17-1. &#160;Layout&#160;of&#160;the&#160;Bounds&#160;Registers&#160;BND0-BND3</p>
<p style="position:absolute;top:749px;left:144px;white-space:nowrap" class="ft04">Figure&#160;17-2.&#160;&#160;Common&#160;Layout&#160;of&#160;the Bound Configuration Registers BNDCFGU&#160;and BNDCFGS</p>
<p style="position:absolute;top:151px;left:478px;white-space:nowrap" class="ft00">64&#160;63</p>
<p style="position:absolute;top:149px;left:767px;white-space:nowrap" class="ft00">0</p>
<p style="position:absolute;top:151px;left:173px;white-space:nowrap" class="ft00">127</p>
<p style="position:absolute;top:171px;left:269px;white-space:nowrap" class="ft00">Upper Bound (UB)</p>
<p style="position:absolute;top:170px;left:562px;white-space:nowrap" class="ft00">Lower&#160;Bound&#160;(LB)</p>
<p style="position:absolute;top:654px;left:478px;white-space:nowrap" class="ft00">12&#160;11</p>
<p style="position:absolute;top:651px;left:767px;white-space:nowrap" class="ft00">0</p>
<p style="position:absolute;top:654px;left:173px;white-space:nowrap" class="ft00">63</p>
<p style="position:absolute;top:674px;left:269px;white-space:nowrap" class="ft00">Base of&#160;Bound Directory (Linear Address)</p>
<p style="position:absolute;top:673px;left:516px;white-space:nowrap" class="ft00">Reserved (must be&#160;zero)</p>
<p style="position:absolute;top:703px;left:369px;white-space:nowrap" class="ft00">Bprv: BNDPRESERVE</p>
<p style="position:absolute;top:673px;left:761px;white-space:nowrap" class="ft00">En</p>
<p style="position:absolute;top:651px;left:743px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:651px;left:726px;white-space:nowrap" class="ft00">2</p>
<p style="position:absolute;top:721px;left:369px;white-space:nowrap" class="ft00">En:&#160;Enable</p>
</div>
</body>
</html>
