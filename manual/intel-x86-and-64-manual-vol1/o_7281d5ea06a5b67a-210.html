<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 210</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:14px;font-family:Times;color:#0860a8;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page210-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a210.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">8-20&#160;Vol. 1</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">PROGRAMMING WITH THE X87 FPU</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft06">If an unordered&#160;condition is&#160;detected&#160;(one or both&#160;of the&#160;values&#160;are&#160;NaNs or&#160;in an undefined&#160;format),&#160;a floating-<br/>point invalid-operation exception is&#160;generated.<br/>The pop&#160;versions&#160;of the instruction pop&#160;the x87 FPU register stack&#160;once or twice&#160;after the comparison operation is&#160;<br/>complete.<br/>The FUCOM,&#160;FUCOMP, and FUCOMPP&#160;instructions operate the&#160;same as the FCOM, FCOMP,&#160;and FCOMPP&#160;instructions.&#160;<br/>The only difference is&#160;that&#160;with&#160;the FUCOM,&#160;FUCOMP,&#160;and FUCOMPP instructions,&#160;if&#160;an unordered condition&#160;is&#160;<br/>detected because&#160;one or&#160;both of the&#160;operands are&#160;QNaNs,&#160;the floating-point&#160;invalid-operation exception is&#160;not&#160;<br/>generated.</p>
<p style="position:absolute;top:421px;left:68px;white-space:nowrap" class="ft06">The FICOM&#160;and FICOMP&#160;instructions&#160;also&#160;operate the&#160;same&#160;as&#160;the FCOM&#160;and FCOMP&#160;instructions, except that the&#160;<br/>source&#160;operand is&#160;an integer value&#160;in&#160;memory. The integer value&#160;is automatically converted into an&#160;double&#160;<br/>extended-precision&#160;floating-point&#160;value prior to&#160;making&#160;the comparison. The FICOMP instruction pops the&#160;x87&#160;FPU&#160;<br/>register stack following the&#160;comparison operation.<br/>The FTST instruction&#160;performs the&#160;same operation&#160;as the FCOM&#160;instruction, except that the value&#160;in register&#160;ST(0)&#160;<br/>is always&#160;compared&#160;with the&#160;value 0.0.<br/>The FCOMI&#160;and FCOMIP instructions were introduced&#160;into the IA-32 architecture&#160;in the&#160;P6&#160;family processors.&#160;They&#160;<br/>perform the&#160;same comparison&#160;as the&#160;FCOM and&#160;FCOMP instructions,&#160;except that they&#160;set the status&#160;flags (ZF,&#160;PF,&#160;<br/>and&#160;CF) in&#160;the EFLAGS&#160;register to&#160;indicate&#160;the results&#160;of&#160;the&#160;comparison (see<a href="o_7281d5ea06a5b67a-210.html">&#160;Table 8-7) instea</a>d of the&#160;x87&#160;FPU&#160;<br/>condition code&#160;flags. The&#160;FCOMI and FCOMIP instructions allow condition branch instructions&#160;(J<i>cc</i>)&#160;to be executed&#160;<br/>directly from the&#160;results of their&#160;comparison.</p>
<p style="position:absolute;top:792px;left:68px;white-space:nowrap" class="ft06">Software can check if the FCOMI and FCOMIP instructions&#160;are supported&#160;by checking&#160;the&#160;processor‚Äôs feature infor-<br/>mation&#160;with the&#160;CPUID instruction.<br/>The FUCOMI and FUCOMIP&#160;instructions&#160;operate the same&#160;as&#160;the FCOMI&#160;and FCOMIP instructions, except&#160;that they&#160;<br/>do not generate a&#160;floating-point invalid-operation&#160;exception&#160;if&#160;the unordered&#160;condition&#160;is the&#160;result&#160;of&#160;one&#160;or&#160;both&#160;<br/>of the operands being a QNaN. The FCOMIP&#160;and&#160;FUCOMIP instructions pop the x87 FPU register stack following the&#160;<br/>comparison operation.<br/>The FXAM instruction determines the classification of the floating-point value&#160;in the ST(0) register&#160;(that is,&#160;whether&#160;<br/>the value&#160;is zero,&#160;a denormal&#160;number,&#160;a normal finite&#160;number,&#160;‚àû, a NaN,&#160;or&#160;an unsupported format) or&#160;that&#160;the&#160;</p>
<p style="position:absolute;top:939px;left:68px;white-space:nowrap" class="ft09">register is&#160;empty.&#160;It&#160;sets the&#160;x87&#160;FPU condition&#160;code&#160;flags&#160;to indicate the&#160;classification&#160;(see ‚ÄúFXAM‚ÄîExamine‚Äù&#160;in&#160;<br/><a href="˛ˇ">Chapter 3, ‚ÄúInstruction Set Reference, A-L,‚Äù of the&#160;</a><i>Intel¬Æ&#160;64&#160;and IA-32 Architectures Software Developer‚Äôs Manual,&#160;<br/>Volume 2A)</i>. It&#160;also sets&#160;the C1&#160;flag to&#160;indicate&#160;the sign of the&#160;value.</p>
<p style="position:absolute;top:1016px;left:68px;white-space:nowrap" class="ft04">8.3.6.1&#160;&#160;</p>
<p style="position:absolute;top:1016px;left:152px;white-space:nowrap" class="ft04">Branching on the x87 FPU Condition Codes</p>
<p style="position:absolute;top:1045px;left:68px;white-space:nowrap" class="ft06">The&#160;processor&#160;does&#160;not&#160;offer any control-flow&#160;instructions&#160;that branch on the&#160;setting&#160;of the&#160;condition code&#160;flags&#160;<br/>(C0, C2, and C3) in the x87 FPU status word. To&#160;branch on&#160;the&#160;state of these&#160;flags, the&#160;x87 FPU status word must&#160;</p>
<p style="position:absolute;top:262px;left:144px;white-space:nowrap" class="ft05">Table 8-6.&#160; Setting&#160;of&#160;x87 FPU&#160;Condition&#160;Code&#160;Flags&#160;for Floating-Point&#160;Number Comparisons</p>
<p style="position:absolute;top:283px;left:73px;white-space:nowrap" class="ft02">Condition</p>
<p style="position:absolute;top:283px;left:418px;white-space:nowrap" class="ft02">C3</p>
<p style="position:absolute;top:283px;left:559px;white-space:nowrap" class="ft02">C2</p>
<p style="position:absolute;top:283px;left:695px;white-space:nowrap" class="ft02">C0</p>
<p style="position:absolute;top:306px;left:73px;white-space:nowrap" class="ft02">ST(0) &gt; Source Operand</p>
<p style="position:absolute;top:306px;left:418px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:306px;left:559px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:306px;left:695px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:328px;left:73px;white-space:nowrap" class="ft02">ST(0) &lt; Source Operand</p>
<p style="position:absolute;top:328px;left:418px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:328px;left:559px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:328px;left:695px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:351px;left:73px;white-space:nowrap" class="ft02">ST(0) = Source Operand</p>
<p style="position:absolute;top:351px;left:418px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:351px;left:559px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:351px;left:695px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:373px;left:73px;white-space:nowrap" class="ft02">Unordered</p>
<p style="position:absolute;top:373px;left:418px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:373px;left:559px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:373px;left:695px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:632px;left:177px;white-space:nowrap" class="ft05">Table 8-7.&#160; Setting&#160;of&#160;EFLAGS&#160;Status&#160;Flags&#160;for Floating-Point&#160;Number&#160;Comparisons</p>
<p style="position:absolute;top:654px;left:161px;white-space:nowrap" class="ft02">Comparison Results</p>
<p style="position:absolute;top:654px;left:438px;white-space:nowrap" class="ft02">ZF</p>
<p style="position:absolute;top:654px;left:586px;white-space:nowrap" class="ft02">PF</p>
<p style="position:absolute;top:654px;left:745px;white-space:nowrap" class="ft02">CF</p>
<p style="position:absolute;top:676px;left:190px;white-space:nowrap" class="ft02">ST0&#160;&gt;&#160;ST(<i>i</i>)</p>
<p style="position:absolute;top:676px;left:442px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:676px;left:590px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:676px;left:748px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:699px;left:190px;white-space:nowrap" class="ft02">ST0&#160;&lt;&#160;ST(<i>i</i>)</p>
<p style="position:absolute;top:699px;left:442px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:699px;left:590px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:699px;left:748px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:721px;left:190px;white-space:nowrap" class="ft02">ST0&#160;=&#160;ST(<i>i</i>)</p>
<p style="position:absolute;top:721px;left:442px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:721px;left:590px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:721px;left:748px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:744px;left:191px;white-space:nowrap" class="ft02">Unordered</p>
<p style="position:absolute;top:744px;left:442px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:744px;left:590px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:744px;left:748px;white-space:nowrap" class="ft02">1</p>
</div>
</body>
</html>
