<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 363</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:19px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page363-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a363.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:768px;white-space:nowrap" class="ft00">Vol. 1&#160;14-35</p>
<p style="position:absolute;top:47px;left:591px;white-space:nowrap" class="ft01">PROGRAMMING WITH&#160;AVX,&#160;FMA AND AVX2</p>
<p style="position:absolute;top:463px;left:69px;white-space:nowrap" class="ft02">14.10&#160;&#160;SIMD FLOATING-POINT&#160;EXCEPTIONS</p>
<p style="position:absolute;top:498px;left:69px;white-space:nowrap" class="ft06">AVX instructions can&#160;generate&#160;SIMD floating-point exceptions (#XM) and respond to exception masks in the same&#160;<br/>way as&#160;Legacy SSE instructions. When&#160;CR4.OSXMMEXCPT=0&#160;any&#160;unmasked&#160;FP&#160;exceptions generate an&#160;Undefined&#160;<br/>Opcode&#160;exception (#UD).<br/>AVX FP&#160;exceptions are&#160;created in&#160;a similar&#160;fashion (differing&#160;only in number&#160;of elements) to Legacy&#160;SSE&#160;and SSE2<br/>instructions capable of&#160;generating&#160;SIMD floating-point exceptions.<br/>AVX introduces&#160;no new arithmetic operations (AVX floating-point are analogues of existing Legacy SSE instruc-<br/>tions).&#160;<br/>F16C, FMA instructions can generate&#160;SIMD floating-point&#160;exceptions&#160;(#XM).&#160;The requirement&#160;that apply&#160;to AVX<br/>also apply to&#160;F16C&#160;and FMA.<br/>The subset of AVX2 instructions&#160;that operate on&#160;floating-point data do not&#160;generate #XM.<br/>The&#160;detailed exception&#160;conditions for AVX instructions and&#160;legacy SIMD&#160;instructions&#160;(excluding instructions that&#160;<br/>operates on MMX registers) are described&#160;in a number&#160;of&#160;exception class types, depending on the operand syntax&#160;<br/>and memory operation characteristics. The&#160;complete&#160;list&#160;of&#160;SIMD instruction exception&#160;class&#160;types&#160;are defined&#160;in&#160;<br/><a href="˛ˇ">Chapter 2, ‚ÄúInstruction Format,‚Äù</a>&#160;of&#160;<a href="˛ˇ"><i>Intel¬Æ 64&#160;and IA-32 Architectures&#160;Software&#160;Developer‚Äôs Manual, Volume&#160;2A</i>.</a></p>
<p style="position:absolute;top:786px;left:69px;white-space:nowrap" class="ft02">14.11 EMULATION</p>
<p style="position:absolute;top:820px;left:69px;white-space:nowrap" class="ft06">Setting&#160;the CR0.EMbit to 1 provides&#160;a technique&#160;to&#160;emulate&#160;Legacy SSE floating-point instruction sets in software.&#160;<br/>This technique is&#160;not supported&#160;with AVX instructions.&#160;<br/>If an&#160;operating system&#160;wishes to emulate&#160;AVX instructions, set&#160;XCR0[2:1] to zero. This will cause AVX&#160;instructions&#160;<br/>to&#160;#UD.&#160;Emulation&#160;of&#160;F16C,&#160;AVX2,&#160;and&#160;FMA by operating&#160;system&#160;can be done similarly as&#160;with&#160;emulating AVX&#160;<br/>instructions.</p>
<p style="position:absolute;top:948px;left:69px;white-space:nowrap" class="ft02">14.12&#160;&#160;WRITING AVX FLOATING-POINT&#160;EXCEPTION HANDLERS</p>
<p style="position:absolute;top:982px;left:69px;white-space:nowrap" class="ft06">AVX and FMA floating-point&#160;exceptions&#160;are&#160;handled in an&#160;entirely analogous&#160;way&#160;to Legacy SSE&#160;floating-point&#160;<br/>exceptions. To&#160;handle&#160;unmasked SIMD floating-point exceptions, the operating system&#160;or executive must provide&#160;<br/>an exception handler.&#160;The section&#160;titled ‚ÄúSSE and&#160;SSE2&#160;SIMD Floating-Point&#160;Exceptions‚Äù in&#160;Chapter 11,&#160;‚ÄúProgram-<br/>ming&#160;with Streaming SIMD&#160;Extensions&#160;2&#160;(SSE2),‚Äù&#160;describes&#160;the SIMD floating-point&#160;exception classes and&#160;gives&#160;<br/>suggestions for&#160;writing&#160;an exception handler to&#160;handle them.</p>
<p style="position:absolute;top:116px;left:226px;white-space:nowrap" class="ft05">Table 14-23.&#160; Instructions&#160;Not Requiring Explicit&#160;Memory Alignment</p>
<p style="position:absolute;top:141px;left:383px;white-space:nowrap" class="ft03">(V)MOVDQU xmm, m128</p>
<p style="position:absolute;top:164px;left:380px;white-space:nowrap" class="ft03">(V)MOVDQU m128, m128</p>
<p style="position:absolute;top:189px;left:384px;white-space:nowrap" class="ft09">(V)MOVUPS xmm, m128<br/>(V)MOVUPS m128, xmm</p>
<p style="position:absolute;top:236px;left:383px;white-space:nowrap" class="ft09">(V)MOVUPD xmm, m128<br/>(V)MOVUPD m128, xmm</p>
<p style="position:absolute;top:285px;left:387px;white-space:nowrap" class="ft010">VMOVDQU ymm,&#160;m256<br/>VMOVDQU&#160;m256, ymm</p>
<p style="position:absolute;top:332px;left:388px;white-space:nowrap" class="ft09">VMOVUPS ymm,&#160;m256<br/>VMOVUPS m256, ymm</p>
<p style="position:absolute;top:381px;left:387px;white-space:nowrap" class="ft010">VMOVUPD ymm, m256<br/>VMOVUPD m256, ymm</p>
</div>
</body>
</html>
