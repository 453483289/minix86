<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 346</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:12px;font-family:Times;color:#0860a8;}
	.ft05{font-size:8px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page346-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a346.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">14-18&#160;Vol. 1</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">PROGRAMMING WITH AVX, FMA&#160;AND&#160;AVX2</p>
<p style="position:absolute;top:97px;left:68px;white-space:nowrap" class="ft02">14.4 HALF-PRECISION&#160;</p>
<p style="position:absolute;top:97px;left:309px;white-space:nowrap" class="ft02">FLOATING-POINT&#160;</p>
<p style="position:absolute;top:97px;left:474px;white-space:nowrap" class="ft02">CONVERSION</p>
<p style="position:absolute;top:133px;left:68px;white-space:nowrap" class="ft07">VCVTPH2PS&#160;and&#160;VCVTPS2PH&#160;are two instructions supporting half-precision floating-point&#160;data&#160;type&#160;conversion to&#160;<br/>and from single-precision&#160;floating-point data types.&#160;<br/>Half-precision floating-point values are not used by the&#160;processor directly&#160;for&#160;arithmetic operations. But the&#160;<br/>conversion operation are&#160;subject to&#160;SIMD floating-point exceptions.&#160;<br/>Additionally, The conversion operations&#160;of VCVTPS2PH allow programmer&#160;to specify&#160;rounding control&#160;using control&#160;<br/>fields&#160;in an immediate byte.&#160;The&#160;effects&#160;of&#160;the immediate byte&#160;are&#160;listed&#160;<a href="o_7281d5ea06a5b67a-346.html">in Table&#160;14-8.<br/></a>Rounding&#160;control can use Imm[2] to&#160;select&#160;an override&#160;RC field specified&#160;in Imm[1:0]&#160;or use&#160;MXCSR setting.&#160;</p>
<p style="position:absolute;top:529px;left:68px;white-space:nowrap" class="ft06">Specific SIMD floating-point&#160;exceptions&#160;that can&#160;occur&#160;in conversion operations&#160;are shown&#160;<a href="o_7281d5ea06a5b67a-346.html">in Table&#160;14-9&#160;</a>and&#160;<br/><a href="o_7281d5ea06a5b67a-346.html">Table&#160;14-10.</a></p>
<p style="position:absolute;top:955px;left:68px;white-space:nowrap" class="ft06">VCVTPS2PH&#160;can cause denormal&#160;exceptions if&#160;the&#160;value of&#160;the source&#160;operand is denormal relative&#160;to the numer-<br/>ical range represented&#160;by<a href="o_7281d5ea06a5b67a-347.html">&#160;the source format (see Table 14-11).</a></p>
<p style="position:absolute;top:293px;left:159px;white-space:nowrap" class="ft04">Table 14-8.&#160;&#160;Immediate Byte&#160;Encoding&#160;for 16-bit Floating-Point&#160;Conversion&#160;Instructions</p>
<p style="position:absolute;top:317px;left:74px;white-space:nowrap" class="ft03">Bits</p>
<p style="position:absolute;top:317px;left:208px;white-space:nowrap" class="ft03">Field Name/value</p>
<p style="position:absolute;top:317px;left:423px;white-space:nowrap" class="ft03">Description</p>
<p style="position:absolute;top:321px;left:712px;white-space:nowrap" class="ft03">Comment</p>
<p style="position:absolute;top:348px;left:74px;white-space:nowrap" class="ft03">Imm[1:0]</p>
<p style="position:absolute;top:348px;left:208px;white-space:nowrap" class="ft03">RC=00B</p>
<p style="position:absolute;top:348px;left:423px;white-space:nowrap" class="ft03">Round&#160;to nearest even</p>
<p style="position:absolute;top:348px;left:652px;white-space:nowrap" class="ft03">If Imm[2]&#160;= 0</p>
<p style="position:absolute;top:371px;left:208px;white-space:nowrap" class="ft03">RC=01B</p>
<p style="position:absolute;top:371px;left:423px;white-space:nowrap" class="ft03">Round&#160;down</p>
<p style="position:absolute;top:396px;left:208px;white-space:nowrap" class="ft03">RC=10B</p>
<p style="position:absolute;top:396px;left:423px;white-space:nowrap" class="ft03">Round&#160;up</p>
<p style="position:absolute;top:420px;left:208px;white-space:nowrap" class="ft03">RC=11B</p>
<p style="position:absolute;top:420px;left:423px;white-space:nowrap" class="ft03">Truncate</p>
<p style="position:absolute;top:444px;left:74px;white-space:nowrap" class="ft03">Imm[2]</p>
<p style="position:absolute;top:444px;left:208px;white-space:nowrap" class="ft03">MS1=0</p>
<p style="position:absolute;top:444px;left:423px;white-space:nowrap" class="ft03">Use&#160;imm[1:0] for rounding</p>
<p style="position:absolute;top:444px;left:652px;white-space:nowrap" class="ft03">Ignore MXCSR.RC&#160;</p>
<p style="position:absolute;top:468px;left:208px;white-space:nowrap" class="ft03">MS1=1</p>
<p style="position:absolute;top:468px;left:423px;white-space:nowrap" class="ft03">Use MXCSR.RC&#160;for&#160;rounding</p>
<p style="position:absolute;top:492px;left:74px;white-space:nowrap" class="ft03">Imm[7:3]</p>
<p style="position:absolute;top:492px;left:208px;white-space:nowrap" class="ft03">Ignored</p>
<p style="position:absolute;top:492px;left:423px;white-space:nowrap" class="ft03">Ignored&#160;by&#160;processor</p>
<p style="position:absolute;top:577px;left:229px;white-space:nowrap" class="ft04">Table 14-9.&#160;&#160;Non-Numerical Behavior&#160;for&#160;VCVTPH2PS,&#160;VCVTPS2PH</p>
<p style="position:absolute;top:601px;left:142px;white-space:nowrap" class="ft03">Source&#160;Operands</p>
<p style="position:absolute;top:601px;left:398px;white-space:nowrap" class="ft03">Masked Result</p>
<p style="position:absolute;top:601px;left:572px;white-space:nowrap" class="ft03">Unmasked&#160;Result</p>
<p style="position:absolute;top:625px;left:74px;white-space:nowrap" class="ft03">QNaN</p>
<p style="position:absolute;top:625px;left:324px;white-space:nowrap" class="ft03">QNaN1</p>
<p style="position:absolute;top:622px;left:365px;white-space:nowrap" class="ft05">1</p>
<p style="position:absolute;top:676px;left:69px;white-space:nowrap" class="ft01">NOTES:</p>
<p style="position:absolute;top:695px;left:68px;white-space:nowrap" class="ft03">1.&#160;The half precision output&#160;QNaN1&#160;is&#160;created from&#160;the single&#160;precision&#160;input QNaN&#160;as follows: the&#160;sign&#160;bit is&#160;preserved, the 8-bit&#160;expo-</p>
<p style="position:absolute;top:711px;left:82px;white-space:nowrap" class="ft03">nent&#160;FFH&#160;is&#160;replaced&#160;by&#160;the&#160;5-bit exponent&#160;1FH,&#160;and&#160;the&#160;24-bit significand&#160;is&#160;truncated to&#160;an&#160;11-bit significand&#160;by removing&#160;its 14</p>
<p style="position:absolute;top:728px;left:82px;white-space:nowrap" class="ft03">least significant bits.</p>
<p style="position:absolute;top:625px;left:572px;white-space:nowrap" class="ft03">QNaN1</p>
<p style="position:absolute;top:622px;left:613px;white-space:nowrap" class="ft05">1</p>
<p style="position:absolute;top:625px;left:620px;white-space:nowrap" class="ft03">&#160;(not an exception)</p>
<p style="position:absolute;top:649px;left:74px;white-space:nowrap" class="ft03">SNaN</p>
<p style="position:absolute;top:649px;left:324px;white-space:nowrap" class="ft03">QNaN1</p>
<p style="position:absolute;top:646px;left:365px;white-space:nowrap" class="ft05">2</p>
<p style="position:absolute;top:747px;left:68px;white-space:nowrap" class="ft03">2.&#160;The half&#160;precision output&#160;QNaN1&#160;is created from&#160;the single precision input SNaN&#160;as&#160;follows: the sign&#160;bit is&#160;preserved,&#160;the&#160;8-bit expo-</p>
<p style="position:absolute;top:764px;left:82px;white-space:nowrap" class="ft03">nent&#160;FFH&#160;is&#160;replaced&#160;by&#160;the&#160;5-bit exponent&#160;1FH,&#160;and&#160;the&#160;24-bit significand&#160;is&#160;truncated to&#160;an&#160;11-bit significand&#160;by removing&#160;its 14</p>
<p style="position:absolute;top:780px;left:82px;white-space:nowrap" class="ft03">least significant&#160;bits.&#160;The&#160;second&#160;most&#160;significant&#160;bit of&#160;the&#160;significand&#160;is&#160;changed&#160;from&#160;0&#160;to&#160;1&#160;to&#160;convert&#160;the&#160;signaling&#160;NaN&#160;into&#160;a&#160;quiet</p>
<p style="position:absolute;top:797px;left:82px;white-space:nowrap" class="ft03">NaN.</p>
<p style="position:absolute;top:649px;left:572px;white-space:nowrap" class="ft03">None</p>
<p style="position:absolute;top:844px;left:249px;white-space:nowrap" class="ft04">Table 14-10. &#160;Invalid Operation for&#160;VCVTPH2PS,&#160;VCVTPS2PH&#160;</p>
<p style="position:absolute;top:869px;left:128px;white-space:nowrap" class="ft03">Instruction</p>
<p style="position:absolute;top:869px;left:315px;white-space:nowrap" class="ft03">&#160;Condition</p>
<p style="position:absolute;top:869px;left:442px;white-space:nowrap" class="ft03">Masked&#160;Result</p>
<p style="position:absolute;top:869px;left:624px;white-space:nowrap" class="ft03">Unmasked Result</p>
<p style="position:absolute;top:893px;left:74px;white-space:nowrap" class="ft03">VCVTPH2PS</p>
<p style="position:absolute;top:893px;left:260px;white-space:nowrap" class="ft03">SRC&#160;= NaN</p>
<p style="position:absolute;top:893px;left:442px;white-space:nowrap" class="ft03">S<a href="o_7281d5ea06a5b67a-346.html">ee&#160;Table 14-9</a></p>
<p style="position:absolute;top:893px;left:624px;white-space:nowrap" class="ft03">#I=1</p>
<p style="position:absolute;top:917px;left:74px;white-space:nowrap" class="ft03">VCVTPS2PH</p>
<p style="position:absolute;top:917px;left:260px;white-space:nowrap" class="ft03">SRC&#160;= NaN</p>
<p style="position:absolute;top:917px;left:442px;white-space:nowrap" class="ft03">S<a href="o_7281d5ea06a5b67a-346.html">ee&#160;Table 14-9</a></p>
<p style="position:absolute;top:917px;left:624px;white-space:nowrap" class="ft03">#I=1</p>
</div>
</body>
</html>
