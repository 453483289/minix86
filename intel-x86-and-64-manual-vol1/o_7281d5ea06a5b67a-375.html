<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 375</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:16px;font-family:Times;color:#0860a8;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page375-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a375.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:768px;white-space:nowrap" class="ft00">Vol. 1&#160;15-11</p>
<p style="position:absolute;top:47px;left:618px;white-space:nowrap" class="ft01">PROGRAMMING WITH INTEL®&#160;AVX-512</p>
<p style="position:absolute;top:106px;left:69px;white-space:nowrap" class="ft02">zmm2 =</p>
<p style="position:absolute;top:128px;left:69px;white-space:nowrap" class="ft02">[ 0xAAAAAAAA 0xAAAAAAAA 0x00000010 0x0000000F ] (bytes 15 through 0)</p>
<p style="position:absolute;top:151px;left:69px;white-space:nowrap" class="ft02">[ 0xBBBBBBBB 0xBBBBBBBB 0xBBBBBBBB 0xBBBBBBBB ] (bytes 31 through 16)</p>
<p style="position:absolute;top:173px;left:69px;white-space:nowrap" class="ft02">[ 0x0000001A 0x00000019 0x00000018 0x00000017 ] (bytes 47 through 32)</p>
<p style="position:absolute;top:196px;left:69px;white-space:nowrap" class="ft02">[ 0x0000001E 0xDDDDDDDD 0xDDDDDDDD 0xDDDDDDDD ] (bytes 63 through 48)</p>
<p style="position:absolute;top:235px;left:69px;white-space:nowrap" class="ft06">Note that&#160;for&#160;a 64-bit instruction (for example,&#160;vaddpd),&#160;only the 8&#160;LSB of mask&#160;k3&#160;(0x03)&#160;would&#160;be&#160;used to&#160;iden-<br/>tify the&#160;predicate operation on&#160;each one&#160;of&#160;the 8&#160;elements of the&#160;source/destination&#160;vectors.</p>
<p style="position:absolute;top:302px;left:69px;white-space:nowrap" class="ft03">15.6.2 OpMask&#160;</p>
<p style="position:absolute;top:302px;left:218px;white-space:nowrap" class="ft03">Instructions&#160;</p>
<p style="position:absolute;top:331px;left:69px;white-space:nowrap" class="ft06">AVX-512 Foundation&#160;instructions provide&#160;a collection of opmask instructions&#160;that allow programmers to set, copy,&#160;<br/>or&#160;operate on&#160;the&#160;contents of&#160;a given opmask&#160;register.&#160;There&#160;are three&#160;types of opmask&#160;instructions:</p>
<p style="position:absolute;top:370px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:370px;left:95px;white-space:nowrap" class="ft07"><b>Mask read/write&#160;instructions</b>: These&#160;instructions move&#160;data between a general-purpose integer register&#160;or&#160;<br/>memory&#160;and an&#160;opmask&#160;mask&#160;register, or&#160;between two&#160;opmask registers.&#160;For example:<br/>—&#160;kmovw&#160;k1, ebx; move&#160;lower 16 bits&#160;of ebx&#160;to k1.</p>
<p style="position:absolute;top:433px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:433px;left:95px;white-space:nowrap" class="ft07"><b>Flag instructions</b>: This category consists&#160;of instructions that&#160;modify EFLAGS based on&#160;the content&#160;of opmask&#160;<br/>registers.<br/>—&#160;kortestw k1, k2;&#160;OR registers&#160;k1 and k2&#160;and updated&#160;EFLAGS&#160;accordingly.</p>
<p style="position:absolute;top:496px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:496px;left:95px;white-space:nowrap" class="ft07"><b>Mask logical instructions</b>:&#160;These&#160;instructions perform standard bitwise&#160;logical operations between opmask&#160;<br/>registers.&#160;<br/>—&#160;kandw k1, k2, k3;&#160;AND lowest 16&#160;bits of registers&#160;k2&#160;and&#160;k3,&#160;leaving the&#160;result in&#160;k1.</p>
<p style="position:absolute;top:587px;left:69px;white-space:nowrap" class="ft03">15.6.3 Broadcast</p>
<p style="position:absolute;top:616px;left:69px;white-space:nowrap" class="ft08">EVEX encoding provides a&#160;bit-field&#160;to&#160;encode&#160;data&#160;broadcast&#160;for some&#160;load-op&#160;instructions, i.e., instructions that&#160;<br/>load&#160;data from memory and&#160;perform some&#160;computational&#160;or data&#160;movement&#160;operation.&#160;A&#160;source&#160;element&#160;from&#160;<br/>memory&#160;can be&#160;broadcasted (repeated) across&#160;all the&#160;elements&#160;of the&#160;effective source&#160;operand (up&#160;to 16 times for&#160;<br/>a&#160;32-bit data element,&#160;up to&#160;8 times&#160;for&#160;a 64-bit&#160;data&#160;element). This&#160;is useful when&#160;we&#160;want&#160;to reuse the&#160;same&#160;<br/>scalar operand&#160;for&#160;all the&#160;operations in a&#160;vector instruction.&#160;Broadcast is&#160;only&#160;enabled on instructions with an&#160;<br/>element&#160;size of 32&#160;bits or&#160;64&#160;bits.&#160;Byte&#160;and&#160;word&#160;instructions do&#160;not support&#160;embedded&#160;broadcast.<br/>The&#160;functionality of data broadcast is&#160;expressed&#160;as a&#160;curly-braces-enclosed decorator&#160;following&#160;the&#160;last&#160;<br/>register/memory operand in&#160;the Intel assembly&#160;syntax.<br/>For instance:</p>
<p style="position:absolute;top:800px;left:69px;white-space:nowrap" class="ft02">vmulps zmm1, zmm2, [rax] {1to16}</p>
<p style="position:absolute;top:840px;left:69px;white-space:nowrap" class="ft06">The&#160;{1to16}&#160;primitive loads one&#160;float32 (single precision)&#160;element from memory, replicates&#160;it&#160;16&#160;times to&#160;form a&#160;<br/>vector&#160;of&#160;16 32-bit&#160;floating-point elements, multiplies the&#160;16&#160;float32 elements with&#160;the corresponding elements in&#160;<br/>the first&#160;source&#160;operand&#160;vector,&#160;and puts each&#160;of&#160;the 16&#160;results into the&#160;destination&#160;operand.&#160;</p>
<p style="position:absolute;top:918px;left:69px;white-space:nowrap" class="ft02">AVX-512&#160;instructions&#160;with&#160;store&#160;semantics and&#160;pure&#160;load instructions&#160;do not support broadcast primitives.&#160;</p>
<p style="position:absolute;top:962px;left:69px;white-space:nowrap" class="ft02">vmovaps [rax] {k3},&#160;zmm19</p>
<p style="position:absolute;top:1002px;left:69px;white-space:nowrap" class="ft06">In contrast, the&#160;k3 opmask register&#160;is used&#160;as&#160;the predicate&#160;operand in the&#160;above example.&#160;Only the&#160;store opera-<br/>tion on data elements corresponding to&#160;the non-zero bits in k3&#160;will&#160;be&#160;performed.</p>
</div>
</body>
</html>
