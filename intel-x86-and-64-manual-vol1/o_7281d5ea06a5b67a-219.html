<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 219</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:16px;font-family:Times;color:#0860a8;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page219-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a219.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:775px;white-space:nowrap" class="ft00">Vol. 1&#160;8-29</p>
<p style="position:absolute;top:47px;left:634px;white-space:nowrap" class="ft01">PROGRAMMING&#160;WITH&#160;THE X87&#160;FPU</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft07">The flag&#160;(DE) for this&#160;exception is&#160;bit&#160;1 of the&#160;x87&#160;FPU status word,&#160;and the&#160;mask bit&#160;(DM)&#160;is&#160;bit 1&#160;of the&#160;x87&#160;FPU&#160;<br/>control&#160;word.<br/>When&#160;a&#160;denormal-operand&#160;exception&#160;occurs&#160;and&#160;the exception is&#160;masked, the x87&#160;FPU sets the&#160;DE flag, then&#160;<br/>proceeds with&#160;the&#160;instruction.&#160;The denormal&#160;operand&#160;in&#160;single- or&#160;double-precision&#160;floating-point&#160;format&#160;is&#160;auto-<br/>matically&#160;normalized when converted to&#160;the double extended-precision floating-point&#160;format.&#160;Subsequent opera-<br/>tions will benefit from the&#160;additional&#160;precision&#160;of&#160;the internal double extended-precision floating-point&#160;format.<br/>When a&#160;denormal-operand exception&#160;occurs and&#160;the&#160;exception&#160;is not masked, the&#160;DE flag&#160;is set and&#160;a software&#160;<br/>exception handler&#160;is invoked (see<a href="o_7281d5ea06a5b67a-222.html">&#160;Section 8.7, “Handling x87&#160;FPU Exceptions in Software”).</a>&#160;The&#160;top-of-stack&#160;<br/>pointer (TOP)&#160;and source&#160;operands remain unchanged.<br/>For additional information&#160;about the&#160;denormal-operation&#160;except<a href="o_7281d5ea06a5b67a-104.html">ion, see Section 4.9.1.2,&#160;“Denormal Operand&#160;<br/>Exception&#160;(#D).”</a></p>
<p style="position:absolute;top:338px;left:69px;white-space:nowrap" class="ft03">8.5.3&#160;</p>
<p style="position:absolute;top:338px;left:149px;white-space:nowrap" class="ft03">Divide-By-Zero&#160;Exception (#Z)</p>
<p style="position:absolute;top:369px;left:69px;white-space:nowrap" class="ft07">The x87&#160;FPU reports a&#160;floating-point divide-by-zero exception whenever&#160;an instruction attempts to divide&#160;a finite&#160;<br/>non-zero operand by 0.&#160;The flag (ZE) for this exception is&#160;bit&#160;2 of the&#160;x87 FPU status word, and the mask bit (ZM)&#160;<br/>is bit 2 of the x87&#160;FPU&#160;control&#160;word.&#160;The FDIV, FDIVP,&#160;FDIVR,&#160;FDIVRP,&#160;FIDIV,&#160;and FIDIVR&#160;instructions and&#160;the&#160;other&#160;<br/>instructions&#160;that perform&#160;division internally (FYL2X&#160;and FXTRACT) can&#160;report&#160;the divide-by-zero&#160;exception.&#160;<br/>When&#160;a divide-by-zero exception&#160;occurs and the&#160;exception&#160;is&#160;masked, the x87 FPU&#160;sets&#160;the ZE flag&#160;and&#160;returns the&#160;<br/>values<a href="o_7281d5ea06a5b67a-218.html">&#160;shown in Table 8-10.&#160;</a>If the divide-by-zero exception&#160;is not masked, the ZE flag is set, a software exception&#160;<br/>handler&#160;is invoked&#160;(see<a href="o_7281d5ea06a5b67a-222.html">&#160;Section 8.7,&#160;“Handling x87&#160;FPU Exceptions in&#160;Software”),&#160;</a>and the&#160;top-of-stack&#160;pointer&#160;<br/>(TOP) and&#160;source operands&#160;remain unchanged.</p>
<p style="position:absolute;top:697px;left:69px;white-space:nowrap" class="ft03">8.5.4&#160;</p>
<p style="position:absolute;top:697px;left:149px;white-space:nowrap" class="ft03">Numeric Overflow&#160;Exception (#O)</p>
<p style="position:absolute;top:727px;left:69px;white-space:nowrap" class="ft07">The x87&#160;FPU reports a&#160;floating-point numeric overflow exception&#160;(#O) whenever the&#160;rounded&#160;result of an&#160;arith-<br/>metic instruction exceeds the largest allowable&#160;finite value&#160;that will&#160;fit into&#160;the floating-point format of the destina-<br/>tion operand.&#160;(See&#160;<a href="o_7281d5ea06a5b67a-104.html">Section&#160;4.9.1.4,&#160;“Numeric Overflow&#160;Exception (#O),”&#160;for additional inform</a>ation&#160;about the&#160;<br/>numeric&#160;overflow exception.)<br/>When using&#160;the x87&#160;FPU,&#160;numeric&#160;overflow&#160;can occur on&#160;arithmetic&#160;operations where the&#160;result&#160;is stored&#160;in an&#160;x87&#160;<br/>FPU&#160;data&#160;register. It&#160;can&#160;also&#160;occur on&#160;store floating-point&#160;operations&#160;(using the FST and FSTP&#160;instructions), where&#160;<br/>a&#160;within-range value in&#160;a data register is&#160;stored&#160;in memory&#160;in a&#160;single-precision&#160;or double-precision&#160;floating-point&#160;<br/>format. The numeric&#160;overflow exception&#160;cannot&#160;occur when&#160;storing values in&#160;an integer or&#160;BCD&#160;integer format.&#160;<br/>Instead,&#160;the invalid-arithmetic-operand exception&#160;is signaled.<br/>The&#160;flag&#160;(OE) for the&#160;numeric-overflow exception is&#160;bit&#160;3&#160;of&#160;the x87&#160;FPU status&#160;word, and the&#160;mask bit (OM)&#160;is bit&#160;<br/>3 of the&#160;x87 FPU&#160;control word.&#160;<br/>When a&#160;numeric-overflow exception&#160;occurs and the&#160;exception&#160;is masked, the&#160;x87 FPU sets the&#160;OE&#160;flag and returns&#160;<br/>one of the&#160;values shown&#160;<a href="o_7281d5ea06a5b67a-105.html">in Table&#160;4-10. The v</a>alue&#160;returned&#160;depends on&#160;the current&#160;rounding mode of the&#160;x87&#160;FPU&#160;<br/><a href="o_7281d5ea06a5b67a-198.html">(see Section 8.1.5.3,&#160;“Rounding&#160;Control&#160;Field”).<br/></a>The&#160;action&#160;that the&#160;x87&#160;FPU takes when numeric overflow occurs&#160;and the&#160;numeric-overflow exception&#160;is not&#160;<br/>masked, depends on whether&#160;the&#160;instruction is&#160;supposed to&#160;store the&#160;result&#160;in&#160;memory&#160;or on the&#160;register&#160;stack.</p>
<p style="position:absolute;top:1027px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:1027px;left:95px;white-space:nowrap" class="ft07"><b>Destination is a&#160;memory location —</b>&#160;The OE&#160;flag&#160;is set&#160;and&#160;a software&#160;exception&#160;handler&#160;is invoked (see&#160;<br/><a href="o_7281d5ea06a5b67a-222.html">Section 8.7, “Handling x87&#160;FPU&#160;Exceptions in&#160;Software”). The top-of</a>-stack&#160;pointer&#160;(TOP) and&#160;source and&#160;<br/>destination&#160;operands remain unchanged. Because&#160;the data&#160;in&#160;the&#160;stack is in double&#160;extended-precision format,&#160;</p>
<p style="position:absolute;top:523px;left:202px;white-space:nowrap" class="ft06">Table 8-11.&#160;&#160;Divide-By-Zero&#160;Conditions&#160;and the Masked&#160;Responses to&#160;Them</p>
<p style="position:absolute;top:547px;left:164px;white-space:nowrap" class="ft02">Condition</p>
<p style="position:absolute;top:547px;left:524px;white-space:nowrap" class="ft02">Masked Response</p>
<p style="position:absolute;top:571px;left:75px;white-space:nowrap" class="ft02">Divide&#160;or reverse&#160;divide&#160;operation&#160;with&#160;a&#160;</p>
<p style="position:absolute;top:588px;left:75px;white-space:nowrap" class="ft02">0 divisor.</p>
<p style="position:absolute;top:571px;left:322px;white-space:nowrap" class="ft02">Returns&#160;an&#160;∞&#160;signed with the exclusive OR of&#160;the&#160;sign of&#160;the two operands&#160;to&#160;the&#160;</p>
<p style="position:absolute;top:588px;left:322px;white-space:nowrap" class="ft02">destination operand.</p>
<p style="position:absolute;top:612px;left:75px;white-space:nowrap" class="ft02">FYL2X instruction.</p>
<p style="position:absolute;top:612px;left:322px;white-space:nowrap" class="ft02">Returns an&#160;∞&#160;signed with the opposite&#160;sign&#160;of&#160;the non-zero&#160;operand to the destination&#160;</p>
<p style="position:absolute;top:628px;left:322px;white-space:nowrap" class="ft02">operand.</p>
<p style="position:absolute;top:652px;left:75px;white-space:nowrap" class="ft02">FXTRACT instruction.</p>
<p style="position:absolute;top:652px;left:322px;white-space:nowrap" class="ft02">ST(1) is set to&#160;–∞; ST(0) is set&#160;to&#160;0 with&#160;the same&#160;sign as&#160;the source operand.</p>
</div>
</body>
</html>
