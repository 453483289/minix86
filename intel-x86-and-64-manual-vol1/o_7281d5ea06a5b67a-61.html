<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 61</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:21px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#0860a8;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:8px;font-family:Times;color:#000000;}
	.ft07{font-size:16px;font-family:Times;color:#0860a8;}
	.ft08{font-size:11px;font-family:Times;color:#0860a8;}
	.ft09{font-size:8px;font-family:Times;color:#0860a8;}
	.ft010{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page61-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a061.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:782px;white-space:nowrap" class="ft00">Vol. 1&#160;3-1</p>
<p style="position:absolute;top:96px;left:714px;white-space:nowrap" class="ft01">CHAPTER 3</p>
<p style="position:absolute;top:120px;left:477px;white-space:nowrap" class="ft01">BASIC EXECUTION ENVIRONMENT</p>
<p style="position:absolute;top:190px;left:68px;white-space:nowrap" class="ft010">This&#160;chapter&#160;describes&#160;the&#160;basic execution&#160;environment of an&#160;Intel 64&#160;or&#160;IA-32 processor as&#160;seen&#160;by assembly-<br/>language programmers. It&#160;describes how the&#160;processor&#160;executes&#160;instructions&#160;and how it&#160;stores and manipulates&#160;<br/>data.&#160;The execution environment described&#160;here includes&#160;memory (the&#160;address space),&#160;general-purpose&#160;data&#160;<br/>registers, segment registers, the&#160;flag&#160;register,&#160;and&#160;the&#160;instruction pointer register.</p>
<p style="position:absolute;top:295px;left:68px;white-space:nowrap" class="ft03">3.1&#160;</p>
<p style="position:absolute;top:295px;left:147px;white-space:nowrap" class="ft03">MODES OF&#160;OPERATION</p>
<p style="position:absolute;top:331px;left:68px;white-space:nowrap" class="ft010">The&#160;IA-32&#160;architecture supports three basic operating&#160;modes: protected&#160;mode, real-address mode,&#160;and system&#160;<br/>management&#160;mode.&#160;The&#160;operating mode&#160;determines which instructions and&#160;architectural&#160;features are&#160;accessible:</p>
<p style="position:absolute;top:370px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:370px;left:93px;white-space:nowrap" class="ft010"><b>Protected&#160;mode</b>&#160;—&#160;This mode&#160;is the&#160;native&#160;state&#160;of&#160;the&#160;processor.&#160;Among&#160;the&#160;capabilities of protected mode&#160;<br/>is&#160;the ability to directly&#160;execute “real-address mode”&#160;8086&#160;software in&#160;a protected, multi-tasking&#160;environment.&#160;<br/>This feature&#160;is called&#160;<b>virtual-8086&#160;mode</b>,&#160;although it&#160;is not&#160;actually&#160;a processor mode. Virtual-8086 mode is&#160;<br/>actually a&#160;protected mode attribute&#160;that&#160;can be enabled&#160;for any task.&#160;</p>
<p style="position:absolute;top:442px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:442px;left:93px;white-space:nowrap" class="ft010"><b>Real-address&#160;mode</b>&#160;— This&#160;mode&#160;implements the&#160;programming environment of&#160;the&#160;Intel&#160;8086 processor with&#160;<br/>extensions (such as the ability to switch to protected or&#160;system management mode). The processor is placed in&#160;<br/>real-address mode following&#160;power-up or&#160;a&#160;reset.</p>
<p style="position:absolute;top:497px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:498px;left:93px;white-space:nowrap" class="ft010"><b>System management mode&#160;(SMM)</b>&#160;—&#160;This mode&#160;provides&#160;an operating&#160;system or executive&#160;with&#160;a&#160;<br/>transparent mechanism&#160;for implementing platform-specific&#160;functions such as&#160;power management and&#160;system&#160;<br/>security. The processor enters&#160;SMM when&#160;the&#160;external&#160;SMM interrupt pin&#160;(SMI#)&#160;is activated or an&#160;SMI&#160;is&#160;<br/>received&#160;from the&#160;advanced&#160;programmable interrupt controller&#160;(APIC).&#160;<br/>In&#160;SMM,&#160;the processor switches to&#160;a&#160;separate address&#160;space&#160;while&#160;saving the&#160;basic&#160;context of the&#160;currently&#160;<br/>running program or&#160;task. SMM-specific code may then&#160;be&#160;executed&#160;transparently.&#160;Upon returning&#160;from SMM,&#160;<br/>the processor is&#160;placed back into its&#160;state&#160;prior&#160;to the&#160;system management&#160;interrupt. SMM&#160;was introduced with&#160;<br/>the Intel386</p>
<p style="position:absolute;top:617px;left:176px;white-space:nowrap" class="ft06">™</p>
<p style="position:absolute;top:619px;left:187px;white-space:nowrap" class="ft02">&#160;SL&#160;and Intel486</p>
<p style="position:absolute;top:617px;left:299px;white-space:nowrap" class="ft06">™</p>
<p style="position:absolute;top:619px;left:309px;white-space:nowrap" class="ft02">&#160;SL processors and&#160;became&#160;a standard IA-32 feature&#160;with&#160;the Pentium&#160;</p>
<p style="position:absolute;top:636px;left:93px;white-space:nowrap" class="ft02">processor family.&#160;</p>
<p style="position:absolute;top:686px;left:68px;white-space:nowrap" class="ft07">3.1.1 Intel</p>
<p style="position:absolute;top:689px;left:185px;white-space:nowrap" class="ft08">®</p>
<p style="position:absolute;top:689px;left:195px;white-space:nowrap" class="ft09"><i>&#160;</i></p>
<p style="position:absolute;top:686px;left:198px;white-space:nowrap" class="ft07">64 Architecture</p>
<p style="position:absolute;top:717px;left:68px;white-space:nowrap" class="ft010">Intel&#160;64&#160;architecture&#160;adds&#160;IA-32e&#160;mode.&#160;IA-32e&#160;mode&#160;has&#160;two&#160;sub-modes.<br/>These&#160;are:</p>
<p style="position:absolute;top:755px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:756px;left:93px;white-space:nowrap" class="ft010"><b>Compatibility mode (sub-mode of IA-32e mode)&#160;</b>—&#160;Compatibility mode&#160;permits most legacy 16-bit and&#160;<br/>32-bit applications to run without&#160;re-compilation under&#160;a&#160;64-bit operating&#160;system. For brevity,&#160;the&#160;compatibility&#160;<br/>sub-mode&#160;is referred to&#160;as compatibility mode&#160;in IA-32 architecture.&#160;The execution environment of compati-<br/>bility mode is the&#160;same&#160;as de<a href="o_7281d5ea06a5b67a-62.html">scribed in Section&#160;3.2</a>.&#160;Compatibility mode also&#160;supports all&#160;of the privilege&#160;levels&#160;<br/>that&#160;are&#160;supported&#160;in 64-bit&#160;and&#160;protected&#160;modes.&#160;Legacy applications that&#160;run&#160;in Virtual&#160;8086 mode or&#160;use&#160;<br/>hardware task management&#160;will&#160;not work&#160;in this mode.&#160;<br/>Compatibility mode is&#160;enabled by the operating&#160;system&#160;(OS) on a&#160;code segment basis. This means that a single&#160;<br/>64-bit OS&#160;can support 64-bit applications&#160;running&#160;in 64-bit mode and&#160;support&#160;legacy&#160;32-bit applications&#160;(not&#160;<br/>recompiled for 64-bits)&#160;running&#160;in compatibility mode.<br/>Compatibility mode&#160;is similar&#160;to 32-bit&#160;protected mode.&#160;Applications access&#160;only&#160;the first&#160;4 GByte&#160;of&#160;linear-<br/>address&#160;space.&#160;Compatibility mode uses 16-bit and&#160;32-bit&#160;address and operand&#160;sizes. Like&#160;protected mode, this&#160;<br/>mode allows applications&#160;to access&#160;physical&#160;memory&#160;greater than 4&#160;GByte&#160;using&#160;PAE (Physical Address&#160;Exten-<br/>sions).&#160;</p>
<p style="position:absolute;top:988px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:988px;left:93px;white-space:nowrap" class="ft010"><b>64-bit&#160;mode</b>&#160;<b>(sub-mode of IA-32e mode)&#160;</b>— This&#160;mode enables&#160;a 64-bit&#160;operating system to&#160;run&#160;applica-<br/>tions&#160;written to access 64-bit&#160;linear address&#160;space.&#160;For brevity,&#160;the 64-bit&#160;sub-mode&#160;is referred to&#160;as 64-bit&#160;<br/>mode&#160;in IA-32 architecture.</p>
</div>
</body>
</html>
