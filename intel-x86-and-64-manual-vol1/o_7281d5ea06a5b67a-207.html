<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 207</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page207-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a207.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:775px;white-space:nowrap" class="ft00">Vol. 1&#160;8-17</p>
<p style="position:absolute;top:47px;left:634px;white-space:nowrap" class="ft01">PROGRAMMING&#160;WITH&#160;THE X87&#160;FPU</p>
<p style="position:absolute;top:346px;left:69px;white-space:nowrap" class="ft06">The FST (store floating&#160;point) and&#160;FIST (store&#160;integer) instructions&#160;store the&#160;value&#160;in register&#160;ST(0) in&#160;memory in&#160;<br/>the destination format (floating point or integer,&#160;respectively). Again, the format conversion&#160;is&#160;carried out automat-<br/>ically.<br/>The&#160;FSTP (store floating point and&#160;pop), FISTP (store&#160;integer and pop),&#160;and FBSTP&#160;(store packed&#160;decimal and&#160;pop)&#160;<br/>instructions store the&#160;value in&#160;the ST(0)&#160;registers&#160;into memory&#160;in the destination format (floating&#160;point, integer,&#160;or&#160;<br/>packed&#160;BCD), then&#160;performs a&#160;<b>pop&#160;</b>operation on the&#160;register stack. A&#160;pop operation causes the ST(0) register&#160;to be&#160;<br/>marked empty and&#160;the stack&#160;pointer (TOP) in&#160;the&#160;x87&#160;FPU control&#160;work to be&#160;incremented&#160;by&#160;1.&#160;The&#160;FSTP&#160;instruc-<br/>tion can also&#160;be&#160;used&#160;to copy the value in&#160;the&#160;ST(0)&#160;register&#160;to another&#160;x87 FPU register [ST(i)].<br/>The&#160;FXCH (exchange register&#160;contents) instruction exchanges the&#160;value in&#160;a selected&#160;register in&#160;the&#160;stack [ST(i)]&#160;<br/>with the&#160;value in&#160;ST(0).<br/>The FCMOV<i>cc</i>&#160;(conditional move) instructions move the&#160;value in a&#160;selected&#160;register in&#160;the stack [ST(i)] to register&#160;<br/>ST(0) if a&#160;condition specified with&#160;a condition&#160;code&#160;(<i>cc</i>)&#160;<a href="o_7281d5ea06a5b67a-207.html">is satisfied (see Table 8-5).&#160;</a>The&#160;condition being tested&#160;for&#160;<br/>is represented by&#160;the&#160;status&#160;flags in the&#160;EFLAGS&#160;register. The&#160;condition&#160;code&#160;mnemonics&#160;are appended&#160;to&#160;the&#160;<br/>letters “FCMOV”&#160;to form&#160;the&#160;mnemonic for&#160;a&#160;FCMOV<i>cc</i>&#160;instruction.</p>
<p style="position:absolute;top:886px;left:69px;white-space:nowrap" class="ft06">Like&#160;the&#160;CMOV<i>cc</i>&#160;instructions,&#160;the FCMOV<i>cc</i>&#160;instructions&#160;are useful&#160;for&#160;optimizing&#160;small IF constructions.&#160;They&#160;also&#160;<br/>help eliminate&#160;branching&#160;overhead for IF operations and&#160;the&#160;possibility of branch mispredictions by the&#160;processor.&#160;<br/>Software can check if the FCMOV<i>cc</i>&#160;instructions are supported&#160;by&#160;checking the processor’s feature information with&#160;<br/>the CPUID&#160;instruction.</p>
<p style="position:absolute;top:100px;left:328px;white-space:nowrap" class="ft05">Table 8-4. &#160;Data&#160;Transfer&#160;Instructions</p>
<p style="position:absolute;top:124px;left:74px;white-space:nowrap" class="ft02">Floating&#160;Point</p>
<p style="position:absolute;top:124px;left:359px;white-space:nowrap" class="ft02">Integer</p>
<p style="position:absolute;top:124px;left:601px;white-space:nowrap" class="ft02">Packed&#160;Decimal</p>
<p style="position:absolute;top:148px;left:74px;white-space:nowrap" class="ft02">FLD</p>
<p style="position:absolute;top:148px;left:198px;white-space:nowrap" class="ft02">Load Floating&#160;Point</p>
<p style="position:absolute;top:148px;left:359px;white-space:nowrap" class="ft02">FILD</p>
<p style="position:absolute;top:148px;left:450px;white-space:nowrap" class="ft02">Load Integer</p>
<p style="position:absolute;top:148px;left:601px;white-space:nowrap" class="ft02">FBLD</p>
<p style="position:absolute;top:148px;left:679px;white-space:nowrap" class="ft02">Load Packed</p>
<p style="position:absolute;top:164px;left:679px;white-space:nowrap" class="ft02">Decimal</p>
<p style="position:absolute;top:189px;left:74px;white-space:nowrap" class="ft02">FST</p>
<p style="position:absolute;top:189px;left:198px;white-space:nowrap" class="ft02">Store&#160;Floating&#160;Point</p>
<p style="position:absolute;top:189px;left:359px;white-space:nowrap" class="ft02">FIST</p>
<p style="position:absolute;top:189px;left:450px;white-space:nowrap" class="ft02">Store&#160;Integer</p>
<p style="position:absolute;top:213px;left:74px;white-space:nowrap" class="ft02">FSTP</p>
<p style="position:absolute;top:213px;left:198px;white-space:nowrap" class="ft02">Store&#160;Floating&#160;Point and&#160;</p>
<p style="position:absolute;top:229px;left:198px;white-space:nowrap" class="ft02">Pop</p>
<p style="position:absolute;top:213px;left:359px;white-space:nowrap" class="ft02">FISTP</p>
<p style="position:absolute;top:213px;left:450px;white-space:nowrap" class="ft02">Store&#160;Integer</p>
<p style="position:absolute;top:229px;left:450px;white-space:nowrap" class="ft02">and Pop</p>
<p style="position:absolute;top:213px;left:601px;white-space:nowrap" class="ft02">FBSTP</p>
<p style="position:absolute;top:213px;left:679px;white-space:nowrap" class="ft02">Store&#160;Packed</p>
<p style="position:absolute;top:229px;left:679px;white-space:nowrap" class="ft02">Decimal and Pop</p>
<p style="position:absolute;top:253px;left:74px;white-space:nowrap" class="ft02">FXCH Exchange&#160;</p>
<p style="position:absolute;top:253px;left:256px;white-space:nowrap" class="ft02">Register&#160;</p>
<p style="position:absolute;top:270px;left:198px;white-space:nowrap" class="ft02">Contents</p>
<p style="position:absolute;top:294px;left:74px;white-space:nowrap" class="ft02">FCMOV<i>cc</i></p>
<p style="position:absolute;top:294px;left:198px;white-space:nowrap" class="ft02">Conditional Move</p>
<p style="position:absolute;top:614px;left:265px;white-space:nowrap" class="ft05">Table 8-5.&#160;&#160;Floating-Point&#160;Conditional Move&#160;Instructions</p>
<p style="position:absolute;top:637px;left:76px;white-space:nowrap" class="ft02">Instruction Mnemonic</p>
<p style="position:absolute;top:637px;left:335px;white-space:nowrap" class="ft02">Status&#160;Flag States</p>
<p style="position:absolute;top:637px;left:590px;white-space:nowrap" class="ft02">Condition Description</p>
<p style="position:absolute;top:660px;left:76px;white-space:nowrap" class="ft02">FCMOVB</p>
<p style="position:absolute;top:660px;left:335px;white-space:nowrap" class="ft02">CF=1</p>
<p style="position:absolute;top:660px;left:590px;white-space:nowrap" class="ft02">Below</p>
<p style="position:absolute;top:682px;left:76px;white-space:nowrap" class="ft02">FCMOVNB</p>
<p style="position:absolute;top:682px;left:335px;white-space:nowrap" class="ft02">CF=0</p>
<p style="position:absolute;top:682px;left:590px;white-space:nowrap" class="ft02">Not&#160;&#160;below</p>
<p style="position:absolute;top:705px;left:76px;white-space:nowrap" class="ft02">FCMOVE</p>
<p style="position:absolute;top:705px;left:335px;white-space:nowrap" class="ft02">ZF=1</p>
<p style="position:absolute;top:705px;left:590px;white-space:nowrap" class="ft02">Equal</p>
<p style="position:absolute;top:727px;left:76px;white-space:nowrap" class="ft02">FCMOVNE</p>
<p style="position:absolute;top:727px;left:335px;white-space:nowrap" class="ft02">ZF=0</p>
<p style="position:absolute;top:727px;left:590px;white-space:nowrap" class="ft02">Not&#160;&#160;equal</p>
<p style="position:absolute;top:750px;left:76px;white-space:nowrap" class="ft02">Instruction Mnemonic</p>
<p style="position:absolute;top:750px;left:335px;white-space:nowrap" class="ft02">Status&#160;Flag States</p>
<p style="position:absolute;top:750px;left:590px;white-space:nowrap" class="ft02">Condition Description</p>
<p style="position:absolute;top:772px;left:76px;white-space:nowrap" class="ft02">FCMOVBE</p>
<p style="position:absolute;top:772px;left:335px;white-space:nowrap" class="ft02">CF=1 or&#160;ZF=1</p>
<p style="position:absolute;top:772px;left:590px;white-space:nowrap" class="ft02">Below&#160;&#160;or&#160;&#160;equal</p>
<p style="position:absolute;top:795px;left:76px;white-space:nowrap" class="ft02">FCMOVNBE</p>
<p style="position:absolute;top:795px;left:335px;white-space:nowrap" class="ft02">CF=0 or&#160;ZF=0</p>
<p style="position:absolute;top:795px;left:590px;white-space:nowrap" class="ft02">Not&#160;below&#160;nor&#160;equal</p>
<p style="position:absolute;top:817px;left:76px;white-space:nowrap" class="ft02">FCMOVU</p>
<p style="position:absolute;top:817px;left:335px;white-space:nowrap" class="ft02">PF=1</p>
<p style="position:absolute;top:817px;left:590px;white-space:nowrap" class="ft02">Unordered</p>
<p style="position:absolute;top:840px;left:76px;white-space:nowrap" class="ft02">FCMOVNU</p>
<p style="position:absolute;top:840px;left:335px;white-space:nowrap" class="ft02">PF=0</p>
<p style="position:absolute;top:840px;left:590px;white-space:nowrap" class="ft02">Not&#160;&#160;unordered</p>
</div>
</body>
</html>
