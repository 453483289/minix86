<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 160</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:12px;font-family:Times;color:#0860a8;}
	.ft04{font-size:9px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page160-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a160.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">6-16&#160;Vol. 1</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">PROCEDURE CALLS, INTERRUPTS, AND EXCEPTIONS</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft05">By&#160;copying&#160;only the&#160;stack&#160;frame pointers of procedures&#160;at&#160;higher&#160;lexical&#160;levels,&#160;the&#160;ENTER instruction makes certain&#160;<br/>that procedures&#160;access&#160;only those&#160;variables&#160;of higher&#160;lexical levels, not&#160;those&#160;at&#160;parallel lexical&#160;levels (see&#160;<br/><a href="o_7281d5ea06a5b67a-160.html">Figure&#160;6-6)</a>.</p>
<p style="position:absolute;top:421px;left:68px;white-space:nowrap" class="ft06">Block-structured languages can use the lexical levels defined by ENTER to control access to the variables of nested&#160;<br/>procedures.&#160;<a href="o_7281d5ea06a5b67a-160.html">In Figure&#160;6-6,&#160;</a>for example,&#160;if&#160;procedure&#160;A&#160;calls&#160;procedure&#160;B which, in&#160;turn, calls&#160;procedure C,&#160;then&#160;<br/>procedure&#160;C will have&#160;access&#160;to the&#160;variables&#160;of the&#160;MAIN&#160;procedure and&#160;procedure A,&#160;but not&#160;those&#160;of procedure&#160;<br/>B because they&#160;are at&#160;the same&#160;lexical&#160;level.&#160;The following&#160;definition&#160;describes&#160;the&#160;access&#160;to variables for the&#160;<br/>nested&#160;procedures in<a href="o_7281d5ea06a5b67a-160.html">&#160;Figure&#160;6-6</a>.<br/>1.&#160;MAIN&#160;has variables at&#160;fixed locations.<br/>2.&#160;Procedure A&#160;can&#160;access only the&#160;variables&#160;of&#160;MAIN.<br/>3.&#160;Procedure B can&#160;access only the variables of procedure A and MAIN. Procedure B cannot access&#160;the variables of&#160;</p>
<p style="position:absolute;top:576px;left:93px;white-space:nowrap" class="ft02">procedure C or&#160;procedure&#160;D.</p>
<p style="position:absolute;top:600px;left:68px;white-space:nowrap" class="ft02">4.&#160;Procedure C can access only the variables&#160;of&#160;procedure A and MAIN. Procedure C cannot access the&#160;variables of&#160;</p>
<p style="position:absolute;top:616px;left:93px;white-space:nowrap" class="ft02">procedure B&#160;or&#160;procedure D.</p>
<p style="position:absolute;top:640px;left:68px;white-space:nowrap" class="ft02">5.&#160;Procedure D can&#160;access the&#160;variables&#160;of&#160;procedure C,&#160;procedure A,&#160;and MAIN. Procedure D cannot&#160;access the&#160;</p>
<p style="position:absolute;top:657px;left:93px;white-space:nowrap" class="ft02">variables of procedure&#160;B.</p>
<p style="position:absolute;top:681px;left:68px;white-space:nowrap" class="ft05"><a href="o_7281d5ea06a5b67a-161.html">In Figure&#160;6-7, an&#160;</a>ENTER instruction&#160;at the beginning of&#160;the&#160;MAIN procedure creates three&#160;doublewords of dynamic&#160;<br/>storage&#160;for MAIN,&#160;but copies no pointers from other stack&#160;frames. The&#160;first doubleword in the display holds a copy&#160;<br/>of the last&#160;value&#160;in the&#160;EBP register before the&#160;ENTER&#160;instruction&#160;was executed. The&#160;second&#160;doubleword&#160;holds a&#160;<br/>copy of&#160;the contents&#160;of&#160;the EBP register following&#160;the ENTER&#160;instruction. After&#160;the instruction is executed, the&#160;EBP&#160;<br/>register points&#160;to the&#160;first doubleword pushed on the&#160;stack, and&#160;the ESP register&#160;points to&#160;the last&#160;doubleword&#160;in&#160;<br/>the stack&#160;frame.<br/>When MAIN&#160;calls&#160;procedure A,&#160;the ENTER instruction creates a new display&#160;<a href="o_7281d5ea06a5b67a-161.html">(see Figure&#160;6-8). The first doubleword&#160;<br/></a>is&#160;the&#160;last value held in&#160;MAIN's EBP&#160;register. The&#160;second&#160;doubleword is&#160;a pointer to MAIN's&#160;stack frame&#160;which&#160;is&#160;<br/>copied from the&#160;second&#160;doubleword in&#160;MAIN's display.&#160;This&#160;happens to&#160;be&#160;another copy of the&#160;last&#160;value&#160;held&#160;in&#160;<br/>MAIN’s&#160;EBP register.&#160;Procedure A can&#160;access variables in&#160;MAIN&#160;because MAIN is&#160;at&#160;level&#160;1.&#160;<br/>Therefore&#160;the base&#160;address&#160;for the&#160;dynamic&#160;storage&#160;used&#160;in&#160;MAIN is&#160;the current&#160;address in&#160;the&#160;EBP register,&#160;plus&#160;<br/>four bytes&#160;to account for the&#160;saved contents&#160;of&#160;MAIN’s&#160;EBP&#160;register. All dynamic variables for MAIN&#160;are at&#160;fixed,&#160;<br/>positive offsets&#160;from this&#160;value.&#160;</p>
<p style="position:absolute;top:375px;left:348px;white-space:nowrap" class="ft03">Figure&#160;6-6. &#160;Nested Procedures</p>
<p style="position:absolute;top:197px;left:396px;white-space:nowrap" class="ft00">Main (Lexical Level 1)<b>&#160;</b></p>
<p style="position:absolute;top:217px;left:376px;white-space:nowrap" class="ft00">Procedure A (Lexical&#160;Level 2)<b>&#160;</b></p>
<p style="position:absolute;top:237px;left:376px;white-space:nowrap" class="ft00">Procedure B (Lexical&#160;Level 3)<b>&#160;</b></p>
<p style="position:absolute;top:273px;left:377px;white-space:nowrap" class="ft00">Procedure C&#160;(Lexical Level 3)</p>
<p style="position:absolute;top:292px;left:375px;white-space:nowrap" class="ft00">Procedure D (Lexical&#160;Level 4)<b>&#160;</b></p>
</div>
</body>
</html>
