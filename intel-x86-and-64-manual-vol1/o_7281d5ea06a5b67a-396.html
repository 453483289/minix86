<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 396</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:8px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:14px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page396-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a396.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">17-8&#160;Vol. 1</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">INTEL® MEMORY&#160;PROTECTION&#160;EXTENSIONS</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft06">As&#160;noted earlier,&#160;the&#160;linear address&#160;of&#160;the&#160;bound directory is derived from&#160;either&#160;BNDCFGU (CPL&#160;= 3) or BNDCFGS&#160;<br/>(CPL&#160;&lt; 3). In&#160;64-bit mode,&#160;each&#160;bound-directory&#160;entry (BDE)&#160;is 8 bytes.&#160;The&#160;number of&#160;entries&#160;in the bound direc-<br/>tory&#160;is determined by the&#160;MPX address-width adjust (MAWA;&#160;see<a href="o_7281d5ea06a5b67a-390.html">&#160;Section 17.3.1). Specifically</a>, the&#160;number&#160;of&#160;<br/>entries is&#160;2</p>
<p style="position:absolute;top:147px;left:142px;white-space:nowrap" class="ft03">28+MAWA</p>
<p style="position:absolute;top:150px;left:198px;white-space:nowrap" class="ft02">.</p>
<p style="position:absolute;top:172px;left:68px;white-space:nowrap" class="ft02">In 64-bit&#160;mode,&#160;the processor uses&#160;the&#160;two-level&#160;structures&#160;to access extended&#160;bounds&#160;as follows:</p>
<p style="position:absolute;top:194px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:195px;left:93px;white-space:nowrap" class="ft06">A&#160;bound&#160;directory is&#160;located&#160;at&#160;the&#160;4-KByte aligned&#160;linear address&#160;specified in&#160;bits&#160;63:12&#160;of BNDCFGx&#160;(see&#160;<br/><a href="o_7281d5ea06a5b67a-391.html">Figure&#160;17-2). A bo</a>und&#160;directory&#160;comprises of&#160;2</p>
<p style="position:absolute;top:209px;left:410px;white-space:nowrap" class="ft03">28+MAWA</p>
<p style="position:absolute;top:211px;left:466px;white-space:nowrap" class="ft02">&#160;64-bit entries&#160;(BDEs); thus, the&#160;size of a&#160;bound&#160;</p>
<p style="position:absolute;top:228px;left:93px;white-space:nowrap" class="ft02">directory in&#160;64-bit mode&#160;is 2</p>
<p style="position:absolute;top:225px;left:285px;white-space:nowrap" class="ft03">1+MAWA</p>
<p style="position:absolute;top:228px;left:339px;white-space:nowrap" class="ft02">GBytes. A BDE&#160;is selected using&#160;the&#160;LAp&#160;(linear address&#160;of pointer&#160;to a&#160;</p>
<p style="position:absolute;top:244px;left:93px;white-space:nowrap" class="ft09">buffer)&#160;to&#160;construct&#160;a 64-bit offset&#160;as follows:<br/>—&#160;bits&#160;63:31+MAWA are 0;<br/>—&#160;bits&#160;30+MAWA:3&#160;are LAp[47+MAWA:20];&#160;and<br/>—&#160;bits&#160;2:0&#160;are 0.<br/>The&#160;address of the BDE&#160;is the sum&#160;of&#160;the&#160;bound-directory&#160;base address&#160;(from&#160;BNDCFGx) plus&#160;this 64-bit offset.</p>
<p style="position:absolute;top:361px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:361px;left:93px;white-space:nowrap" class="ft09">Bit&#160;0&#160;of&#160;a&#160;BDE&#160;is&#160;a&#160;valid&#160;bit.&#160;If&#160;this&#160;bit&#160;is&#160;0,&#160;use&#160;of&#160;the&#160;BDE&#160;by&#160;BNDLDX&#160;or&#160;BNDSTX&#160;causes&#160;#BR,&#160;sets&#160;<br/>BNDSTATUS[1:0] to 10b (the error code),&#160;and loads BNDSTATUS[63:2]&#160;with bits&#160;63:2&#160;of the&#160;linear address of&#160;<br/>the BDE. Otherwise, the&#160;processor&#160;uses bits&#160;63:3&#160;of&#160;the&#160;BDE as&#160;the 8-byte aligned address&#160;of&#160;a bound table&#160;<br/>(BT);&#160;the processor ignores bits 2:1 of a&#160;BDE.<br/>A&#160;bound table comprises of 2</p>
<p style="position:absolute;top:431px;left:289px;white-space:nowrap" class="ft03">17</p>
<p style="position:absolute;top:433px;left:303px;white-space:nowrap" class="ft02">&#160;32-byte&#160;entries&#160;(BTEs);&#160;thus, the&#160;size&#160;of&#160;a bound&#160;table&#160;in 64-bit&#160;mode is&#160;</p>
<p style="position:absolute;top:450px;left:93px;white-space:nowrap" class="ft09">4&#160;MBytes. A BTE is&#160;selected using&#160;the LAp (linear&#160;address of pointer to a&#160;buffer) to&#160;construct&#160;an offset as&#160;<br/>follows:<br/>—&#160;bits 21:5&#160;are LAp[19:3];&#160;and<br/>—&#160;bits&#160;4:0&#160;are 0.<br/>The address&#160;of&#160;the BTE is&#160;the sum of the&#160;bound-table&#160;base address&#160;(from&#160;the&#160;BDE)&#160;plus this&#160;offset.</p>
<p style="position:absolute;top:559px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:559px;left:93px;white-space:nowrap" class="ft08">Each BTE comprises&#160;the following:<br/>—&#160;a&#160;64-bit lower&#160;bound (LB)&#160;field;<br/>—&#160;a&#160;64-bit upper&#160;bound&#160;(UB) field;<br/>—&#160;a&#160;64-bit pointer value;&#160;and<br/>—&#160;a&#160;64-bit reserved field.&#160;This&#160;field&#160;is reserved for future Intel MPX;&#160;software must not&#160;use it.</p>
<p style="position:absolute;top:700px;left:68px;white-space:nowrap" class="ft05">17.4.3.2 &#160;&#160;BNDLDX&#160;and&#160;BNDSTX Outside 64-Bit Mode</p>
<p style="position:absolute;top:728px;left:68px;white-space:nowrap" class="ft06"><a href="o_7281d5ea06a5b67a-397.html">Figure&#160;17-5 shows the&#160;</a>two-level&#160;structures&#160;for address&#160;translation of extended&#160;bounds&#160;outside 64-bit&#160;mode.<br/>As&#160;noted earlier,&#160;the&#160;linear address&#160;of&#160;the&#160;bound directory is derived from&#160;either&#160;BNDCFGU (CPL&#160;= 3) or BNDCFGS&#160;<br/>(CPL&#160;&lt; 3).&#160;Outside&#160;64-bit mode,&#160;each&#160;bound-directory entry (BDE)&#160;is 4&#160;bytes. The&#160;number&#160;of&#160;entries&#160;in the&#160;bound&#160;<br/>directory is&#160;2</p>
<p style="position:absolute;top:782px;left:156px;white-space:nowrap" class="ft03">20</p>
<p style="position:absolute;top:785px;left:169px;white-space:nowrap" class="ft02">.</p>
<p style="position:absolute;top:808px;left:68px;white-space:nowrap" class="ft02">Outside 64-bit&#160;mode,&#160;the processor uses the&#160;two-level&#160;structures to&#160;access extended&#160;bounds&#160;as follows:</p>
<p style="position:absolute;top:829px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:830px;left:93px;white-space:nowrap" class="ft06">A&#160;bound&#160;directory is&#160;located&#160;at&#160;the&#160;4-KByte aligned&#160;linear address&#160;specified in&#160;bits&#160;31:12&#160;of BNDCFGx&#160;(see&#160;<br/><a href="o_7281d5ea06a5b67a-391.html">Figure&#160;17-2). A bo</a>und&#160;directory&#160;comprises of&#160;2</p>
<p style="position:absolute;top:844px;left:410px;white-space:nowrap" class="ft03">20</p>
<p style="position:absolute;top:847px;left:423px;white-space:nowrap" class="ft02">&#160;32-bit entries&#160;(BDEs); thus, the&#160;size&#160;of a&#160;bound directory&#160;</p>
<p style="position:absolute;top:863px;left:93px;white-space:nowrap" class="ft09">outside&#160;64-bit mode&#160;is&#160;4&#160;MBytes.&#160;A&#160;BDE is&#160;selected&#160;using&#160;the&#160;LAp (linear&#160;address of pointer to&#160;a buffer) to&#160;<br/>construct&#160;an offset as&#160;follows:<br/>—&#160;bits 21:2&#160;are LAp[31:12]; and<br/>—&#160;bits&#160;1:0&#160;are 0.<br/>The&#160;address&#160;of the&#160;BDE is&#160;the sum of the&#160;bound-directory base address&#160;(from&#160;BNDCFGx) plus&#160;this offset.</p>
<p style="position:absolute;top:972px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:973px;left:93px;white-space:nowrap" class="ft06">Bit&#160;0&#160;of&#160;a&#160;BDE&#160;is&#160;a&#160;valid&#160;bit.&#160;If&#160;this&#160;bit&#160;is&#160;0,&#160;use&#160;of&#160;the&#160;BDE&#160;by&#160;BNDLDX&#160;or&#160;BNDSTX&#160;causes&#160;#BR,&#160;sets&#160;<br/>BNDSTATUS[1:0] to 10b (the error code),&#160;and loads BNDSTATUS[31:2]&#160;with bits&#160;31:2&#160;of the&#160;linear address of&#160;<br/>the BDE. Otherwise, the&#160;processor&#160;uses bits&#160;31:2&#160;of&#160;the&#160;BDE as&#160;the 4-byte aligned address&#160;of&#160;a bound table&#160;<br/>(BT);&#160;the processor ignores bit&#160;1&#160;of a&#160;BDE.</p>
</div>
</body>
</html>
