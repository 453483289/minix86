<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 271</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#000000;}
	.ft04{font-size:12px;font-family:Times;color:#000000;}
	.ft05{font-size:14px;font-family:Times;color:#0860a8;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page271-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a271.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:768px;white-space:nowrap" class="ft00">Vol. 1&#160;11-17</p>
<p style="position:absolute;top:47px;left:401px;white-space:nowrap" class="ft01">PROGRAMMING&#160;WITH INTEL® STREAMING SIMD EXTENSIONS 2&#160;(INTEL® SSE2)</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft07">a&#160;QNaN depending on the exception condition&#160;detected. In&#160;most cases,&#160;the corresponding&#160;exception flag&#160;bit in&#160;<br/>MXCSR&#160;is also&#160;set. The&#160;one situation&#160;where an exception&#160;flag&#160;is not set is&#160;when&#160;an underflow condition&#160;is detected&#160;<br/>and&#160;it is&#160;not accompanied by an&#160;inexact result.<br/>When operating&#160;on packed&#160;floating-point operands, the&#160;processor returns&#160;a masked result&#160;for&#160;each&#160;of&#160;the sub-<br/>operand computations and sets a separate set&#160;of&#160;internal&#160;exception flags for each&#160;computation.&#160;It&#160;then&#160;performs a&#160;<br/>logical-OR on&#160;the&#160;internal exception&#160;flag settings&#160;and sets&#160;the&#160;exception flags&#160;in the&#160;MXCSR&#160;register&#160;according&#160;to&#160;<br/>the results of OR&#160;operations.<br/>Fo<a href="o_7281d5ea06a5b67a-271.html">r example, Figure&#160;11-9 shows the results of an&#160;</a>MULPS&#160;instruction.&#160;In&#160;the example, all SIMD floating-point excep-<br/>tions are&#160;masked. Assume that&#160;a denormal&#160;exception condition is&#160;detected prior&#160;to the&#160;multiplication of sub-oper-<br/>ands X0&#160;and Y0,&#160;no exception condition&#160;is detected&#160;for&#160;the&#160;multiplication&#160;of X1 and Y1, a&#160;numeric overflow&#160;<br/>exception condition&#160;is detected for the&#160;multiplication of&#160;X2 and&#160;Y2, and&#160;another denormal exception&#160;is detected&#160;<br/>prior to&#160;the multiplication&#160;of sub-operands&#160;X3&#160;and&#160;Y3. Because&#160;denormal exceptions&#160;are masked, the&#160;processor&#160;<br/>uses the&#160;denormal source&#160;values&#160;in the multiplications&#160;of&#160;(X0&#160;and Y0) and&#160;of&#160;(X3&#160;and Y3) passing the results&#160;of&#160;the&#160;<br/>multiplications&#160;through to&#160;the destination operand. With&#160;the&#160;denormal operand, the result&#160;of the&#160;X0 and&#160;Y0&#160;compu-<br/>tation&#160;is a&#160;normalized&#160;finite value,&#160;with no exceptions&#160;detected. However,&#160;the X3&#160;and Y3 computation&#160;produces&#160;a&#160;<br/>tiny&#160;and&#160;inexact result. This causes&#160;the corresponding&#160;internal numeric underflow and&#160;inexact-result exception&#160;<br/>flags&#160;to be set.</p>
<p style="position:absolute;top:694px;left:69px;white-space:nowrap" class="ft02">For the&#160;multiplication of X2&#160;and Y2,&#160;the processor stores&#160;the&#160;floating-point&#160;∞&#160;in the&#160;destination operand, and sets&#160;</p>
<p style="position:absolute;top:710px;left:69px;white-space:nowrap" class="ft08">the corresponding internal&#160;sub-operand numeric&#160;overflow&#160;flag.&#160;The result&#160;of the X1&#160;and Y1&#160;multiplication is&#160;passed&#160;<br/>through&#160;to&#160;the destination operand, with no&#160;internal&#160;sub-operand&#160;exception flags&#160;being&#160;set.&#160;Following&#160;the&#160;compu-<br/>tations, the individual sub-operand exceptions flags for&#160;denormal operand, numeric underflow, inexact result, and&#160;<br/>numeric&#160;overflow are&#160;OR’d&#160;and the&#160;corresponding&#160;flags&#160;are&#160;set in&#160;the MXCSR&#160;register.<br/>The&#160;net result&#160;of&#160;this computation is&#160;that:</p>
<p style="position:absolute;top:806px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:807px;left:95px;white-space:nowrap" class="ft02">Multiplication of X0&#160;and Y0&#160;produces&#160;a&#160;normalized finite result</p>
<p style="position:absolute;top:828px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:829px;left:95px;white-space:nowrap" class="ft02">Multiplication of X1&#160;and Y1&#160;produces&#160;a&#160;normalized finite result</p>
<p style="position:absolute;top:851px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:852px;left:95px;white-space:nowrap" class="ft02">Multiplication of X2&#160;and Y2&#160;produces&#160;a&#160;floating-point&#160;</p>
<p style="position:absolute;top:851px;left:451px;white-space:nowrap" class="ft04">∞</p>
<p style="position:absolute;top:852px;left:462px;white-space:nowrap" class="ft02">&#160;result</p>
<p style="position:absolute;top:873px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:874px;left:95px;white-space:nowrap" class="ft02">Multiplication of X3&#160;and Y3&#160;produces&#160;a&#160;tiny,&#160;inexact,&#160;finite&#160;result</p>
<p style="position:absolute;top:896px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:897px;left:95px;white-space:nowrap" class="ft07">Denormal operand, numeric&#160;underflow,&#160;numeric underflow,&#160;and&#160;inexact result&#160;flags&#160;are set in&#160;the MXCSR&#160;<br/>register</p>
<p style="position:absolute;top:957px;left:69px;white-space:nowrap" class="ft05">11.5.3.2 &#160;&#160;Handling Unmasked Exceptions</p>
<p style="position:absolute;top:986px;left:69px;white-space:nowrap" class="ft09">If all&#160;exceptions are&#160;unmasked,&#160;the&#160;processor:<br/>1.&#160;First detects&#160;any pre-computation&#160;exceptions: it&#160;ORs those&#160;exceptions,&#160;sets&#160;the appropriate exception&#160;flags,&#160;</p>
<p style="position:absolute;top:1026px;left:95px;white-space:nowrap" class="ft07">leaves the&#160;source and destination&#160;operands unaltered, and&#160;goes&#160;to step&#160;2.&#160;If&#160;it does&#160;not detect&#160;any pre-<br/>computation exceptions, it&#160;goes&#160;to step 5.</p>
<p style="position:absolute;top:648px;left:241px;white-space:nowrap" class="ft06">Figure&#160;11-9. &#160;Example Masked&#160;Response for Packed&#160;Operations</p>
<p style="position:absolute;top:442px;left:257px;white-space:nowrap" class="ft00">X3</p>
<p style="position:absolute;top:443px;left:381px;white-space:nowrap" class="ft00">X2</p>
<p style="position:absolute;top:443px;left:488px;white-space:nowrap" class="ft00">X1</p>
<p style="position:absolute;top:443px;left:578px;white-space:nowrap" class="ft00">X0&#160;(Denormal)</p>
<p style="position:absolute;top:509px;left:265px;white-space:nowrap" class="ft00">Y3 (Denormal)</p>
<p style="position:absolute;top:510px;left:396px;white-space:nowrap" class="ft00">Y2</p>
<p style="position:absolute;top:510px;left:505px;white-space:nowrap" class="ft00">Y1 Y0&#160;</p>
<p style="position:absolute;top:603px;left:239px;white-space:nowrap" class="ft00">Tiny, Inexact, Finite</p>
<p style="position:absolute;top:603px;left:464px;white-space:nowrap" class="ft00">Normalized&#160;Finite</p>
<p style="position:absolute;top:552px;left:254px;white-space:nowrap" class="ft00">MULPS</p>
<p style="position:absolute;top:555px;left:380px;white-space:nowrap" class="ft00">MULPS</p>
<p style="position:absolute;top:556px;left:485px;white-space:nowrap" class="ft00">MULPS</p>
<p style="position:absolute;top:554px;left:588px;white-space:nowrap" class="ft00">MULPS</p>
<p style="position:absolute;top:601px;left:393px;white-space:nowrap" class="ft04">∞</p>
<p style="position:absolute;top:603px;left:569px;white-space:nowrap" class="ft00">Normalized Finite</p>
</div>
</body>
</html>
