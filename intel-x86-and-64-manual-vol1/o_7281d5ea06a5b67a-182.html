<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 182</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:14px;font-family:Times;color:#0860a8;}
	.ft04{font-size:16px;font-family:Times;color:#0860a8;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page182-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a182.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">7-18&#160;Vol. 1</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">PROGRAMMING WITH GENERAL-PURPOSE INSTRUCTIONS</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft06">The&#160;CALL&#160;(call&#160;procedure)&#160;and&#160;RET&#160;(return from procedure)&#160;instructions&#160;allow&#160;a jump&#160;from one procedure&#160;to&#160;<br/>another and&#160;a subsequent return&#160;to the&#160;calling&#160;procedure.&#160;EFLAGS&#160;register contents&#160;are automatically stored on&#160;<br/>the stack&#160;along with the&#160;return instruction pointer&#160;when&#160;the processor services an&#160;interrupt.<br/>The INTO&#160;instruction raises&#160;the overflow exception&#160;if&#160;the OF&#160;flag is&#160;set. If&#160;the flag&#160;is clear,&#160;execution&#160;continues&#160;<br/>without raising the&#160;exception. This&#160;instruction&#160;allows&#160;software&#160;to access the overflow&#160;exception handler explicitly&#160;to&#160;<br/>check for overflow conditions.<br/>The BOUND&#160;instruction&#160;compares a&#160;signed value against&#160;upper and&#160;lower bounds, and raises the&#160;“BOUND&#160;range&#160;<br/>exceeded” exception if&#160;the&#160;value&#160;is less&#160;than the&#160;lower&#160;bound or&#160;greater&#160;than&#160;the upper&#160;bound.&#160;This instruction is&#160;<br/>useful for operations such as&#160;checking an&#160;array index&#160;to&#160;make&#160;sure&#160;it falls&#160;within the&#160;range defined for&#160;the array.</p>
<p style="position:absolute;top:292px;left:68px;white-space:nowrap" class="ft03">7.3.8.5 &#160;</p>
<p style="position:absolute;top:292px;left:152px;white-space:nowrap" class="ft03">Software&#160;Interrupt Instructions&#160;in 64-bit&#160;Mode and&#160;Compatibility Mode</p>
<p style="position:absolute;top:320px;left:68px;white-space:nowrap" class="ft08">In 64-bit mode, the&#160;stack size is&#160;8 bytes&#160;wide.&#160;IRET must&#160;pop&#160;8-byte&#160;items off&#160;the stack.&#160;SS:RSP&#160;pops uncondition-<br/>ally. BOUND&#160;is not supported.<br/>In compatibility mode, SS:RSP is&#160;popped only if the&#160;CPL&#160;changes.</p>
<p style="position:absolute;top:411px;left:68px;white-space:nowrap" class="ft04">7.3.9 String&#160;</p>
<p style="position:absolute;top:411px;left:201px;white-space:nowrap" class="ft04">Operations</p>
<p style="position:absolute;top:442px;left:68px;white-space:nowrap" class="ft06">The&#160;GP instructions includes&#160;a set of&#160;<b>string&#160;instructions</b>&#160;that&#160;are designed to access large&#160;data&#160;structures; these&#160;<br/>are introduc<a href="o_7281d5ea06a5b67a-182.html">ed in Section&#160;7.3.9.1.</a><a href="o_7281d5ea06a5b67a-183.html">&#160;Section 7.3.9.2 describ</a>es&#160;how REP&#160;prefixes&#160;can be&#160;used&#160;with these&#160;instructions&#160;<br/>to perform&#160;more complex&#160;<b>repeated string&#160;operations</b>. Certain processors optimize&#160;repeated&#160;string operations&#160;<br/>with&#160;<b>fast-string operation</b>, as described<a href="o_7281d5ea06a5b67a-183.html">&#160;in Section 7.3.9.3. Se</a><a href="o_7281d5ea06a5b67a-184.html">ction 7.3.9.4 ex</a>plains how string operations can be&#160;<br/>used&#160;in 64-bit mode.</p>
<p style="position:absolute;top:552px;left:68px;white-space:nowrap" class="ft03">7.3.9.1 &#160;</p>
<p style="position:absolute;top:552px;left:152px;white-space:nowrap" class="ft03">String Instructions</p>
<p style="position:absolute;top:580px;left:68px;white-space:nowrap" class="ft06">The&#160;MOVS (Move String), CMPS (Compare string),&#160;SCAS&#160;(Scan string), LODS (Load string), and STOS (Store&#160;<br/>string)&#160;instructions&#160;permit large&#160;data structures, such&#160;as alphanumeric&#160;character strings,&#160;to be&#160;moved and&#160;exam-<br/>ined&#160;in memory. These&#160;instructions&#160;operate on individual&#160;elements&#160;in&#160;a&#160;string, which&#160;can be&#160;a&#160;byte,&#160;word, or&#160;<br/>doubleword.&#160;The&#160;string&#160;elements&#160;to be&#160;operated&#160;on are&#160;identified&#160;with&#160;the ESI (source&#160;string element) and&#160;EDI&#160;<br/>(destination string element) registers. Both&#160;of these registers&#160;contain absolute addresses (offsets&#160;into a segment)&#160;<br/>that point&#160;to a&#160;string element.&#160;<br/>By default,&#160;the ESI&#160;register addresses&#160;the segment identified&#160;with the&#160;DS&#160;segment register.&#160;A&#160;segment-override&#160;<br/>prefix allows the ESI&#160;register to be associated&#160;with&#160;the CS,&#160;SS, ES, FS, or GS&#160;segment register. The&#160;EDI&#160;register&#160;<br/>addresses the&#160;segment&#160;identified with the&#160;ES segment register;&#160;no segment override&#160;is allowed for the&#160;EDI&#160;register.&#160;<br/>The&#160;use&#160;of two&#160;different segment registers in&#160;the&#160;string instructions permits operations to be performed on strings&#160;<br/>located&#160;in&#160;different segments.&#160;Or by associating the ESI&#160;register with the ES segment register, both the source and&#160;<br/>destination strings&#160;can&#160;be located in the&#160;same segment. (This latter condition can&#160;also be achieved by loading the&#160;<br/>DS&#160;and ES&#160;segment&#160;registers with the&#160;same segment selector&#160;and allowing the&#160;ESI&#160;register&#160;to default&#160;to the&#160;DS&#160;<br/>register.)<br/>The MOVS instruction&#160;moves the string element&#160;addressed by&#160;the ESI register to the&#160;location&#160;addressed&#160;by the EDI&#160;<br/>register. The assembler recognizes three&#160;“short&#160;forms” of this&#160;instruction, which&#160;specify the&#160;size of the&#160;string&#160;to&#160;be&#160;<br/>moved: MOVSB&#160;(move byte&#160;string),&#160;MOVSW (move&#160;word string), and MOVSD (move&#160;doubleword&#160;string).<br/>The CMPS instruction&#160;subtracts the&#160;destination&#160;string element&#160;from&#160;the source&#160;string element and updates the&#160;<br/>status&#160;flags (CF,&#160;ZF, OF, SF,&#160;PF,&#160;and AF) in&#160;the EFLAGS&#160;register according to&#160;the results. Neither string&#160;element&#160;is&#160;<br/>written back to memory. The assembler recognizes&#160;three “short&#160;forms” of the CMPS instruction: CMPSB&#160;(compare&#160;<br/>byte&#160;strings), CMPSW (compare word strings),&#160;and&#160;CMPSD&#160;(compare&#160;doubleword&#160;strings).<br/>The&#160;SCAS&#160;instruction subtracts the&#160;destination&#160;string element from the&#160;contents of the&#160;EAX,&#160;AX,&#160;or AL&#160;register&#160;<br/>(depending&#160;on operand length) and&#160;updates the&#160;status flags according to&#160;the results. The string&#160;element&#160;and&#160;<br/>register contents&#160;are not&#160;modified.&#160;The&#160;following&#160;“short&#160;forms” of&#160;the&#160;SCAS&#160;instruction&#160;specify the operand&#160;length:&#160;<br/>SCASB (scan&#160;byte&#160;string), SCASW (scan&#160;word&#160;string), and SCASD (scan&#160;doubleword&#160;string).<br/>The LODS instruction&#160;loads the&#160;source string element&#160;identified by&#160;the ESI&#160;register into the&#160;EAX register&#160;(for&#160;a&#160;<br/>doubleword string), the&#160;AX register&#160;(for&#160;a word string),&#160;or&#160;the&#160;AL register (for a&#160;byte string). The “short forms”&#160;for&#160;</p>
</div>
</body>
</html>
