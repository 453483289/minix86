<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 185</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:14px;font-family:Times;color:#0860a8;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:8px;font-family:Times;color:#000000;}
	.ft08{font-size:7px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft012{font-size:7px;line-height:9px;font-family:Times;color:#000000;}
	.ft013{font-size:7px;line-height:10px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page185-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_7281d5ea06a5b67a185.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:775px;white-space:nowrap" class="ft00">Vol. 1&#160;7-21</p>
<p style="position:absolute;top:47px;left:510px;white-space:nowrap" class="ft01">PROGRAMMING WITH GENERAL-PURPOSE INSTRUCTIONS</p>
<p style="position:absolute;top:98px;left:69px;white-space:nowrap" class="ft02">7.3.12&#160;</p>
<p style="position:absolute;top:98px;left:149px;white-space:nowrap" class="ft02">Enter and Leave Instructions</p>
<p style="position:absolute;top:129px;left:69px;white-space:nowrap" class="ft09">The&#160;ENTER&#160;and LEAVE instructions provide machine-language&#160;support for procedure&#160;calls in&#160;block-structured&#160;<br/>languages,&#160;such as&#160;C&#160;and Pascal. These instructions&#160;and&#160;the call&#160;and return&#160;mechanism&#160;that they support are&#160;<br/>described in&#160;detail&#160;<a href="o_7281d5ea06a5b67a-158.html">in Section 6.5, “Procedure&#160;Calls for Block-Structured Languages”.</a></p>
<p style="position:absolute;top:212px;left:69px;white-space:nowrap" class="ft02">7.3.13&#160;</p>
<p style="position:absolute;top:212px;left:149px;white-space:nowrap" class="ft02">Flag Control (EFLAG) Instructions</p>
<p style="position:absolute;top:243px;left:69px;white-space:nowrap" class="ft09">The Flag Control&#160;(EFLAG) instructions allow the&#160;state&#160;of&#160;selected flags&#160;in&#160;the EFLAGS register&#160;to be&#160;read or modi-<br/>fied. For the&#160;purpose&#160;of&#160;this discussion, these instructions are&#160;further divided&#160;into&#160;subordinate&#160;subgroups&#160;of&#160;<br/>instructions that&#160;manipulate:</p>
<p style="position:absolute;top:298px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:298px;left:95px;white-space:nowrap" class="ft03">Carry&#160;and direction flags</p>
<p style="position:absolute;top:320px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:321px;left:95px;white-space:nowrap" class="ft03">The EFLAGS&#160;register</p>
<p style="position:absolute;top:343px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:343px;left:95px;white-space:nowrap" class="ft03">Interrupt flags</p>
<p style="position:absolute;top:388px;left:69px;white-space:nowrap" class="ft05">7.3.13.1&#160;&#160;&#160;Carry and&#160;Direction&#160;Flag Instructions</p>
<p style="position:absolute;top:416px;left:69px;white-space:nowrap" class="ft09">The STC (set&#160;carry flag), CLC&#160;(clear&#160;carry flag), and&#160;CMC&#160;(complement carry flag)&#160;instructions allow the&#160;CF flag&#160;in&#160;<br/>the EFLAGS register to be&#160;modified directly. They&#160;are&#160;typically used to initialize the&#160;CF flag to a known state&#160;before&#160;<br/>an&#160;instruction&#160;that uses the&#160;flag in&#160;an operation is executed. They&#160;are also used in&#160;conjunction&#160;with&#160;the&#160;rotate-with-<br/>carry instructions&#160;(RCL and&#160;RCR).<br/>The&#160;STD (set direction flag)&#160;and CLD (clear direction&#160;flag)&#160;instructions allow the&#160;DF&#160;flag in&#160;the EFLAGS&#160;register to&#160;<br/>be modified directly.&#160;The&#160;DF&#160;flag determines the&#160;direction in&#160;which index registers ESI and&#160;EDI are&#160;stepped when&#160;<br/>executing string processing instructions. If&#160;the&#160;DF flag is clear,&#160;the index registers are incremented after&#160;each&#160;iter-<br/>ation of a&#160;string instruction; if&#160;the&#160;DF flag&#160;is set,&#160;the registers&#160;are decremented.</p>
<p style="position:absolute;top:583px;left:69px;white-space:nowrap" class="ft05">7.3.13.2&#160;&#160;&#160;EFLAGS Transfer Instructions</p>
<p style="position:absolute;top:612px;left:69px;white-space:nowrap" class="ft09">The EFLAGS&#160;transfer&#160;instructions&#160;allow groups of flags in the EFLAGS&#160;register to be copied&#160;to a&#160;register or&#160;memory&#160;<br/>or be loaded&#160;from a&#160;register or&#160;memory.&#160;<br/>The LAHF (load&#160;AH from flags)&#160;and SAHF&#160;(store&#160;AH&#160;into flags) instructions operate&#160;on five&#160;of the&#160;EFLAGS&#160;status&#160;<br/>flags (SF,&#160;ZF, AF,&#160;PF,&#160;and CF).&#160;The&#160;LAHF&#160;instruction copies&#160;the&#160;status&#160;flags&#160;to&#160;bits&#160;7,&#160;6,&#160;4,&#160;2,&#160;and&#160;0 of the AH&#160;register,&#160;<br/>respectively. The contents of&#160;the remaining&#160;bits&#160;in&#160;the register (bits 5, 3,&#160;and 1) are&#160;unaffected,&#160;and the contents&#160;<br/>of&#160;the EFLAGS&#160;register&#160;remain&#160;unchanged.&#160;The&#160;SAHF instruction copies bits 7, 6,&#160;4,&#160;2,&#160;and&#160;0 from the&#160;AH&#160;register&#160;<br/>into the&#160;SF, ZF, AF,&#160;PF, and CF flags, respectively in the EFLAGS&#160;register.<br/>The PUSHF (push&#160;flags), PUSHFD (push&#160;flags&#160;double), POPF&#160;(pop flags), and POPFD&#160;(pop flags double) instructions&#160;<br/>copy&#160;the flags in the EFLAGS&#160;register to and from&#160;the&#160;stack. The&#160;PUSHF&#160;instruction&#160;pushes the&#160;lower word of&#160;the&#160;<br/>EFLAGS&#160;register onto the&#160;<a href="o_7281d5ea06a5b67a-185.html">stack (see Figure&#160;7-11</a>). The&#160;PUSHFD instruction pushes&#160;the entire EFLAGS&#160;register onto&#160;<br/>the stack&#160;(with&#160;the RF&#160;and VM&#160;flags read as&#160;clear).</p>
<p style="position:absolute;top:1024px;left:69px;white-space:nowrap" class="ft09">The&#160;POPF instruction pops a word&#160;from the&#160;stack into&#160;the&#160;EFLAGS&#160;register.&#160;Only&#160;bits 11,&#160;10,&#160;8, 7,&#160;6,&#160;4,&#160;2, and 0&#160;of&#160;<br/>the EFLAGS&#160;register&#160;are affected&#160;with all uses&#160;of&#160;this&#160;instruction. If the&#160;current&#160;privilege&#160;level (CPL)&#160;of&#160;the current&#160;</p>
<p style="position:absolute;top:978px;left:175px;white-space:nowrap" class="ft06">Figure&#160;7-11.&#160;&#160;Flags&#160;Affected&#160;by&#160;the PUSHF,&#160;POPF, PUSHFD, and&#160;POPFD&#160;Instructions</p>
<p style="position:absolute;top:852px;left:410px;white-space:nowrap" class="ft07">PUSHFD/POPFD</p>
<p style="position:absolute;top:877px;left:518px;white-space:nowrap" class="ft07">PUSHF/POPF</p>
<p style="position:absolute;top:907px;left:250px;white-space:nowrap" class="ft08">31</p>
<p style="position:absolute;top:907px;left:275px;white-space:nowrap" class="ft08">29</p>
<p style="position:absolute;top:907px;left:262px;white-space:nowrap" class="ft08">30</p>
<p style="position:absolute;top:907px;left:287px;white-space:nowrap" class="ft08">28&#160;27&#160;26&#160;25&#160;24&#160;23&#160;22&#160;21&#160;20&#160;19&#160;18&#160;17&#160;16</p>
<p style="position:absolute;top:938px;left:252px;white-space:nowrap" class="ft08">0</p>
<p style="position:absolute;top:934px;left:442px;white-space:nowrap" class="ft08">R</p>
<p style="position:absolute;top:943px;left:442px;white-space:nowrap" class="ft08">F</p>
<p style="position:absolute;top:934px;left:380px;white-space:nowrap" class="ft08">I</p>
<p style="position:absolute;top:943px;left:379px;white-space:nowrap" class="ft08">D</p>
<p style="position:absolute;top:934px;left:416px;white-space:nowrap" class="ft08">A</p>
<p style="position:absolute;top:943px;left:416px;white-space:nowrap" class="ft08">C</p>
<p style="position:absolute;top:934px;left:429px;white-space:nowrap" class="ft012">V<br/>M</p>
<p style="position:absolute;top:907px;left:452px;white-space:nowrap" class="ft08">15</p>
<p style="position:absolute;top:907px;left:478px;white-space:nowrap" class="ft08">13</p>
<p style="position:absolute;top:907px;left:465px;white-space:nowrap" class="ft08">14</p>
<p style="position:absolute;top:907px;left:490px;white-space:nowrap" class="ft08">12&#160;11&#160;10&#160;9&#160;8&#160;7&#160;6&#160;5&#160;4&#160;3&#160;2&#160;1&#160;0</p>
<p style="position:absolute;top:938px;left:454px;white-space:nowrap" class="ft08">0</p>
<p style="position:absolute;top:933px;left:645px;white-space:nowrap" class="ft08">C</p>
<p style="position:absolute;top:943px;left:645px;white-space:nowrap" class="ft08">F</p>
<p style="position:absolute;top:934px;left:594px;white-space:nowrap" class="ft012">A<br/>F</p>
<p style="position:absolute;top:933px;left:620px;white-space:nowrap" class="ft08">P</p>
<p style="position:absolute;top:943px;left:619px;white-space:nowrap" class="ft08">F&#160;1</p>
<p style="position:absolute;top:934px;left:518px;white-space:nowrap" class="ft08">D</p>
<p style="position:absolute;top:943px;left:519px;white-space:nowrap" class="ft08">F</p>
<p style="position:absolute;top:934px;left:533px;white-space:nowrap" class="ft08">I</p>
<p style="position:absolute;top:943px;left:532px;white-space:nowrap" class="ft08">F</p>
<p style="position:absolute;top:934px;left:544px;white-space:nowrap" class="ft012">T<br/>F</p>
<p style="position:absolute;top:934px;left:557px;white-space:nowrap" class="ft012">S<br/>F</p>
<p style="position:absolute;top:934px;left:569px;white-space:nowrap" class="ft012">Z<br/>F</p>
<p style="position:absolute;top:933px;left:467px;white-space:nowrap" class="ft08">N</p>
<p style="position:absolute;top:943px;left:468px;white-space:nowrap" class="ft08">T</p>
<p style="position:absolute;top:939px;left:607px;white-space:nowrap" class="ft08">0</p>
<p style="position:absolute;top:939px;left:582px;white-space:nowrap" class="ft08">0</p>
<p style="position:absolute;top:939px;left:264px;white-space:nowrap" class="ft08">0&#160;0&#160;0&#160;0&#160;0&#160;0&#160;0&#160;0&#160;0</p>
<p style="position:absolute;top:929px;left:391px;white-space:nowrap" class="ft08">V</p>
<p style="position:absolute;top:938px;left:393px;white-space:nowrap" class="ft08">I</p>
<p style="position:absolute;top:948px;left:392px;white-space:nowrap" class="ft08">P</p>
<p style="position:absolute;top:929px;left:404px;white-space:nowrap" class="ft08">V</p>
<p style="position:absolute;top:938px;left:406px;white-space:nowrap" class="ft08">I</p>
<p style="position:absolute;top:948px;left:404px;white-space:nowrap" class="ft08">F</p>
<p style="position:absolute;top:933px;left:505px;white-space:nowrap" class="ft08">O</p>
<p style="position:absolute;top:942px;left:506px;white-space:nowrap" class="ft08">F</p>
<p style="position:absolute;top:924px;left:488px;white-space:nowrap" class="ft08">I</p>
<p style="position:absolute;top:933px;left:486px;white-space:nowrap" class="ft013">O<br/>P</p>
<p style="position:absolute;top:954px;left:487px;white-space:nowrap" class="ft08">L</p>
</div>
</body>
</html>
