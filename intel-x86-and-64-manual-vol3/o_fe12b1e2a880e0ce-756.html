<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 756</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:16px;font-family:Times;color:#0860a8;}
	.ft04{font-size:8px;font-family:Times;color:#000000;}
	.ft05{font-size:18px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page756-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce756.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">18-120&#160;Vol. 3B</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">PERFORMANCE MONITORING</p>
<p style="position:absolute;top:100px;left:93px;white-space:nowrap" class="ft07">overflow or incremented condition. The external signalling&#160;of the&#160;event on the pins will lag the internal event by&#160;<br/>a few clocks as&#160;the&#160;signals are latched and&#160;buffered.</p>
<p style="position:absolute;top:141px;left:68px;white-space:nowrap" class="ft07">While a&#160;counter&#160;need not be stopped to&#160;sample its&#160;contents,&#160;it must&#160;be&#160;stopped and&#160;cleared or&#160;preset before&#160;<br/>switching to a&#160;new event.&#160;It is&#160;not possible to&#160;set&#160;one counter separately.&#160;If&#160;only&#160;one&#160;event needs&#160;to be&#160;changed,&#160;<br/>the CESR&#160;register&#160;must be&#160;read,&#160;the appropriate&#160;bits&#160;modified,&#160;and all bits&#160;must&#160;then&#160;be written&#160;back to&#160;CESR. At&#160;<br/>reset, all&#160;bits&#160;in the&#160;CESR&#160;register are cleared.</p>
<p style="position:absolute;top:241px;left:68px;white-space:nowrap" class="ft03">18.23.2&#160;&#160;Use of&#160;the Performance-Monitoring Pins</p>
<p style="position:absolute;top:271px;left:68px;white-space:nowrap" class="ft07">When performance-monitor pins PM0/BP0&#160;and/or PM1/BP1&#160;are&#160;configured&#160;to indicate&#160;when&#160;the&#160;performance-<br/>monitor counter has incremented and an “occurrence&#160;event”&#160;is being counted, the&#160;associated pin&#160;is asserted&#160;(high)&#160;<br/>each&#160;time&#160;the event occurs. When&#160;a “duration&#160;event”&#160;is&#160;being counted,&#160;the&#160;associated&#160;PM pin is&#160;asserted for the&#160;<br/>entire&#160;duration of the event. When the performance-monitor&#160;pins&#160;are configured to indicate when the counter&#160;has&#160;<br/>overflowed,&#160;the associated PM&#160;pin is&#160;asserted when the&#160;counter&#160;has overflowed.<br/>When&#160;the PM0/BP0 and/or&#160;PM1/BP1 pins are&#160;configured&#160;to&#160;signal that&#160;a counter has&#160;incremented, it&#160;should be&#160;<br/>noted&#160;that&#160;although the counters&#160;may increment&#160;by&#160;1 or 2 in&#160;a&#160;single clock, the&#160;pins can only indicate that the&#160;event&#160;<br/>occurred. Moreover,&#160;since the internal&#160;clock&#160;frequency may&#160;be higher than the&#160;external clock&#160;frequency,&#160;a single&#160;<br/>external clock&#160;may correspond to&#160;multiple&#160;internal clocks.<br/>A “count up&#160;to”&#160;function&#160;may&#160;be provided&#160;when&#160;the&#160;event&#160;pin is&#160;programmed&#160;to&#160;signal&#160;an&#160;overflow of&#160;the counter.&#160;<br/>Because&#160;the&#160;counters&#160;are&#160;40 bits,&#160;a carry out of bit 39&#160;indicates an&#160;overflow.&#160;A&#160;counter may be&#160;preset&#160;to a&#160;specific&#160;<br/>value&#160;less&#160;then 2</p>
<p style="position:absolute;top:465px;left:181px;white-space:nowrap" class="ft04">40</p>
<p style="position:absolute;top:468px;left:195px;white-space:nowrap" class="ft02">&#160;−&#160;1.&#160;After the&#160;counter has&#160;been&#160;enabled and&#160;the&#160;prescribed&#160;number&#160;of events has&#160;transpired,&#160;</p>
<p style="position:absolute;top:484px;left:68px;white-space:nowrap" class="ft07">the&#160;counter will overflow.&#160;<br/>Approximately 5 clocks later,&#160;the overflow is indicated externally and appropriate action, such as signaling an inter-<br/>rupt, may then&#160;be&#160;taken.<br/>The PM0/BP0 and&#160;PM1/BP1 pins also serve to indicate&#160;breakpoint matches during in-circuit emulation, during&#160;which&#160;<br/>time the counter increment&#160;or overflow function&#160;of these pins is&#160;not&#160;available.&#160;After RESET,&#160;the&#160;PM0/BP0 and&#160;<br/>PM1/BP1 pins&#160;are configured for performance&#160;monitoring, however a&#160;hardware debugger may&#160;reconfigure these&#160;<br/>pins to indicate&#160;breakpoint matches.</p>
<p style="position:absolute;top:649px;left:68px;white-space:nowrap" class="ft03">18.23.3 Events&#160;</p>
<p style="position:absolute;top:649px;left:208px;white-space:nowrap" class="ft03">Counted</p>
<p style="position:absolute;top:679px;left:68px;white-space:nowrap" class="ft07">Events&#160;that&#160;performance-monitoring&#160;counters&#160;can be&#160;set to&#160;count&#160;and record (using&#160;CTR0 and CTR1) are&#160;divided in&#160;<br/>two categories:&#160;occurrence and&#160;duration:</p>
<p style="position:absolute;top:718px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:718px;left:93px;white-space:nowrap" class="ft07"><b>Occurrence events</b>&#160;— Counts&#160;are&#160;incremented&#160;each time&#160;an event takes place.&#160;If PM0/BP0 or PM1/BP1 pins&#160;<br/>are&#160;used&#160;to indicate&#160;when a counter increments,&#160;the&#160;pins&#160;are asserted each clock counters increment. But if an&#160;<br/>event happens twice&#160;in one&#160;clock,&#160;the&#160;counter increments by 2 (the&#160;pins are asserted&#160;only&#160;once).</p>
<p style="position:absolute;top:773px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:774px;left:93px;white-space:nowrap" class="ft07"><b>Duration events</b>&#160;— Counters increment&#160;the total&#160;number of&#160;clocks that&#160;the condition&#160;is true. When&#160;used&#160;to&#160;<br/>indicate&#160;when counters&#160;increment,&#160;PM0/BP0 and/or&#160;PM1/BP1 pins are&#160;asserted&#160;for the&#160;duration.</p>
</div>
</body>
</html>
