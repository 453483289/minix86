<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1144</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:8px;font-family:Times;color:#000000;}
	.ft06{font-size:16px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1144-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1144.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">27-26&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">VM&#160;EXITS</p>
<p style="position:absolute;top:102px;left:119px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:100px;left:144px;white-space:nowrap" class="ft03">For&#160;CR4,&#160;any bits that are fixed&#160;in VMX&#160;oper<a href="o_fe12b1e2a880e0ce-1045.html">ation (see Section 23.8)</a>.</p>
<p style="position:absolute;top:124px;left:93px;white-space:nowrap" class="ft07">—&#160;CR4.PAE&#160;is set to&#160;1 if&#160;the “host address-space size”&#160;VM-exit&#160;control is&#160;1.<br/>—&#160;CR4.PCIDE&#160;is set&#160;to 0&#160;if the&#160;“host&#160;address-space&#160;size” VM-exit&#160;control&#160;is 0.</p>
<p style="position:absolute;top:170px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:171px;left:93px;white-space:nowrap" class="ft03">DR7 is&#160;set to&#160;400H.</p>
<p style="position:absolute;top:193px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:193px;left:93px;white-space:nowrap" class="ft08">The&#160;following MSRs&#160;are established as&#160;follows:<br/>—&#160;The IA32_DEBUGCTL&#160;MSR is&#160;cleared to&#160;00000000_00000000H.<br/>—&#160;The IA32_SYSENTER_CS&#160;MSR&#160;is loaded&#160;from the&#160;IA32_SYSENTER_CS field.&#160;Since&#160;that field has only 32&#160;</p>
<p style="position:absolute;top:258px;left:119px;white-space:nowrap" class="ft03">bits, bits&#160;63:32 of the&#160;MSR are&#160;cleared to&#160;0.&#160;</p>
<p style="position:absolute;top:282px;left:93px;white-space:nowrap" class="ft03">—&#160;IA32_SYSENTER_ESP MSR&#160;and IA32_SYSENTER_EIP MSR&#160;are&#160;loaded&#160;from the&#160;IA32_SYSENTER_ESP&#160;field&#160;</p>
<p style="position:absolute;top:298px;left:119px;white-space:nowrap" class="ft09">and&#160;the IA32_SYSENTER_EIP field,&#160;respectively.<br/>If the processor does not&#160;support the Intel 64 architecture,&#160;these&#160;fields&#160;have&#160;only&#160;32&#160;bits;&#160;bits&#160;63:32&#160;of the&#160;<br/>MSRs are cleared&#160;to&#160;0.<br/>If&#160;the&#160;processor does&#160;support&#160;the&#160;Intel 64&#160;architecture&#160;and&#160;the&#160;processor supports N&#160;&lt;&#160;64&#160;linear-address&#160;<br/>bits, each of&#160;bits&#160;63:N is&#160;set&#160;to the&#160;value of&#160;bit&#160;N–1.</p>
<p style="position:absolute;top:377px;left:468px;white-space:nowrap" class="ft05">1</p>
<p style="position:absolute;top:403px;left:93px;white-space:nowrap" class="ft03">—&#160;The following&#160;steps are&#160;performed on processors that&#160;support&#160;Intel 64&#160;architecture:</p>
<p style="position:absolute;top:429px;left:119px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:427px;left:144px;white-space:nowrap" class="ft09">The&#160;MSRs&#160;FS.base&#160;and GS.base&#160;are&#160;loaded&#160;from the&#160;base-address fields&#160;for FS&#160;and&#160;GS,&#160;respectively&#160;<br/>(s<a href="o_fe12b1e2a880e0ce-1144.html">ee Section&#160;27.5.2</a>).</p>
<p style="position:absolute;top:469px;left:119px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:468px;left:144px;white-space:nowrap" class="ft09">The&#160;LMA&#160;and&#160;LME&#160;bits&#160;in the&#160;IA32_EFER&#160;MSR are&#160;each&#160;loaded with&#160;the setting of&#160;the “host address-<br/>space&#160;size” VM-exit control.</p>
<p style="position:absolute;top:508px;left:93px;white-space:nowrap" class="ft03">—&#160;If the “load IA32_PERF_GLOBAL_CTRL”&#160;VM-exit control is 1,&#160;the IA32_PERF_GLOBAL_CTRL MSR is loaded&#160;</p>
<p style="position:absolute;top:525px;left:119px;white-space:nowrap" class="ft09">from the&#160;IA32_PERF_GLOBAL_CTRL field.&#160;Bits that&#160;are reserved&#160;in that&#160;MSR are&#160;maintained&#160;with their&#160;<br/>reserved&#160;values.</p>
<p style="position:absolute;top:565px;left:93px;white-space:nowrap" class="ft03">—&#160;If the “load IA32_PAT” VM-exit&#160;control is 1, the IA32_PAT&#160;MSR is loaded from the&#160;IA32_PAT field. Bits&#160;that&#160;</p>
<p style="position:absolute;top:582px;left:119px;white-space:nowrap" class="ft03">are reserved&#160;in that&#160;MSR are&#160;maintained&#160;with their&#160;reserved&#160;values.</p>
<p style="position:absolute;top:606px;left:93px;white-space:nowrap" class="ft03">—&#160;If the&#160;“load IA32_EFER”&#160;VM-exit&#160;control&#160;is 1,&#160;the IA32_EFER MSR is&#160;loaded&#160;from the&#160;IA32_EFER field.&#160;Bits&#160;</p>
<p style="position:absolute;top:622px;left:119px;white-space:nowrap" class="ft03">that are reserved in&#160;that&#160;MSR&#160;are&#160;maintained with their&#160;reserved&#160;values.</p>
<p style="position:absolute;top:646px;left:93px;white-space:nowrap" class="ft03">—&#160;If&#160;the “clear&#160;IA32_BNDCFGS” VM-exit control is&#160;1,&#160;the&#160;IA32_BNDCFGS&#160;MSR is&#160;cleared to&#160;</p>
<p style="position:absolute;top:663px;left:119px;white-space:nowrap" class="ft03">00000000_00000000H; otherwise,&#160;it&#160;is not modified.</p>
<p style="position:absolute;top:685px;left:93px;white-space:nowrap" class="ft09">With&#160;the exception of FS.base&#160;and GS.base, any&#160;of&#160;these&#160;MSRs&#160;is subsequently overwritten if it&#160;appears in the&#160;<br/>VM-exit MSR-load&#160;area.&#160;Se<a href="o_fe12b1e2a880e0ce-1147.html">e Section&#160;27.6.</a></p>
<p style="position:absolute;top:752px;left:68px;white-space:nowrap" class="ft06">27.5.2&#160;</p>
<p style="position:absolute;top:752px;left:148px;white-space:nowrap" class="ft06">Loading Host&#160;Segment and Descriptor-Table Registers</p>
<p style="position:absolute;top:783px;left:68px;white-space:nowrap" class="ft03">Each&#160;of the&#160;registers CS, SS,&#160;DS,&#160;ES, FS, GS, and TR&#160;is&#160;loaded&#160;as follows (see below&#160;for&#160;the treatment&#160;of LDTR):</p>
<p style="position:absolute;top:805px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:805px;left:93px;white-space:nowrap" class="ft09">The selector is&#160;loaded from&#160;the selector&#160;field. The segment is&#160;unusable if&#160;its selector is&#160;loaded with&#160;zero. The&#160;<br/><a href="o_fe12b1e2a880e0ce-1101.html">checks specified&#160;Section&#160;26.3.1.2 limit the&#160;</a>selector values&#160;that may be loaded.&#160;In particular, CS&#160;and TR are&#160;<br/>never&#160;loaded with zero&#160;and are&#160;thus&#160;never unusable. SS&#160;can&#160;be&#160;loaded with zero only on&#160;processors&#160;that&#160;<br/>support&#160;Intel 64 architecture and&#160;only&#160;if&#160;the VM&#160;exit is&#160;to&#160;64-bit mode&#160;(64-bit mode&#160;allows use&#160;of&#160;segments&#160;<br/>marked unusable).</p>
<p style="position:absolute;top:893px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:894px;left:93px;white-space:nowrap" class="ft07">The&#160;base&#160;address&#160;is set&#160;as follows:<br/>—&#160;CS.&#160;Cleared to zero.<br/>—&#160;SS,&#160;DS,&#160;and ES.&#160;Undefined&#160;if&#160;the segment&#160;is&#160;unusable;&#160;otherwise,&#160;cleared to zero.<br/>—&#160;FS&#160;and GS. Undefined (but, on processors that&#160;support&#160;Intel 64&#160;architecture,&#160;canonical)&#160;if the&#160;segment&#160;is&#160;</p>
<p style="position:absolute;top:982px;left:119px;white-space:nowrap" class="ft03">unusable&#160;and&#160;the VM&#160;exit is&#160;not to 64-bit&#160;mode; otherwise,&#160;loaded from the&#160;base-address field.</p>
<p style="position:absolute;top:1038px;left:68px;white-space:nowrap" class="ft03">1.&#160;Software&#160;can&#160;determine the number&#160;N by executing&#160;CPUID with&#160;80000008H in&#160;EAX. The number&#160;of&#160;linear-address&#160;bits supported&#160;is&#160;</p>
<p style="position:absolute;top:1054px;left:89px;white-space:nowrap" class="ft03">returned in bits 15:8 of&#160;EAX.</p>
</div>
</body>
</html>
