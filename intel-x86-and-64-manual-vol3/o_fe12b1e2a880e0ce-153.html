<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 153</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:21px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#0860a8;}
	.ft05{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page153-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce153.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:774px;white-space:nowrap" class="ft00">Vol. 3A&#160;5-1</p>
<p style="position:absolute;top:96px;left:714px;white-space:nowrap" class="ft01">CHAPTER 5</p>
<p style="position:absolute;top:120px;left:699px;white-space:nowrap" class="ft01">PROTECTION</p>
<p style="position:absolute;top:190px;left:68px;white-space:nowrap" class="ft05">In protected mode,&#160;the Intel 64 and IA-32&#160;architectures&#160;provide&#160;a protection&#160;mechanism&#160;that operates at both&#160;the&#160;<br/>segment level&#160;and the&#160;page level. This&#160;protection&#160;mechanism provides the&#160;ability&#160;to limit&#160;access to&#160;certain&#160;<br/>segments or pages based on privilege levels (four&#160;privilege&#160;levels for segments and two privilege&#160;levels for pages).&#160;<br/>For example,&#160;critical operating-system&#160;code&#160;and data can be&#160;protected by&#160;placing&#160;them&#160;in more&#160;privileged&#160;<br/>segments than those&#160;that contain&#160;applications&#160;code. The&#160;processor‚Äôs&#160;protection mechanism will&#160;then&#160;prevent appli-<br/>cation&#160;code&#160;from accessing&#160;the&#160;operating-system code&#160;and data&#160;in any&#160;but a&#160;controlled, defined&#160;manner.<br/>Segment and page&#160;protection can be used&#160;at all stages of&#160;software&#160;development to assist in&#160;localizing and detecting&#160;<br/>design&#160;problems and&#160;bugs.&#160;It&#160;can also&#160;be&#160;incorporated&#160;into&#160;end-products&#160;to offer added&#160;robustness&#160;to operating&#160;<br/>systems,&#160;utilities software, and applications software.<br/>When&#160;the protection mechanism is&#160;used, each&#160;memory&#160;reference is&#160;checked to&#160;verify that&#160;it satisfies&#160;various&#160;<br/>protection checks. All checks are&#160;made&#160;before&#160;the memory cycle is&#160;started; any&#160;violation&#160;results in&#160;an&#160;exception.&#160;<br/>Because&#160;checks are&#160;performed in parallel&#160;with&#160;address translation,&#160;there&#160;is no&#160;performance&#160;penalty.&#160;The protection&#160;<br/>checks that&#160;are performed fall&#160;into&#160;the following categories:</p>
<p style="position:absolute;top:425px;left:68px;white-space:nowrap" class="ft03">‚Ä¢</p>
<p style="position:absolute;top:426px;left:93px;white-space:nowrap" class="ft02">Limit checks.</p>
<p style="position:absolute;top:448px;left:68px;white-space:nowrap" class="ft03">‚Ä¢</p>
<p style="position:absolute;top:448px;left:93px;white-space:nowrap" class="ft02">Type&#160;checks.</p>
<p style="position:absolute;top:470px;left:68px;white-space:nowrap" class="ft03">‚Ä¢</p>
<p style="position:absolute;top:471px;left:93px;white-space:nowrap" class="ft02">Privilege&#160;level checks.</p>
<p style="position:absolute;top:493px;left:68px;white-space:nowrap" class="ft03">‚Ä¢</p>
<p style="position:absolute;top:493px;left:93px;white-space:nowrap" class="ft02">Restriction&#160;of addressable&#160;domain.</p>
<p style="position:absolute;top:515px;left:68px;white-space:nowrap" class="ft03">‚Ä¢</p>
<p style="position:absolute;top:516px;left:93px;white-space:nowrap" class="ft02">Restriction&#160;of procedure&#160;entry-points.</p>
<p style="position:absolute;top:538px;left:68px;white-space:nowrap" class="ft03">‚Ä¢</p>
<p style="position:absolute;top:538px;left:93px;white-space:nowrap" class="ft02">Restriction&#160;of instruction&#160;set.</p>
<p style="position:absolute;top:562px;left:68px;white-space:nowrap" class="ft05">All protection violation results&#160;in an exception being generated.&#160;See<a href="o_fe12b1e2a880e0ce-187.html">&#160;Chapter 6,&#160;‚ÄúInterrupt&#160;and&#160;Exception Handling,‚Äù</a>&#160;<br/>for an&#160;explanation of the&#160;exception mechanism.&#160;This chapter&#160;describes&#160;the protection mechanism and&#160;the viola-<br/>tions&#160;which lead to&#160;exceptions.<br/>The&#160;following sections&#160;describe the&#160;protection&#160;mechanism available in protected mode. Se<a href="˛ˇ">e&#160;Chapter 20,&#160;‚Äú8086&#160;<br/>Emulation,‚Äù for information&#160;</a>on protection&#160;in real-address and virtual-8086 mode.</p>
<p style="position:absolute;top:691px;left:68px;white-space:nowrap" class="ft04">5.1&#160;</p>
<p style="position:absolute;top:691px;left:147px;white-space:nowrap" class="ft04">ENABLING AND DISABLING SEGMENT AND PAGE PROTECTION</p>
<p style="position:absolute;top:727px;left:68px;white-space:nowrap" class="ft05">Setting&#160;the PE&#160;flag in&#160;register CR0 causes the&#160;processor&#160;to switch to protected mode, which in turn enables&#160;the&#160;<br/>segment-protection mechanism.&#160;Once in&#160;protected mode, there is&#160;no&#160;control bit for turning the&#160;protection&#160;mecha-<br/>nism&#160;on&#160;or&#160;off.&#160;The&#160;part&#160;of&#160;the&#160;segment-protection&#160;mechanism&#160;that&#160;is&#160;based&#160;on&#160;privilege&#160;levels&#160;can&#160;essentially&#160;be&#160;<br/>disabled&#160;while&#160;still&#160;in&#160;protected&#160;mode&#160;by&#160;assigning&#160;a&#160;privilege level of 0 (most privileged) to all segment selectors&#160;<br/>and segment descriptors. This&#160;action disables&#160;the&#160;privilege&#160;level protection barriers between segments,&#160;but other&#160;<br/>protection checks such&#160;as limit&#160;checking&#160;and type checking&#160;are still carried out.<br/>Page-level&#160;protection is automatically enabled when paging&#160;is enabled (by setting&#160;the PG&#160;flag in register CR0).&#160;Here&#160;<br/>again there is no mode bit for turning off page-level&#160;protection once paging is enabled.&#160;However,&#160;page-level protec-<br/>tion can be&#160;disabled by&#160;performing the&#160;following&#160;operations:</p>
<p style="position:absolute;top:889px;left:68px;white-space:nowrap" class="ft03">‚Ä¢</p>
<p style="position:absolute;top:889px;left:93px;white-space:nowrap" class="ft02">Clear&#160;the WP&#160;flag&#160;in&#160;control register&#160;CR0.</p>
<p style="position:absolute;top:911px;left:68px;white-space:nowrap" class="ft03">‚Ä¢</p>
<p style="position:absolute;top:912px;left:93px;white-space:nowrap" class="ft02">Set&#160;the read/write (R/W) and&#160;user/supervisor (U/S)&#160;flags for each&#160;page-directory and page-table entry.&#160;</p>
<p style="position:absolute;top:936px;left:68px;white-space:nowrap" class="ft02">This&#160;action makes each&#160;page&#160;a&#160;writable,&#160;user page,&#160;which&#160;in effect&#160;disables page-level&#160;protection.</p>
</div>
</body>
</html>
