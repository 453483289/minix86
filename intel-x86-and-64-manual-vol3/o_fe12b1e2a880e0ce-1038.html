<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1038</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#0860a8;}
	.ft04{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1038-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1038.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">22-34&#160;Vol. 3B</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">ARCHITECTURE&#160;COMPATIBILITY</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft04">Specifically,&#160;the store&#160;buffers are&#160;flushed&#160;before&#160;the&#160;IN&#160;instruction&#160;is&#160;executed.&#160;No reads (as&#160;a result of cache&#160;miss)&#160;<br/>are&#160;reordered around&#160;previously&#160;generated&#160;writes sitting&#160;in&#160;the&#160;store&#160;buffers.&#160;The implication&#160;of this is&#160;that the&#160;<br/>store buffers will&#160;be&#160;flushed or emptied&#160;before&#160;a&#160;subsequent bus&#160;cycle&#160;is run on&#160;the external&#160;bus.<br/>On both&#160;the&#160;Intel486&#160;and Pentium processors,&#160;under certain conditions, a&#160;memory read will go onto the&#160;external&#160;<br/>bus before&#160;the pending memory writes in the&#160;buffer&#160;even&#160;though the writes occurred&#160;earlier in&#160;the&#160;program execu-<br/>tion. A memory&#160;read&#160;will only&#160;be reordered&#160;in front of&#160;all&#160;writes pending in&#160;the buffers&#160;if&#160;all writes&#160;pending in&#160;the&#160;<br/>buffers&#160;are cache hits&#160;and the&#160;read&#160;is a&#160;cache miss. Under these&#160;conditions, the&#160;Intel486&#160;and&#160;Pentium&#160;processors&#160;<br/>will&#160;not read from an external&#160;memory&#160;location that&#160;needs&#160;to be updated&#160;by&#160;one of the&#160;pending writes.&#160;<br/>During a&#160;locked&#160;bus&#160;cycle, the&#160;Intel486 processor will&#160;always&#160;access&#160;external memory,&#160;it will never look for&#160;the&#160;<br/>location in the&#160;on-chip cache.&#160;All&#160;data&#160;pending&#160;in the&#160;Intel486&#160;processor's store&#160;buffers will be written&#160;to&#160;memory&#160;<br/>before a&#160;locked&#160;cycle is&#160;allowed to&#160;proceed to&#160;the external&#160;bus. Thus, the&#160;locked&#160;bus&#160;cycle&#160;can be used&#160;for elimi-<br/>nating the&#160;possibility of reordering&#160;read&#160;cycles&#160;on the&#160;Intel486&#160;processor.&#160;The Pentium processor does&#160;check its&#160;<br/>cache on&#160;a read-modify-write access and,&#160;if the cache&#160;line&#160;has been&#160;modified, writes&#160;the contents back&#160;to memory&#160;<br/>before locking&#160;the bus. The P6 family&#160;processors write&#160;to their&#160;cache on&#160;a read-modify-write operation (if&#160;the&#160;<br/>access&#160;does not split across a&#160;cache line)&#160;and does&#160;not write&#160;back to&#160;system&#160;memory. If the access does&#160;split across&#160;<br/>a cache&#160;line, it&#160;locks&#160;the bus and&#160;accesses&#160;system memory.<br/>I/O&#160;reads are never&#160;reordered in front of&#160;buffered&#160;memory&#160;writes on&#160;an IA-32 processor.&#160;This&#160;ensures&#160;an update&#160;of&#160;<br/>all&#160;memory&#160;locations before reading the&#160;status from an&#160;I/O&#160;device.</p>
<p style="position:absolute;top:459px;left:68px;white-space:nowrap" class="ft03">22.35 BUS&#160;</p>
<p style="position:absolute;top:459px;left:196px;white-space:nowrap" class="ft03">LOCKING</p>
<p style="position:absolute;top:495px;left:68px;white-space:nowrap" class="ft04">The Intel&#160;286 processor performs&#160;the bus&#160;locking differently&#160;than the&#160;Intel P6 family,&#160;Pentium, Intel486, and&#160;<br/>Intel386&#160;processors. Programs&#160;that&#160;use forms of memory&#160;locking specific&#160;to the&#160;Intel&#160;286&#160;processor&#160;may&#160;not&#160;run&#160;<br/>properly when run on&#160;later processors.<br/>A&#160;locked instruction is&#160;guaranteed to&#160;lock&#160;only&#160;the area&#160;of memory&#160;defined&#160;by the&#160;destination operand, but&#160;may&#160;<br/>lock a larger&#160;memory area.&#160;For&#160;example,&#160;typical 8086 and&#160;Intel 286 configurations lock the entire&#160;physical memory&#160;<br/>space.&#160;Programmers&#160;should not depend on this.<br/>On the&#160;Intel 286&#160;processor,&#160;the LOCK prefix is&#160;sensitive&#160;to IOPL.&#160;If&#160;the&#160;CPL&#160;is greater than&#160;the IOPL,&#160;a general-<br/>protection exception (#GP)&#160;is generated.&#160;On&#160;the Intel386&#160;DX,&#160;Intel486,&#160;and&#160;Pentium,&#160;and&#160;P6&#160;family processors,&#160;no&#160;<br/>check against&#160;IOPL&#160;is&#160;performed.<br/>The Pentium processor automatically asserts&#160;the LOCK#&#160;signal&#160;when&#160;acknowledging external&#160;interrupts. After&#160;<br/>signaling&#160;an&#160;interrupt request,&#160;an external interrupt controller may&#160;use the&#160;data bus&#160;to send&#160;the interrupt&#160;vector&#160;to&#160;<br/>the&#160;processor.&#160;After receiving&#160;the&#160;interrupt request signal,&#160;the processor asserts LOCK# to&#160;insure that&#160;no&#160;other&#160;<br/>data appears on the data bus until the interrupt vector is&#160;received. This bus locking does&#160;not occur on&#160;the&#160;P6 family&#160;<br/>processors.</p>
<p style="position:absolute;top:787px;left:68px;white-space:nowrap" class="ft03">22.36 BUS&#160;</p>
<p style="position:absolute;top:787px;left:196px;white-space:nowrap" class="ft03">HOLD</p>
<p style="position:absolute;top:823px;left:68px;white-space:nowrap" class="ft04">Unlike the 8086 and Intel 286&#160;processors,&#160;but like the Intel386&#160;and Intel486&#160;processors, the P6 family&#160;and&#160;Pentium&#160;<br/>processors respond&#160;to&#160;requests for control of&#160;the bus&#160;from other&#160;potential bus masters, such as&#160;DMA&#160;controllers,&#160;<br/>between&#160;transfers&#160;of parts&#160;of an&#160;unaligned operand,&#160;such&#160;as two words&#160;which form a&#160;doubleword. Unlike&#160;the&#160;<br/>Intel386&#160;processor,&#160;the&#160;P6&#160;family,&#160;Pentium and Intel486&#160;processors&#160;respond&#160;to bus&#160;hold during reset initialization.</p>
<p style="position:absolute;top:928px;left:68px;white-space:nowrap" class="ft03">22.37&#160;&#160;MODEL-SPECIFIC EXTENSIONS TO&#160;THE IA-32</p>
<p style="position:absolute;top:964px;left:68px;white-space:nowrap" class="ft04">Certain extensions to&#160;the IA-32 are specific to a&#160;processor&#160;or family of IA-32 processors and&#160;may not&#160;be&#160;imple-<br/>mented or implemented&#160;in the same way in future processors. The following sections describe these model-specific&#160;<br/>extensions.&#160;The&#160;CPUID instruction indicates the&#160;availability of some&#160;of the&#160;model-specific&#160;features.</p>
</div>
</body>
</html>
