<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1034</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:14px;font-family:Times;color:#0860a8;}
	.ft04{font-size:16px;font-family:Times;color:#0860a8;}
	.ft05{font-size:18px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;font-family:Times;color:#000000;}
	.ft07{font-size:18px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1034-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1034.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">22-30&#160;Vol. 3B</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">ARCHITECTURE&#160;COMPATIBILITY</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft08">prefetch queue,&#160;the P6 family and&#160;Pentium&#160;processors&#160;flush&#160;the prefetch queue,&#160;eliminating the&#160;need&#160;to&#160;code a&#160;<br/>jump instruction after&#160;any writes&#160;that modify&#160;an&#160;instruction.&#160;<br/>Because&#160;the&#160;linear&#160;address of the&#160;write&#160;is&#160;checked&#160;against&#160;the linear&#160;address of the&#160;instructions&#160;that have&#160;been&#160;<br/>prefetched, special&#160;care must be&#160;taken for self-modifying code to&#160;work correctly&#160;when&#160;the&#160;physical&#160;addresses&#160;of&#160;the&#160;<br/>instruction&#160;and the&#160;written data are&#160;the same, but the&#160;linear addresses differ.&#160;In such cases,&#160;it is&#160;necessary to&#160;<br/>execute&#160;a serializing operation to&#160;flush&#160;the prefetch queue&#160;after the&#160;write and&#160;before&#160;executing&#160;the modified&#160;<br/>instruction.&#160;S<a href="o_fe12b1e2a880e0ce-273.html">ee Section 8.3,&#160;‚ÄúSerializing Instructions,‚Äù</a>&#160;for more&#160;information on&#160;serializing instructions.</p>
<p style="position:absolute;top:241px;left:432px;white-space:nowrap" class="ft03">NOTE</p>
<p style="position:absolute;top:267px;left:120px;white-space:nowrap" class="ft08">The&#160;check on&#160;linear addresses&#160;described above is&#160;not in practice&#160;a concern&#160;for&#160;compatibility.&#160;Appli-<br/>cations that include self-modifying&#160;code&#160;use the&#160;same&#160;linear address&#160;for&#160;modifying and fetching the&#160;<br/>instruction.&#160;System software, such as&#160;a debugger, that&#160;might&#160;possibly&#160;modify an&#160;instruction&#160;using&#160;<br/>a different&#160;linear&#160;address&#160;than that used to&#160;fetch&#160;the&#160;instruction must execute a&#160;serializing&#160;<br/>operation, such&#160;as IRET,&#160;before&#160;the modified instruction is&#160;executed.</p>
<p style="position:absolute;top:383px;left:68px;white-space:nowrap" class="ft04">22.29.2&#160;&#160;Disabling the L3 Cache</p>
<p style="position:absolute;top:414px;left:68px;white-space:nowrap" class="ft08">A&#160;unified third-level&#160;(L3)&#160;cache&#160;in processors based&#160;on&#160;Intel NetBurst&#160;microarchitecture (see<a href="o_fe12b1e2a880e0ce-413.html">&#160;Section 11.1,&#160;<br/>‚ÄúInternal Caches,&#160;TLBs,&#160;and&#160;Buffers‚Äù)&#160;</a>provides the&#160;third-level cache&#160;disable flag,&#160;bit 6 of the&#160;IA32_MISC_ENABLE&#160;<br/>MSR. The&#160;third-level cache disable&#160;flag&#160;allows&#160;the L3&#160;cache to be&#160;disabled and enabled,&#160;independently of&#160;the L1&#160;and&#160;<br/>L2&#160;<a href="o_fe12b1e2a880e0ce-429.html">caches (see Section 11.5.4, ‚ÄúDisabling&#160;and Enabling&#160;the&#160;L3&#160;Cache‚Äù). The th</a>ird-level&#160;cache disable&#160;flag applies&#160;<br/>only to&#160;processors&#160;based on&#160;Intel NetBurst microarchitecture.&#160;Processors&#160;with&#160;L3&#160;and based&#160;on&#160;other microarchi-<br/>tectures do&#160;not support the&#160;third-level cache&#160;disable&#160;flag.&#160;</p>
<p style="position:absolute;top:552px;left:68px;white-space:nowrap" class="ft05">22.30 PAGING</p>
<p style="position:absolute;top:588px;left:68px;white-space:nowrap" class="ft08">This section&#160;identifies enhancements&#160;made&#160;to the paging&#160;mechanism and implementation&#160;differences&#160;in&#160;the&#160;paging&#160;<br/>mechanism for&#160;various IA-32 processors.</p>
<p style="position:absolute;top:655px;left:68px;white-space:nowrap" class="ft04">22.30.1 Large&#160;</p>
<p style="position:absolute;top:655px;left:198px;white-space:nowrap" class="ft04">Pages</p>
<p style="position:absolute;top:685px;left:68px;white-space:nowrap" class="ft010">The&#160;Pentium processor extended the&#160;memory&#160;management/paging facilities&#160;of&#160;the&#160;IA-32&#160;to allow large&#160;(4 MBytes)&#160;<br/>pages sizes&#160;(see&#160;<a href="o_fe12b1e2a880e0ce-111.html">Section&#160;4.3,&#160;‚Äú32-Bit Paging‚Äù). Th</a>e&#160;first P6 family processor (the&#160;Pentium Pro processor) added&#160;a 2&#160;<br/>MByte&#160;page size&#160;to the&#160;IA-32&#160;in conjunction&#160;with the&#160;physical address&#160;extension (PAE) feature&#160;(see<a href="o_fe12b1e2a880e0ce-117.html">&#160;Section 4.4,&#160;<br/>‚ÄúPAE Paging‚Äù).&#160;<br/></a>The availability&#160;of&#160;large&#160;pages with&#160;32-bit paging on&#160;any&#160;IA-32 processor can be determined&#160;via feature&#160;bit 3&#160;(PSE)&#160;<br/>of register&#160;EDX after&#160;the CPUID&#160;instruction&#160;has been&#160;execution&#160;with an&#160;argument of 1.&#160;(Large pages are always&#160;<br/>available with PAE&#160;paging&#160;and IA-32e&#160;paging.) Intel&#160;processors that do not support the&#160;CPUID instruction&#160;support&#160;<br/>only&#160;32-bit paging and&#160;do&#160;not support&#160;page&#160;size&#160;enhancements.&#160;(See&#160;‚ÄúCPUID‚ÄîCPU Identification‚Äù&#160;in&#160;<a href="˛ˇ">Chapter 3,&#160;<br/>‚ÄúInstruction Set Reference,&#160;A-L,‚Äù in&#160;the&#160;<i>Intel¬Æ 64&#160;and&#160;IA-32&#160;Architectures Software&#160;Developer‚Äôs&#160;Manual,&#160;Volume&#160;<br/>2A</i></a>&#160;for&#160;more&#160;information on&#160;the CPUID&#160;instruction.)</p>
<p style="position:absolute;top:892px;left:68px;white-space:nowrap" class="ft04">22.30.2&#160;&#160;PCD and PWT Flags</p>
<p style="position:absolute;top:922px;left:68px;white-space:nowrap" class="ft02">The&#160;PCD&#160;and&#160;PWT flags&#160;were introduced&#160;to&#160;the IA-32 in&#160;the&#160;Intel486 processor to&#160;control&#160;the caching of pages:</p>
<p style="position:absolute;top:944px;left:68px;white-space:nowrap" class="ft07">‚Ä¢</p>
<p style="position:absolute;top:945px;left:93px;white-space:nowrap" class="ft02">PCD&#160;(page-level cache&#160;disable)&#160;flag‚ÄîControls caching&#160;on a&#160;page-by-page&#160;basis.</p>
<p style="position:absolute;top:967px;left:68px;white-space:nowrap" class="ft07">‚Ä¢</p>
<p style="position:absolute;top:967px;left:93px;white-space:nowrap" class="ft08">PWT (page-level&#160;write-through)&#160;flag‚ÄîControls the&#160;write-through/writeback caching&#160;policy on a&#160;page-by-page&#160;<br/>basis. Since the&#160;internal cache of&#160;the&#160;Intel486 processor is&#160;a&#160;write-through&#160;cache, it&#160;is not affected by the&#160;state&#160;<br/>of the&#160;PWT flag. &#160;&#160;</p>
</div>
</body>
</html>
