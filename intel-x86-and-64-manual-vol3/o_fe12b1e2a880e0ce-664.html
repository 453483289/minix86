<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 664</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#0860a8;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:20px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page664-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce664.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">18-28&#160;Vol. 3B</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">PERFORMANCE MONITORING</p>
<p style="position:absolute;top:503px;left:68px;white-space:nowrap" class="ft02">18.6.3&#160;</p>
<p style="position:absolute;top:503px;left:148px;white-space:nowrap" class="ft02">Average Offcore Request Latency Measurement</p>
<p style="position:absolute;top:534px;left:68px;white-space:nowrap" class="ft06">Average latency for offcore transactions can be determined&#160;by using both MSR_OFFCORE_RSP registers. Using two&#160;<br/>performance monitoring counters, program the two&#160;OFFCORE_RESPONSE&#160;event encodings into the corresponding&#160;<br/>IA32_PERFEVTSELx MSRs. Count&#160;the weighted cycles&#160;via&#160;MSR_OFFCORE_RSP0 by programming a&#160;request&#160;type&#160;in&#160;<br/>MSR_OFFCORE_RSP0.[15:0] and&#160;setting&#160;MSR_OFFCORE_RSP0.OUTSTANDING[38]&#160;to 1,&#160;white&#160;setting&#160;the&#160;<br/>remaining&#160;bits&#160;to 0. Count the&#160;number of&#160;requests via MSR_OFFCORE_RSP1&#160;by&#160;programming&#160;the&#160;same&#160;request&#160;<br/>type&#160;from&#160;MSR_OFFCORE_RSP0&#160;into&#160;MSR_OFFCORE_RSP1[bit&#160;15:0], and setting&#160;<br/>MSR_OFFCORE_RSP1.ANY_RESPONSE[16] = 1, while&#160;setting the&#160;remaining bits&#160;to 0.&#160;The average&#160;latency can be&#160;<br/>obtained&#160;by dividing the&#160;value&#160;of the&#160;IA32_PMCx register&#160;that&#160;counted weight&#160;cycles by the&#160;register that&#160;counted&#160;<br/>requests.</p>
<p style="position:absolute;top:721px;left:68px;white-space:nowrap" class="ft04">18.7&#160;</p>
<p style="position:absolute;top:721px;left:147px;white-space:nowrap" class="ft04">PERFORMANCE MONITORING FOR GOLDMONT&#160;MICROARCHITECTURE</p>
<p style="position:absolute;top:757px;left:68px;white-space:nowrap" class="ft06">Next generation&#160;Intel Atom processors are based&#160;on&#160;the&#160;Goldmont microarchitecture. They&#160;report&#160;architectural&#160;<br/>performance monitoring ve<a href="o_fe12b1e2a880e0ce-647.html">rsionID = 4 (see Section&#160;18.2.4</a>) and&#160;support non-architectural monitoring&#160;capabilities&#160;<br/>described in&#160;this section.<br/>Architectural&#160;performance monitoring version 4&#160;capabilities&#160;are described in&#160;<a href="o_fe12b1e2a880e0ce-647.html">Section&#160;18.2.4.<br/></a>The bit fields&#160;(except&#160;bit 21) within each&#160;IA32_PERFEVTSELx&#160;MSR&#160;are&#160;defined&#160;<a href="o_fe12b1e2a880e0ce-645.html">in Figure 18-6&#160;and describ</a>ed in&#160;<br/><a href="o_fe12b1e2a880e0ce-639.html">Section&#160;18.2.1.1 and&#160;</a><a href="o_fe12b1e2a880e0ce-644.html">Section 18.2.3.</a>&#160;Architectural and&#160;non-architectural&#160;performance monitoring events in&#160;the&#160;<br/>Goldmont&#160;microarchitecture ignore the AnyThread&#160;qualification regardless of its setting in&#160;the IA32_PERFEVTSELx&#160;<br/>MSR.&#160;<br/>The&#160;core PMUâ€™s capability&#160;is similar&#160;to&#160;that of the&#160;Silvermont&#160;<a href="o_fe12b1e2a880e0ce-659.html">microarchitecture described in Section&#160;18.6 , with&#160;<br/></a>some differences and&#160;enhancements summarized&#160;in&#160;<a href="o_fe12b1e2a880e0ce-665.html">Table&#160;18-18.</a></p>
<p style="position:absolute;top:100px;left:241px;white-space:nowrap" class="ft05">Table 18-17.&#160; MSR_OFFCORE_RSPx Snoop&#160;Info&#160;Field Definition</p>
<p style="position:absolute;top:124px;left:74px;white-space:nowrap" class="ft03">Subtype</p>
<p style="position:absolute;top:124px;left:144px;white-space:nowrap" class="ft03">Bit Name</p>
<p style="position:absolute;top:124px;left:275px;white-space:nowrap" class="ft03">Offset</p>
<p style="position:absolute;top:124px;left:332px;white-space:nowrap" class="ft03">Description</p>
<p style="position:absolute;top:148px;left:74px;white-space:nowrap" class="ft03">Snoop&#160;</p>
<p style="position:absolute;top:164px;left:74px;white-space:nowrap" class="ft03">Info</p>
<p style="position:absolute;top:148px;left:144px;white-space:nowrap" class="ft03">SNP_NONE</p>
<p style="position:absolute;top:148px;left:275px;white-space:nowrap" class="ft03">31</p>
<p style="position:absolute;top:148px;left:332px;white-space:nowrap" class="ft03">(R/W).&#160;No&#160;details on&#160;snoop-related information</p>
<p style="position:absolute;top:189px;left:144px;white-space:nowrap" class="ft03">Reserved</p>
<p style="position:absolute;top:189px;left:275px;white-space:nowrap" class="ft03">32</p>
<p style="position:absolute;top:189px;left:332px;white-space:nowrap" class="ft03">Reserved</p>
<p style="position:absolute;top:213px;left:144px;white-space:nowrap" class="ft03">SNOOP_MISS</p>
<p style="position:absolute;top:213px;left:276px;white-space:nowrap" class="ft03">33</p>
<p style="position:absolute;top:213px;left:332px;white-space:nowrap" class="ft03">(R/W). Counts the&#160;number of&#160;snoop&#160;misses&#160;when&#160;L2&#160;misses</p>
<p style="position:absolute;top:236px;left:144px;white-space:nowrap" class="ft03">SNOOP_HIT</p>
<p style="position:absolute;top:236px;left:276px;white-space:nowrap" class="ft03">34</p>
<p style="position:absolute;top:236px;left:332px;white-space:nowrap" class="ft03">(R/W).&#160;Counts the&#160;number&#160;of&#160;snoops hit in&#160;the other&#160;module&#160;where no&#160;modified&#160;copies&#160;</p>
<p style="position:absolute;top:253px;left:332px;white-space:nowrap" class="ft03">were&#160;found</p>
<p style="position:absolute;top:277px;left:144px;white-space:nowrap" class="ft03">Reserved</p>
<p style="position:absolute;top:277px;left:275px;white-space:nowrap" class="ft03">35</p>
<p style="position:absolute;top:277px;left:332px;white-space:nowrap" class="ft03">Reserved</p>
<p style="position:absolute;top:301px;left:144px;white-space:nowrap" class="ft03">HITM</p>
<p style="position:absolute;top:301px;left:275px;white-space:nowrap" class="ft03">36</p>
<p style="position:absolute;top:301px;left:332px;white-space:nowrap" class="ft03">(R/W).&#160;Counts the&#160;number&#160;of&#160;snoops hit in&#160;the other&#160;module&#160;where modified&#160;copies&#160;</p>
<p style="position:absolute;top:317px;left:332px;white-space:nowrap" class="ft03">were&#160;found&#160;in&#160;other&#160;core's&#160;L1&#160;cache.</p>
<p style="position:absolute;top:342px;left:144px;white-space:nowrap" class="ft03">NON_DRAM</p>
<p style="position:absolute;top:342px;left:276px;white-space:nowrap" class="ft03">37</p>
<p style="position:absolute;top:342px;left:333px;white-space:nowrap" class="ft03">(R/W).&#160;Target&#160;was non-DRAM&#160;system&#160;address.&#160;This&#160;includes&#160;MMIO&#160;transactions.</p>
<p style="position:absolute;top:366px;left:144px;white-space:nowrap" class="ft03">AVG_LATENCY</p>
<p style="position:absolute;top:366px;left:276px;white-space:nowrap" class="ft03">38</p>
<p style="position:absolute;top:366px;left:332px;white-space:nowrap" class="ft03">(R/W). Enable&#160;average&#160;latency measurement&#160;by counting&#160;weighted&#160;cycles of&#160;</p>
<p style="position:absolute;top:382px;left:332px;white-space:nowrap" class="ft03">outstanding offcore requests of&#160;the request type specified in&#160;bits 15:0 and&#160;any&#160;</p>
<p style="position:absolute;top:399px;left:332px;white-space:nowrap" class="ft09">response (bits 37:16 cleared&#160;to&#160;0).&#160;<br/>This&#160;bit is available in&#160;MSR_OFFCORE_RESP0.&#160;The weighted&#160;cycles&#160;is&#160;accumulated&#160;in&#160;the&#160;</p>
<p style="position:absolute;top:436px;left:332px;white-space:nowrap" class="ft03">specified programmable&#160;counter IA32_PMCx and&#160;the occurrence&#160;of&#160;specified requests&#160;</p>
<p style="position:absolute;top:453px;left:332px;white-space:nowrap" class="ft03">are counted in the other&#160;programmable counter.</p>
</div>
</body>
</html>
