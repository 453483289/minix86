<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 438</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:16px;font-family:Times;color:#0860a8;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:8px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page438-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce438.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">11-26&#160;Vol. 3A</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">MEMORY&#160;CACHE CONTROL</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:100px;left:93px;white-space:nowrap" class="ft08"><b>Type field, bits 0 through&#160;7&#160;</b>— Specifies the&#160;memory type&#160;for the range (see<a href="o_fe12b1e2a880e0ce-433.html">&#160;Table 11-8</a>&#160;for the encoding of&#160;<br/>this field).</p>
<p style="position:absolute;top:139px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:139px;left:93px;white-space:nowrap" class="ft08"><b>PhysBase field, bits 12&#160;through&#160;31&#160;</b>—&#160;Specifies the&#160;base address of the&#160;address range.&#160;The address must&#160;be&#160;<br/>less than 4&#160;GBytes and&#160;is automatically aligned&#160;on&#160;a 4-KByte&#160;boundary.</p>
<p style="position:absolute;top:178px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:178px;left:93px;white-space:nowrap" class="ft010"><b>PhysMask&#160;field,&#160;bits&#160;12&#160;through 31&#160;</b>—&#160;Specifies a&#160;mask&#160;that determines the range of the&#160;region&#160;being&#160;<br/>mapped, according to&#160;the&#160;following relationships:<br/>—&#160;Address_Within_Range&#160;AND PhysMask = PhysBase AND&#160;PhysMask<br/>—&#160;This value is&#160;extended&#160;by 12&#160;bits&#160;at the&#160;low&#160;end to&#160;form the&#160;mask&#160;value. For more in<a href="o_fe12b1e2a880e0ce-438.html">formation: see Section&#160;</a></p>
<p style="position:absolute;top:259px;left:119px;white-space:nowrap" class="ft04"><a href="o_fe12b1e2a880e0ce-438.html">11.11.3, “Example Base&#160;and&#160;Mask Calculations.”</a></p>
<p style="position:absolute;top:281px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:282px;left:93px;white-space:nowrap" class="ft03"><b>V&#160;(valid) flag,&#160;bit&#160;11&#160;</b>— Enables&#160;the register&#160;pair&#160;when&#160;set; disables&#160;register pair when clear.</p>
<p style="position:absolute;top:306px;left:68px;white-space:nowrap" class="ft08">Before&#160;attempting&#160;to access these SMRR&#160;registers, software must test bit 11&#160;in the&#160;IA32_MTRRCAP&#160;register.&#160;If&#160;<br/>SMRR is&#160;not supported, reads from&#160;or writes&#160;to registers cause&#160;general-protection exceptions.<br/>When the&#160;valid flag in&#160;the&#160;IA32_SMRR_PHYSMASK MSR is&#160;1,&#160;accesses&#160;to the specified address&#160;range are&#160;treated as&#160;<br/>follows:</p>
<p style="position:absolute;top:385px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:385px;left:93px;white-space:nowrap" class="ft04">If&#160;the&#160;logical processor is&#160;in SMM, accesses&#160;uses&#160;the&#160;memory type&#160;in the&#160;IA32_SMRR_PHYSBASE&#160;MSR.</p>
<p style="position:absolute;top:407px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:408px;left:93px;white-space:nowrap" class="ft08">If the logical processor is not in&#160;SMM, write accesses are ignored&#160;and&#160;read accesses return a fixed value&#160;for each&#160;<br/>byte. The uncacheable memory&#160;type&#160;(UC) is&#160;used&#160;in this&#160;case.</p>
<p style="position:absolute;top:448px;left:68px;white-space:nowrap" class="ft04">The above&#160;items apply&#160;even if the&#160;address range&#160;specified overlaps with a&#160;range specified&#160;by the&#160;MTRRs.</p>
<p style="position:absolute;top:864px;left:68px;white-space:nowrap" class="ft05">11.11.3&#160;&#160;Example Base and Mask Calculations</p>
<p style="position:absolute;top:894px;left:68px;white-space:nowrap" class="ft08">The examples in&#160;this section&#160;apply&#160;to processors that&#160;support&#160;a maximum&#160;physical address&#160;size of 36&#160;bits. The base&#160;<br/>and mask values&#160;entered in&#160;variable-range&#160;MTRR pairs are 24-bit&#160;values that&#160;the processor extends&#160;to 36-bits.&#160;<br/>For example,&#160;to enter&#160;a base&#160;address of&#160;2&#160;MBytes (200000H)&#160;in the&#160;IA32_MTRR_PHYSBASE3 register,&#160;the&#160;12&#160;least-<br/>significant bits are&#160;truncated&#160;and&#160;the&#160;value&#160;000200H&#160;is entered in&#160;the PhysBase field.&#160;The same&#160;operation&#160;must be&#160;<br/>performed on&#160;mask&#160;values. For example,&#160;to map&#160;the address range from 200000H&#160;to 3FFFFFH (2&#160;MBytes&#160;to&#160;4&#160;<br/>MBytes), a&#160;mask&#160;value of FFFE00000H&#160;is&#160;required. Again,&#160;the 12 least-significant&#160;bits&#160;of&#160;this mask value are&#160;trun-<br/>cated, so&#160;that&#160;the value&#160;entered in&#160;the PhysMask field&#160;of&#160;IA32_MTRR_PHYSMASK3 is&#160;FFFE00H. This&#160;mask&#160;is chosen&#160;<br/>so that&#160;when&#160;any address in&#160;the 200000H&#160;to 3FFFFFH range&#160;is&#160;AND’d&#160;with&#160;the mask value, it&#160;will&#160;return the&#160;same&#160;<br/>value&#160;as&#160;when&#160;the&#160;base address&#160;is AND’d with the&#160;mask&#160;value&#160;(which&#160;is 200000H).</p>
<p style="position:absolute;top:811px;left:194px;white-space:nowrap" class="ft06">Figure&#160;11-8. &#160;IA32_SMRR_PHYSBASE&#160;and&#160;IA32_SMRR_PHYSMASK SMRR Pair</p>
<p style="position:absolute;top:743px;left:272px;white-space:nowrap" class="ft00">V —&#160;Valid</p>
<p style="position:absolute;top:727px;left:272px;white-space:nowrap" class="ft00">PhysMask — Sets&#160;range mask</p>
<p style="position:absolute;top:650px;left:389px;white-space:nowrap" class="ft00">IA32_SMRR_PHYSMASK Register</p>
<p style="position:absolute;top:669px;left:254px;white-space:nowrap" class="ft07">63</p>
<p style="position:absolute;top:669px;left:653px;white-space:nowrap" class="ft07">0</p>
<p style="position:absolute;top:694px;left:307px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:669px;left:516px;white-space:nowrap" class="ft07">10</p>
<p style="position:absolute;top:669px;left:504px;white-space:nowrap" class="ft07">11</p>
<p style="position:absolute;top:669px;left:491px;white-space:nowrap" class="ft07">12</p>
<p style="position:absolute;top:692px;left:506px;white-space:nowrap" class="ft00">V</p>
<p style="position:absolute;top:694px;left:563px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:669px;left:409px;white-space:nowrap" class="ft07">31</p>
<p style="position:absolute;top:694px;left:427px;white-space:nowrap" class="ft00">PhysMask</p>
<p style="position:absolute;top:602px;left:243px;white-space:nowrap" class="ft00">Type —&#160;Memory type for range</p>
<p style="position:absolute;top:585px;left:243px;white-space:nowrap" class="ft00">PhysBase —&#160;Base&#160;address of range</p>
<p style="position:absolute;top:509px;left:389px;white-space:nowrap" class="ft00">IA32_SMRR_PHYSBASE Register</p>
<p style="position:absolute;top:527px;left:254px;white-space:nowrap" class="ft07">63</p>
<p style="position:absolute;top:528px;left:653px;white-space:nowrap" class="ft07">0</p>
<p style="position:absolute;top:553px;left:307px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:528px;left:504px;white-space:nowrap" class="ft07">11</p>
<p style="position:absolute;top:528px;left:491px;white-space:nowrap" class="ft07">12</p>
<p style="position:absolute;top:553px;left:584px;white-space:nowrap" class="ft00">Type</p>
<p style="position:absolute;top:528px;left:409px;white-space:nowrap" class="ft07">31</p>
<p style="position:absolute;top:553px;left:427px;white-space:nowrap" class="ft00">PhysBase</p>
<p style="position:absolute;top:528px;left:542px;white-space:nowrap" class="ft07">7</p>
<p style="position:absolute;top:528px;left:532px;white-space:nowrap" class="ft07">8</p>
<p style="position:absolute;top:770px;left:285px;white-space:nowrap" class="ft00">Reserved</p>
</div>
</body>
</html>
