<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 459</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:16px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:16px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page459-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce459.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:767px;white-space:nowrap" class="ft00">Vol. 3A&#160;13-5</p>
<p style="position:absolute;top:47px;left:273px;white-space:nowrap" class="ft01">SYSTEM&#160;PROGRAMMING FOR INSTRUCTION SET EXTENSIONS&#160;AND PROCESSOR EXTENDED&#160;STATES</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:100px;left:95px;white-space:nowrap" class="ft07">System Exceptions:<br/>‚Äî&#160;Invalid-opcode exception&#160;(#UD). This&#160;exception is&#160;generated&#160;when&#160;executing&#160;SSE instructions under&#160;the&#160;</p>
<p style="position:absolute;top:141px;left:120px;white-space:nowrap" class="ft03">following conditions:</p>
<p style="position:absolute;top:166px;left:120px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:165px;left:146px;white-space:nowrap" class="ft03">SSE/SSE2/SSE3/SSSE3/SSE4_1/SSE4_2&#160;feature&#160;flags returned&#160;by&#160;CPUID&#160;are&#160;set&#160;to 0.&#160;This&#160;condition&#160;</p>
<p style="position:absolute;top:181px;left:145px;white-space:nowrap" class="ft03">does&#160;not affect&#160;the&#160;CLFLUSH&#160;instruction, nor POPCNT.</p>
<p style="position:absolute;top:207px;left:120px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:205px;left:146px;white-space:nowrap" class="ft03">The&#160;CLFSH feature&#160;flag returned&#160;by the&#160;CPUID&#160;instruction is&#160;set to&#160;0.&#160;This&#160;exception condition&#160;only&#160;</p>
<p style="position:absolute;top:222px;left:145px;white-space:nowrap" class="ft03">pertains&#160;to the&#160;execution&#160;of&#160;the&#160;CLFLUSH instruction.&#160;</p>
<p style="position:absolute;top:247px;left:120px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:246px;left:146px;white-space:nowrap" class="ft03">The POPCNT feature&#160;flag returned by the&#160;CPUID instruction is&#160;set&#160;to 0. This exception condition&#160;only&#160;</p>
<p style="position:absolute;top:262px;left:145px;white-space:nowrap" class="ft03">pertains&#160;to the&#160;execution&#160;of&#160;the&#160;POPCNT&#160;instruction.&#160;</p>
<p style="position:absolute;top:288px;left:120px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:286px;left:146px;white-space:nowrap" class="ft03">The&#160;EM flag&#160;(bit 2)&#160;in&#160;control&#160;register&#160;CR0 is&#160;set&#160;to&#160;1, regardless of the&#160;value of&#160;TS flag&#160;(bit&#160;3) of CR0.&#160;</p>
<p style="position:absolute;top:303px;left:145px;white-space:nowrap" class="ft08">This condition&#160;does not affect&#160;the&#160;PAUSE, PREFETCH<i>h</i>, MOVNTI, SFENCE, LFENCE,&#160;MFENCE, CLFLUSH,&#160;<br/>CRC32&#160;and POPCNT instructions.</p>
<p style="position:absolute;top:345px;left:120px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:343px;left:146px;white-space:nowrap" class="ft03">The&#160;OSFXSR&#160;flag (bit 9)&#160;in control register&#160;CR4&#160;is&#160;set to&#160;0.&#160;This condition&#160;does&#160;not affect the&#160;PSHUFW,&#160;</p>
<p style="position:absolute;top:360px;left:145px;white-space:nowrap" class="ft08">MOVNTQ, MOVNTI, PAUSE, PREFETCH<i>h</i>,&#160;SFENCE, LFENCE,&#160;MFENCE, CLFLUSH,&#160;CRC32&#160;and POPCNT&#160;<br/>instructions.</p>
<p style="position:absolute;top:402px;left:120px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:400px;left:146px;white-space:nowrap" class="ft03">Executing&#160;an&#160;instruction that causes a&#160;SIMD floating-point&#160;exception when the&#160;OSXMMEXCPT flag&#160;(bit&#160;</p>
<p style="position:absolute;top:417px;left:145px;white-space:nowrap" class="ft08">10) in control&#160;register&#160;CR4 is&#160;set&#160;to 0.&#160;S<a href="o_fe12b1e2a880e0ce-461.html">ee&#160;Section&#160;13.4.1, ‚ÄúUsing&#160;the TS&#160;Flag to&#160;Control&#160;the Saving&#160;of&#160;<br/>the x87&#160;FPU and&#160;SSE State.‚Äù</a></p>
<p style="position:absolute;top:457px;left:94px;white-space:nowrap" class="ft03">‚Äî&#160;Device not&#160;available (#NM). This&#160;exception is&#160;generated by&#160;executing a&#160;SSE instruction when&#160;the&#160;TS&#160;flag&#160;</p>
<p style="position:absolute;top:474px;left:120px;white-space:nowrap" class="ft03">(bit&#160;3)&#160;of&#160;CR0&#160;is&#160;set&#160;to&#160;1.</p>
<p style="position:absolute;top:498px;left:69px;white-space:nowrap" class="ft03">Other exceptions&#160;can occur during delivery of the above exceptions.</p>
<p style="position:absolute;top:548px;left:69px;white-space:nowrap" class="ft06">13.1.5&#160;</p>
<p style="position:absolute;top:548px;left:150px;white-space:nowrap" class="ft06">Providing a Handler for the SIMD Floating-Point&#160;Exception (#XM)</p>
<p style="position:absolute;top:579px;left:69px;white-space:nowrap" class="ft08">SSE instructions do not generate&#160;numeric exceptions&#160;on packed&#160;integer operations.&#160;They&#160;can&#160;generate the&#160;<br/>following numeric (SIMD floating-point)&#160;exceptions on&#160;packed&#160;and scalar&#160;single-precision and&#160;double-precision&#160;<br/>floating-point operations.&#160;</p>
<p style="position:absolute;top:634px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:634px;left:95px;white-space:nowrap" class="ft03">Invalid operation (#I)</p>
<p style="position:absolute;top:656px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:657px;left:95px;white-space:nowrap" class="ft03">Divide-by-zero (#Z)</p>
<p style="position:absolute;top:679px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:679px;left:95px;white-space:nowrap" class="ft03">Denormal operand&#160;(#D)</p>
<p style="position:absolute;top:701px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:702px;left:95px;white-space:nowrap" class="ft03">Numeric overflow (#O)</p>
<p style="position:absolute;top:724px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:724px;left:95px;white-space:nowrap" class="ft03">Numeric underflow&#160;(#U)</p>
<p style="position:absolute;top:746px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:747px;left:95px;white-space:nowrap" class="ft03">Inexact&#160;result (Precision) (#P)</p>
<p style="position:absolute;top:771px;left:69px;white-space:nowrap" class="ft08">These SIMD floating-point&#160;exceptions (with the&#160;exception&#160;of the&#160;denormal operand&#160;exception) are&#160;defined in the&#160;<br/>IEEE&#160;Standard&#160;754 for Binary&#160;Floating-Point Arithmetic and&#160;represent the&#160;same conditions&#160;that cause&#160;x87 FPU&#160;<br/>floating-point error&#160;exceptions (#MF)&#160;to&#160;be&#160;generated&#160;for x87&#160;FPU&#160;instructions.<br/>Each&#160;of these exceptions can be&#160;masked, in&#160;which case the processor&#160;returns a reasonable result to the destination&#160;<br/>operand without&#160;invoking&#160;an exception handler.&#160;However,&#160;if&#160;any of these exceptions&#160;are left&#160;unmasked,&#160;detection&#160;<br/>of the&#160;exception condition&#160;results in&#160;a SIMD&#160;floating-point exception (#XM) being&#160;generated.&#160;S<a href="o_fe12b1e2a880e0ce-234.html">ee&#160;Chapter 6,&#160;<br/>‚ÄúInterrupt 19‚ÄîSIMD&#160;Floating-Point Exception (#XM).‚Äù<br/></a>To&#160;handle unmasked&#160;SIMD floating-point exceptions,&#160;the operating system&#160;or&#160;executive must provide an&#160;exception&#160;<br/>handler.&#160;The section&#160;titled&#160;‚ÄúSSE and&#160;SSE2 SIMD Floating-Point&#160;Exceptions‚Äù in<a href="˛ˇ">&#160;Chapter&#160;11, ‚ÄúProgramming with&#160;<br/>Streaming SIMD&#160;Extensions&#160;2&#160;(SSE2),‚Äù&#160;of the&#160;<i>Intel¬Æ 64 and IA-32 Architectures&#160;Software&#160;Developer‚Äôs Manual,&#160;<br/>Volume 1</i>,&#160;</a>describes the&#160;SIMD&#160;floating-point exception&#160;classes&#160;and gives&#160;suggestions&#160;for writing an exception&#160;<br/>handler to&#160;handle them.<br/>To&#160;indicate that&#160;the operating&#160;system provides&#160;a&#160;handler for SIMD floating-point&#160;exceptions (#XM),&#160;the&#160;OSXM-<br/>MEXCPT&#160;flag (bit 10) must be set in&#160;control&#160;register&#160;CR4.</p>
</div>
</body>
</html>
