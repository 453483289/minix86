<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1046</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:8px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:21px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1046-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1046.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">23-4&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">INTRODUCTION&#160;TO&#160;VIRTUAL MACHINE EXTENSIONS</p>
<p style="position:absolute;top:100px;left:120px;white-space:nowrap" class="ft05"><a href="o_fe12b1e2a880e0ce-1211.html">‚ÄúSupporting Processor Operating&#160;Modes in Guest&#160;Environments,‚Äù</a>&#160;for&#160;a discussion of how&#160;a VMM&#160;<br/>might&#160;support guest software&#160;that expects to&#160;run in&#160;unpaged&#160;protected&#160;mode or&#160;in real-address&#160;<br/>mode.<br/>Later processors support a&#160;VM-execution control called ‚Äúunrestricted guest‚Äù&#160;(see&#160;<a href="o_fe12b1e2a880e0ce-1055.html">Section&#160;24.6.2</a>).&#160;<br/>If this&#160;control is&#160;1,&#160;CR0.PE&#160;and CR0.PG&#160;may be 0&#160;in&#160;VMX non-root operation (even if&#160;the capability&#160;<br/>MSR&#160;IA32_VMX_CR0_FIXED0 reports otherwise).</p>
<p style="position:absolute;top:185px;left:453px;white-space:nowrap" class="ft03">1</p>
<p style="position:absolute;top:187px;left:460px;white-space:nowrap" class="ft02">&#160;Such processors allow guest software to&#160;run&#160;in&#160;</p>
<p style="position:absolute;top:204px;left:120px;white-space:nowrap" class="ft02">unpaged protected&#160;mode or&#160;in real-address mode.</p>
<p style="position:absolute;top:242px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:243px;left:93px;white-space:nowrap" class="ft05">VMXON fails if a&#160;logical processor is&#160;in A20M&#160;mode (see<a href="o_fe12b1e2a880e0ce-1207.html">&#160;‚ÄúVMXON‚ÄîEnter VMX Operation‚Äù&#160;</a>in&#160;<a href="˛ˇ">Chapter 30</a>). Once&#160;<br/>the processor is&#160;in VMX&#160;operation,&#160;A20M interrupts are&#160;blocked. Thus, it&#160;is impossible&#160;to be&#160;in A20M mode&#160;in&#160;<br/>VMX operation.</p>
<p style="position:absolute;top:298px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:298px;left:93px;white-space:nowrap" class="ft05">The&#160;INIT signal is&#160;blocked whenever a&#160;logical&#160;processor is&#160;in&#160;VMX root operation.&#160;It&#160;is not blocked&#160;in VMX non-<br/>root operation. Instead,&#160;INITs cause&#160;VM&#160;exits (see<a href="o_fe12b1e2a880e0ce-1079.html">&#160;Section&#160;25.2, ‚ÄúOther Causes of&#160;VM&#160;Exits‚Äù).</a></p>
<p style="position:absolute;top:337px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:337px;left:93px;white-space:nowrap" class="ft02">Intel</p>
<p style="position:absolute;top:335px;left:124px;white-space:nowrap" class="ft03">¬Æ</p>
<p style="position:absolute;top:337px;left:135px;white-space:nowrap" class="ft02">&#160;Processor Trace&#160;(Intel&#160;PT)&#160;can be used in&#160;VMX operation only if&#160;IA32_VMX_MISC[14]&#160;is read as&#160;1&#160;(see&#160;</p>
<p style="position:absolute;top:354px;left:93px;white-space:nowrap" class="ft05"><a href="o_fe12b1e2a880e0ce-1947.html">Appendix A.6).</a>&#160;On&#160;processors&#160;that support Intel&#160;PT but&#160;which do not allow it&#160;to be used in&#160;VMX operation,&#160;<br/>execution&#160;of VMXON clears IA32_RTIT_CTL.TraceEn (see<a href="o_fe12b1e2a880e0ce-1207.html">&#160;‚ÄúVMXON‚ÄîEnter VMX Operation‚Äù in&#160;</a><a href="˛ˇ">Chapter 30);&#160;</a>any&#160;<br/>attempt to set that&#160;bit while&#160;in VMX&#160;operation&#160;(including VMX&#160;root operation) using&#160;the WRMSR&#160;instruction&#160;<br/>causes&#160;a general-protection exception.&#160;</p>
<p style="position:absolute;top:1038px;left:68px;white-space:nowrap" class="ft02">1.&#160;‚ÄúUnrestricted guest‚Äù is a secondary processor-based VM-execution&#160;control.&#160;If bit&#160;31&#160;of&#160;the primary processor-based&#160;VM-execution&#160;</p>
<p style="position:absolute;top:1054px;left:89px;white-space:nowrap" class="ft02">controls&#160;is 0,&#160;VMX non-root&#160;operation&#160;functions as&#160;if&#160;the&#160;‚Äúunrestricted guest‚Äù&#160;VM-execution&#160;control&#160;were&#160;0.&#160;Se<a href="o_fe12b1e2a880e0ce-1055.html">e Section 24.6.2.</a></p>
</div>
</body>
</html>
