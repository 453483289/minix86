<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 141</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:14px;font-family:Times;color:#0860a8;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page141-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce141.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:767px;white-space:nowrap" class="ft00">Vol. 3A&#160;4-37</p>
<p style="position:absolute;top:47px;left:793px;white-space:nowrap" class="ft01">PAGING</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:100px;left:95px;white-space:nowrap" class="ft07">The&#160;access&#160;rights&#160;from the&#160;paging-structure entries used to translate&#160;linear addresses&#160;with&#160;the page&#160;number&#160;<br/>(see<a href="o_fe12b1e2a880e0ce-132.html">&#160;Section 4.6):<br/></a>—&#160;The logical-AND&#160;of&#160;the R/W&#160;flags.<br/>—&#160;The&#160;logical-AND of the&#160;U/S flags.<br/>—&#160;The logical-OR of the&#160;XD flags (necessary&#160;only&#160;if&#160;IA32_EFER.NXE&#160;=&#160;1).<br/>—&#160;The protection key&#160;(necessary only with&#160;IA-32e&#160;paging&#160;and CR4.PKE&#160;=&#160;1).</p>
<p style="position:absolute;top:235px;left:69px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:235px;left:95px;white-space:nowrap" class="ft08">Attributes from a&#160;paging-structure&#160;entry that identifies the&#160;final page&#160;frame for&#160;the page number (either&#160;a PTE&#160;<br/>or a&#160;paging-structure entry in&#160;which&#160;the PS flag&#160;is 1):<br/>—&#160;The dirty flag&#160;<a href="o_fe12b1e2a880e0ce-137.html">(see Section&#160;4.8).<br/></a>—&#160;The memory ty<a href="o_fe12b1e2a880e0ce-138.html">pe (see&#160;Section 4.9).</a></p>
<p style="position:absolute;top:324px;left:69px;white-space:nowrap" class="ft06">(TLB&#160;entries may contain&#160;other information as&#160;well. A processor may implement multiple&#160;TLBs, and some&#160;of&#160;these&#160;<br/>may&#160;be&#160;for&#160;special purposes,&#160;e.g., only for instruction fetches.&#160;Such special-purpose&#160;TLBs may not contain&#160;some&#160;of&#160;<br/>this information&#160;if&#160;it is&#160;not necessary. For example,&#160;a TLB used only&#160;for instruction fetches&#160;need&#160;not contain infor-<br/>mation&#160;about the R/W&#160;and dirty flags.)<br/>As note<a href="o_fe12b1e2a880e0ce-139.html">d in Section 4.10.1,</a>&#160;any TLB&#160;entries&#160;created by a&#160;logical processor are&#160;associated with the&#160;current PCID.<br/>Processors&#160;need&#160;not implement any TLBs.&#160;Processors that&#160;do implement TLBs may&#160;invalidate any TLB&#160;entry&#160;at any&#160;<br/>time. Software should&#160;not&#160;rely on&#160;the existence&#160;of&#160;TLBs&#160;or on the&#160;retention of TLB entries.</p>
<p style="position:absolute;top:482px;left:69px;white-space:nowrap" class="ft04">4.10.2.3 &#160;&#160;Details of&#160;TLB&#160;Use</p>
<p style="position:absolute;top:511px;left:69px;white-space:nowrap" class="ft06">Because&#160;the&#160;TLBs&#160;cache entries only for linear&#160;addresses&#160;with&#160;translations,&#160;there can&#160;be&#160;a TLB entry for a&#160;page&#160;<br/>number&#160;only&#160;if&#160;the P flag&#160;is 1 and&#160;the reserved bits are&#160;0&#160;in&#160;each&#160;of&#160;the paging-structure entries used to&#160;translate&#160;<br/>that&#160;page number.&#160;In addition,&#160;the processor does not cache a&#160;translation for a&#160;page&#160;number unless&#160;the&#160;accessed&#160;<br/>flag is&#160;1 in&#160;each of the&#160;paging-structure&#160;entries used&#160;during translation;&#160;before caching&#160;a translation, the&#160;processor&#160;<br/>sets&#160;any of these accessed&#160;flags that&#160;is not already 1.<br/>The&#160;processor&#160;may cache&#160;translations&#160;required for prefetches and&#160;for accesses that&#160;are a&#160;result of&#160;speculative&#160;<br/>execution&#160;that would never&#160;actually&#160;occur&#160;in the&#160;executed code path.<br/>If&#160;the page&#160;number of a&#160;linear&#160;address corresponds to&#160;a&#160;TLB entry&#160;associated&#160;with the&#160;current PCID, the&#160;processor&#160;<br/>may use&#160;that TLB entry&#160;to determine&#160;the page frame, access&#160;rights,&#160;and other attributes for accesses&#160;to that&#160;linear&#160;<br/>address.&#160;In&#160;this case, the&#160;processor may not actually consult the paging&#160;structures&#160;in memory. The&#160;processor&#160;may&#160;<br/>retain&#160;a TLB entry&#160;unmodified even if software&#160;subsequently modifies&#160;the&#160;relevant paging-structure entries in&#160;<br/>memory.&#160;S<a href="o_fe12b1e2a880e0ce-147.html">ee Section&#160;4.10.4.2 for&#160;</a>how&#160;software can ensure&#160;that the processor uses the modified&#160;paging-structure&#160;<br/>entries.<br/>If&#160;the paging structures&#160;specify&#160;a translation&#160;using a&#160;page larger than&#160;4 KBytes,&#160;some processors may&#160;cache&#160;<br/>multiple smaller-page TLB entries&#160;for&#160;that&#160;translation.&#160;Each&#160;such TLB entry would be associated&#160;with&#160;a page&#160;<br/>number corresponding to&#160;the smaller page size&#160;(e.g.,&#160;bits&#160;47:12 of&#160;a linear&#160;address with IA-32e&#160;paging), even&#160;<br/>though part&#160;of&#160;that page&#160;number (e.g.,&#160;bits&#160;20:12)&#160;is part&#160;of the offset with respect to&#160;the page&#160;specified by&#160;the&#160;<br/>paging&#160;structures. The&#160;upper bits of the physical&#160;address in such a&#160;TLB entry are derived from the&#160;physical address&#160;<br/>in the PDE used to create the translation, while&#160;the lower bits come&#160;from the linear address of the access for which&#160;<br/>the translation&#160;is created. There is&#160;no way for software&#160;to be&#160;aware&#160;that&#160;multiple translations&#160;for smaller&#160;pages&#160;<br/>have&#160;been&#160;used&#160;for&#160;a large&#160;page.&#160;For example,&#160;an&#160;execution of INVLPG for a&#160;linear address&#160;on such a&#160;page&#160;invali-<br/>dates any&#160;and&#160;all smaller-page TLB entries for the&#160;translation of any&#160;linear address&#160;on that page.<br/>If software&#160;modifies&#160;the&#160;paging structures so&#160;that the page&#160;size used for a&#160;4-KByte range of linear&#160;addresses&#160;<br/>changes, the TLBs may subsequently contain&#160;multiple translations for the address range (one for each page size).&#160;<br/>A&#160;reference&#160;to a&#160;linear address&#160;in the&#160;address range may use&#160;any of these translations. Which&#160;translation is&#160;used&#160;<br/>may&#160;vary from one&#160;execution to&#160;another,&#160;and the&#160;choice&#160;may be implementation-specific.</p>
<p style="position:absolute;top:997px;left:69px;white-space:nowrap" class="ft04">4.10.2.4 &#160;&#160;Global Pages</p>
<p style="position:absolute;top:1026px;left:69px;white-space:nowrap" class="ft06">The&#160;Intel-64&#160;and IA-32 architectures also allow for&#160;<b>global pages</b>&#160;when the&#160;PGE flag&#160;(bit&#160;7)&#160;is 1&#160;in CR4.&#160;If&#160;the&#160;G flag&#160;<br/>(bit 8) is 1 in&#160;a paging-structure entry that maps a page&#160;(either a PTE or a paging-structure entry in which&#160;the PS&#160;<br/>flag&#160;is 1),&#160;any TLB entry cached for a&#160;linear&#160;address&#160;using that&#160;paging-structure entry is&#160;considered to&#160;be&#160;<b>global</b>.&#160;</p>
</div>
</body>
</html>
