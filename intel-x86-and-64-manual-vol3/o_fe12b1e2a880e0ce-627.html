<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 627</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:16px;font-family:Times;color:#0860a8;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page627-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce627.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:761px;white-space:nowrap" class="ft00">Vol. 3B&#160;17-53</p>
<p style="position:absolute;top:47px;left:425px;white-space:nowrap" class="ft01">DEBUG, BRANCH&#160;PROFILE, TSC, AND RESOURCE MONITORING FEATURES</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft06">The&#160;following sections describe&#160;extensions of CAT such&#160;as&#160;Code&#160;and Data Prioritization&#160;(CDP),&#160;followed by&#160;details&#160;<br/>on&#160;specific&#160;features&#160;such&#160;as&#160;L3&#160;CAT,&#160;L3&#160;CDP,&#160;and&#160;L2&#160;CAT.&#160;Depending&#160;on&#160;the&#160;specific&#160;processor&#160;a&#160;mix&#160;of&#160;features&#160;may&#160;<br/>be&#160;supported,&#160;and CPUID provides&#160;enumeration&#160;capabilities&#160;to enable software&#160;to detect&#160;the set of&#160;supported&#160;<br/>features.&#160;</p>
<p style="position:absolute;top:200px;left:69px;white-space:nowrap" class="ft03">17.17.2&#160;&#160;Code and Data Prioritization (CDP)&#160;Technology</p>
<p style="position:absolute;top:231px;left:69px;white-space:nowrap" class="ft06">Code and Data Prioritization&#160;Technology is&#160;an extension&#160;of&#160;CAT.&#160;CDP enables&#160;isolation and&#160;separate&#160;prioritization&#160;of&#160;<br/>code and data fetches&#160;to the&#160;L3 cache&#160;in a&#160;software configurable manner,&#160;which&#160;can enable workload prioritization&#160;<br/>and tuning&#160;of&#160;cache capacity&#160;to&#160;the&#160;characteristics of the&#160;workload. CDP extends&#160;Cache&#160;Allocation&#160;Technology (CAT)&#160;<br/>by providing separate code&#160;and&#160;data&#160;masks per Class of Service&#160;(COS).&#160;<br/>By&#160;default,&#160;CDP&#160;is disabled&#160;on the&#160;processor.&#160;If the&#160;CAT MSRs&#160;are used without enabling CDP,&#160;the processor oper-<br/>ates in a&#160;traditional&#160;CAT-only mode.&#160;When CDP is&#160;enabled,&#160;</p>
<p style="position:absolute;top:343px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:343px;left:95px;white-space:nowrap" class="ft06">the CAT mask MSRs are re-mapped&#160;into interleaved&#160;pairs&#160;of&#160;mask&#160;MSRs for data or&#160;code fetches (see&#160;<br/><a href="o_fe12b1e2a880e0ce-627.html">Figure&#160;17-29)</a>,&#160;</p>
<p style="position:absolute;top:382px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:382px;left:95px;white-space:nowrap" class="ft02">the&#160;range&#160;of COS for CAT is&#160;re-indexed, with&#160;the&#160;lower-half of the COS range&#160;available for CDP.&#160;</p>
<p style="position:absolute;top:406px;left:69px;white-space:nowrap" class="ft06">Using&#160;the&#160;CDP&#160;feature,&#160;virtual isolation&#160;between&#160;code&#160;and&#160;data&#160;can be&#160;configured&#160;on&#160;the&#160;L3&#160;cache&#160;if&#160;desired,&#160;similar&#160;<br/>to how&#160;some processor cache&#160;levels provide separate&#160;L1 data and&#160;L1&#160;instruction caches.&#160;<br/>Like&#160;the&#160;CAT feature, CDP may be&#160;dynamically&#160;configured&#160;by&#160;privileged software at&#160;any point during normal system&#160;<br/>operation, including dynamically enabling or&#160;disabling the&#160;feature provided that&#160;certain software&#160;configuration&#160;<br/>requirements&#160;are&#160;met (see<a href="o_fe12b1e2a880e0ce-632.html">&#160;Section 17.17.4)</a>.&#160;<br/>An&#160;example of the operating&#160;mode of&#160;CDP&#160;is&#160;shown in&#160;<a href="o_fe12b1e2a880e0ce-627.html">Figure&#160;17-29.</a>&#160;Shown&#160;at the&#160;top are traditional CAT usage&#160;<br/>models where capacity masks map&#160;1:1&#160;with&#160;a COS&#160;number to&#160;enable&#160;control&#160;over&#160;the cache space which&#160;a given&#160;<br/>COS&#160;(and thus&#160;applications, threads or&#160;VMs)&#160;may occupy.&#160;Shown at&#160;the&#160;bottom are&#160;example&#160;mask configurations&#160;<br/>where&#160;CDP&#160;is enabled,&#160;and each COS&#160;number&#160;maps 1:2&#160;to&#160;two masks, one for code and&#160;one&#160;for&#160;data. This enables&#160;<br/>code and&#160;data&#160;to be either overlapped or&#160;isolated&#160;to&#160;varying degrees either globally&#160;or on&#160;a&#160;per-COS basis,&#160;<br/>depending&#160;on application and&#160;system&#160;needs.</p>
<p style="position:absolute;top:1005px;left:267px;white-space:nowrap" class="ft05">Figure&#160;17-29.&#160; Code and Data&#160;Capacity&#160;Bitmasks&#160;of&#160;CDP</p>
<p style="position:absolute;top:838px;left:222px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:838px;left:254px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:838px;left:287px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:838px;left:319px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:838px;left:351px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:838px;left:383px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:838px;left:416px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:838px;left:448px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:838px;left:481px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:838px;left:513px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:838px;left:545px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:838px;left:578px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:838px;left:610px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:838px;left:643px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:838px;left:675px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:838px;left:707px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:860px;left:221px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:860px;left:254px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:860px;left:286px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:860px;left:319px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:861px;left:351px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:861px;left:384px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:860px;left:416px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:860px;left:448px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:860px;left:481px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:860px;left:513px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:860px;left:545px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:860px;left:578px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:860px;left:610px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:860px;left:643px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:860px;left:675px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:860px;left:707px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:883px;left:221px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:883px;left:254px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:883px;left:286px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:883px;left:319px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:883px;left:351px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:883px;left:383px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:883px;left:416px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:883px;left:449px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:883px;left:481px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:883px;left:513px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:883px;left:546px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:883px;left:578px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:883px;left:610px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:883px;left:643px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:883px;left:675px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:883px;left:707px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:905px;left:221px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:905px;left:254px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:905px;left:286px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:905px;left:319px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:905px;left:351px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:905px;left:383px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:905px;left:416px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:905px;left:448px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:905px;left:481px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:906px;left:513px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:906px;left:546px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:906px;left:578px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:905px;left:610px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:905px;left:643px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:905px;left:675px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:905px;left:707px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:928px;left:221px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:928px;left:254px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:928px;left:286px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:928px;left:319px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:928px;left:351px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:928px;left:383px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:928px;left:416px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:928px;left:448px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:928px;left:481px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:928px;left:513px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:928px;left:545px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:928px;left:578px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:928px;left:611px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:928px;left:643px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:928px;left:675px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:928px;left:708px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:950px;left:221px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:950px;left:254px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:950px;left:286px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:950px;left:319px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:950px;left:351px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:950px;left:383px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:950px;left:416px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:950px;left:448px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:950px;left:481px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:950px;left:513px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:950px;left:545px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:950px;left:578px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:951px;left:611px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:951px;left:643px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:951px;left:675px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:951px;left:708px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:843px;left:133px;white-space:nowrap" class="ft09">COS0.Data<br/>COS0.Code<br/>COS1.Data<br/>COS1.Code</p>
<p style="position:absolute;top:865px;left:733px;white-space:nowrap" class="ft02">CAT with</p>
<p style="position:absolute;top:680px;left:212px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:680px;left:244px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:680px;left:277px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:680px;left:309px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:680px;left:341px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:680px;left:374px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:680px;left:406px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:680px;left:438px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:680px;left:471px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:680px;left:503px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:680px;left:536px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:680px;left:568px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:680px;left:600px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:680px;left:633px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:680px;left:665px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:680px;left:698px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:702px;left:211px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:702px;left:244px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:702px;left:276px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:702px;left:309px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:703px;left:341px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:703px;left:374px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:703px;left:406px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:703px;left:439px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:702px;left:471px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:702px;left:503px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:702px;left:536px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:702px;left:568px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:702px;left:600px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:702px;left:633px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:702px;left:665px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:702px;left:698px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:725px;left:211px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:725px;left:244px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:725px;left:276px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:725px;left:309px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:725px;left:341px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:725px;left:374px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:725px;left:406px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:725px;left:438px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:725px;left:471px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:725px;left:503px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:725px;left:536px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:725px;left:568px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:725px;left:600px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:725px;left:633px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:725px;left:665px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:725px;left:698px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:747px;left:211px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:747px;left:244px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:747px;left:276px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:747px;left:309px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:747px;left:341px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:747px;left:374px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:747px;left:406px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:747px;left:438px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:748px;left:471px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:748px;left:503px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:748px;left:536px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:748px;left:568px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:748px;left:601px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:748px;left:633px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:748px;left:666px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:748px;left:698px;white-space:nowrap" class="ft00">1</p>
<p style="position:absolute;top:682px;left:162px;white-space:nowrap" class="ft09">COS0<br/>COS1<br/>COS2<br/>COS3</p>
<p style="position:absolute;top:708px;left:729px;white-space:nowrap" class="ft06">Traditional<br/>CAT</p>
<p style="position:absolute;top:882px;left:733px;white-space:nowrap" class="ft02">CDP</p>
<p style="position:absolute;top:932px;left:110px;white-space:nowrap" class="ft02">Other&#160;COS.Data</p>
<p style="position:absolute;top:801px;left:201px;white-space:nowrap" class="ft02">Example of&#160;Code/Data Prioritization Usage&#160;- 16&#160;bit&#160;Capacity Masks</p>
<p style="position:absolute;top:655px;left:228px;white-space:nowrap" class="ft02">Example of&#160;CAT-Only Usage&#160;- 16&#160;bit Capacity Masks</p>
<p style="position:absolute;top:950px;left:110px;white-space:nowrap" class="ft02">Other&#160;COS.Code</p>
</div>
</body>
</html>
