<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 257</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:21px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#000000;}
	.ft04{font-size:8px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:18px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page257-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce257.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:774px;white-space:nowrap" class="ft00">Vol. 3A&#160;8-1</p>
<p style="position:absolute;top:96px;left:714px;white-space:nowrap" class="ft01">CHAPTER 8</p>
<p style="position:absolute;top:120px;left:431px;white-space:nowrap" class="ft01">MULTIPLE-PROCESSOR MANAGEMENT</p>
<p style="position:absolute;top:190px;left:68px;white-space:nowrap" class="ft07">The&#160;Intel 64&#160;and IA-32 architectures provide mechanisms for&#160;managing&#160;and&#160;improving the performance&#160;of&#160;multiple&#160;<br/>processors connected&#160;to&#160;the same&#160;system bus. These include:</p>
<p style="position:absolute;top:229px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:229px;left:93px;white-space:nowrap" class="ft02">Bus locking&#160;and/or cache&#160;coherency management&#160;for&#160;performing&#160;atomic&#160;operations on system&#160;memory.</p>
<p style="position:absolute;top:251px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:252px;left:93px;white-space:nowrap" class="ft02">Serializing instructions.</p>
<p style="position:absolute;top:274px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:274px;left:93px;white-space:nowrap" class="ft07">An advance programmable interrupt controller&#160;(APIC)&#160;located&#160;on&#160;the processor chip&#160;(see<a href="o_fe12b1e2a880e0ce-363.html">&#160;Chapter&#160;10,&#160;<br/>“Advanced Programmable Interrupt Controller (APIC)”).</a>&#160;This feature was introduced by the Pentium&#160;processor.</p>
<p style="position:absolute;top:313px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:313px;left:93px;white-space:nowrap" class="ft07">A second-level&#160;cache&#160;(level 2, L2).&#160;For&#160;the Pentium 4,&#160;Intel Xeon,&#160;and P6 family&#160;processors,&#160;the L2 cache&#160;is&#160;<br/>included in&#160;the processor package and&#160;is&#160;tightly&#160;coupled to&#160;the processor.&#160;For the&#160;Pentium&#160;and Intel486&#160;<br/>processors, pins&#160;are&#160;provided&#160;to support an external&#160;L2&#160;cache.</p>
<p style="position:absolute;top:368px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:369px;left:93px;white-space:nowrap" class="ft07">A third-level&#160;cache (level&#160;3,&#160;L3).&#160;For&#160;Intel Xeon processors, the&#160;L3&#160;cache is&#160;included in the&#160;processor package&#160;<br/>and is&#160;tightly coupled to&#160;the processor.</p>
<p style="position:absolute;top:407px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:408px;left:93px;white-space:nowrap" class="ft07">Intel Hyper-Threading Technology. This&#160;extension to&#160;the Intel&#160;64&#160;and IA-32 architectures enables a&#160;single&#160;<br/>processor core&#160;to execute two or&#160;more&#160;thre<a href="o_fe12b1e2a880e0ce-280.html">ads concurrently (see Section 8.5, “Intel</a></p>
<p style="position:absolute;top:422px;left:658px;white-space:nowrap" class="ft04"><a href="o_fe12b1e2a880e0ce-280.html">®</a></p>
<p style="position:absolute;top:424px;left:669px;white-space:nowrap" class="ft02"><a href="o_fe12b1e2a880e0ce-280.html">&#160;Hyper-Threading&#160;</a></p>
<p style="position:absolute;top:441px;left:93px;white-space:nowrap" class="ft02"><a href="o_fe12b1e2a880e0ce-280.html">Technology and&#160;Intel</a></p>
<p style="position:absolute;top:438px;left:234px;white-space:nowrap" class="ft04"><a href="o_fe12b1e2a880e0ce-280.html">®</a></p>
<p style="position:absolute;top:441px;left:244px;white-space:nowrap" class="ft02"><a href="o_fe12b1e2a880e0ce-280.html">&#160;Multi-Core&#160;Technology”).</a></p>
<p style="position:absolute;top:465px;left:68px;white-space:nowrap" class="ft08">These mechanisms are particularly useful in symmetric-multiprocessing (SMP) systems. However,&#160;they can also be&#160;<br/>used&#160;when an Intel 64&#160;or IA-32 processor and&#160;a special-purpose processor (such&#160;as a&#160;communications,&#160;graphics,&#160;<br/>or&#160;video processor) share&#160;the system&#160;bus.<br/>These multiprocessing mechanisms have&#160;the&#160;following&#160;characteristics:</p>
<p style="position:absolute;top:544px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:544px;left:93px;white-space:nowrap" class="ft07">To&#160;maintain system&#160;memory coherency&#160;<i>—&#160;</i>When two or&#160;more processors are&#160;attempting&#160;simultaneously&#160;to&#160;<br/>access&#160;the&#160;same&#160;address in system&#160;memory, some&#160;communication mechanism or memory access protocol&#160;<br/>must be&#160;available to promote&#160;data coherency and,&#160;in some&#160;instances,&#160;to allow&#160;one&#160;processor to&#160;temporarily&#160;lock&#160;<br/>a memory&#160;location.</p>
<p style="position:absolute;top:616px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:616px;left:93px;white-space:nowrap" class="ft07">To&#160;maintain&#160;cache consistency&#160;<i>—&#160;</i>When&#160;one processor accesses&#160;data&#160;cached&#160;on&#160;another&#160;processor,&#160;it must not&#160;<br/>receive incorrect data. If&#160;it&#160;modifies data, all&#160;other processors&#160;that&#160;access that data must receive the&#160;modified&#160;<br/>data.</p>
<p style="position:absolute;top:671px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:672px;left:93px;white-space:nowrap" class="ft07">To&#160;allow predictable ordering of&#160;writes to memory&#160;<i>—&#160;</i>In some circumstances, it is important that memory writes&#160;<br/>be observed externally in&#160;precisely&#160;the same order&#160;as programmed.</p>
<p style="position:absolute;top:710px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:711px;left:93px;white-space:nowrap" class="ft07">To&#160;distribute&#160;interrupt handling&#160;among a&#160;group&#160;of&#160;processors&#160;— When several processors are&#160;operating in&#160;a&#160;<br/>system&#160;in&#160;parallel,&#160;it&#160;is useful&#160;to have a&#160;centralized&#160;mechanism&#160;for receiving interrupts&#160;and&#160;distributing&#160;them&#160;to&#160;<br/>available processors for servicing.</p>
<p style="position:absolute;top:766px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:766px;left:93px;white-space:nowrap" class="ft07">To&#160;increase&#160;system performance&#160;by exploiting&#160;the&#160;multi-threaded and multi-process&#160;nature of contemporary&#160;<br/>operating systems and applications.</p>
<p style="position:absolute;top:807px;left:68px;white-space:nowrap" class="ft07">The&#160;caching&#160;mechanism&#160;and cache&#160;consistency of Intel 64&#160;and IA-32 processors are&#160;di<a href="o_fe12b1e2a880e0ce-413.html">scussed in&#160;Chapter 11.</a>&#160;The&#160;<br/>APIC&#160;architecture is&#160;described<a href="o_fe12b1e2a880e0ce-363.html">&#160;in Chapter&#160;10</a>. Bus and memory locking, serializing&#160;instructions, memory&#160;ordering,&#160;<br/>and Intel Hyper-Threading&#160;Technology are discussed&#160;in&#160;the following sections.&#160;</p>
<p style="position:absolute;top:895px;left:68px;white-space:nowrap" class="ft06">8.1&#160;</p>
<p style="position:absolute;top:895px;left:147px;white-space:nowrap" class="ft06">LOCKED ATOMIC OPERATIONS</p>
<p style="position:absolute;top:931px;left:68px;white-space:nowrap" class="ft07">The&#160;32-bit&#160;IA-32 processors support locked&#160;atomic&#160;operations&#160;on&#160;locations in&#160;system&#160;memory. These operations&#160;<br/>are&#160;typically&#160;used&#160;to manage shared data&#160;structures (such as semaphores, segment descriptors, system&#160;segments,&#160;<br/>or page&#160;tables)&#160;in which&#160;two&#160;or more processors may try&#160;simultaneously to&#160;modify&#160;the same&#160;field&#160;or flag. The&#160;<br/>processor&#160;uses three interdependent mechanisms&#160;for&#160;carrying&#160;out&#160;locked atomic&#160;operations:</p>
<p style="position:absolute;top:1003px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:1003px;left:93px;white-space:nowrap" class="ft02">Guaranteed atomic operations</p>
<p style="position:absolute;top:1025px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:1026px;left:93px;white-space:nowrap" class="ft02">Bus locking, using&#160;the LOCK# signal and&#160;the LOCK&#160;instruction&#160;prefix</p>
</div>
</body>
</html>
