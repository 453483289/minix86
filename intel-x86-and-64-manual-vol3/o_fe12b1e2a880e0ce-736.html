<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 736</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:16px;font-family:Times;color:#0860a8;}
	.ft07{font-size:12px;font-family:Times;color:#0860a8;}
	.ft08{font-size:7px;font-family:Times;color:#000000;}
	.ft09{font-size:8px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft012{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page736-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce736.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">18-100&#160;Vol. 3B</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">PERFORMANCE MONITORING</p>
<p style="position:absolute;top:411px;left:68px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:411px;left:93px;white-space:nowrap" class="ft010"><b>T1_OS flag, bit&#160;1 ‚Äî&#160;</b>When&#160;set,&#160;events are counted when thread 1 (logical processor 1) is executing at CPL&#160;of&#160;<br/>0.&#160;This&#160;privilege level is&#160;generally reserved for protected operating&#160;system code.&#160;(When both&#160;the T1_OS&#160;and&#160;<br/>T1_USR&#160;flags are set, thread 1 events&#160;are counted at&#160;all privilege&#160;levels.)</p>
<p style="position:absolute;top:466px;left:68px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:467px;left:93px;white-space:nowrap" class="ft010"><b>T0_USR flag, bit 2 ‚Äî&#160;</b>When&#160;set, events are counted when&#160;thread&#160;0 (logical processor 0)&#160;is&#160;executing at a CPL&#160;<br/>of&#160;1, 2, or&#160;3.&#160;</p>
<p style="position:absolute;top:505px;left:68px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:506px;left:93px;white-space:nowrap" class="ft010"><b>T0_OS flag, bit&#160;3 ‚Äî&#160;</b>When&#160;set,&#160;events are counted when thread 0 (logical processor 0) is executing at CPL&#160;of&#160;<br/>0. (When both&#160;the T0_OS&#160;and T0_USR&#160;flags are set,&#160;thread 0&#160;events are&#160;counted&#160;at all&#160;privilege levels.)</p>
<p style="position:absolute;top:544px;left:68px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:545px;left:93px;white-space:nowrap" class="ft03"><b>Tag enable, bit 4 ‚Äî&#160;</b>When set, enables tagging of&#160;Œºops to assist in at-retirement event counting; when clear,&#160;</p>
<p style="position:absolute;top:561px;left:93px;white-space:nowrap" class="ft04">disables tagging<a href="o_fe12b1e2a880e0ce-731.html">. See&#160;Section&#160;18.15.6, ‚ÄúAt-Retirement&#160;Counting.‚Äù</a></p>
<p style="position:absolute;top:583px;left:68px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:584px;left:93px;white-space:nowrap" class="ft03"><b>Tag value field, bits 5 through&#160;8 ‚Äî&#160;</b>Selects&#160;a tag&#160;value&#160;to&#160;associate with a&#160;Œºop to&#160;assist in&#160;at-retirement&#160;</p>
<p style="position:absolute;top:600px;left:93px;white-space:nowrap" class="ft04">event counting.</p>
<p style="position:absolute;top:622px;left:68px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:623px;left:93px;white-space:nowrap" class="ft010"><b>Event mask field, bits 9 through 24 ‚Äî&#160;</b>Selects events to&#160;be&#160;counted from the event class selected&#160;with the&#160;<br/>event select&#160;field.</p>
<p style="position:absolute;top:661px;left:68px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:662px;left:93px;white-space:nowrap" class="ft010"><b>Event select field, bits 25&#160;through 30) ‚Äî&#160;</b>Selects a&#160;class of events&#160;to be counted. The events within this&#160;<br/>class that&#160;are counted are&#160;selected&#160;with&#160;the event mask field.</p>
<p style="position:absolute;top:702px;left:68px;white-space:nowrap" class="ft010">The&#160;T0_OS&#160;and T0_USR&#160;flags and&#160;the T1_OS&#160;and T1_USR&#160;flags allow event counting and&#160;sampling to be specified&#160;<br/>for&#160;a specific logical processor (0&#160;or 1)&#160;within&#160;an Intel&#160;Xeon processor MP (See&#160;<a href="o_fe12b1e2a880e0ce-279.html">also: Section 8.4.5,&#160;‚ÄúIdentifying&#160;<br/>Logical Processors in an&#160;MP&#160;System,‚Äù</a>&#160;in the<a href="˛ˇ">&#160;<i>Intel¬Æ 64 and&#160;IA-32 Architectures Software&#160;Developer‚Äôs&#160;Manual,&#160;<br/>Volume 3A</i></a>).<br/>Not all performance monitoring events can be detected within an Intel&#160;Xeon processor&#160;MP on a per logical processor&#160;<br/>basis (see<a href="o_fe12b1e2a880e0ce-738.html">&#160;Section 18.16.4,&#160;‚ÄúPerformance Monitoring&#160;Events‚Äù). Some sub-events (speci</a>fied&#160;by an event&#160;mask bits)&#160;<br/>are counted&#160;or sampled without&#160;regard to&#160;which&#160;logical&#160;processor&#160;is associated&#160;with the&#160;detected event.&#160;</p>
<p style="position:absolute;top:859px;left:68px;white-space:nowrap" class="ft06">18.16.2 CCCR&#160;</p>
<p style="position:absolute;top:859px;left:194px;white-space:nowrap" class="ft06">MSRs</p>
<p style="position:absolute;top:890px;left:68px;white-space:nowrap" class="ft010"><a href="o_fe12b1e2a880e0ce-737.html">Figure&#160;18-48 shows the</a>&#160;layout of a&#160;CCCR&#160;MSR in&#160;processors&#160;supporting&#160;Intel&#160;Hyper-Threading Technology.&#160;The&#160;<br/>functions of&#160;the&#160;flags and fields&#160;are&#160;as follows:</p>
<p style="position:absolute;top:928px;left:68px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:929px;left:93px;white-space:nowrap" class="ft010"><b>Enable flag, bit 12&#160;‚Äî&#160;</b>When&#160;set, enables counting; when clear,&#160;the&#160;counter is&#160;disabled.&#160;This flag is cleared&#160;on&#160;<br/>reset</p>
<p style="position:absolute;top:967px;left:68px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:968px;left:93px;white-space:nowrap" class="ft010"><b>ESCR select&#160;field, bits 13&#160;through 15&#160;‚Äî&#160;</b>Identifies the&#160;ESCR&#160;to&#160;be used&#160;to select&#160;events to be&#160;counted with&#160;<br/>the&#160;counter associated with the&#160;CCCR.</p>
<p style="position:absolute;top:1006px;left:68px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:1007px;left:93px;white-space:nowrap" class="ft010"><b>Active thread field,&#160;bits&#160;16&#160;and&#160;17&#160;‚Äî&#160;</b>Enables counting&#160;depending&#160;on&#160;which logical processors are&#160;active&#160;<br/>(executing&#160;a thread).&#160;This field enables filtering of events based&#160;on the&#160;state&#160;(active&#160;or inactive) of the&#160;logical&#160;<br/>processors. The encodings of this&#160;field&#160;are as&#160;follows:</p>
<p style="position:absolute;top:347px;left:70px;white-space:nowrap" class="ft07">Figure&#160;18-47.&#160; Event&#160;Selection&#160;Control&#160;Register&#160;(ESCR)&#160;for the Pentium 4 Processor,&#160;Intel Xeon Processor and Intel&#160;</p>
<p style="position:absolute;top:365px;left:249px;white-space:nowrap" class="ft07">Xeon&#160;Processor&#160;MP&#160;Supporting Hyper-Threading&#160;Technology</p>
<p style="position:absolute;top:128px;left:256px;white-space:nowrap" class="ft08">31</p>
<p style="position:absolute;top:128px;left:344px;white-space:nowrap" class="ft08">24</p>
<p style="position:absolute;top:128px;left:547px;white-space:nowrap" class="ft08">8</p>
<p style="position:absolute;top:128px;left:647px;white-space:nowrap" class="ft08">0</p>
<p style="position:absolute;top:128px;left:635px;white-space:nowrap" class="ft08">1</p>
<p style="position:absolute;top:128px;left:622px;white-space:nowrap" class="ft08">2</p>
<p style="position:absolute;top:128px;left:610px;white-space:nowrap" class="ft08">3</p>
<p style="position:absolute;top:128px;left:597px;white-space:nowrap" class="ft08">4</p>
<p style="position:absolute;top:128px;left:535px;white-space:nowrap" class="ft08">9</p>
<p style="position:absolute;top:128px;left:331px;white-space:nowrap" class="ft08">25</p>
<p style="position:absolute;top:128px;left:269px;white-space:nowrap" class="ft08">30</p>
<p style="position:absolute;top:276px;left:256px;white-space:nowrap" class="ft08">63</p>
<p style="position:absolute;top:277px;left:647px;white-space:nowrap" class="ft08">32</p>
<p style="position:absolute;top:307px;left:431px;white-space:nowrap" class="ft09">Reserved</p>
<p style="position:absolute;top:154px;left:417px;white-space:nowrap" class="ft09">Event Mask</p>
<p style="position:absolute;top:147px;left:297px;white-space:nowrap" class="ft09">Event</p>
<p style="position:absolute;top:159px;left:296px;white-space:nowrap" class="ft09">Select</p>
<p style="position:absolute;top:228px;left:492px;white-space:nowrap" class="ft00">T0_USR</p>
<p style="position:absolute;top:213px;left:492px;white-space:nowrap" class="ft00">T0_OS</p>
<p style="position:absolute;top:128px;left:587px;white-space:nowrap" class="ft08">5</p>
<p style="position:absolute;top:197px;left:492px;white-space:nowrap" class="ft00">Tag Enable</p>
<p style="position:absolute;top:148px;left:559px;white-space:nowrap" class="ft09">Tag&#160;</p>
<p style="position:absolute;top:160px;left:555px;white-space:nowrap" class="ft09">Value</p>
<p style="position:absolute;top:259px;left:493px;white-space:nowrap" class="ft00">T1_USR</p>
<p style="position:absolute;top:244px;left:493px;white-space:nowrap" class="ft00">T1_OS</p>
<p style="position:absolute;top:225px;left:311px;white-space:nowrap" class="ft00">Reserved</p>
</div>
</body>
</html>
