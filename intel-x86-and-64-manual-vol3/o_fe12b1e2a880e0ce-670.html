<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 670</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:16px;font-family:Times;color:#0860a8;}
	.ft04{font-size:18px;font-family:Times;color:#0860a8;}
	.ft05{font-size:8px;font-family:Times;color:#000000;}
	.ft06{font-size:18px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page670-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce670.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">18-34&#160;Vol. 3B</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">PERFORMANCE MONITORING</p>
<p style="position:absolute;top:167px;left:68px;white-space:nowrap" class="ft08">To&#160;specify a complete offcore&#160;response filter, software&#160;must&#160;properly program&#160;bits&#160;in the request&#160;and response&#160;type&#160;<br/>fields.&#160;A&#160;valid&#160;request&#160;type&#160;must have&#160;at least one&#160;bit set&#160;in the&#160;non-reserved bits of 15:0.&#160;A&#160;valid response&#160;type&#160;<br/>must&#160;be&#160;a non-zero value&#160;of&#160;the following expression:<br/>[ANY ‘OR’&#160;(L2&#160;Hit)&#160;] ‘XOR’&#160;( Snoop Info Bits)&#160;‘XOR’ (Avg&#160;Latency)</p>
<p style="position:absolute;top:274px;left:68px;white-space:nowrap" class="ft03">18.7.3&#160;</p>
<p style="position:absolute;top:274px;left:148px;white-space:nowrap" class="ft03">Average Offcore Request Latency Measurement</p>
<p style="position:absolute;top:305px;left:68px;white-space:nowrap" class="ft07">In&#160;Goldmont microarachitecture, measurement&#160;of average&#160;latency of offcore transaction&#160;requests is&#160;the same&#160;as&#160;<br/>described&#160;<a href="o_fe12b1e2a880e0ce-664.html">in Section 18.6.3.</a></p>
<p style="position:absolute;top:377px;left:68px;white-space:nowrap" class="ft04">18.8&#160;</p>
<p style="position:absolute;top:377px;left:147px;white-space:nowrap" class="ft04">PERFORMANCE MONITORING FOR PROCESSORS BASED ON INTEL</p>
<p style="position:absolute;top:379px;left:754px;white-space:nowrap" class="ft01">®&#160;</p>
<p style="position:absolute;top:402px;left:146px;white-space:nowrap" class="ft04">MICROARCHITECTURE CODE NAME NEHALEM</p>
<p style="position:absolute;top:439px;left:68px;white-space:nowrap" class="ft02">Intel Core i7&#160;processor&#160;family</p>
<p style="position:absolute;top:436px;left:266px;white-space:nowrap" class="ft05">2</p>
<p style="position:absolute;top:439px;left:273px;white-space:nowrap" class="ft02">&#160;supports architectural performance&#160;monitoring&#160;capability with version&#160;ID&#160;3&#160;(see&#160;</p>
<p style="position:absolute;top:455px;left:68px;white-space:nowrap" class="ft07"><a href="o_fe12b1e2a880e0ce-644.html">Section 18.2.3) and&#160;</a>a host of non-architectural monitoring&#160;capabilities. The&#160;Intel Core i7 processor family is based&#160;<br/>on Intel</p>
<p style="position:absolute;top:469px;left:120px;white-space:nowrap" class="ft05">®</p>
<p style="position:absolute;top:472px;left:131px;white-space:nowrap" class="ft02">&#160;microarchitecture&#160;code&#160;name Nehalem,&#160;and provides four general-purpose performance&#160;counters&#160;</p>
<p style="position:absolute;top:488px;left:68px;white-space:nowrap" class="ft07">(IA32_PMC0,&#160;IA32_PMC1,&#160;IA32_PMC2,&#160;IA32_PMC3) and&#160;three fixed-function performance&#160;counters&#160;<br/>(IA32_FIXED_CTR0,&#160;IA32_FIXED_CTR1,&#160;IA32_FIXED_CTR2) in&#160;the processor core.&#160;<br/>Non-architectural&#160;performance monitoring in&#160;Intel Core&#160;i7 processor family&#160;uses&#160;the IA32_PERFEVTSELx&#160;MSR to&#160;<br/>configure&#160;a set of&#160;non-architecture&#160;performance&#160;monitoring&#160;events&#160;to be counted by the&#160;corresponding general-<br/>purpose&#160;performance counter. The list of non-architectural performance monitoring&#160;events is lis<a href="o_fe12b1e2a880e0ce-910.html">ted in Table 19-26.</a>&#160;<br/>Non-architectural performance&#160;monitoring&#160;events&#160;fall into two broad categories:</p>
<p style="position:absolute;top:600px;left:68px;white-space:nowrap" class="ft06">•</p>
<p style="position:absolute;top:601px;left:93px;white-space:nowrap" class="ft07">Performance monitoring&#160;events in&#160;the processor core:&#160;These include many&#160;events&#160;that&#160;are&#160;similar&#160;to&#160;<br/>performance monitoring events&#160;available to&#160;processor&#160;based on&#160;Intel Core microarchitecture.&#160;Additionally,&#160;<br/>there&#160;are&#160;several enhancements&#160;in the&#160;performance monitoring capability&#160;for&#160;detecting microarchitectural&#160;<br/>conditions in&#160;the processor core&#160;or in the&#160;interaction&#160;of&#160;the processor core to&#160;the&#160;off-core&#160;sub-systems&#160;in&#160;the&#160;<br/>physical&#160;processor&#160;package. The off-core&#160;sub-systems in&#160;the physical processor&#160;package is&#160;loosely referred to&#160;<br/>as “uncore“.</p>
<p style="position:absolute;top:705px;left:68px;white-space:nowrap" class="ft06">•</p>
<p style="position:absolute;top:706px;left:93px;white-space:nowrap" class="ft07">Performance&#160;monitoring&#160;events in&#160;the uncore:&#160;The&#160;uncore&#160;sub-system&#160;is shared by more&#160;than&#160;one processor&#160;<br/>cores in&#160;the physical processor package.&#160;It&#160;provides&#160;additional&#160;performance monitoring facility&#160;outside of&#160;<br/>IA32_PMCx&#160;and performance&#160;monitoring&#160;events&#160;that&#160;are specific to&#160;the uncore&#160;sub-system.</p>
<p style="position:absolute;top:763px;left:68px;white-space:nowrap" class="ft07">Architectural&#160;and&#160;non-architectural performance monitoring events in&#160;Intel&#160;Core i7 processor&#160;family&#160;support thread&#160;<br/>qualification&#160;using bit 21 of&#160;IA32_PERFEVTSELx&#160;MSR.&#160;<br/>The bit fields within each&#160;IA32_PERFEVTSELx&#160;MSR are defi<a href="o_fe12b1e2a880e0ce-645.html">ned in&#160;Figure 18-6 and describ</a>ed in&#160;<a href="o_fe12b1e2a880e0ce-639.html">Section 18.2.1.1&#160;and&#160;<br/></a><a href="o_fe12b1e2a880e0ce-644.html">Section 18.2.3.</a>&#160;</p>
<p style="position:absolute;top:110px;left:69px;white-space:nowrap" class="ft01">NOTES:</p>
<p style="position:absolute;top:129px;left:68px;white-space:nowrap" class="ft02">1.&#160;See<a href="o_fe12b1e2a880e0ce-664.html">&#160;Section&#160;18.6.3, “Average&#160;Offcore&#160;Request Latency Measurement” f</a>or details on how to&#160;use this bit to&#160;extract average latency.</p>
<p style="position:absolute;top:1038px;left:68px;white-space:nowrap" class="ft02">2.&#160;Intel Xeon processor 5500 series and 3400&#160;series are also based&#160;on&#160;Intel microarchitecture code&#160;name&#160;Nehalem,&#160;so&#160;the&#160;perfor-</p>
<p style="position:absolute;top:1054px;left:89px;white-space:nowrap" class="ft02">mance monitoring&#160;facilities&#160;described in&#160;this&#160;section&#160;generally also apply.</p>
</div>
</body>
</html>
