<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1108</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:14px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:16px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1108-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1108.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">26-16&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">VM&#160;ENTRIES</p>
<p style="position:absolute;top:99px;left:68px;white-space:nowrap" class="ft02">26.3.2.2 &#160;&#160;Loading&#160;Guest&#160;Segment Registers and Descriptor-Table&#160;Registers</p>
<p style="position:absolute;top:127px;left:68px;white-space:nowrap" class="ft03">For each&#160;of&#160;CS,&#160;SS,&#160;DS,&#160;ES, FS, GS, TR,&#160;and LDTR, fields are loaded&#160;from the guest-state area as&#160;follows:</p>
<p style="position:absolute;top:151px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:151px;left:93px;white-space:nowrap" class="ft07">The&#160;unusable bit is loaded from the access-rights&#160;field.&#160;This bit can&#160;never be&#160;set for TR&#160;(s<a href="o_fe12b1e2a880e0ce-1101.html">ee Section&#160;26.3.1.2).&#160;<br/></a>If it&#160;is set for one&#160;of the&#160;other registers,&#160;the&#160;following apply:<br/>—&#160;For each&#160;of&#160;CS, SS,&#160;DS, ES,&#160;FS, and&#160;GS,&#160;uses of the&#160;segment&#160;cause faults (general-protection&#160;exception or&#160;</p>
<p style="position:absolute;top:208px;left:119px;white-space:nowrap" class="ft06">stack-fault exception) outside 64-bit&#160;mode, just&#160;as&#160;they&#160;would&#160;had&#160;the segment been&#160;loaded&#160;using a&#160;null&#160;<br/>selector.&#160;This bit does not&#160;cause accesses&#160;to&#160;fault in 64-bit&#160;mode.</p>
<p style="position:absolute;top:249px;left:93px;white-space:nowrap" class="ft03">—&#160;If this bit is set for LDTR, uses of&#160;LDTR cause general-protection exceptions in all modes,&#160;just as they&#160;would&#160;</p>
<p style="position:absolute;top:265px;left:119px;white-space:nowrap" class="ft03">had LDTR been loaded&#160;using a&#160;null selector.</p>
<p style="position:absolute;top:288px;left:93px;white-space:nowrap" class="ft06">If this&#160;bit&#160;is clear&#160;for any&#160;of CS,&#160;SS,&#160;DS, ES, FS, GS,&#160;TR, and LDTR, a null selector&#160;value does not cause&#160;a fault<br/>(general-protection&#160;exception or stack-fault&#160;exception).</p>
<p style="position:absolute;top:326px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:327px;left:93px;white-space:nowrap" class="ft03">TR. The&#160;selector, base,&#160;limit,&#160;and access-rights&#160;fields are loaded.</p>
<p style="position:absolute;top:349px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:349px;left:93px;white-space:nowrap" class="ft08">CS.<br/>—&#160;The&#160;following&#160;fields&#160;are always&#160;loaded:&#160;selector, base address, limit, and&#160;(from&#160;the access-rights field) the&#160;</p>
<p style="position:absolute;top:390px;left:119px;white-space:nowrap" class="ft03">L, D,&#160;and&#160;G&#160;bits.</p>
<p style="position:absolute;top:414px;left:93px;white-space:nowrap" class="ft03">—&#160;For the other fields,&#160;the unusable bit&#160;of the&#160;access-rights&#160;field&#160;is consulted:</p>
<p style="position:absolute;top:439px;left:119px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:438px;left:144px;white-space:nowrap" class="ft03">If the&#160;unusable bit is&#160;0, all&#160;of&#160;the&#160;access-rights field is&#160;loaded.</p>
<p style="position:absolute;top:462px;left:119px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:460px;left:144px;white-space:nowrap" class="ft03">If the&#160;unusable bit is&#160;1, the&#160;remainder of&#160;CS&#160;access&#160;rights&#160;are undefined&#160;after&#160;VM&#160;entry.</p>
<p style="position:absolute;top:482px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:483px;left:93px;white-space:nowrap" class="ft09">SS,&#160;DS, ES, FS, GS, and&#160;LDTR.<br/>—&#160;The selector fields are&#160;loaded.<br/>—&#160;For the other fields,&#160;the unusable bit&#160;of the&#160;corresponding access-rights&#160;field is&#160;consulted:</p>
<p style="position:absolute;top:555px;left:119px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:553px;left:144px;white-space:nowrap" class="ft03">If the&#160;unusable bit is&#160;0, the&#160;base-address,&#160;limit,&#160;and access-rights fields are&#160;loaded.</p>
<p style="position:absolute;top:576px;left:119px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:574px;left:144px;white-space:nowrap" class="ft03">If&#160;the&#160;unusable bit&#160;is&#160;1,&#160;the base address, the segment&#160;limit, and&#160;the&#160;remainder&#160;of the access&#160;rights&#160;are&#160;</p>
<p style="position:absolute;top:591px;left:143px;white-space:nowrap" class="ft03">undefined&#160;after VM&#160;entry with the&#160;following&#160;exceptions:</p>
<p style="position:absolute;top:615px;left:144px;white-space:nowrap" class="ft07">—&#160;Bits&#160;3:0 of&#160;the base address for&#160;SS&#160;are&#160;cleared to 0.<br/>—&#160;SS.DPL&#160;&#160;is&#160;&#160;always&#160;&#160;loaded&#160;&#160;from&#160;&#160;the&#160;&#160;SS&#160;&#160;access-rights field. This&#160;will&#160;be&#160;the current&#160;privilege&#160;level</p>
<p style="position:absolute;top:655px;left:170px;white-space:nowrap" class="ft03">(CPL) after the&#160;VM&#160;entry&#160;completes.</p>
<p style="position:absolute;top:679px;left:144px;white-space:nowrap" class="ft08">—&#160;SS.B is&#160;always&#160;set&#160;to 1.<br/>—&#160;The base addresses for FS and GS are loaded&#160;from the&#160;corresponding fields in the VMCS. On</p>
<p style="position:absolute;top:720px;left:170px;white-space:nowrap" class="ft06">processors that&#160;support Intel&#160;64 architecture, the&#160;values&#160;loaded for base&#160;addresses for FS and GS<br/>are&#160;also manifest&#160;in the FS.base and GS.base MSRs.</p>
<p style="position:absolute;top:760px;left:144px;white-space:nowrap" class="ft03">—&#160;On&#160;processors that&#160;support Intel&#160;64&#160;architecture,&#160;the&#160;base&#160;address&#160;for&#160;LDTR&#160;is set&#160;to an undefined</p>
<p style="position:absolute;top:777px;left:170px;white-space:nowrap" class="ft03">but canonical value.</p>
<p style="position:absolute;top:801px;left:144px;white-space:nowrap" class="ft03">—&#160;On&#160;processors that&#160;support Intel 64 architecture, bits&#160;63:32 of&#160;the&#160;base addresses for SS, DS, and</p>
<p style="position:absolute;top:817px;left:170px;white-space:nowrap" class="ft03">ES&#160;are cleared&#160;to 0.</p>
<p style="position:absolute;top:841px;left:68px;white-space:nowrap" class="ft03">GDTR&#160;and IDTR are&#160;loaded using&#160;the base and limit fields.</p>
<p style="position:absolute;top:886px;left:68px;white-space:nowrap" class="ft02">26.3.2.3 &#160;&#160;Loading&#160;Guest&#160;RIP,&#160;RSP,&#160;and RFLAGS</p>
<p style="position:absolute;top:914px;left:68px;white-space:nowrap" class="ft06">RSP,&#160;RIP,&#160;and RFLAGS&#160;are loaded&#160;from&#160;the&#160;RSP&#160;field, the RIP&#160;field,&#160;and&#160;the RFLAGS&#160;field,&#160;respectively.&#160;The following&#160;<br/>items regard&#160;the upper&#160;32&#160;bits of&#160;these fields&#160;on&#160;VM&#160;entries&#160;that are&#160;not to&#160;64-bit mode:</p>
<p style="position:absolute;top:952px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:953px;left:93px;white-space:nowrap" class="ft06">Bits&#160;63:32&#160;of RSP&#160;are&#160;undefined outside 64-bit&#160;mode.&#160;Thus,&#160;a logical processor may ignore&#160;the contents&#160;of&#160;<br/>bits&#160;63:32 of&#160;the RSP field on&#160;VM&#160;entries that&#160;are not&#160;to 64-bit mode.</p>
<p style="position:absolute;top:991px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:992px;left:93px;white-space:nowrap" class="ft06">As&#160;noted in<a href="o_fe12b1e2a880e0ce-1103.html">&#160;Section 26.3.1.4, bi</a>ts&#160;63:32 of the&#160;RIP&#160;and RFLAGS fields must be 0 on VM&#160;entries&#160;that are&#160;not to&#160;<br/>64-bit mode.</p>
</div>
</body>
</html>
