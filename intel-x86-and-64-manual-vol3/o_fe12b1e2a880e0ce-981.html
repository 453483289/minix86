<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 981</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#0860a8;}
	.ft04{font-size:12px;font-family:Times;color:#0860a8;}
	.ft05{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft08{font-size:9px;line-height:13px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page981-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce981.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:768px;white-space:nowrap" class="ft00">Vol. 3B&#160;20-5</p>
<p style="position:absolute;top:47px;left:734px;white-space:nowrap" class="ft01">8086 EMULATION</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft06">5.&#160;Transfers program control&#160;to the&#160;location&#160;specified in&#160;the interrupt vector table.<br/>An IRET instruction&#160;at the end of&#160;the handler procedure reverses these steps to return program&#160;control to the inter-<br/>rupted&#160;program.&#160;Exceptions do&#160;not return error&#160;codes&#160;in real-address mode.<br/>The&#160;interrupt vector table is&#160;an array&#160;of&#160;4-byte entrie<a href="o_fe12b1e2a880e0ce-981.html">s (see Figure&#160;20-2). Each entry&#160;</a>consists of a&#160;far&#160;pointer&#160;to a&#160;<br/>handler&#160;procedure, made up&#160;of a segment selector and an offset. The&#160;processor&#160;scales&#160;the interrupt or exception&#160;<br/>vector&#160;by 4&#160;to obtain&#160;an offset into the interrupt&#160;table.&#160;Following reset,&#160;the base of the interrupt&#160;vector&#160;table&#160;is&#160;<br/>located at physical address&#160;0 and its&#160;limit is&#160;set&#160;to 3FFH.&#160;In&#160;the Intel 8086&#160;processor,&#160;the&#160;base&#160;address and limit&#160;of&#160;<br/>the interrupt vector table cannot be changed. In the later IA-32 processors,&#160;the&#160;base address and limit of the&#160;inter-<br/>rupt vector table&#160;are contained in the&#160;IDTR&#160;register&#160;and&#160;can be&#160;changed using&#160;the LIDT&#160;instruction.&#160;<br/>(For backward compatibility to&#160;Intel 8086&#160;processors, the&#160;default base&#160;address&#160;and&#160;limit&#160;of&#160;the interrupt&#160;vector&#160;<br/>table should&#160;not be changed.)</p>
<p style="position:absolute;top:755px;left:69px;white-space:nowrap" class="ft06"><a href="o_fe12b1e2a880e0ce-982.html">Table 20-1 shows th</a>e&#160;interrupt and&#160;exception vectors that&#160;can&#160;be&#160;generated&#160;in real-address mode and&#160;virtual-8086&#160;<br/>mode,&#160;and in the&#160;Intel 8086 processor.&#160;S<a href="o_fe12b1e2a880e0ce-187.html">ee Chapter&#160;6,&#160;“Interrupt and Exception&#160;Handling”, for a de</a>scription of the&#160;<br/>exception conditions.</p>
<p style="position:absolute;top:844px;left:69px;white-space:nowrap" class="ft03">20.2 VIRTUAL-8086&#160;</p>
<p style="position:absolute;top:844px;left:294px;white-space:nowrap" class="ft03">MODE</p>
<p style="position:absolute;top:880px;left:69px;white-space:nowrap" class="ft06">Virtual-8086 mode is&#160;actually a&#160;special type of a&#160;task that&#160;runs&#160;in&#160;protected mode. When the&#160;operating-system or&#160;<br/>executive&#160;switches to a&#160;virtual-8086-mode task, the&#160;processor emulates&#160;an Intel&#160;8086 processor.&#160;The execution&#160;<br/>environment of the processor while&#160;in&#160;the 8086-emulation state&#160;is the same as&#160;is described<a href="o_fe12b1e2a880e0ce-977.html">&#160;in Section&#160;20.1,&#160;“Real-<br/>Address Mode” for real-addre</a>ss&#160;mode,&#160;including&#160;the extensions.&#160;The major difference between the&#160;two modes is&#160;<br/>that in virtual-8086&#160;mode&#160;the&#160;8086 emulator&#160;uses some&#160;protected-mode services (such as&#160;the protected-mode&#160;<br/>interrupt and exception-handling&#160;and paging&#160;facilities).</p>
<p style="position:absolute;top:700px;left:260px;white-space:nowrap" class="ft04">Figure&#160;20-2. &#160;Interrupt Vector&#160;Table in&#160;Real-Address&#160;Mode</p>
<p style="position:absolute;top:577px;left:605px;white-space:nowrap" class="ft00">0</p>
<p style="position:absolute;top:551px;left:605px;white-space:nowrap" class="ft00">2</p>
<p style="position:absolute;top:525px;left:605px;white-space:nowrap" class="ft00">4</p>
<p style="position:absolute;top:470px;left:605px;white-space:nowrap" class="ft00">8</p>
<p style="position:absolute;top:416px;left:604px;white-space:nowrap" class="ft00">12</p>
<p style="position:absolute;top:599px;left:590px;white-space:nowrap" class="ft00">0</p>
<p style="position:absolute;top:600px;left:357px;white-space:nowrap" class="ft00">15</p>
<p style="position:absolute;top:551px;left:428px;white-space:nowrap" class="ft00">Segment Selector</p>
<p style="position:absolute;top:578px;left:461px;white-space:nowrap" class="ft00">Offset</p>
<p style="position:absolute;top:620px;left:209px;white-space:nowrap" class="ft00">* Interrupt vector&#160;number&#160;0 selects entry 0</p>
<p style="position:absolute;top:563px;left:211px;white-space:nowrap" class="ft00">Interrupt Vector&#160;0*</p>
<p style="position:absolute;top:510px;left:458px;white-space:nowrap" class="ft00">Entry 1</p>
<p style="position:absolute;top:458px;left:458px;white-space:nowrap" class="ft00">Entry&#160;2</p>
<p style="position:absolute;top:403px;left:457px;white-space:nowrap" class="ft00">Entry&#160;3</p>
<p style="position:absolute;top:361px;left:435px;white-space:nowrap" class="ft00">Up to Entry 255</p>
<p style="position:absolute;top:629px;left:625px;white-space:nowrap" class="ft00">IDTR</p>
<p style="position:absolute;top:634px;left:216px;white-space:nowrap" class="ft08">(called&#160;“interrupt vector&#160;0”)&#160;in the interrupt<br/>vector&#160;table. Interrupt vector 0&#160;in turn<br/>points to the start of the interrupt handler<br/>for&#160;interrupt&#160;0.</p>
</div>
</body>
</html>
