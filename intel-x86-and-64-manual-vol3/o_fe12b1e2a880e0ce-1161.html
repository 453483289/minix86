<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1161</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:18px;font-family:Times;color:#0860a8;}
	.ft06{font-size:8px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;font-family:Times;color:#000000;}
	.ft08{font-size:16px;font-family:Times;color:#0860a8;}
	.ft09{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft012{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft013{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft014{font-size:11px;line-height:20px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1161-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1161.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:761px;white-space:nowrap" class="ft00">Vol. 3C&#160;28-13</p>
<p style="position:absolute;top:47px;left:581px;white-space:nowrap" class="ft01">VMX SUPPORT&#160;FOR ADDRESS TRANSLATION</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:100px;left:95px;white-space:nowrap" class="ft09">The&#160;<b>EPT memory&#160;type</b>&#160;is specified&#160;in bits&#160;5:3 of the&#160;last&#160;EPT&#160;paging-structure entry: 0&#160;=&#160;UC; 1&#160;=&#160;WC; 4&#160;=&#160;<br/>WT;&#160;5&#160;=&#160;WP;&#160;and 6&#160;=&#160;WB.&#160;Other values&#160;are reserved and&#160;cause&#160;EPT misconfigurations<a href="o_fe12b1e2a880e0ce-1155.html">&#160;(see Section&#160;28.2.3).</a></p>
<p style="position:absolute;top:139px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:139px;left:95px;white-space:nowrap" class="ft010">If CR0.CD&#160;=&#160;0,&#160;the effective&#160;memory type&#160;depends upon&#160;the&#160;value of&#160;bit&#160;6&#160;of the&#160;last EPT&#160;paging-structure&#160;<br/>entry:<br/>‚Äî&#160;If&#160;the value&#160;is 0, the&#160;effective&#160;memory type&#160;is&#160;the combination of the EPT&#160;memory&#160;type&#160;and the&#160;PAT&#160;</p>
<p style="position:absolute;top:196px;left:120px;white-space:nowrap" class="ft09">memory type&#160;<a href="o_fe12b1e2a880e0ce-427.html">specified in Table&#160;11-7&#160;</a>in&#160;<a href="o_fe12b1e2a880e0ce-427.html">Section 11.5.2.2</a>,&#160;using the EPT memory type in&#160;place of the MTRR&#160;<br/>memory type.</p>
<p style="position:absolute;top:237px;left:95px;white-space:nowrap" class="ft03">‚Äî&#160;If the&#160;value is&#160;1,&#160;the&#160;memory type used for the&#160;access is&#160;the EPT memory&#160;type. The PAT memory type is&#160;</p>
<p style="position:absolute;top:253px;left:120px;white-space:nowrap" class="ft03">ignored.</p>
<p style="position:absolute;top:275px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:276px;left:95px;white-space:nowrap" class="ft03">If CR0.CD&#160;=&#160;1,&#160;the effective&#160;memory type&#160;is&#160;UC.</p>
<p style="position:absolute;top:300px;left:69px;white-space:nowrap" class="ft03">The&#160;MTRRs&#160;have&#160;no&#160;effect&#160;on&#160;the&#160;memory&#160;type&#160;used&#160;for&#160;an&#160;access&#160;to&#160;a&#160;guest-physical&#160;address.</p>
<p style="position:absolute;top:355px;left:69px;white-space:nowrap" class="ft05">28.3&#160;</p>
<p style="position:absolute;top:355px;left:148px;white-space:nowrap" class="ft05">CACHING TRANSLATION INFORMATION</p>
<p style="position:absolute;top:391px;left:69px;white-space:nowrap" class="ft03">Processors supporting Intel</p>
<p style="position:absolute;top:389px;left:253px;white-space:nowrap" class="ft06">¬Æ</p>
<p style="position:absolute;top:391px;left:269px;white-space:nowrap" class="ft03">64&#160;and IA-32&#160;architectures&#160;may&#160;accelerate the&#160;address-translation&#160;process&#160;by&#160;</p>
<p style="position:absolute;top:408px;left:69px;white-space:nowrap" class="ft09">caching on&#160;the processor data from the structures in&#160;memory that&#160;control that process. Such caching is&#160;discussed&#160;<br/><a href="o_fe12b1e2a880e0ce-139.html">in Section 4.10,&#160;‚ÄúCaching&#160;Translation&#160;Information‚Äù in the&#160;</a><a href="˛ˇ"><i>Intel¬Æ 64 and&#160;IA-32 Architectures Software&#160;Developer‚Äôs&#160;<br/>Manual, Volume&#160;3A</i></a><i>.</i>&#160;The current&#160;section describes how&#160;this caching&#160;interacts&#160;with&#160;the VMX architecture.<br/>The&#160;VPID and EPT&#160;features of the architecture&#160;for&#160;VMX&#160;operation augment&#160;this caching architecture.&#160;EPT defines&#160;<br/>the guest-physical&#160;address space and defines translations&#160;to that address&#160;space&#160;(from&#160;the linear-address space)&#160;<br/>and from that&#160;address space (to&#160;the physical-address&#160;space). Both features&#160;control the&#160;ways&#160;in which&#160;a logical&#160;<br/>processor&#160;may create&#160;and use&#160;information cached&#160;from the&#160;paging structures.<br/><a href="o_fe12b1e2a880e0ce-1161.html">Section&#160;28.3.1&#160;de</a>scribes&#160;the&#160;different kinds&#160;of information that ma<a href="o_fe12b1e2a880e0ce-1162.html">y be cached. Section 28.3.2&#160;specifies when such</a>&#160;<br/>information may be&#160;cached and&#160;how it&#160;may&#160;be&#160;<a href="o_fe12b1e2a880e0ce-1163.html">used. Section 28.3.3&#160;</a>details how&#160;software can&#160;invalidate&#160;cached&#160;<br/>information.</p>
<p style="position:absolute;top:622px;left:69px;white-space:nowrap" class="ft08">28.3.1&#160;</p>
<p style="position:absolute;top:622px;left:149px;white-space:nowrap" class="ft08">Information That May Be Cached</p>
<p style="position:absolute;top:652px;left:69px;white-space:nowrap" class="ft09"><a href="o_fe12b1e2a880e0ce-139.html">Section&#160;4.10, ‚ÄúCaching Translation Information‚Äù in&#160;</a><a href="˛ˇ"><i>Intel¬Æ 64&#160;and&#160;IA-32&#160;Architectures Software&#160;Developer‚Äôs&#160;<br/>Manual, Volume&#160;3A</i></a>&#160;identifies two kinds&#160;of&#160;translation-related&#160;information&#160;that may be&#160;cached by a&#160;logical&#160;<br/>processor:&#160;<b>translations</b>,&#160;which&#160;are mappings from linear&#160;page numbers&#160;to physical page frames,&#160;and&#160;<b>paging-<br/>structure caches</b>, which map&#160;the upper bits of a&#160;linear page&#160;number&#160;to information&#160;from&#160;the paging-structure&#160;<br/>entries&#160;used&#160;to translate linear&#160;addresses matching&#160;those upper bits.<br/>The same kinds&#160;of information&#160;may&#160;be cached when&#160;VPIDs and EPT are in use.&#160;A logical&#160;processor&#160;may&#160;cache&#160;and&#160;<br/>use&#160;such information&#160;based on&#160;its&#160;function. Information&#160;with different functionality&#160;is identified&#160;as follows:</p>
<p style="position:absolute;top:781px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:781px;left:95px;white-space:nowrap" class="ft04"><b>Linear mappings</b>.</p>
<p style="position:absolute;top:779px;left:225px;white-space:nowrap" class="ft06">1</p>
<p style="position:absolute;top:781px;left:232px;white-space:nowrap" class="ft03">&#160;There&#160;are&#160;two&#160;kinds:</p>
<p style="position:absolute;top:805px;left:95px;white-space:nowrap" class="ft03">‚Äî&#160;Linear&#160;translations. Each of these is&#160;a mapping from a&#160;linear page&#160;number&#160;to the&#160;physical&#160;page frame&#160;to&#160;</p>
<p style="position:absolute;top:822px;left:120px;white-space:nowrap" class="ft03">which&#160;it translates,&#160;along with information&#160;about access privileges&#160;and memory typing.</p>
<p style="position:absolute;top:846px;left:94px;white-space:nowrap" class="ft03">‚Äî&#160;Linear&#160;paging-structure-cache entries. Each of&#160;these is&#160;a&#160;mapping&#160;from the&#160;upper portion&#160;of&#160;a linear&#160;</p>
<p style="position:absolute;top:862px;left:120px;white-space:nowrap" class="ft09">address&#160;to the physical&#160;address of the&#160;paging structure used to&#160;translate&#160;the corresponding region&#160;of the&#160;<br/>linear-address space,&#160;along with information&#160;about access privileges. For example,&#160;bits&#160;47:39&#160;of a&#160;linear&#160;<br/>address&#160;would&#160;map&#160;to the&#160;address of the&#160;relevant page-directory-pointer table.</p>
<p style="position:absolute;top:918px;left:94px;white-space:nowrap" class="ft03">Linear mappings do not contain information&#160;from&#160;any EPT&#160;paging&#160;structure.</p>
<p style="position:absolute;top:940px;left:69px;white-space:nowrap" class="ft02">‚Ä¢</p>
<p style="position:absolute;top:940px;left:95px;white-space:nowrap" class="ft04"><b>Guest-physical mappings</b>.</p>
<p style="position:absolute;top:938px;left:289px;white-space:nowrap" class="ft06">2</p>
<p style="position:absolute;top:940px;left:296px;white-space:nowrap" class="ft03">&#160;There are two&#160;kinds:</p>
<p style="position:absolute;top:964px;left:95px;white-space:nowrap" class="ft03">‚Äî&#160;Guest-physical&#160;translations.&#160;Each of these&#160;is a mapping&#160;from&#160;a guest-physical page number&#160;to the physical&#160;</p>
<p style="position:absolute;top:981px;left:120px;white-space:nowrap" class="ft03">page frame&#160;to which it&#160;translates, along&#160;with&#160;information&#160;about access privileges&#160;and memory typing.</p>
<p style="position:absolute;top:1033px;left:69px;white-space:nowrap" class="ft014">1.&#160;Earlier versions of&#160;this manual&#160;used&#160;the term ‚ÄúVPID-tagged‚Äù to&#160;identify linear mappings.<br/>2.&#160;Earlier versions of&#160;this manual&#160;used&#160;the term&#160;‚ÄúEPTP-tagged‚Äù to&#160;identify&#160;guest-physical mappings.</p>
</div>
</body>
</html>
