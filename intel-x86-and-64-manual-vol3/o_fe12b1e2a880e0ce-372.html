<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 372</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:16px;font-family:Times;color:#0860a8;}
	.ft04{font-size:14px;font-family:Times;color:#0860a8;}
	.ft05{font-size:18px;font-family:Times;color:#000000;}
	.ft06{font-size:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page372-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce372.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">10-10&#160;Vol. 3A</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">ADVANCED PROGRAMMABLE INTERRUPT CONTROLLER&#160;(APIC)</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft07">For&#160;the P6 family and&#160;Pentium&#160;processors, the&#160;local APIC ID&#160;field in the&#160;local APIC ID register&#160;is 4&#160;bits. Encodings&#160;<br/>0H through EH can be&#160;used&#160;to uniquely identify 15&#160;different processors connected&#160;to the APIC bus. For&#160;the Pentium&#160;<br/>4 and Intel Xeon processors, the&#160;xAPIC specification extends&#160;the&#160;local APIC&#160;ID field&#160;to 8&#160;bits.&#160;These&#160;can be&#160;used&#160;to&#160;<br/>identify up&#160;to 255&#160;processors&#160;in the&#160;system.</p>
<p style="position:absolute;top:200px;left:68px;white-space:nowrap" class="ft03">10.4.7&#160;</p>
<p style="position:absolute;top:200px;left:148px;white-space:nowrap" class="ft03">Local APIC State</p>
<p style="position:absolute;top:231px;left:68px;white-space:nowrap" class="ft08">The following sections&#160;describe the&#160;state&#160;of the&#160;local APIC&#160;and its registers&#160;following a&#160;power-up&#160;or&#160;reset, after the&#160;<br/>local APIC has&#160;been&#160;software disabled,&#160;following an&#160;INIT reset,&#160;and following an&#160;INIT-deassert&#160;message.<br/>x2APIC will introduce&#160;32<a href="o_fe12b1e2a880e0ce-398.html">-bit ID; see Section&#160;10.12</a>.</p>
<p style="position:absolute;top:316px;left:68px;white-space:nowrap" class="ft04">10.4.7.1 &#160;&#160;Local&#160;APIC State&#160;After Power-Up or Reset</p>
<p style="position:absolute;top:344px;left:68px;white-space:nowrap" class="ft02">Following a&#160;power-up&#160;or reset of&#160;the&#160;processor,&#160;the&#160;state of local&#160;APIC&#160;and&#160;its registers are as&#160;follows:</p>
<p style="position:absolute;top:366px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:367px;left:93px;white-space:nowrap" class="ft02">The&#160;following&#160;registers are&#160;reset to all 0s:&#160;</p>
<p style="position:absolute;top:392px;left:119px;white-space:nowrap" class="ft06">•</p>
<p style="position:absolute;top:391px;left:144px;white-space:nowrap" class="ft02">IRR, ISR,&#160;TMR, ICR, LDR, and&#160;TPR</p>
<p style="position:absolute;top:416px;left:119px;white-space:nowrap" class="ft06">•</p>
<p style="position:absolute;top:415px;left:144px;white-space:nowrap" class="ft02">Timer initial&#160;count&#160;and timer&#160;current count registers</p>
<p style="position:absolute;top:440px;left:119px;white-space:nowrap" class="ft06">•</p>
<p style="position:absolute;top:439px;left:144px;white-space:nowrap" class="ft02">Divide configuration register</p>
<p style="position:absolute;top:460px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:461px;left:93px;white-space:nowrap" class="ft02">The&#160;DFR register&#160;is reset to&#160;all 1s.</p>
<p style="position:absolute;top:483px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:484px;left:93px;white-space:nowrap" class="ft02">The&#160;LVT register&#160;is&#160;reset to&#160;0s except&#160;for&#160;the mask bits; these are&#160;set&#160;to 1s.</p>
<p style="position:absolute;top:505px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:506px;left:93px;white-space:nowrap" class="ft02">The&#160;local&#160;APIC version register&#160;is not affected.</p>
<p style="position:absolute;top:528px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:529px;left:93px;white-space:nowrap" class="ft07">The&#160;local&#160;APIC ID register&#160;is set to&#160;a unique&#160;APIC ID.&#160;(Pentium and P6&#160;family&#160;processors&#160;only). The&#160;Arb ID&#160;<br/>register is&#160;set to&#160;the value&#160;in the&#160;APIC ID&#160;register.</p>
<p style="position:absolute;top:567px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:568px;left:93px;white-space:nowrap" class="ft07">The&#160;spurious-interrupt&#160;vector&#160;register&#160;is&#160;initialized&#160;to&#160;000000FFH. By setting bit 8&#160;to 0, software&#160;disables the&#160;<br/>local APIC.</p>
<p style="position:absolute;top:606px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:607px;left:93px;white-space:nowrap" class="ft07">If the&#160;processor is&#160;the&#160;only processor in the&#160;system or&#160;it&#160;is&#160;the&#160;BSP&#160;in an&#160;MP&#160;system (see<a href="o_fe12b1e2a880e0ce-274.html">&#160;Section 8.4.1,&#160;“BSP&#160;<br/>and AP&#160;Processors”); the&#160;</a>local&#160;APIC will respond&#160;normally&#160;to INIT and&#160;NMI&#160;messages, to&#160;INIT# signals&#160;and&#160;to&#160;<br/>STPCLK# signals. If&#160;the&#160;processor is&#160;in an MP system&#160;and&#160;has been&#160;designated as&#160;an AP; the&#160;local APIC will&#160;<br/>respond the&#160;same as&#160;for the&#160;BSP.&#160;In&#160;addition, it&#160;will&#160;respond&#160;to SIPI&#160;messages. For P6 family processors only,&#160;<br/>an AP&#160;will&#160;not respond to&#160;a STPCLK#&#160;signal.</p>
<p style="position:absolute;top:717px;left:68px;white-space:nowrap" class="ft04">10.4.7.2 &#160;&#160;Local&#160;APIC State&#160;After It Has Been Software&#160;Disabled&#160;</p>
<p style="position:absolute;top:745px;left:68px;white-space:nowrap" class="ft07">When the&#160;APIC software&#160;enable/disable flag in the spurious interrupt vector register&#160;has been&#160;explicitly&#160;cleared (as&#160;<br/>opposed to&#160;being&#160;cleared&#160;during&#160;a&#160;power up&#160;or reset),&#160;the&#160;local&#160;APIC&#160;is temporarily disabled&#160;(see<a href="o_fe12b1e2a880e0ce-370.html">&#160;Section 10.4.3,&#160;<br/>“Enabling&#160;or Disabling the&#160;Local APIC”). The ope</a>ration&#160;and response&#160;of&#160;a local&#160;APIC while&#160;in&#160;this&#160;software-disabled&#160;<br/>state is&#160;as follows:</p>
<p style="position:absolute;top:817px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:817px;left:93px;white-space:nowrap" class="ft02">The&#160;local&#160;APIC will&#160;respond&#160;normally to&#160;INIT, NMI, SMI, and&#160;SIPI messages.</p>
<p style="position:absolute;top:839px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:840px;left:93px;white-space:nowrap" class="ft02">Pending interrupts&#160;in the&#160;IRR and ISR registers&#160;are&#160;held and&#160;require&#160;masking or handling by the&#160;CPU.</p>
<p style="position:absolute;top:862px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:862px;left:93px;white-space:nowrap" class="ft07">The&#160;local APIC can still issue IPIs. It is&#160;software’s&#160;responsibility to avoid&#160;issuing IPIs through the&#160;IPI mechanism&#160;<br/>and&#160;the ICR&#160;register&#160;if sending interrupts through this&#160;mechanism&#160;is not desired.</p>
<p style="position:absolute;top:901px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:901px;left:93px;white-space:nowrap" class="ft07">The reception of any&#160;interrupt or&#160;transmission of any&#160;IPIs&#160;that are&#160;in progress when the&#160;local APIC is&#160;disabled&#160;<br/>are&#160;completed before the&#160;local APIC enters the&#160;software-disabled&#160;state.</p>
<p style="position:absolute;top:940px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:940px;left:93px;white-space:nowrap" class="ft02">The&#160;mask&#160;bits for&#160;all the&#160;LVT entries are&#160;set.&#160;Attempts&#160;to reset these bits will be ignored.</p>
<p style="position:absolute;top:962px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:963px;left:93px;white-space:nowrap" class="ft07">(For Pentium and P6 family processors) The local APIC continues to listen to all bus messages in order to keep&#160;<br/>its arbitration ID synchronized with the&#160;rest of&#160;the system.</p>
<p style="position:absolute;top:1024px;left:68px;white-space:nowrap" class="ft04">10.4.7.3 &#160;&#160;Local&#160;APIC State&#160;After an INIT&#160;Reset (“Wait-for-SIPI” State)</p>
<p style="position:absolute;top:1052px;left:68px;white-space:nowrap" class="ft02">An INIT&#160;reset of&#160;the&#160;processor&#160;can be initiated in&#160;either of two&#160;ways:</p>
</div>
</body>
</html>
