<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 641</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page641-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce641.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:768px;white-space:nowrap" class="ft00">Vol. 3B&#160;18-5</p>
<p style="position:absolute;top:47px;left:672px;white-space:nowrap" class="ft01">PERFORMANCE MONITORING</p>
<p style="position:absolute;top:183px;left:69px;white-space:nowrap" class="ft06">A processor that&#160;supports architectural performance&#160;monitoring may not support all&#160;the predefined architectural&#160;<br/>performance ev<a href="o_fe12b1e2a880e0ce-640.html">ents (Table&#160;18-1).</a>&#160;The&#160;non-zero&#160;bits in CPUID.0AH:EBX&#160;indicate the events&#160;that are not&#160;available.&#160;<br/>The behavior of&#160;each architectural performance event is&#160;expected&#160;to&#160;be consistent on&#160;all processors that&#160;support&#160;<br/>that event.&#160;Minor variations between microarchitectures&#160;are&#160;noted below:</p>
<p style="position:absolute;top:262px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:262px;left:95px;white-space:nowrap" class="ft09"><b>UnHalted Core&#160;Cycles</b>&#160;<b>—&#160;</b>Event select 3CH,&#160;Umask 00H&#160;<br/>This event counts core clock cycles when the clock signal&#160;on&#160;a specific core is running (not halted). The counter&#160;<br/>does not advance in the&#160;following&#160;conditions:&#160;<br/>—&#160;an&#160;ACPI&#160;C-state other&#160;than C0 for normal operation<br/>—&#160;HLT<br/>—&#160;STPCLK#&#160;pin asserted&#160;<br/>—&#160;being throttled by TM1<br/>—&#160;during the&#160;frequency switching phase of a&#160;performance state transition&#160;<a href="o_fe12b1e2a880e0ce-467.html">(see Chapter 14,&#160;“Power and&#160;</a></p>
<p style="position:absolute;top:438px;left:120px;white-space:nowrap" class="ft02"><a href="o_fe12b1e2a880e0ce-467.html">Thermal Management”)</a></p>
<p style="position:absolute;top:460px;left:95px;white-space:nowrap" class="ft06">The&#160;performance counter for&#160;this&#160;event&#160;counts across&#160;performance state transitions&#160;using different&#160;core clock&#160;<br/>frequencies</p>
<p style="position:absolute;top:499px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:499px;left:95px;white-space:nowrap" class="ft06"><b>Instructions Retired</b>&#160;<b>—&#160;</b>Event select C0H,&#160;Umask 00H&#160;<br/>This event&#160;counts the number&#160;of&#160;instructions at&#160;retirement. For&#160;instructions that consist of multiple micro-ops,&#160;<br/>this event&#160;counts&#160;the retirement of the&#160;last micro-op&#160;of&#160;the&#160;instruction. An&#160;instruction with a&#160;REP prefix&#160;counts&#160;<br/>as&#160;one&#160;instruction (not per iteration).&#160;Faults before&#160;the&#160;retirement of&#160;the&#160;last&#160;micro-op of a&#160;multi-ops instruction&#160;<br/>are not&#160;counted.<br/>This event does&#160;not&#160;increment under&#160;VM-exit conditions. Counters&#160;continue counting&#160;during hardware&#160;<br/>interrupts,&#160;traps,&#160;and&#160;inside&#160;interrupt handlers.&#160;</p>
<p style="position:absolute;top:632px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:633px;left:95px;white-space:nowrap" class="ft06"><b>UnHalted Reference&#160;Cycles —&#160;</b>Event&#160;select 3CH, Umask&#160;01H&#160;<br/>This event counts&#160;reference&#160;clock&#160;cycles while the&#160;clock signal&#160;on the&#160;core is&#160;running. The reference clock&#160;<br/>operates at&#160;a fixed&#160;frequency,&#160;irrespective of&#160;core&#160;frequency&#160;changes due to&#160;performance state&#160;transitions.&#160;<br/>Processors may&#160;implement&#160;this&#160;behavior differently.&#160;S<a href="o_fe12b1e2a880e0ce-874.html">ee Table 19-23</a>&#160;<a href="o_fe12b1e2a880e0ce-924.html">and Table 19-27</a>&#160;<a href="o_fe12b1e2a880e0ce-757.html">in Chapter&#160;19, “Perfor-<br/>mance-Monitoring&#160;Events.”</a></p>
<p style="position:absolute;top:727px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:727px;left:95px;white-space:nowrap" class="ft06"><b>Last&#160;Level Cache References</b>&#160;<b>—&#160;</b>Event&#160;select 2EH, Umask 4FH&#160;<br/>This event counts&#160;requests&#160;originating&#160;from&#160;the core&#160;that reference a&#160;cache line&#160;in the&#160;last level&#160;cache.&#160;The&#160;<br/>event count includes&#160;speculation and&#160;cache line&#160;fills due to&#160;the first-level&#160;cache&#160;hardware&#160;prefetcher,&#160;but may&#160;<br/>exclude&#160;cache&#160;line&#160;fills due&#160;to&#160;other&#160;hardware-prefetchers.&#160;<br/>Because cache hierarchy,&#160;cache sizes&#160;and other&#160;implementation-specific characteristics; value&#160;comparison&#160;to&#160;<br/>estimate&#160;performance&#160;differences&#160;is not recommended.&#160;</p>
<p style="position:absolute;top:844px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:844px;left:95px;white-space:nowrap" class="ft06"><b>Last&#160;Level Cache Misses</b>&#160;<b>—&#160;</b>Event&#160;select 2EH, Umask 41H<br/>This event counts each cache miss condition&#160;for references&#160;to the&#160;last level cache.&#160;The&#160;event count may include&#160;<br/>speculation&#160;and cache&#160;line fills due to the first-level cache hardware prefetcher, but may exclude cache line fills&#160;<br/>due to other&#160;hardware-prefetchers.&#160;<br/>Because cache hierarchy,&#160;cache sizes&#160;and other&#160;implementation-specific characteristics; value&#160;comparison&#160;to&#160;<br/>estimate&#160;performance&#160;differences&#160;is not recommended.&#160;</p>
<p style="position:absolute;top:961px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:961px;left:95px;white-space:nowrap" class="ft06"><b>Branch&#160;Instructions Retired —&#160;</b>Event&#160;select C4H, Umask 00H<br/>This event counts&#160;branch&#160;instructions&#160;at&#160;retirement. It&#160;counts&#160;the&#160;retirement&#160;of&#160;the last&#160;micro-op of a&#160;branch&#160;<br/>instruction.&#160;</p>
<p style="position:absolute;top:1022px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:1023px;left:95px;white-space:nowrap" class="ft04"><b>All Branch Mispredict Retired</b>&#160;<b>—&#160;</b>Event&#160;select C5H, Umask 00H</p>
<p style="position:absolute;top:124px;left:77px;white-space:nowrap" class="ft02">5</p>
<p style="position:absolute;top:124px;left:225px;white-space:nowrap" class="ft02">Branch&#160;Instruction Retired</p>
<p style="position:absolute;top:124px;left:492px;white-space:nowrap" class="ft02">00H</p>
<p style="position:absolute;top:124px;left:667px;white-space:nowrap" class="ft02">C4H</p>
<p style="position:absolute;top:148px;left:77px;white-space:nowrap" class="ft02">6</p>
<p style="position:absolute;top:148px;left:225px;white-space:nowrap" class="ft02">Branch&#160;&#160;Misses&#160;&#160;Retired</p>
<p style="position:absolute;top:148px;left:492px;white-space:nowrap" class="ft02">00H</p>
<p style="position:absolute;top:148px;left:667px;white-space:nowrap" class="ft02">C5H</p>
<p style="position:absolute;top:100px;left:126px;white-space:nowrap" class="ft05">Table 18-1. &#160;UMask&#160;and&#160;Event&#160;Select&#160;Encodings&#160;for&#160;Pre-Defined&#160;Architectural&#160;Performance Events</p>
</div>
</body>
</html>
