<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 215</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:12px;font-family:Times;color:#0860a8;}
	.ft04{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page215-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce215.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:767px;white-space:nowrap" class="ft00">Vol. 3A&#160;6-29</p>
<p style="position:absolute;top:47px;left:609px;white-space:nowrap" class="ft01">INTERRUPT&#160;AND&#160;EXCEPTION HANDLING</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft04">A&#160;segment&#160;or page&#160;fault may&#160;be&#160;encountered&#160;while&#160;prefetching instructions; however,&#160;this behavior&#160;is outside&#160;the&#160;<br/>domain&#160;<a href="o_fe12b1e2a880e0ce-215.html">of&#160;Table&#160;6-5</a>.&#160;Any further faults generated while&#160;the&#160;processor&#160;is attempting&#160;to&#160;transfer control to&#160;the&#160;<br/>appropriate&#160;fault handler&#160;could still lead to&#160;a double-fault&#160;sequence.</p>
<p style="position:absolute;top:403px;left:69px;white-space:nowrap" class="ft04">If another contributory or&#160;page&#160;fault exception&#160;occurs&#160;while&#160;attempting&#160;to call&#160;the double-fault handler,&#160;the&#160;<br/>processor enters&#160;shutdown mode. This mode is similar to the state following execution of an HLT instruction. In&#160;this&#160;<br/>mode, the processor stops executing&#160;instructions&#160;until&#160;an&#160;NMI&#160;interrupt,&#160;SMI interrupt, hardware&#160;reset, or INIT#&#160;is&#160;<br/>received. The&#160;processor generates&#160;a special&#160;bus cycle to&#160;indicate that&#160;it has&#160;entered shutdown&#160;mode. Software&#160;<br/>designers&#160;may&#160;need&#160;to be aware of the&#160;response of hardware&#160;when it&#160;goes&#160;into shutdown mode.&#160;For example,&#160;<br/>hardware may turn on an&#160;indicator&#160;light on&#160;the front panel,&#160;generate an NMI interrupt to record&#160;diagnostic informa-<br/>tion, invoke&#160;reset&#160;initialization, generate&#160;an INIT initialization, or&#160;generate an&#160;SMI. If&#160;any events are pending&#160;<br/>during&#160;shutdown, they&#160;will be handled after&#160;an&#160;wake&#160;event from&#160;shutdown is&#160;processed (for example,&#160;A20M#&#160;inter-<br/>rupts).<br/>If&#160;a shutdown&#160;occurs while the&#160;processor&#160;is executing an&#160;NMI&#160;interrupt&#160;handler,&#160;then only a hardware reset can&#160;<br/>restart the processor.&#160;Likewise,&#160;if the shutdown occurs while executing&#160;in SMM, a hardware reset must be&#160;used to&#160;<br/>restart the&#160;processor.</p>
<p style="position:absolute;top:629px;left:69px;white-space:nowrap" class="ft03">Exception&#160;Error&#160;Code</p>
<p style="position:absolute;top:655px;left:69px;white-space:nowrap" class="ft02">Zero. The processor always pushes&#160;an error&#160;code&#160;of&#160;0 onto the&#160;stack of the&#160;double-fault&#160;handler.&#160;</p>
<p style="position:absolute;top:692px;left:69px;white-space:nowrap" class="ft03">Saved Instruction&#160;Pointer</p>
<p style="position:absolute;top:718px;left:69px;white-space:nowrap" class="ft02">The&#160;saved&#160;contents of CS&#160;and&#160;EIP&#160;registers are&#160;undefined.</p>
<p style="position:absolute;top:755px;left:69px;white-space:nowrap" class="ft03">Program State&#160;Change</p>
<p style="position:absolute;top:781px;left:69px;white-space:nowrap" class="ft04">A&#160;program-state&#160;following a double-fault exception&#160;is&#160;undefined.&#160;The program or&#160;task cannot be&#160;resumed&#160;or&#160;<br/>restarted. The only&#160;available&#160;action of&#160;the&#160;double-fault&#160;exception handler is&#160;to collect&#160;all&#160;possible&#160;context informa-<br/>tion for use&#160;in diagnostics and&#160;then close&#160;the&#160;application&#160;and/or shut down or&#160;reset&#160;the processor.<br/>If the&#160;double&#160;fault&#160;occurs when any&#160;portion of the&#160;exception handling&#160;machine&#160;state&#160;is corrupted, the&#160;handler&#160;<br/>cannot&#160;be&#160;invoked&#160;and the&#160;processor must be&#160;reset.</p>
<p style="position:absolute;top:164px;left:275px;white-space:nowrap" class="ft03">Table 6-5.&#160;&#160;Conditions&#160;for&#160;Generating&#160;a Double Fault&#160;</p>
<p style="position:absolute;top:189px;left:266px;white-space:nowrap" class="ft02">Second&#160;Exception</p>
<p style="position:absolute;top:213px;left:75px;white-space:nowrap" class="ft02">First Exception</p>
<p style="position:absolute;top:213px;left:266px;white-space:nowrap" class="ft02">Benign</p>
<p style="position:absolute;top:213px;left:444px;white-space:nowrap" class="ft02">Contributory</p>
<p style="position:absolute;top:213px;left:641px;white-space:nowrap" class="ft02">Page&#160;Fault</p>
<p style="position:absolute;top:236px;left:75px;white-space:nowrap" class="ft02">Benign</p>
<p style="position:absolute;top:236px;left:266px;white-space:nowrap" class="ft02">Handle&#160;Exceptions&#160;Serially</p>
<p style="position:absolute;top:236px;left:444px;white-space:nowrap" class="ft02">Handle&#160;Exceptions&#160;Serially</p>
<p style="position:absolute;top:236px;left:641px;white-space:nowrap" class="ft02">Handle&#160;Exceptions Serially</p>
<p style="position:absolute;top:277px;left:75px;white-space:nowrap" class="ft02">Contributory</p>
<p style="position:absolute;top:277px;left:266px;white-space:nowrap" class="ft02">Handle&#160;Exceptions&#160;Serially</p>
<p style="position:absolute;top:277px;left:444px;white-space:nowrap" class="ft02">Generate&#160;a Double&#160;Fault</p>
<p style="position:absolute;top:277px;left:641px;white-space:nowrap" class="ft02">Handle Exceptions Serially</p>
<p style="position:absolute;top:317px;left:75px;white-space:nowrap" class="ft02">Page&#160;Fault</p>
<p style="position:absolute;top:317px;left:266px;white-space:nowrap" class="ft02">Handle&#160;Exceptions&#160;Serially</p>
<p style="position:absolute;top:317px;left:444px;white-space:nowrap" class="ft02">Generate&#160;a Double&#160;Fault</p>
<p style="position:absolute;top:317px;left:641px;white-space:nowrap" class="ft02">Generate a&#160;Double&#160;Fault</p>
<p style="position:absolute;top:358px;left:75px;white-space:nowrap" class="ft02">Double Fault</p>
<p style="position:absolute;top:358px;left:266px;white-space:nowrap" class="ft02">Handle&#160;Exceptions&#160;Serially</p>
<p style="position:absolute;top:358px;left:444px;white-space:nowrap" class="ft02">Enter Shutdown Mode</p>
<p style="position:absolute;top:358px;left:641px;white-space:nowrap" class="ft02">Enter Shutdown&#160;Mode</p>
</div>
</body>
</html>
