<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1164</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:14px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1164-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1164.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">28-16&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">VMX SUPPORT&#160;FOR&#160;ADDRESS TRANSLATION</p>
<p style="position:absolute;top:100px;left:119px;white-space:nowrap" class="ft06">EP4TAs.&#160;(The&#160;instruction&#160;may also&#160;invalidate&#160;mappings associated&#160;with other&#160;VPIDs&#160;and for other&#160;linear&#160;<br/>addresses.)</p>
<p style="position:absolute;top:141px;left:93px;white-space:nowrap" class="ft02">‚Äî&#160;<b>Single-context.</b>&#160;If the&#160;INVVPID type is&#160;1,&#160;the&#160;logical&#160;processor&#160;invalidates&#160;all linear mappings and&#160;</p>
<p style="position:absolute;top:157px;left:119px;white-space:nowrap" class="ft06">combined&#160;mappings associated with the&#160;VPID&#160;specified in&#160;the INVVPID descriptor.&#160;Linear mappings and&#160;<br/>combined&#160;mappings for that&#160;VPID are invalidated&#160;for&#160;all PCIDs and, for&#160;combined mappings, all&#160;EP4TAs.&#160;<br/>(The instruction may also&#160;invalidate&#160;mappings&#160;associated with other&#160;VPIDs.)</p>
<p style="position:absolute;top:214px;left:93px;white-space:nowrap" class="ft02">‚Äî&#160;<b>All-context.</b>&#160;If the&#160;INVVPID type is&#160;2,&#160;the&#160;logical&#160;processor invalidates linear mappings and&#160;combined&#160;</p>
<p style="position:absolute;top:231px;left:119px;white-space:nowrap" class="ft06">mappings associated with all&#160;VPIDs&#160;except VPID 0000H&#160;and&#160;with all&#160;PCIDs.&#160;(The&#160;instruction may&#160;also&#160;<br/>invalidate&#160;linear mappings&#160;with VPID 0000H.)&#160;Combined mappings are&#160;invalidated&#160;for&#160;all EP4TAs.</p>
<p style="position:absolute;top:271px;left:93px;white-space:nowrap" class="ft02">‚Äî&#160;<b>Single-context-retaining-globals.</b>&#160;If the&#160;INVVPID type&#160;is&#160;3,&#160;the logical processor invalidates&#160;linear&#160;</p>
<p style="position:absolute;top:288px;left:119px;white-space:nowrap" class="ft06">mappings&#160;and combined mappings associated&#160;with the&#160;VPID&#160;specified in&#160;the INVVPID&#160;descriptor.&#160;Linear&#160;<br/>mappings and&#160;combined&#160;mappings for that VPID&#160;are&#160;invalidated for&#160;all PCIDs and, for combined&#160;mappings,&#160;<br/>all EP4TAs. The&#160;logical processor is&#160;<b>not</b>&#160;required&#160;to invalidate&#160;information that was used for&#160;<b>global</b>&#160;transla-<br/>tions (although&#160;it may&#160;do&#160;so).&#160;<a href="o_fe12b1e2a880e0ce-139.html">See Section 4.10, ‚ÄúCaching&#160;Translation&#160;Information‚Äù for de</a>tails regarding&#160;<br/>global translations. (The instruction may&#160;also invalidate&#160;mappings associated&#160;with other&#160;VPIDs.)</p>
<p style="position:absolute;top:376px;left:93px;white-space:nowrap" class="ft06">S<a href="˛ˇ">ee Chapter 30 for de</a>tails&#160;of the INVVPID instruction. Se<a href="o_fe12b1e2a880e0ce-1164.html">e Section 28.3.3.3</a>&#160;for guidelines&#160;regarding use of&#160;this&#160;<br/>instruction.</p>
<p style="position:absolute;top:415px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:415px;left:93px;white-space:nowrap" class="ft07">Execution&#160;of&#160;the INVEPT instruction invalidates guest-physical mappings and&#160;combined&#160;mappings. Invalidation&#160;<br/>is&#160;based on instruction operands, called&#160;the&#160;INVEPT&#160;type&#160;and&#160;the&#160;INVEPT&#160;descriptor.&#160;Two INVEPT types&#160;are&#160;<br/>currently defined:<br/>‚Äî&#160;<b>Single-context.</b>&#160;If the INVEPT type&#160;is 1,&#160;the logical processor invalidates all&#160;guest-physical mappings&#160;and&#160;</p>
<p style="position:absolute;top:489px;left:119px;white-space:nowrap" class="ft06">combined&#160;mappings associated with the EP4TA specified in the INVEPT&#160;descriptor.&#160;Combined mappings for&#160;<br/>that&#160;EP4TA are invalidated for&#160;all VPIDs and all PCIDs.&#160;(The&#160;instruction&#160;may invalidate mappings associated&#160;<br/>with&#160;other&#160;EP4TAs.)</p>
<p style="position:absolute;top:546px;left:93px;white-space:nowrap" class="ft02">‚Äî&#160;<b>All-context.</b>&#160;If the&#160;INVEPT type is&#160;2,&#160;the&#160;logical&#160;processor&#160;invalidates&#160;guest-physical mappings and&#160;</p>
<p style="position:absolute;top:562px;left:119px;white-space:nowrap" class="ft02">combined&#160;mappings associated with all&#160;EP4TAs&#160;(and, for combined mappings,&#160;for&#160;all VPIDs and&#160;PCIDs).</p>
<p style="position:absolute;top:585px;left:93px;white-space:nowrap" class="ft06">See&#160;<a href="˛ˇ">Chapter 30&#160;for de</a>tails of&#160;the&#160;INVEPT instruction.&#160;Se<a href="o_fe12b1e2a880e0ce-1165.html">e&#160;Section&#160;28.3.3.4 for</a>&#160;guidelines&#160;regarding use of&#160;this&#160;<br/>instruction.</p>
<p style="position:absolute;top:623px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:624px;left:93px;white-space:nowrap" class="ft02">A power-up or&#160;a reset invalidates all&#160;linear&#160;mappings,&#160;guest-physical&#160;mappings,&#160;and&#160;combined&#160;mappings.</p>
<p style="position:absolute;top:668px;left:68px;white-space:nowrap" class="ft05">28.3.3.2 &#160;&#160;Operations that Need&#160;Not Invalidate&#160;Cached&#160;Mappings</p>
<p style="position:absolute;top:697px;left:68px;white-space:nowrap" class="ft02">The&#160;following&#160;items detail cases of operations that&#160;are not required&#160;to invalidate certain cached&#160;mappings:</p>
<p style="position:absolute;top:718px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:719px;left:93px;white-space:nowrap" class="ft06">Operations that&#160;architecturally invalidate&#160;entries in&#160;the&#160;TLBs&#160;or paging-structure caches independent&#160;of VMX&#160;<br/>operation are&#160;not required&#160;to invalidate any&#160;guest-physical mappings.</p>
<p style="position:absolute;top:757px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:758px;left:93px;white-space:nowrap" class="ft02">The&#160;INVVPID instruction is&#160;not required&#160;to invalidate any&#160;guest-physical mappings.</p>
<p style="position:absolute;top:780px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:781px;left:93px;white-space:nowrap" class="ft02">The&#160;INVEPT instruction is&#160;not required&#160;to invalidate&#160;any&#160;linear mappings.</p>
<p style="position:absolute;top:802px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:803px;left:93px;white-space:nowrap" class="ft06">VMX&#160;transitions are not required&#160;to invalidate&#160;any guest-physical mappings. If&#160;the ‚Äúenable&#160;VPID‚Äù VM-execution&#160;<br/>control is&#160;1, VMX transitions&#160;are not required&#160;to&#160;invalidate any&#160;linear mappings or&#160;combined&#160;mappings.&#160;</p>
<p style="position:absolute;top:841px;left:68px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:842px;left:93px;white-space:nowrap" class="ft06">The&#160;VMXOFF&#160;and VMXON instructions are not required&#160;to invalidate&#160;any linear&#160;mappings, guest-physical&#160;<br/>mappings,&#160;or combined mappings.</p>
<p style="position:absolute;top:883px;left:68px;white-space:nowrap" class="ft06">A logical processor may&#160;invalidate any&#160;cached&#160;mappings&#160;at&#160;any time. For this&#160;reason,&#160;the operations identified&#160;<br/>above&#160;may&#160;invalidate&#160;the&#160;indicated mappings despite&#160;the&#160;fact&#160;that doing so is&#160;not required.</p>
<p style="position:absolute;top:943px;left:68px;white-space:nowrap" class="ft05">28.3.3.3 &#160;&#160;Guidelines for&#160;Use of&#160;the INVVPID Instruction</p>
<p style="position:absolute;top:972px;left:68px;white-space:nowrap" class="ft06">The need for VMM&#160;software to&#160;use the&#160;INVVPID instruction&#160;depends on&#160;how&#160;that&#160;software is&#160;virtualizing&#160;memory&#160;<br/>(e.g.,&#160;see<a href="o_fe12b1e2a880e0ce-1230.html">&#160;Section 32.3, ‚ÄúMemory&#160;Virtualization‚Äù).&#160;<br/></a>If EPT&#160;is not in use,&#160;it&#160;is likely that the&#160;VMM is virtualizing&#160;the guest paging structures. Such&#160;a VMM&#160;may&#160;configure&#160;<br/>the VMCS&#160;so that all&#160;or some&#160;of&#160;the operations&#160;that&#160;invalidate entries the&#160;TLBs&#160;and the&#160;paging-structure caches&#160;<br/>(e.g.,&#160;the INVLPG instruction) cause&#160;VM&#160;exits. If&#160;VMM software&#160;is emulating these operations, it may be necessary&#160;</p>
</div>
</body>
</html>
