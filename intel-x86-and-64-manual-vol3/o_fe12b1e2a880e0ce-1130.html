<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1130</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:8px;font-family:Times;color:#000000;}
	.ft05{font-size:16px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1130-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1130.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">27-12&#160;Vol. 3C</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">VM&#160;EXITS</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:100px;left:93px;white-space:nowrap" class="ft03">An EPT violation,&#160;EPT misconfiguration, or&#160;page-modification log-full event&#160;that&#160;occurs during event delivery.</p>
<p style="position:absolute;top:124px;left:68px;white-space:nowrap" class="ft08">These&#160;fields are used for VM&#160;exits that&#160;occur&#160;during&#160;delivery&#160;of&#160;events injected&#160;as&#160;part of VM&#160;entr<a href="o_fe12b1e2a880e0ce-1112.html">y (see Section&#160;<br/>26.5.1.2).<br/></a>A&#160;VM&#160;exit&#160;is not considered to occur&#160;during event&#160;delivery in any&#160;of&#160;the following circumstances:</p>
<p style="position:absolute;top:187px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:187px;left:93px;white-space:nowrap" class="ft07">The&#160;original event causes the&#160;VM&#160;exit&#160;directly (for&#160;example, because&#160;the original&#160;event is&#160;a non-maskable&#160;<br/>interrupt&#160;(NMI)&#160;and the&#160;“NMI&#160;exiting” VM-execution control&#160;is 1).</p>
<p style="position:absolute;top:226px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:226px;left:93px;white-space:nowrap" class="ft03">The&#160;original event results in a&#160;double-fault&#160;exception that causes the&#160;VM&#160;exit&#160;directly.</p>
<p style="position:absolute;top:248px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:249px;left:93px;white-space:nowrap" class="ft03">The VM&#160;exit&#160;occurred&#160;as a&#160;result of&#160;fetching the&#160;first&#160;instruction of&#160;the handler&#160;invoked&#160;by the&#160;event delivery.</p>
<p style="position:absolute;top:271px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:271px;left:93px;white-space:nowrap" class="ft03">The VM&#160;exit&#160;is&#160;caused&#160;by&#160;a triple&#160;fault.</p>
<p style="position:absolute;top:295px;left:68px;white-space:nowrap" class="ft03">The following items&#160;detail&#160;the use&#160;of these&#160;fields:</p>
<p style="position:absolute;top:317px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:318px;left:93px;white-space:nowrap" class="ft08">IDT-ve<a href="o_fe12b1e2a880e0ce-1069.html">ctoring information (format given in Table&#160;24-16</a>).&#160;The following items detail&#160;how this field is established&#160;<br/>for&#160;VM&#160;exits&#160;that occur during event delivery:<br/>—&#160;If the&#160;VM&#160;exit occurred during delivery of an exception, bits&#160;7:0 receive&#160;the&#160;exception vector&#160;(at most&#160;31).&#160;</p>
<p style="position:absolute;top:375px;left:119px;white-space:nowrap" class="ft07">If&#160;the VM&#160;exit occurred during&#160;delivery of an&#160;NMI,&#160;bits&#160;7:0 are&#160;set&#160;to 2. If&#160;the VM&#160;exit occurred during&#160;<br/>delivery&#160;of an external&#160;interrupt, bits&#160;7:0 receive the&#160;vector.</p>
<p style="position:absolute;top:415px;left:93px;white-space:nowrap" class="ft03">—&#160;Bits&#160;10:8 are set&#160;to indicate the type of event that&#160;was being delivered&#160;when&#160;the&#160;VM&#160;exit occurred:&#160;0&#160;</p>
<p style="position:absolute;top:432px;left:119px;white-space:nowrap" class="ft09">(external interrupt), 2&#160;(non-maskable interrupt),&#160;3 (hardware&#160;exception),&#160;4&#160;(software interrupt),&#160;5&#160;<br/>(privileged software&#160;interrupt), or 6 (software&#160;exception).<br/>Hardware exceptions comprise&#160;all&#160;exceptions&#160;except&#160;breakpoint exceptions&#160;(#BP; generated by&#160;INT3) and&#160;<br/>overflow exceptions&#160;(#OF; generated by&#160;INTO);&#160;these&#160;are&#160;software exceptions. (A #BP that&#160;occurs&#160;in&#160;<br/>enclave mode&#160;is considered&#160;a hardware exception.) BOUND-range exceeded&#160;exceptions (#BR;&#160;generated&#160;<br/>by BOUND)&#160;and invalid opcode exceptions&#160;(#UD)&#160;generated&#160;by&#160;UD2 are&#160;hardware&#160;exceptions.<br/>Bits&#160;10:8&#160;may indicate privileged software&#160;interrupt if&#160;such an&#160;event&#160;was injected as&#160;part of&#160;VM&#160;entry.</p>
<p style="position:absolute;top:570px;left:93px;white-space:nowrap" class="ft03">—&#160;Bit&#160;11&#160;is set to 1&#160;if the VM&#160;exit occurred&#160;during delivery&#160;of&#160;a hardware&#160;exception that would have&#160;delivered&#160;</p>
<p style="position:absolute;top:586px;left:119px;white-space:nowrap" class="ft07">an&#160;error code on&#160;the stack. This&#160;bit is&#160;always 0&#160;if&#160;the&#160;VM&#160;exit&#160;occurred while&#160;the&#160;logical processor was&#160;in&#160;<br/>real-address mode&#160;(CR0.PE=0).</p>
<p style="position:absolute;top:600px;left:335px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:603px;left:342px;white-space:nowrap" class="ft03">&#160;If bit&#160;11 is&#160;set&#160;to 1,&#160;the&#160;error code&#160;is placed&#160;in&#160;the IDT-vectoring&#160;error&#160;</p>
<p style="position:absolute;top:619px;left:119px;white-space:nowrap" class="ft03">code (see below).</p>
<p style="position:absolute;top:643px;left:93px;white-space:nowrap" class="ft010">—&#160;Bit&#160;12&#160;is&#160;undefined.<br/>—&#160;Bits&#160;30:13 are&#160;always set&#160;to 0.<br/>—&#160;Bit&#160;31&#160;is always set to&#160;1.<br/>For other&#160;VM&#160;exits, the&#160;field is&#160;marked invalid (by clearing&#160;bit&#160;31) and&#160;the remainder of the&#160;field&#160;is undefined.</p>
<p style="position:absolute;top:736px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:736px;left:93px;white-space:nowrap" class="ft08">IDT-vectoring error&#160;code.&#160;<br/>—&#160;For VM&#160;exits that set&#160;both bit&#160;31&#160;(valid) and bit&#160;11 (error&#160;code valid)&#160;in the IDT-vectoring information&#160;field,&#160;</p>
<p style="position:absolute;top:777px;left:119px;white-space:nowrap" class="ft07">this&#160;field&#160;receives&#160;the error&#160;code&#160;that&#160;would have&#160;been pushed on the&#160;stack by the&#160;event that was&#160;being&#160;<br/>delivered through&#160;the IDT&#160;at the&#160;time of&#160;the VM&#160;exit.&#160;The EXT bit is&#160;set&#160;in&#160;this field when it&#160;would&#160;be&#160;set&#160;<br/>normally.</p>
<p style="position:absolute;top:834px;left:93px;white-space:nowrap" class="ft03">—&#160;For other&#160;VM&#160;exits, the&#160;value of this&#160;field&#160;is undefined.</p>
<p style="position:absolute;top:884px;left:68px;white-space:nowrap" class="ft05">27.2.4&#160;</p>
<p style="position:absolute;top:884px;left:148px;white-space:nowrap" class="ft05">Information for VM&#160;Exits Due to&#160;Instruction Execution</p>
<p style="position:absolute;top:915px;left:68px;white-space:nowrap" class="ft07"><a href="o_fe12b1e2a880e0ce-1069.html">Section&#160;24.9.4 defin</a>ed fields containing&#160;information for VM&#160;exits&#160;that occur due&#160;to instruction execution.&#160;(The&#160;VM-<br/>exit instruction length is&#160;also used for VM&#160;exits that occur&#160;during the delivery of&#160;a software&#160;interrupt or&#160;software&#160;<br/>exception.)&#160;The&#160;following items detail their&#160;use.</p>
<p style="position:absolute;top:970px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:970px;left:93px;white-space:nowrap" class="ft06"><b>VM-exit instruction&#160;length.</b>&#160;This&#160;field&#160;is used in&#160;the following cases:</p>
<p style="position:absolute;top:1021px;left:68px;white-space:nowrap" class="ft03">1.&#160;If&#160;the capability MSR&#160;IA32_VMX_CR0_FIXED0&#160;reports that&#160;CR0.PE&#160;must&#160;be&#160;1 in&#160;VMX&#160;operation, a logical processor cannot&#160;be&#160;in&#160;real-</p>
<p style="position:absolute;top:1038px;left:89px;white-space:nowrap" class="ft03">address mode unless the “unrestricted guest” VM-execution&#160;control and bit&#160;31&#160;of&#160;the&#160;primary processor-based&#160;VM-execution&#160;con-</p>
<p style="position:absolute;top:1054px;left:89px;white-space:nowrap" class="ft03">trols are both 1.</p>
</div>
</body>
</html>
