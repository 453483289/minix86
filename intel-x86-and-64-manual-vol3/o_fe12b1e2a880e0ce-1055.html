<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1055</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:16px;font-family:Times;color:#0860a8;}
	.ft04{font-size:8px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1055-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1055.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:769px;white-space:nowrap" class="ft00">Vol. 3C&#160;24-9</p>
<p style="position:absolute;top:47px;left:591px;white-space:nowrap" class="ft01">VIRTUAL MACHINE CONTROL STRUCTURES</p>
<p style="position:absolute;top:453px;left:69px;white-space:nowrap" class="ft07">All other bits in this field are&#160;reserved, some to 0 and some&#160;to&#160;1. Software should consult the VMX capability MSRs&#160;<br/>IA32_VMX_PINBASED_CTLS&#160;and&#160;IA32_VMX_TRUE_PINBASED_CT<a href="o_fe12b1e2a880e0ce-1945.html">LS (see Appendix A.3.1)&#160;</a>to determine how&#160;to&#160;<br/>set&#160;reserved&#160;bits.&#160;Failure&#160;to set&#160;reserved&#160;bits&#160;properly causes&#160;subsequent VM&#160;entries&#160;to fail (s<a href="o_fe12b1e2a880e0ce-1094.html">ee&#160;Section&#160;26.2.1.1</a>).<br/>The first processors to&#160;support&#160;the virtual-machine extensions&#160;supported only the&#160;1-settings of bits&#160;1,&#160;2,&#160;and&#160;4.&#160;<br/>The VMX&#160;capability MSR&#160;IA32_VMX_PINBASED_CTLS will always report that these bits must be&#160;1.&#160;Logical&#160;proces-<br/>sors that&#160;support the&#160;0-settings of any&#160;of&#160;these bits will support the&#160;VMX&#160;capability&#160;MSR&#160;<br/>IA32_VMX_TRUE_PINBASED_CTLS&#160;MSR,&#160;and&#160;software should&#160;consult&#160;this MSR to&#160;discover support for the&#160;0-<br/>settings&#160;of&#160;these bits.&#160;Software that is&#160;not aware&#160;of&#160;the functionality&#160;of&#160;any one of these bits&#160;should&#160;set that&#160;bit to 1.</p>
<p style="position:absolute;top:626px;left:69px;white-space:nowrap" class="ft03">24.6.2 Processor-Based&#160;</p>
<p style="position:absolute;top:626px;left:288px;white-space:nowrap" class="ft03">VM-Execution Controls</p>
<p style="position:absolute;top:657px;left:69px;white-space:nowrap" class="ft07">The processor-based VM-execution controls constitute&#160;two 32-bit vectors that govern the handling of synchronous&#160;<br/>events, mainly&#160;those caused by&#160;the&#160;execution of specific instructions.</p>
<p style="position:absolute;top:671px;left:536px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:673px;left:543px;white-space:nowrap" class="ft02">&#160;These are&#160;the&#160;<b>primary processor-based&#160;</b></p>
<p style="position:absolute;top:690px;left:69px;white-space:nowrap" class="ft07"><b>VM-execution controls</b>&#160;and&#160;the&#160;<b>secondary processor-based&#160;VM-execution controls</b>.<br/><a href="o_fe12b1e2a880e0ce-1055.html">Table 24-6&#160;</a>lists the primary processor-based&#160;VM-execution&#160;controls.&#160;<a href="˛ˇ">See Chapter 25 for&#160;</a>more details of how&#160;these&#160;<br/>controls&#160;affect&#160;processor&#160;behavior in&#160;VMX&#160;non-root operation.</p>
<p style="position:absolute;top:131px;left:250px;white-space:nowrap" class="ft06">Table 24-5. &#160;Definitions of&#160;Pin-Based VM-Execution Controls</p>
<p style="position:absolute;top:153px;left:76px;white-space:nowrap" class="ft02">Bit&#160;Position(s)&#160;Name</p>
<p style="position:absolute;top:153px;left:295px;white-space:nowrap" class="ft02">Description</p>
<p style="position:absolute;top:175px;left:76px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:175px;left:174px;white-space:nowrap" class="ft02">External-interrupt&#160;</p>
<p style="position:absolute;top:191px;left:174px;white-space:nowrap" class="ft02">exiting</p>
<p style="position:absolute;top:175px;left:295px;white-space:nowrap" class="ft02">If this control is 1,&#160;external interrupts cause&#160;VM&#160;exits.&#160;Otherwise,&#160;they&#160;are&#160;delivered normally&#160;</p>
<p style="position:absolute;top:191px;left:295px;white-space:nowrap" class="ft02">through the&#160;guest&#160;interrupt-descriptor&#160;table (IDT). If this control is 1, the value of&#160;RFLAGS.IF&#160;</p>
<p style="position:absolute;top:208px;left:295px;white-space:nowrap" class="ft02">does not affect interrupt&#160;blocking.</p>
<p style="position:absolute;top:231px;left:76px;white-space:nowrap" class="ft02">3</p>
<p style="position:absolute;top:231px;left:174px;white-space:nowrap" class="ft02">NMI exiting</p>
<p style="position:absolute;top:231px;left:295px;white-space:nowrap" class="ft02">If&#160;this&#160;control is&#160;1,&#160;non-maskable&#160;interrupts (NMIs) cause VM&#160;exits. Otherwise, they&#160;are&#160;</p>
<p style="position:absolute;top:247px;left:295px;white-space:nowrap" class="ft02">delivered normally using&#160;descriptor 2 of&#160;the&#160;IDT.&#160;This&#160;control also&#160;determines interactions&#160;</p>
<p style="position:absolute;top:263px;left:295px;white-space:nowrap" class="ft02">between&#160;IRET and blocking&#160;by NMI (see<a href="o_fe12b1e2a880e0ce-1080.html">&#160;Section&#160;25.3).</a></p>
<p style="position:absolute;top:286px;left:76px;white-space:nowrap" class="ft02">5</p>
<p style="position:absolute;top:286px;left:174px;white-space:nowrap" class="ft02">Virtual NMIs</p>
<p style="position:absolute;top:286px;left:295px;white-space:nowrap" class="ft02">If this control is 1,&#160;NMIs are never&#160;blocked&#160;and the&#160;‚Äúblocking by&#160;NMI‚Äù bit (bit&#160;3)&#160;in the&#160;</p>
<p style="position:absolute;top:303px;left:295px;white-space:nowrap" class="ft02">interruptibility-state field indicates ‚Äúvirtual-NMI blocking‚Äù (see<a href="o_fe12b1e2a880e0ce-1052.html">&#160;Table&#160;24-3). This</a>&#160;control also&#160;</p>
<p style="position:absolute;top:319px;left:295px;white-space:nowrap" class="ft02">interacts with the ‚ÄúNMI-window exiting‚Äù VM-execution&#160;control (see<a href="o_fe12b1e2a880e0ce-1055.html">&#160;Section 24.6.2</a>).</p>
<p style="position:absolute;top:342px;left:76px;white-space:nowrap" class="ft02">6</p>
<p style="position:absolute;top:342px;left:174px;white-space:nowrap" class="ft02">Activate&#160;&#160;VMX-</p>
<p style="position:absolute;top:358px;left:174px;white-space:nowrap" class="ft02">preemption timer</p>
<p style="position:absolute;top:342px;left:295px;white-space:nowrap" class="ft02">If this control is 1,&#160;the VMX-preemption timer counts down in VMX non-root&#160;operation; see&#160;</p>
<p style="position:absolute;top:358px;left:295px;white-space:nowrap" class="ft02"><a href="o_fe12b1e2a880e0ce-1085.html">Section 25.5.1. A VM&#160;</a>exit occurs when&#160;the timer counts down&#160;to&#160;zero; se<a href="o_fe12b1e2a880e0ce-1079.html">e Section&#160;25.2.</a></p>
<p style="position:absolute;top:381px;left:76px;white-space:nowrap" class="ft02">7</p>
<p style="position:absolute;top:381px;left:174px;white-space:nowrap" class="ft02">Process posted&#160;</p>
<p style="position:absolute;top:397px;left:174px;white-space:nowrap" class="ft02">interrupts</p>
<p style="position:absolute;top:381px;left:295px;white-space:nowrap" class="ft02">If&#160;this control is 1, the&#160;processor treats interrupts with the posted-interrupt&#160;notification vector&#160;</p>
<p style="position:absolute;top:397px;left:295px;white-space:nowrap" class="ft02">(see<a href="o_fe12b1e2a880e0ce-1059.html">&#160;Section&#160;24.6.8</a>) specially, updating&#160;the virtual-APIC page&#160;with&#160;posted-interrupt&#160;requests&#160;</p>
<p style="position:absolute;top:414px;left:295px;white-space:nowrap" class="ft02">(see<a href="o_fe12b1e2a880e0ce-1179.html">&#160;Section 29.6).</a></p>
<p style="position:absolute;top:1038px;left:69px;white-space:nowrap" class="ft02">1.&#160;Some&#160;instructions cause VM&#160;exits regardless of&#160;the settings of&#160;the processor-based VM-execution contro<a href="o_fe12b1e2a880e0ce-1076.html">ls (see Section 25.1.2),</a>&#160;as&#160;</p>
<p style="position:absolute;top:1054px;left:91px;white-space:nowrap" class="ft02">do task&#160;switches (see&#160;<a href="o_fe12b1e2a880e0ce-1079.html">Section 25.2).</a></p>
<p style="position:absolute;top:761px;left:200px;white-space:nowrap" class="ft06">Table 24-6.&#160;&#160;Definitions&#160;of&#160;Primary Processor-Based&#160;VM-Execution&#160;Controls</p>
<p style="position:absolute;top:783px;left:77px;white-space:nowrap" class="ft02">Bit&#160;Position(s)&#160;Name</p>
<p style="position:absolute;top:783px;left:296px;white-space:nowrap" class="ft02">Description</p>
<p style="position:absolute;top:805px;left:77px;white-space:nowrap" class="ft02">2</p>
<p style="position:absolute;top:805px;left:175px;white-space:nowrap" class="ft02">Interrupt-window&#160;</p>
<p style="position:absolute;top:822px;left:175px;white-space:nowrap" class="ft02">exiting</p>
<p style="position:absolute;top:805px;left:296px;white-space:nowrap" class="ft02">If&#160;this control is 1, a VM&#160;exit occurs at&#160;the&#160;beginning&#160;of&#160;any instruction&#160;if RFLAGS.IF = 1 and&#160;</p>
<p style="position:absolute;top:822px;left:296px;white-space:nowrap" class="ft02">there are no&#160;other blocking&#160;of&#160;interrupts&#160;(see<a href="o_fe12b1e2a880e0ce-1051.html">&#160;Section&#160;24.4.2).</a></p>
<p style="position:absolute;top:844px;left:77px;white-space:nowrap" class="ft02">3</p>
<p style="position:absolute;top:844px;left:175px;white-space:nowrap" class="ft02">Use&#160;TSC&#160;offsetting&#160;This&#160;control determines&#160;whether executions of&#160;RDTSC,&#160;executions&#160;of&#160;RDTSCP, and executions&#160;</p>
<p style="position:absolute;top:861px;left:296px;white-space:nowrap" class="ft02">of&#160;RDMSR&#160;that&#160;read&#160;from the IA32_TIME_STAMP_COUNTER MSR&#160;return&#160;a&#160;value modified&#160;by&#160;</p>
<p style="position:absolute;top:877px;left:296px;white-space:nowrap" class="ft02">the&#160;TSC offset&#160;field&#160;(see<a href="o_fe12b1e2a880e0ce-1058.html">&#160;Section&#160;24.6.5</a>&#160;and<a href="o_fe12b1e2a880e0ce-1080.html">&#160;Section&#160;25.3).</a></p>
<p style="position:absolute;top:900px;left:77px;white-space:nowrap" class="ft02">7</p>
<p style="position:absolute;top:900px;left:175px;white-space:nowrap" class="ft02">HLT&#160;exiting</p>
<p style="position:absolute;top:900px;left:296px;white-space:nowrap" class="ft02">This&#160;control&#160;determines&#160;whether&#160;executions&#160;of&#160;HLT&#160;cause&#160;VM&#160;exits.</p>
<p style="position:absolute;top:922px;left:77px;white-space:nowrap" class="ft02">9</p>
<p style="position:absolute;top:922px;left:175px;white-space:nowrap" class="ft02">INVLPG exiting</p>
<p style="position:absolute;top:922px;left:296px;white-space:nowrap" class="ft02">This determines whether executions of&#160;INVLPG cause VM&#160;exits.</p>
<p style="position:absolute;top:945px;left:77px;white-space:nowrap" class="ft02">10</p>
<p style="position:absolute;top:945px;left:175px;white-space:nowrap" class="ft02">MWAIT&#160;exiting</p>
<p style="position:absolute;top:945px;left:296px;white-space:nowrap" class="ft02">This control determines&#160;whether executions of&#160;MWAIT cause&#160;VM&#160;exits.</p>
<p style="position:absolute;top:967px;left:77px;white-space:nowrap" class="ft02">11</p>
<p style="position:absolute;top:967px;left:175px;white-space:nowrap" class="ft02">RDPMC&#160;exiting</p>
<p style="position:absolute;top:967px;left:296px;white-space:nowrap" class="ft02">This&#160;control&#160;determines&#160;whether&#160;executions&#160;of&#160;RDPMC&#160;cause&#160;VM&#160;exits.</p>
<p style="position:absolute;top:990px;left:77px;white-space:nowrap" class="ft02">12</p>
<p style="position:absolute;top:990px;left:175px;white-space:nowrap" class="ft02">RDTSC exiting</p>
<p style="position:absolute;top:990px;left:296px;white-space:nowrap" class="ft02">This control determines whether&#160;executions&#160;of&#160;RDTSC and RDTSCP cause&#160;VM&#160;exits.</p>
</div>
</body>
</html>
