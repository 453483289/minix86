<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 284</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#000000;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:16px;font-family:Times;color:#0860a8;}
	.ft05{font-size:8px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page284-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce284.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">8-28&#160;Vol. 3A</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">MULTIPLE-PROCESSOR&#160;MANAGEMENT</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:100px;left:93px;white-space:nowrap" class="ft03">Memory type range registers&#160;(MTRRs)</p>
<p style="position:absolute;top:124px;left:68px;white-space:nowrap" class="ft03">Whether&#160;the&#160;following features&#160;are shared&#160;or&#160;duplicated&#160;is&#160;implementation-specific:</p>
<p style="position:absolute;top:146px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:147px;left:93px;white-space:nowrap" class="ft03">IA32_MISC_ENABLE&#160;MSR&#160;(MSR&#160;address&#160;1A0H)</p>
<p style="position:absolute;top:169px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:169px;left:93px;white-space:nowrap" class="ft03">Machine&#160;check architecture&#160;(MCA)&#160;MSRs (except&#160;for&#160;the IA32_MCG_STATUS&#160;and&#160;IA32_MCG_CAP&#160;MSRs)</p>
<p style="position:absolute;top:191px;left:68px;white-space:nowrap" class="ft02">•</p>
<p style="position:absolute;top:192px;left:93px;white-space:nowrap" class="ft03">Performance monitoring&#160;control and counter MSRs</p>
<p style="position:absolute;top:242px;left:68px;white-space:nowrap" class="ft04">8.7.2 APIC&#160;</p>
<p style="position:absolute;top:242px;left:190px;white-space:nowrap" class="ft04">Functionality</p>
<p style="position:absolute;top:273px;left:68px;white-space:nowrap" class="ft06">When&#160;a processor supporting Intel Hyper-Threading&#160;Technology support is&#160;initialized,&#160;each logical processor is&#160;<br/>assigned&#160;a&#160;local APIC&#160;ID<a href="o_fe12b1e2a880e0ce-368.html">&#160;(see Table 10-1). The</a>&#160;local APIC&#160;ID&#160;serves&#160;as an ID for&#160;the&#160;logical&#160;processor and is&#160;stored&#160;<br/>in&#160;the&#160;logical processor’s&#160;APIC ID register. If two or&#160;more processors supporting Intel Hyper-Threading Technology&#160;<br/>are present in a&#160;dual processor (DP) or MP&#160;system,&#160;each&#160;logical processor&#160;on&#160;the system bus&#160;is assigned&#160;a unique&#160;<br/>local APIC ID (see<a href="o_fe12b1e2a880e0ce-291.html">&#160;Section 8.9.3, “Hierarchical&#160;ID of&#160;Logical&#160;Processors&#160;in&#160;an MP System”).<br/></a>Software&#160;communicates&#160;with&#160;local processors using&#160;the APIC’s&#160;interprocessor interrupt (IPI) messaging facility.&#160;<br/>Setup&#160;and programming for APICs is&#160;identical&#160;in&#160;processors&#160;that support&#160;and&#160;do not support Intel&#160;Hyper-Threading&#160;<br/>Technology.&#160;See&#160;<a href="o_fe12b1e2a880e0ce-363.html">Chapter&#160;10,&#160;“Advanced Programmable&#160;Interrupt Controller (APIC),”&#160;for a&#160;</a>detailed&#160;discussion.</p>
<p style="position:absolute;top:446px;left:68px;white-space:nowrap" class="ft04">8.7.3&#160;</p>
<p style="position:absolute;top:446px;left:148px;white-space:nowrap" class="ft04">Memory Type Range Registers (MTRR)</p>
<p style="position:absolute;top:477px;left:68px;white-space:nowrap" class="ft06">MTRRs&#160;in&#160;a processor supporting Intel Hyper-Threading&#160;Technology are shared&#160;by logical processors.&#160;When one&#160;<br/>logical processor updates the&#160;setting of the MTRRs, settings&#160;are automatically shared with the other&#160;logical proces-<br/>sors&#160;in the&#160;same physical package.&#160;<br/>The architectures require&#160;that all MP systems based&#160;on&#160;Intel 64&#160;and IA-32&#160;processors&#160;(this includes&#160;logical proces-<br/>sors) must use&#160;an identical MTRR&#160;memory map.&#160;This&#160;gives&#160;software a&#160;consistent view&#160;of&#160;memory,&#160;independent of&#160;<br/>the processor on&#160;which it is&#160;<a href="o_fe12b1e2a880e0ce-432.html">running. See Section 11.11,&#160;“Memory&#160;Type&#160;Range&#160;Registers (MTRRs),”&#160;for&#160;</a>information&#160;<br/>on setting up&#160;MTRRs.</p>
<p style="position:absolute;top:634px;left:68px;white-space:nowrap" class="ft04">8.7.4&#160;</p>
<p style="position:absolute;top:634px;left:148px;white-space:nowrap" class="ft04">Page Attribute Table (PAT)</p>
<p style="position:absolute;top:664px;left:68px;white-space:nowrap" class="ft06">Each&#160;logical processor has&#160;its own&#160;PAT&#160;MSR (IA32_PAT). However,&#160;as&#160;described&#160;<a href="o_fe12b1e2a880e0ce-445.html">in Section 11.12,&#160;“Page Attribute&#160;<br/>Table (PAT),” the&#160;</a>PAT&#160;MSR settings must be the&#160;same&#160;for&#160;all processors in&#160;a&#160;system,&#160;including&#160;the logical&#160;proces-<br/>sors.</p>
<p style="position:absolute;top:748px;left:68px;white-space:nowrap" class="ft04">8.7.5&#160;</p>
<p style="position:absolute;top:748px;left:148px;white-space:nowrap" class="ft04">Machine Check Architecture</p>
<p style="position:absolute;top:778px;left:68px;white-space:nowrap" class="ft03">In the Intel&#160;HT Technology context&#160;as implemented by processors based&#160;on&#160;Intel NetBurst</p>
<p style="position:absolute;top:776px;left:674px;white-space:nowrap" class="ft05">®</p>
<p style="position:absolute;top:778px;left:685px;white-space:nowrap" class="ft03">&#160;microarchitecture,&#160;all&#160;</p>
<p style="position:absolute;top:795px;left:68px;white-space:nowrap" class="ft06">of&#160;the&#160;machine&#160;check architecture&#160;(MCA) MSRs (except for the IA32_MCG_STATUS and&#160;IA32_MCG_CAP&#160;MSRs)&#160;are&#160;<br/>duplicated&#160;for&#160;each logical processor.&#160;This&#160;permits&#160;logical&#160;processors&#160;to initialize, configure, query,&#160;and handle&#160;<br/>machine-check exceptions simultaneously within&#160;the&#160;same&#160;physical processor.&#160;The&#160;design is&#160;compatible&#160;with&#160;<br/>machine&#160;check&#160;exception handlers that follow the&#160;guidelines given in&#160;<a href="o_fe12b1e2a880e0ce-507.html">Chapter 15,&#160;“Machine-Check&#160;Architecture.”<br/></a>The IA32_MCG_STATUS&#160;MSR is duplicated for each logical processor so that its machine&#160;check in progress bit field&#160;<br/>(MCIP) can&#160;be used to&#160;detect recursion&#160;on&#160;the part of MCA&#160;handlers. In&#160;addition, the&#160;MSR allows each&#160;logical&#160;<br/>processor to determine that a machine-check exception is in progress independent of the actions of another logical&#160;<br/>processor&#160;in the&#160;same physical package.<br/>Because&#160;the&#160;logical processors within&#160;a physical package are tightly&#160;coupled&#160;with&#160;respect to shared hardware&#160;<br/>resources, both logical processors are notified of machine&#160;check errors that occur within a given physical processor.&#160;<br/>If machine-check exceptions are enabled when&#160;a fatal error&#160;is reported, all the&#160;logical processors within&#160;a physical&#160;<br/>package&#160;are dispatched&#160;to the&#160;machine-check exception&#160;handler.&#160;If machine-check exceptions&#160;are disabled,&#160;the&#160;<br/>logical processors enter the&#160;shutdown&#160;state and&#160;assert&#160;the IERR# signal.<br/>When&#160;enabling machine-check exceptions, the&#160;MCE&#160;flag in&#160;control register&#160;CR4&#160;should be set for each logical&#160;<br/>processor.</p>
</div>
</body>
</html>
