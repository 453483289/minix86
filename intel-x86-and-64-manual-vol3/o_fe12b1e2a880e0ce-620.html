<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 620</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:14px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:16px;font-family:Times;color:#0860a8;}
	.ft07{font-size:8px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page620-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce620.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">17-46&#160;Vol. 3B</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">DEBUG,&#160;BRANCH&#160;PROFILE,&#160;TSC,&#160;AND RESOURCE&#160;MONITORING&#160;FEATURES</p>
<p style="position:absolute;top:296px;left:68px;white-space:nowrap" class="ft02">17.16.5.1&#160;&#160;&#160;Cache Monitoring Technology</p>
<p style="position:absolute;top:325px;left:68px;white-space:nowrap" class="ft09">On processors&#160;for which Cache&#160;Monitoring&#160;Technology supports the L3 cache&#160;occupancy&#160;event, CPUID.(EAX=0FH,&#160;<br/>ECX=1H).EDX&#160;would return with only bit 0 set.&#160;The corresponding event ID can be<a href="o_fe12b1e2a880e0ce-620.html">&#160;looked up from Table 17-19</a>.&#160;The&#160;<br/>L3&#160;occupancy data accumulated&#160;in IA32_QM_CTR can&#160;be&#160;converted to total&#160;occupancy (in&#160;bytes) by multiplying&#160;<br/>with CPUID.(EAX=0FH,&#160;ECX=1H).EBX.<br/>Event codes for&#160;Cache&#160;Monitoring Technology&#160;are&#160;discussed in the&#160;next section.</p>
<p style="position:absolute;top:442px;left:68px;white-space:nowrap" class="ft02">17.16.5.2&#160;&#160;&#160;Memory&#160;Bandwidth Monitoring</p>
<p style="position:absolute;top:471px;left:68px;white-space:nowrap" class="ft08">On processors&#160;that monitoring supports&#160;Memory Bandwidth Monitoring&#160;using ResID=1&#160;(L3), two additional bits&#160;will&#160;<br/>be set in&#160;the vector at&#160;CPUID.(EAX=0FH,&#160;ECX=1H).EDX:</p>
<p style="position:absolute;top:509px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:510px;left:93px;white-space:nowrap" class="ft08">CPUID.(EAX=0FH,&#160;ECX=1H).EDX[bit 1]: indicates the&#160;L3&#160;total external&#160;bandwidth monitoring event&#160;is&#160;<br/>supported if set.&#160;This event&#160;monitors&#160;the L3 total&#160;external bandwidth&#160;to&#160;the&#160;next&#160;level&#160;of&#160;the cache hierarchy,&#160;<br/>including&#160;all&#160;demand and prefetch misses&#160;from&#160;the&#160;L3 to&#160;the&#160;next hierarchy of the&#160;memory&#160;system.&#160;In most&#160;<br/>platforms, this represents&#160;memory&#160;bandwidth.</p>
<p style="position:absolute;top:581px;left:68px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:582px;left:93px;white-space:nowrap" class="ft08">CPUID.(EAX=0FH, ECX=1H).EDX[bit 2]:&#160;indicates L3 local memory bandwidth monitoring&#160;event is supported if&#160;<br/>set.&#160;This event monitors the&#160;L3 external&#160;bandwidth satisfied by the&#160;local&#160;memory. In most&#160;platforms&#160;that&#160;<br/>support this event, L3 requests are&#160;likely serviced by&#160;a&#160;memory&#160;system&#160;with&#160;non-uniform&#160;memory&#160;architecture.&#160;<br/>This allows bandwidth&#160;to&#160;off-package memory resources to be&#160;tracked by subtracting total from&#160;local bandwidth&#160;<br/>(for instance, bandwidth over&#160;QPI&#160;to a&#160;memory controller&#160;on another physical processor could&#160;be&#160;tracked&#160;by&#160;<br/>subtraction).&#160;</p>
<p style="position:absolute;top:689px;left:68px;white-space:nowrap" class="ft08">The corresponding Event ID can&#160;be looked&#160;<a href="o_fe12b1e2a880e0ce-620.html">up from&#160;Table&#160;17-19</a>.&#160;The&#160;L3&#160;bandwidth data accumulated&#160;in&#160;<br/>IA32_QM_CTR&#160;can be converted to&#160;total bandwidth&#160;(in bytes)&#160;using CPUID.(EAX=0FH, ECX=1H).EBX.</p>
<p style="position:absolute;top:739px;left:299px;white-space:nowrap" class="ft05">Table 17-19. &#160;Monitoring&#160;Supported&#160;Event&#160;IDs</p>
<p style="position:absolute;top:922px;left:68px;white-space:nowrap" class="ft06">17.16.6&#160;&#160;Monitoring Resource&#160;RMID Association</p>
<p style="position:absolute;top:952px;left:68px;white-space:nowrap" class="ft08">After&#160;Monitoring and sub-features&#160;has been enumerated,&#160;software&#160;can begin using&#160;the monitoring features.&#160;The&#160;<br/>first step is&#160;to associate&#160;a&#160;given&#160;software thread (or&#160;multiple threads as&#160;part&#160;of&#160;an application,&#160;VM, group of appli-<br/>cations or&#160;other abstraction) with&#160;an RMID.&#160;<br/>Note&#160;that the&#160;process of associating an&#160;RMID with a&#160;given&#160;software thread is&#160;the&#160;same&#160;for&#160;all shared resource&#160;moni-<br/>toring features (CMT,&#160;MBM), and&#160;a given&#160;RMID&#160;number has&#160;the same&#160;meaning from the&#160;viewpoint&#160;of any logical&#160;<br/>processors&#160;in a package. Stated&#160;another&#160;way,&#160;a&#160;thread may&#160;be&#160;associated&#160;in&#160;a 1:1 mapping with an&#160;RMID,&#160;and that&#160;</p>
<p style="position:absolute;top:252px;left:79px;white-space:nowrap" class="ft05">Figure&#160;17-22. &#160;L3 Cache Monitoring&#160;Capability&#160;Enumeration&#160;Event&#160;Type&#160;Bit&#160;Vector&#160;(CPUID.(EAX=0FH,&#160;ECX=1H)&#160;)</p>
<p style="position:absolute;top:778px;left:74px;white-space:nowrap" class="ft03">Event Type</p>
<p style="position:absolute;top:778px;left:363px;white-space:nowrap" class="ft03">Event ID</p>
<p style="position:absolute;top:778px;left:601px;white-space:nowrap" class="ft03">Context</p>
<p style="position:absolute;top:801px;left:74px;white-space:nowrap" class="ft03">L3 Cache Occupancy</p>
<p style="position:absolute;top:801px;left:363px;white-space:nowrap" class="ft03">01H</p>
<p style="position:absolute;top:801px;left:601px;white-space:nowrap" class="ft03">Cache&#160;Monitoring&#160;Technology</p>
<p style="position:absolute;top:823px;left:74px;white-space:nowrap" class="ft03">L3 Total External Bandwidth</p>
<p style="position:absolute;top:823px;left:363px;white-space:nowrap" class="ft03">02H</p>
<p style="position:absolute;top:823px;left:601px;white-space:nowrap" class="ft03">MBM</p>
<p style="position:absolute;top:846px;left:74px;white-space:nowrap" class="ft03">L3 Local&#160;External Bandwidth</p>
<p style="position:absolute;top:846px;left:363px;white-space:nowrap" class="ft03">03H</p>
<p style="position:absolute;top:846px;left:601px;white-space:nowrap" class="ft03">MBM</p>
<p style="position:absolute;top:868px;left:74px;white-space:nowrap" class="ft03">Reserved</p>
<p style="position:absolute;top:868px;left:363px;white-space:nowrap" class="ft03">All other event&#160;codes</p>
<p style="position:absolute;top:868px;left:601px;white-space:nowrap" class="ft03">N/A</p>
<p style="position:absolute;top:147px;left:624px;white-space:nowrap" class="ft07">0</p>
<p style="position:absolute;top:147px;left:591px;white-space:nowrap" class="ft07">2</p>
<p style="position:absolute;top:147px;left:226px;white-space:nowrap" class="ft07">31</p>
<p style="position:absolute;top:162px;left:177px;white-space:nowrap" class="ft00">EDX</p>
<p style="position:absolute;top:147px;left:604px;white-space:nowrap" class="ft07">1</p>
<p style="position:absolute;top:168px;left:355px;white-space:nowrap" class="ft07">Reserved</p>
<p style="position:absolute;top:135px;left:373px;white-space:nowrap" class="ft00">EventTypeBitMask</p>
<p style="position:absolute;top:147px;left:576px;white-space:nowrap" class="ft07">3</p>
<p style="position:absolute;top:195px;left:647px;white-space:nowrap" class="ft00">L3 Occupancy</p>
<p style="position:absolute;top:208px;left:648px;white-space:nowrap" class="ft00">L3 Total BW</p>
<p style="position:absolute;top:221px;left:649px;white-space:nowrap" class="ft00">L3 Local BW</p>
</div>
</body>
</html>
