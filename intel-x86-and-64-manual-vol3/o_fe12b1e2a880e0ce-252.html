<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 252</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#0860a8;}
	.ft04{font-size:16px;font-family:Times;color:#0860a8;}
	.ft05{font-size:18px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page252-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce252.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">7-14&#160;Vol. 3A</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">TASK&#160;MANAGEMENT</p>
<p style="position:absolute;top:100px;left:68px;white-space:nowrap" class="ft08">4.&#160;Enable interrupts.<br/>In a&#160;multiprocessing&#160;system, additional synchronization&#160;and&#160;serialization operations must be added to&#160;this&#160;proce-<br/>dure to insure&#160;that the TSS and its segment descriptor are both&#160;locked when&#160;the previous task&#160;link field is&#160;changed&#160;<br/>and the&#160;busy flag&#160;is cleared.</p>
<p style="position:absolute;top:213px;left:68px;white-space:nowrap" class="ft03">7.5&#160;</p>
<p style="position:absolute;top:213px;left:147px;white-space:nowrap" class="ft03">TASK ADDRESS SPACE</p>
<p style="position:absolute;top:249px;left:68px;white-space:nowrap" class="ft08">The address&#160;space&#160;for a&#160;task consists of the segments that the task&#160;can&#160;access. These&#160;segments&#160;include the code,&#160;<br/>data,&#160;stack,&#160;and system&#160;segments referenced&#160;in the&#160;TSS and any other&#160;segments&#160;accessed by&#160;the&#160;task code. The&#160;<br/>segments are&#160;mapped&#160;into the processor’s linear address space, which&#160;is&#160;in&#160;turn mapped into&#160;the&#160;processor’s&#160;phys-<br/>ical address&#160;space (either directly&#160;or through paging).<br/>The LDT segment field in the&#160;TSS can be&#160;used to&#160;give&#160;each&#160;task its&#160;own&#160;LDT.&#160;Giving a&#160;task&#160;its own LDT allows the&#160;<br/>task address&#160;space to be&#160;isolated from other tasks by placing the segment descriptors for all the segments associ-<br/>ated with&#160;the&#160;task in&#160;the task’s&#160;LDT.<br/>It also&#160;is possible&#160;for several&#160;tasks&#160;to use&#160;the&#160;same&#160;LDT.&#160;This is&#160;a memory-efficient&#160;way&#160;to allow specific tasks&#160;to&#160;<br/>communicate&#160;with&#160;or control each&#160;other,&#160;without dropping&#160;the protection barriers for the&#160;entire&#160;system.<br/>Because all tasks have&#160;access&#160;to the&#160;GDT,&#160;it&#160;also is&#160;possible to&#160;create&#160;shared&#160;segments accessed&#160;through segment&#160;<br/>descriptors in&#160;this&#160;table.<br/>If&#160;paging&#160;is&#160;enabled,&#160;the CR3&#160;register (PDBR) field in the TSS&#160;allows&#160;each task&#160;to have&#160;its own set&#160;of page tables&#160;for&#160;<br/>mapping linear addresses&#160;to physical addresses.&#160;Or, several&#160;tasks can&#160;share the&#160;same set&#160;of page&#160;tables.</p>
<p style="position:absolute;top:527px;left:68px;white-space:nowrap" class="ft04">7.5.1&#160;</p>
<p style="position:absolute;top:527px;left:148px;white-space:nowrap" class="ft04">Mapping Tasks to&#160;the Linear and Physical Address Spaces</p>
<p style="position:absolute;top:558px;left:68px;white-space:nowrap" class="ft02">Tasks&#160;can be mapped&#160;to the&#160;linear address&#160;space&#160;and&#160;physical&#160;address space&#160;in&#160;one&#160;of two ways:</p>
<p style="position:absolute;top:580px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:580px;left:93px;white-space:nowrap" class="ft08"><b>One linear-to-physical address&#160;space mapping&#160;is&#160;shared among all tasks.&#160;</b>— When&#160;paging&#160;is&#160;not&#160;<br/>enabled, this&#160;is&#160;the only choice. Without paging, all linear addresses map to the same physical addresses.&#160;When&#160;<br/>paging&#160;is enabled, this&#160;form of linear-to-physical&#160;address space mapping is&#160;obtained&#160;by using&#160;one page&#160;<br/>directory&#160;for all&#160;tasks.&#160;The&#160;linear&#160;address space may exceed&#160;the&#160;available physical space if&#160;demand-paged&#160;<br/>virtual memory is&#160;supported.</p>
<p style="position:absolute;top:668px;left:68px;white-space:nowrap" class="ft05">•</p>
<p style="position:absolute;top:669px;left:93px;white-space:nowrap" class="ft08"><b>Each&#160;task has its own&#160;linear&#160;address space that&#160;is mapped&#160;to the physical address space.&#160;</b>— This form&#160;<br/>of mapping is&#160;accomplished&#160;by using&#160;a different&#160;page&#160;directory for&#160;each task.&#160;Because&#160;the PDBR (control&#160;<br/>register CR3)&#160;is loaded on&#160;task&#160;switches,&#160;each task&#160;may have&#160;a different page directory.</p>
<p style="position:absolute;top:726px;left:68px;white-space:nowrap" class="ft08">The&#160;linear address&#160;spaces&#160;of different&#160;tasks&#160;may map&#160;to completely distinct&#160;physical addresses.&#160;If&#160;the entries of&#160;<br/>different page&#160;directories point&#160;to different&#160;page&#160;tables&#160;and the&#160;page tables point&#160;to different&#160;pages of&#160;physical&#160;<br/>memory, then&#160;the&#160;tasks do not share&#160;physical&#160;addresses.<br/>With&#160;either&#160;method of mapping task&#160;linear address&#160;spaces,&#160;the TSSs for all&#160;tasks must lie in a&#160;shared&#160;area&#160;of&#160;the&#160;<br/>physical space,&#160;which is&#160;accessible to&#160;all&#160;tasks. This&#160;mapping is required&#160;so that the&#160;mapping of TSS addresses does&#160;<br/>not change&#160;while&#160;the&#160;processor&#160;is reading and&#160;updating&#160;the TSSs during a&#160;task&#160;switch. The linear&#160;address space&#160;<br/>mapped by the&#160;GDT&#160;also should&#160;be&#160;mapped&#160;to&#160;a shared&#160;area&#160;of&#160;the physical space;&#160;otherwise,&#160;the&#160;purpose of the&#160;<br/>GDT is&#160;defeated<a href="o_fe12b1e2a880e0ce-253.html">. Figure&#160;7-9</a>&#160;shows&#160;how the&#160;linear address spaces of two tasks can overlap in&#160;the&#160;physical&#160;space&#160;by&#160;<br/>sharing page&#160;tables.&#160;</p>
</div>
</body>
</html>
