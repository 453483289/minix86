<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 650</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#000000;}
	.ft04{font-size:16px;font-family:Times;color:#0860a8;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:8px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft010{font-size:8px;line-height:12px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page650-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce650.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">18-14&#160;Vol. 3B</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">PERFORMANCE MONITORING</p>
<p style="position:absolute;top:410px;left:68px;white-space:nowrap" class="ft07">The&#160;IA32_PERF_GLOBAL_INUSE&#160;MSR&#160;provides&#160;an “InUse”&#160;bit for each&#160;programmable&#160;performance&#160;counter and&#160;<br/>fixed counter in the&#160;processor.&#160;Additionally, it includes an&#160;indicator if the&#160;PMI&#160;mechanism has been configured by&#160;a&#160;<br/>profiling agent.</p>
<p style="position:absolute;top:464px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:465px;left:93px;white-space:nowrap" class="ft07">IA32_PERF_GLOBAL_INUSE.PERFEVTSEL0_InUse[bit 0]: This&#160;bit&#160;reflects the logical&#160;state&#160;of&#160;<br/>(IA32_PERFEVTSEL0[7:0]&#160;!= 0).</p>
<p style="position:absolute;top:503px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:504px;left:93px;white-space:nowrap" class="ft07">IA32_PERF_GLOBAL_INUSE.PERFEVTSEL1_InUse[bit 1]: This&#160;bit&#160;reflects the logical&#160;state&#160;of&#160;<br/>(IA32_PERFEVTSEL1[7:0]&#160;!= 0).</p>
<p style="position:absolute;top:542px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:543px;left:93px;white-space:nowrap" class="ft07">IA32_PERF_GLOBAL_INUSE.PERFEVTSEL2_InUse[bit 2]: This&#160;bit&#160;reflects the logical&#160;state&#160;of&#160;<br/>(IA32_PERFEVTSEL2[7:0]&#160;!= 0).</p>
<p style="position:absolute;top:581px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:582px;left:93px;white-space:nowrap" class="ft07">IA32_PERF_GLOBAL_INUSE.PERFEVTSELn_InUse[bit n]:&#160;This bit reflects the&#160;logical&#160;state of&#160;<br/>(IA32_PERFEVTSELn[7:0]&#160;!=&#160;0),&#160;n &lt; CPUID.0AH:EAX[15:8].</p>
<p style="position:absolute;top:620px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:621px;left:93px;white-space:nowrap" class="ft07">IA32_PERF_GLOBAL_INUSE.FC0_InUse[bit 32]: This&#160;bit&#160;reflects&#160;the&#160;logical state&#160;of&#160;<br/>(IA32_FIXED_CTR_CTRL[1:0] != 0).</p>
<p style="position:absolute;top:659px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:660px;left:93px;white-space:nowrap" class="ft07">IA32_PERF_GLOBAL_INUSE.FC1_InUse[bit 33]: This&#160;bit&#160;reflects&#160;the&#160;logical state&#160;of&#160;<br/>(IA32_FIXED_CTR_CTRL[5:4] != 0).</p>
<p style="position:absolute;top:698px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:699px;left:93px;white-space:nowrap" class="ft07">IA32_PERF_GLOBAL_INUSE.FC2_InUse[bit 34]: This&#160;bit&#160;reflects&#160;the&#160;logical state&#160;of&#160;<br/>(IA32_FIXED_CTR_CTRL[9:8] != 0).</p>
<p style="position:absolute;top:737px;left:68px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:738px;left:93px;white-space:nowrap" class="ft08">IA32_PERF_GLOBAL_INUSE.PMI_InUse[bit&#160;32]: This&#160;bit is&#160;set&#160;if any&#160;one&#160;of the&#160;following&#160;bit is&#160;set:<br/>—&#160;IA32_PERFEVTSELn.INT[bit 20],&#160;n &lt; CPUID.0AH:EAX[15:8];&#160;<br/>—&#160;IA32_FIXED_CTR_CTRL.ENi_PMI, i&#160;=&#160;0,&#160;1, 2;<br/>—&#160;IA32_PEBS_ENABLES.EN_PMCi,&#160;i = 0, 1,&#160;2,&#160;3</p>
<p style="position:absolute;top:861px;left:68px;white-space:nowrap" class="ft04">18.2.5&#160;</p>
<p style="position:absolute;top:861px;left:148px;white-space:nowrap" class="ft04">Full-Width Writes to&#160;Performance Counter Registers</p>
<p style="position:absolute;top:891px;left:68px;white-space:nowrap" class="ft09">The general-purpose&#160;performance counter&#160;registers IA32_PMCx are writable via WRMSR instruction.&#160;However,&#160;the&#160;<br/>value&#160;written into&#160;IA32_PMCx by WRMSR&#160;is the&#160;signed&#160;extended&#160;64-bit value of&#160;the&#160;EAX[31:0]&#160;input&#160;of&#160;WRMSR.<br/>A&#160;processor&#160;that supports&#160;full-width writes&#160;to the&#160;general-purpose performance&#160;counters enumerated&#160;by&#160;<br/>CPUID.0AH:EAX[15:8]&#160;will set IA32_PERF_CAPABILITIES[13]&#160;to enumerate its full-width-write capability See&#160;<br/><a href="o_fe12b1e2a880e0ce-742.html">Figure&#160;18-49.</a>&#160;<br/>If&#160;IA32_PERF_CAPABILITIES.FW_WRITE[bit 13] =1,&#160;each&#160;IA32_PMCi&#160;is accompanied by a&#160;corresponding alias&#160;<br/>address&#160;starting&#160;at 4C1H&#160;for IA32_A_PMC0.&#160;<br/>The bit width of the&#160;performance&#160;monitoring&#160;counters is&#160;specified&#160;in&#160;CPUID.0AH:EAX[23:16].</p>
<p style="position:absolute;top:355px;left:169px;white-space:nowrap" class="ft05">Figure&#160;18-13. &#160;IA32_PERF_GLOBAL_INUSE&#160;MSR&#160;and Architectural Perfmon Version&#160;4</p>
<p style="position:absolute;top:327px;left:702px;white-space:nowrap" class="ft00">Reserved</p>
<p style="position:absolute;top:241px;left:147px;white-space:nowrap" class="ft010">PMI&#160;InUse<br/>FIXED_CTR2 InUse<br/>FIXED_CTR1 InUse</p>
<p style="position:absolute;top:150px;left:722px;white-space:nowrap" class="ft06">..&#160;1&#160;0</p>
<p style="position:absolute;top:305px;left:536px;white-space:nowrap" class="ft06">PERFEVTSEL0&#160;InUse</p>
<p style="position:absolute;top:152px;left:526px;white-space:nowrap" class="ft06">31</p>
<p style="position:absolute;top:152px;left:513px;white-space:nowrap" class="ft06">32</p>
<p style="position:absolute;top:152px;left:500px;white-space:nowrap" class="ft06">33</p>
<p style="position:absolute;top:152px;left:487px;white-space:nowrap" class="ft06">34</p>
<p style="position:absolute;top:152px;left:474px;white-space:nowrap" class="ft06">35</p>
<p style="position:absolute;top:149px;left:276px;white-space:nowrap" class="ft06">63</p>
<p style="position:absolute;top:150px;left:709px;white-space:nowrap" class="ft06">..</p>
<p style="position:absolute;top:150px;left:695px;white-space:nowrap" class="ft06">N</p>
<p style="position:absolute;top:273px;left:535px;white-space:nowrap" class="ft06">&#160;.......................&#160;InUse</p>
<p style="position:absolute;top:260px;left:536px;white-space:nowrap" class="ft06">PERFEVTSEL(N-1)&#160;InUse</p>
<p style="position:absolute;top:289px;left:536px;white-space:nowrap" class="ft06">PERFEVTSEL1&#160;InUse</p>
<p style="position:absolute;top:279px;left:146px;white-space:nowrap" class="ft06">FIXED_CTR0 InUse</p>
<p style="position:absolute;top:328px;left:506px;white-space:nowrap" class="ft06">N =&#160;CPUID.0AH:EAX[15:8]</p>
</div>
</body>
</html>
