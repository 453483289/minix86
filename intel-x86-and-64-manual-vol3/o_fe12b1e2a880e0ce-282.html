<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 282</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#0860a8;}
	.ft05{font-size:3px;font-family:Times;color:#000000;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:9px;line-height:13px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page282-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce282.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">8-26&#160;Vol. 3A</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">MULTIPLE-PROCESSOR&#160;MANAGEMENT</p>
<p style="position:absolute;top:98px;left:68px;white-space:nowrap" class="ft02">8.6.3&#160;</p>
<p style="position:absolute;top:98px;left:148px;white-space:nowrap" class="ft02">Executing Multiple Threads on an Intel</p>
<p style="position:absolute;top:97px;left:458px;white-space:nowrap" class="ft01">®</p>
<p style="position:absolute;top:98px;left:471px;white-space:nowrap" class="ft02">&#160;64 or IA-32 Processor Supporting Hardware&#160;</p>
<p style="position:absolute;top:119px;left:148px;white-space:nowrap" class="ft02">Multi-Threading</p>
<p style="position:absolute;top:150px;left:68px;white-space:nowrap" class="ft07">Upon completing the&#160;operating system boot-up procedure,&#160;the&#160;bootstrap&#160;processor (BSP) executes&#160;operating&#160;<br/>system code.&#160;Other logical processors are&#160;placed in&#160;the&#160;halt&#160;state. To&#160;execute a&#160;code&#160;stream (thread) on a&#160;halted&#160;<br/>logical&#160;processor,&#160;the&#160;operating system issues&#160;an interprocessor interrupt (IPI) addressed to&#160;the&#160;halted logical&#160;<br/>processor.&#160;In&#160;response to&#160;the IPI,&#160;the processor&#160;wakes up&#160;and&#160;begins executing&#160;the&#160;code&#160;identified&#160;by the&#160;vector&#160;<br/>received&#160;as part of the&#160;IPI.&#160;<br/>To&#160;manage&#160;execution of multiple threads on&#160;logical processors,&#160;an operating&#160;system&#160;can use&#160;conventional&#160;<br/>symmetric multiprocessing (SMP)&#160;techniques. For example,&#160;the&#160;operating-system&#160;can use&#160;a time-slice or&#160;load&#160;<br/>balancing mechanism to&#160;periodically&#160;interrupt&#160;each of the active&#160;logical&#160;processors. Upon interrupting a&#160;logical&#160;<br/>processor,&#160;the operating system checks its run queue for a&#160;thread&#160;waiting to be&#160;executed&#160;and dispatches the thread&#160;<br/>to the&#160;interrupted logical processor.</p>
<p style="position:absolute;top:356px;left:68px;white-space:nowrap" class="ft02">8.6.4&#160;</p>
<p style="position:absolute;top:356px;left:148px;white-space:nowrap" class="ft02">Handling Interrupts on an IA-32 Processor Supporting Hardware&#160;Multi-Threading</p>
<p style="position:absolute;top:387px;left:68px;white-space:nowrap" class="ft07">Interrupts are handled on processors supporting Intel Hyper-Threading&#160;Technology as they are on conventional MP&#160;<br/>systems. External interrupts&#160;are received&#160;by the&#160;I/O APIC,&#160;which distributes&#160;them&#160;as interrupt&#160;messages to&#160;specific&#160;<br/><a href="o_fe12b1e2a880e0ce-282.html">logical processors (see Figure&#160;8-3</a>).&#160;<br/>Logical processors can&#160;also send IPIs to&#160;other&#160;logical&#160;processors by writing&#160;to the&#160;ICR register&#160;of&#160;its local APIC&#160;(see&#160;<br/><a href="o_fe12b1e2a880e0ce-380.html">Section&#160;10.6,&#160;“Issuing Interprocessor Interrupts”).</a>&#160;This&#160;also&#160;applies&#160;to dual-core processors.</p>
<p style="position:absolute;top:998px;left:68px;white-space:nowrap" class="ft04">8.7 INTEL</p>
<p style="position:absolute;top:1000px;left:201px;white-space:nowrap" class="ft01">®</p>
<p style="position:absolute;top:998px;left:214px;white-space:nowrap" class="ft04">&#160;HYPER-THREADING TECHNOLOGY ARCHITECTURE</p>
<p style="position:absolute;top:1035px;left:68px;white-space:nowrap" class="ft07"><a href="o_fe12b1e2a880e0ce-283.html">Figure 8-4</a>&#160;shows a generalized view&#160;of an&#160;Intel&#160;processor supporting&#160;Intel Hyper-Threading Technology, using the&#160;<br/>original&#160;Intel&#160;Xeon processor MP as&#160;an&#160;example.&#160;This&#160;implementation of&#160;the Intel&#160;Hyper-Threading Technology&#160;</p>
<p style="position:absolute;top:499px;left:171px;white-space:nowrap" class="ft05">&#160;</p>
<p style="position:absolute;top:950px;left:175px;white-space:nowrap" class="ft06">Figure&#160;8-3. &#160;Local APICs&#160;and I/O&#160;APIC&#160;in&#160;MP&#160;System Supporting&#160;Intel HT Technology</p>
<p style="position:absolute;top:878px;left:417px;white-space:nowrap" class="ft00">I/O APIC</p>
<p style="position:absolute;top:874px;left:526px;white-space:nowrap" class="ft00">External</p>
<p style="position:absolute;top:885px;left:526px;white-space:nowrap" class="ft00">Interrupts</p>
<p style="position:absolute;top:921px;left:393px;white-space:nowrap" class="ft00">System Chip&#160;Set</p>
<p style="position:absolute;top:783px;left:411px;white-space:nowrap" class="ft00">Bridge</p>
<p style="position:absolute;top:816px;left:440px;white-space:nowrap" class="ft00">PCI</p>
<p style="position:absolute;top:739px;left:441px;white-space:nowrap" class="ft00">Interrupt Messages</p>
<p style="position:absolute;top:650px;left:462px;white-space:nowrap" class="ft00">Local&#160;APIC</p>
<p style="position:absolute;top:555px;left:471px;white-space:nowrap" class="ft00">Logical&#160;</p>
<p style="position:absolute;top:568px;left:460px;white-space:nowrap" class="ft00">Processor&#160;0</p>
<p style="position:absolute;top:649px;left:532px;white-space:nowrap" class="ft00">Local&#160;APIC</p>
<p style="position:absolute;top:555px;left:543px;white-space:nowrap" class="ft00">Logical&#160;</p>
<p style="position:absolute;top:569px;left:531px;white-space:nowrap" class="ft00">Processor&#160;1</p>
<p style="position:absolute;top:528px;left:452px;white-space:nowrap" class="ft00">Hyper-Threading&#160;Technology</p>
<p style="position:absolute;top:515px;left:463px;white-space:nowrap" class="ft00">Intel Processor&#160;with Intel</p>
<p style="position:absolute;top:677px;left:493px;white-space:nowrap" class="ft00">Bus Interface</p>
<p style="position:absolute;top:607px;left:486px;white-space:nowrap" class="ft00">Processor Core</p>
<p style="position:absolute;top:708px;left:484px;white-space:nowrap" class="ft00">IPIs</p>
<p style="position:absolute;top:701px;left:545px;white-space:nowrap" class="ft09">Interrupt<br/>Messages</p>
<p style="position:absolute;top:650px;left:300px;white-space:nowrap" class="ft00">Local&#160;APIC</p>
<p style="position:absolute;top:555px;left:310px;white-space:nowrap" class="ft00">Logical&#160;</p>
<p style="position:absolute;top:568px;left:298px;white-space:nowrap" class="ft00">Processor&#160;0</p>
<p style="position:absolute;top:649px;left:371px;white-space:nowrap" class="ft00">Local&#160;APIC</p>
<p style="position:absolute;top:555px;left:381px;white-space:nowrap" class="ft00">Logical&#160;</p>
<p style="position:absolute;top:569px;left:370px;white-space:nowrap" class="ft00">Processor&#160;1</p>
<p style="position:absolute;top:528px;left:290px;white-space:nowrap" class="ft00">Hyper-Threading&#160;Technology</p>
<p style="position:absolute;top:515px;left:302px;white-space:nowrap" class="ft00">Intel Processor&#160;with Intel</p>
<p style="position:absolute;top:677px;left:331px;white-space:nowrap" class="ft00">Bus Interface</p>
<p style="position:absolute;top:607px;left:324px;white-space:nowrap" class="ft00">Processor Core</p>
<p style="position:absolute;top:708px;left:322px;white-space:nowrap" class="ft00">IPIs</p>
<p style="position:absolute;top:701px;left:384px;white-space:nowrap" class="ft09">Interrupt<br/>Messages</p>
</div>
</body>
</html>
