<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 652</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#0860a8;}
	.ft04{font-size:12px;font-family:Times;color:#0860a8;}
	.ft05{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page652-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce652.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:68px;white-space:nowrap" class="ft00">18-16&#160;Vol. 3B</p>
<p style="position:absolute;top:47px;left:68px;white-space:nowrap" class="ft01">PERFORMANCE MONITORING</p>
<p style="position:absolute;top:291px;left:68px;white-space:nowrap" class="ft05">Some performance&#160;events may&#160;(a) support none of&#160;the&#160;three event-specific qualification&#160;encodings&#160;(b) may&#160;<br/>support core-specificity&#160;and agent&#160;specificity&#160;simultaneously&#160;(c) or&#160;may support core-specificity&#160;and hardware&#160;<br/>prefetch&#160;qualification simultaneously. Agent-specificity and hardware prefetch qualification are&#160;mutually exclusive.<br/>In&#160;addition,&#160;some&#160;L2&#160;events&#160;permit&#160;qualifications that distinguish cache coherent&#160;states. The sub-field definition for&#160;<br/>cache coherency state qualification&#160;is shown&#160;<a href="o_fe12b1e2a880e0ce-652.html">in Table&#160;18-5.</a>&#160;If&#160;no&#160;bits in&#160;the MESI qualification&#160;sub-field&#160;are set for&#160;<br/>an&#160;event&#160;that requires setting MESI qualification bits,&#160;the&#160;event count will&#160;not&#160;increment.</p>
<p style="position:absolute;top:616px;left:68px;white-space:nowrap" class="ft03">18.4&#160;</p>
<p style="position:absolute;top:616px;left:147px;white-space:nowrap" class="ft03">PERFORMANCE MONITORING (PROCESSORS BASED ON&#160;INTEL</p>
<p style="position:absolute;top:618px;left:716px;white-space:nowrap" class="ft01">®&#160;</p>
<p style="position:absolute;top:616px;left:734px;white-space:nowrap" class="ft03">CORE</p>
<p style="position:absolute;top:618px;left:784px;white-space:nowrap" class="ft01">™</p>
<p style="position:absolute;top:616px;left:797px;white-space:nowrap" class="ft03">&#160;</p>
<p style="position:absolute;top:642px;left:146px;white-space:nowrap" class="ft03">MICROARCHITECTURE)</p>
<p style="position:absolute;top:678px;left:68px;white-space:nowrap" class="ft05">In addition&#160;to architectural performance monitoring, processors based on the Intel Core microarchitecture support&#160;<br/>non-architectural&#160;performance monitoring events.<br/>Architectural&#160;performance&#160;events can be collected&#160;using&#160;general-purpose performance&#160;counters. Non-architectural&#160;<br/>performance events&#160;can be&#160;collected&#160;using general-purpose performance&#160;counters (coupled with two&#160;<br/>IA32_PERFEVTSELx MSRs for&#160;detailed event configurations), or&#160;fixed-function&#160;performance&#160;<a href="o_fe12b1e2a880e0ce-653.html">counters (see Section&#160;<br/>18.4.1).</a>&#160;IA32_PERFEVTSELx MSRs are&#160;architectural; their&#160;la<a href="o_fe12b1e2a880e0ce-639.html">yout is shown in Figure&#160;18-1. Startin</a>g&#160;with&#160;Intel Core&#160;<br/>2&#160;processor&#160;T 7700,&#160;fixed-function performance&#160;counters&#160;and&#160;associated&#160;counter control and status MSR&#160;becomes&#160;<br/>part of architectural performance&#160;monitoring&#160;version&#160;<a href="o_fe12b1e2a880e0ce-642.html">2 facilities (see also&#160;Section&#160;18.2.2).&#160;<br/></a>Non-architectural performance events&#160;in processors&#160;based on Intel Core microarchitecture&#160;use event select values&#160;<br/>that are&#160;model-specific. Valid event mask (Umask) bits&#160;are&#160;listed&#160;<a href="o_fe12b1e2a880e0ce-757.html">in Chapter 19. T</a>he UMASK field&#160;may&#160;contain&#160;sub-<br/>fields&#160;identical&#160;to those&#160;listed<a href="o_fe12b1e2a880e0ce-651.html">&#160;in Table&#160;18-2,&#160;Table&#160;18-3,</a>&#160;<a href="o_fe12b1e2a880e0ce-652.html">Table&#160;18-4,</a>&#160;<a href="o_fe12b1e2a880e0ce-652.html">and Table&#160;18-5. One</a>&#160;or more of&#160;these sub-<br/>fields&#160;may apply to&#160;specific&#160;events&#160;on an event-by-event basis.&#160;Details&#160;are&#160;listed&#160;<a href="o_fe12b1e2a880e0ce-874.html">in Table&#160;19-23</a>&#160;<a href="o_fe12b1e2a880e0ce-757.html">in&#160;Chapter&#160;19,&#160;<br/>“Performance-Monitoring&#160;Events.”<br/></a>In&#160;addition, the&#160;UMASK filed may&#160;also contain&#160;a&#160;sub-field that&#160;allows&#160;detection specificity related to&#160;snoop&#160;<br/>responses. Bits of&#160;the snoop&#160;response&#160;qualification sub-field are&#160;defined in<a href="o_fe12b1e2a880e0ce-652.html">&#160;Table&#160;18-6.</a></p>
<p style="position:absolute;top:118px;left:176px;white-space:nowrap" class="ft04">Table 18-4. &#160;HW Prefetch Qualification Encoding within&#160;a Non-Architectural Umask</p>
<p style="position:absolute;top:139px;left:75px;white-space:nowrap" class="ft07">IA32_PERFEVTSELx MSRs<br/>Bit 13:12&#160;Encoding</p>
<p style="position:absolute;top:162px;left:333px;white-space:nowrap" class="ft02">Description</p>
<p style="position:absolute;top:184px;left:75px;white-space:nowrap" class="ft02">11B</p>
<p style="position:absolute;top:184px;left:333px;white-space:nowrap" class="ft02">All inclusive</p>
<p style="position:absolute;top:207px;left:75px;white-space:nowrap" class="ft02">10B</p>
<p style="position:absolute;top:207px;left:333px;white-space:nowrap" class="ft02">Reserved</p>
<p style="position:absolute;top:229px;left:75px;white-space:nowrap" class="ft02">01B</p>
<p style="position:absolute;top:229px;left:333px;white-space:nowrap" class="ft02">Hardware&#160;prefetch&#160;only&#160;</p>
<p style="position:absolute;top:252px;left:75px;white-space:nowrap" class="ft02">00B</p>
<p style="position:absolute;top:252px;left:333px;white-space:nowrap" class="ft02">Exclude&#160;hardware&#160;prefetch</p>
<p style="position:absolute;top:422px;left:196px;white-space:nowrap" class="ft04">Table 18-5.&#160;&#160;MESI&#160;Qualification Definitions within a&#160;Non-Architectural Umask</p>
<p style="position:absolute;top:444px;left:75px;white-space:nowrap" class="ft07">IA32_PERFEVTSELx MSRs<br/>Bit&#160;Position&#160;11:8</p>
<p style="position:absolute;top:466px;left:271px;white-space:nowrap" class="ft02">Description</p>
<p style="position:absolute;top:489px;left:75px;white-space:nowrap" class="ft02">Bit 11</p>
<p style="position:absolute;top:489px;left:271px;white-space:nowrap" class="ft02">Counts modified state</p>
<p style="position:absolute;top:511px;left:75px;white-space:nowrap" class="ft02">Bit 10</p>
<p style="position:absolute;top:511px;left:271px;white-space:nowrap" class="ft02">Counts exclusive state</p>
<p style="position:absolute;top:534px;left:75px;white-space:nowrap" class="ft02">Bit 9</p>
<p style="position:absolute;top:534px;left:271px;white-space:nowrap" class="ft02">Counts shared&#160;state</p>
<p style="position:absolute;top:556px;left:75px;white-space:nowrap" class="ft02">Bit 8</p>
<p style="position:absolute;top:556px;left:271px;white-space:nowrap" class="ft02">Counts Invalid state</p>
<p style="position:absolute;top:949px;left:176px;white-space:nowrap" class="ft04">Table&#160;18-6.&#160;&#160;Bus Snoop&#160;Qualification Definitions within&#160;a Non-Architectural Umask</p>
<p style="position:absolute;top:970px;left:74px;white-space:nowrap" class="ft07">IA32_PERFEVTSELx MSRs<br/>Bit Position 11:8</p>
<p style="position:absolute;top:993px;left:270px;white-space:nowrap" class="ft02">Description</p>
<p style="position:absolute;top:1015px;left:74px;white-space:nowrap" class="ft02">Bit 11</p>
<p style="position:absolute;top:1015px;left:270px;white-space:nowrap" class="ft02">HITM&#160;response</p>
<p style="position:absolute;top:1038px;left:74px;white-space:nowrap" class="ft02">Bit 10</p>
<p style="position:absolute;top:1038px;left:270px;white-space:nowrap" class="ft02">Reserved&#160;</p>
</div>
</body>
</html>
