<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 739</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#0860a8;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;font-family:Times;color:#000000;}
	.ft06{font-size:12px;font-family:Times;color:#0860a8;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page739-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce739.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:754px;white-space:nowrap" class="ft00">Vol. 3B&#160;18-103</p>
<p style="position:absolute;top:47px;left:672px;white-space:nowrap" class="ft01">PERFORMANCE MONITORING</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft07">When&#160;a bit in&#160;the event mask&#160;field is&#160;TI,&#160;the&#160;effect of specifying&#160;bit-0-3&#160;of the&#160;associated&#160;ESCR are&#160;described&#160;in&#160;<br/>Table 15-6.&#160;For&#160;events that are marked as&#160;<a href="˛ˇ">TI in&#160;Chapter&#160;19,</a>&#160;the&#160;effect of selectively specifying&#160;T0_USR,&#160;T0_OS,&#160;<br/>T1_USR, T1_OS&#160;bits&#160;is shown&#160;<a href="o_fe12b1e2a880e0ce-739.html">in Table 18-67</a>.&#160;</p>
<p style="position:absolute;top:417px;left:69px;white-space:nowrap" class="ft03">18.17 COUNTING&#160;</p>
<p style="position:absolute;top:417px;left:252px;white-space:nowrap" class="ft03">CLOCKS</p>
<p style="position:absolute;top:453px;left:69px;white-space:nowrap" class="ft07">The count of cycles, also&#160;known&#160;as clockticks,&#160;forms&#160;a the&#160;basis&#160;for&#160;measuring how long&#160;a program takes to&#160;<br/>execute. Clockticks&#160;are also&#160;used&#160;as&#160;part of efficiency ratios like&#160;cycles&#160;per instruction (CPI).&#160;Processor&#160;clocks&#160;may&#160;<br/>stop&#160;ticking under&#160;circumstances like&#160;the&#160;following:</p>
<p style="position:absolute;top:508px;left:69px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:508px;left:95px;white-space:nowrap" class="ft07">The&#160;processor&#160;is halted&#160;when there&#160;is&#160;nothing&#160;for the&#160;CPU to&#160;do. For example,&#160;the processor may&#160;halt to&#160;save&#160;<br/>power while the&#160;computer is servicing&#160;an I/O request. When&#160;Intel Hyper-Threading&#160;Technology is enabled, both&#160;<br/>logical processors must be&#160;halted&#160;for performance-monitoring counters&#160;to be powered down.</p>
<p style="position:absolute;top:563px;left:69px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:564px;left:95px;white-space:nowrap" class="ft07">The&#160;processor&#160;is&#160;asleep as&#160;a result of&#160;being halted&#160;or because of&#160;a power-management scheme.&#160;There are&#160;<br/>different&#160;levels of sleep.&#160;In the&#160;some&#160;deep&#160;sleep&#160;levels,&#160;the time-stamp counter stops counting.</p>
<p style="position:absolute;top:604px;left:69px;white-space:nowrap" class="ft07">In addition,&#160;processor&#160;core clocks&#160;may undergo transitions&#160;at different&#160;ratios&#160;relative&#160;to the&#160;processor‚Äôs bus clock&#160;<br/>frequency.&#160;Some of&#160;the&#160;situations that can&#160;cause&#160;processor&#160;core&#160;clock&#160;to undergo frequency transitions include:</p>
<p style="position:absolute;top:643px;left:69px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:643px;left:95px;white-space:nowrap" class="ft02">TM2 transitions</p>
<p style="position:absolute;top:665px;left:69px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:666px;left:95px;white-space:nowrap" class="ft02">Enhanced&#160;Intel SpeedStep&#160;Technology&#160;transitions&#160;(P-state transitions)</p>
<p style="position:absolute;top:690px;left:69px;white-space:nowrap" class="ft08">For&#160;Intel processors that&#160;support&#160;Intel Dynamic&#160;Acceleration or&#160;XE operation, the&#160;processor&#160;core&#160;clocks may&#160;<br/>operate at&#160;a frequency&#160;that differs&#160;from the&#160;Processor Base&#160;frequency (as&#160;indicated&#160;by processor frequency infor-<br/>mation&#160;reported&#160;by CPUID&#160;instruction).&#160;Se<a href="o_fe12b1e2a880e0ce-741.html">e Section 18.17.5 for more</a>&#160;detail.<br/>There are several&#160;ways&#160;to count processor clock&#160;cycles&#160;to monitor performance.&#160;These are:</p>
<p style="position:absolute;top:769px;left:69px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:769px;left:95px;white-space:nowrap" class="ft07"><b>Non-halted clockticks ‚Äî&#160;</b>Measures&#160;clock cycles in&#160;which the&#160;specified&#160;logical&#160;processor is&#160;not halted and&#160;is&#160;<br/>not in&#160;any power-saving&#160;state. When Intel Hyper-Threading Technology is enabled, ticks can be&#160;measured&#160;on&#160;a&#160;<br/>per-logical-processor&#160;basis. There&#160;are&#160;also performance&#160;events on dual-core processors that&#160;measure&#160;<br/>clockticks per logical processor when&#160;the&#160;processor&#160;is not halted.</p>
<p style="position:absolute;top:841px;left:69px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:841px;left:95px;white-space:nowrap" class="ft07"><b>Non-sleep clockticks</b>&#160;<b>‚Äî&#160;</b>Measures&#160;clock cycles&#160;in which the&#160;specified physical&#160;processor is not in a&#160;sleep mode&#160;<br/>or in&#160;a power-saving state. These&#160;ticks&#160;can<b>n</b>ot be measured on&#160;a&#160;logical-processor basis.</p>
<p style="position:absolute;top:880px;left:69px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:880px;left:95px;white-space:nowrap" class="ft07"><b>Time-stamp&#160;counter</b>&#160;<b>‚Äî&#160;</b>Measures clock cycles&#160;in which&#160;the&#160;physical&#160;processor is&#160;not in deep sleep.&#160;These&#160;ticks&#160;<br/>cannot be measured on a&#160;logical-processor basis.</p>
<p style="position:absolute;top:919px;left:69px;white-space:nowrap" class="ft04">‚Ä¢</p>
<p style="position:absolute;top:919px;left:95px;white-space:nowrap" class="ft07"><b>Reference clockticks</b>&#160;<b>‚Äî&#160;</b>TM2 or Enhanced&#160;Intel SpeedStep&#160;technology&#160;are two examples&#160;of processor&#160;<br/>features that&#160;can cause processor core&#160;clockticks to&#160;represent non-uniform tick&#160;intervals due to&#160;change&#160;of&#160;bus&#160;<br/>ratios. Performance events that counts clockticks&#160;of&#160;a&#160;constant reference&#160;frequency was introduced Intel Core&#160;<br/>Duo&#160;and Intel Core Solo processors.&#160;The mechanism&#160;is&#160;further enhanced on processors based&#160;on&#160;Intel&#160;Core&#160;<br/>microarchitecture.</p>
<p style="position:absolute;top:1009px;left:69px;white-space:nowrap" class="ft07">Some&#160;processor&#160;models permit clock cycles&#160;to be&#160;measured when&#160;the&#160;physical&#160;processor&#160;is not in&#160;deep&#160;sleep&#160;(by&#160;<br/>using&#160;the time-stamp counter&#160;and the&#160;RDTSC&#160;instruction).&#160;Note that&#160;such&#160;ticks cannot be measured on a&#160;per-<br/>logical-processor basis.&#160;See<a href="o_fe12b1e2a880e0ce-614.html">&#160;Section 17.15,&#160;‚ÄúTime-Stamp Counter,‚Äù</a>&#160;for&#160;detail on processor capabilities.</p>
<p style="position:absolute;top:164px;left:245px;white-space:nowrap" class="ft06">Table&#160;18-67.&#160; Effect of&#160;Logical Processor&#160;and CPL&#160;Qualification&#160;</p>
<p style="position:absolute;top:182px;left:301px;white-space:nowrap" class="ft06">for Non-logical-Processor-specific&#160;(TI) Events</p>
<p style="position:absolute;top:205px;left:230px;white-space:nowrap" class="ft02">T1_OS/T1_USR = 00</p>
<p style="position:absolute;top:205px;left:383px;white-space:nowrap" class="ft02">T1_OS/T1_USR = 01</p>
<p style="position:absolute;top:205px;left:536px;white-space:nowrap" class="ft02">T1_OS/T1_USR = 11</p>
<p style="position:absolute;top:205px;left:689px;white-space:nowrap" class="ft02">T1_OS/T1_USR = 10&#160;</p>
<p style="position:absolute;top:229px;left:75px;white-space:nowrap" class="ft02">T0_OS/T0_USR&#160;=&#160;00</p>
<p style="position:absolute;top:229px;left:230px;white-space:nowrap" class="ft02">Zero&#160;count</p>
<p style="position:absolute;top:229px;left:383px;white-space:nowrap" class="ft02">Counts while&#160;(a)&#160;T0&#160;in&#160;</p>
<p style="position:absolute;top:245px;left:383px;white-space:nowrap" class="ft02">USR or&#160;(b) T1 in USR</p>
<p style="position:absolute;top:229px;left:536px;white-space:nowrap" class="ft02">Counts&#160;irrespective&#160;of&#160;</p>
<p style="position:absolute;top:245px;left:536px;white-space:nowrap" class="ft02">CPL,&#160;T0, T1</p>
<p style="position:absolute;top:229px;left:689px;white-space:nowrap" class="ft02">Counts while (a)&#160;T0 in&#160;OS&#160;</p>
<p style="position:absolute;top:245px;left:689px;white-space:nowrap" class="ft02">or (b) T1 in OS&#160;</p>
<p style="position:absolute;top:270px;left:75px;white-space:nowrap" class="ft02">T0_OS/T0_USR&#160;=&#160;01</p>
<p style="position:absolute;top:270px;left:230px;white-space:nowrap" class="ft02">Counts&#160;while&#160;(a)&#160;T0&#160;in&#160;</p>
<p style="position:absolute;top:286px;left:230px;white-space:nowrap" class="ft02">USR or&#160;(b) T1&#160;in USR</p>
<p style="position:absolute;top:270px;left:383px;white-space:nowrap" class="ft02">Counts while (a) T0 in&#160;</p>
<p style="position:absolute;top:286px;left:383px;white-space:nowrap" class="ft02">USR or&#160;(b) T1 in USR</p>
<p style="position:absolute;top:270px;left:536px;white-space:nowrap" class="ft02">Counts&#160;irrespective&#160;of&#160;</p>
<p style="position:absolute;top:286px;left:536px;white-space:nowrap" class="ft02">CPL,&#160;T0, T1</p>
<p style="position:absolute;top:270px;left:689px;white-space:nowrap" class="ft02">Counts irrespective&#160;of&#160;</p>
<p style="position:absolute;top:286px;left:689px;white-space:nowrap" class="ft02">CPL, T0,&#160;T1&#160;</p>
<p style="position:absolute;top:310px;left:75px;white-space:nowrap" class="ft02">T0_OS/T0_USR&#160;=&#160;11</p>
<p style="position:absolute;top:310px;left:230px;white-space:nowrap" class="ft02">Counts&#160;irrespective&#160;of&#160;</p>
<p style="position:absolute;top:326px;left:230px;white-space:nowrap" class="ft02">CPL,&#160;T0, T1</p>
<p style="position:absolute;top:310px;left:383px;white-space:nowrap" class="ft02">Counts irrespective&#160;of&#160;</p>
<p style="position:absolute;top:326px;left:383px;white-space:nowrap" class="ft02">CPL,&#160;T0, T1</p>
<p style="position:absolute;top:310px;left:536px;white-space:nowrap" class="ft02">Counts&#160;irrespective&#160;of&#160;</p>
<p style="position:absolute;top:326px;left:536px;white-space:nowrap" class="ft02">CPL,&#160;T0, T1</p>
<p style="position:absolute;top:310px;left:689px;white-space:nowrap" class="ft02">Counts irrespective&#160;of&#160;</p>
<p style="position:absolute;top:326px;left:689px;white-space:nowrap" class="ft02">CPL, T0,&#160;T1&#160;</p>
<p style="position:absolute;top:351px;left:75px;white-space:nowrap" class="ft02">T0_OS/T0_USR&#160;=&#160;0</p>
<p style="position:absolute;top:351px;left:230px;white-space:nowrap" class="ft02">Counts while (a)&#160;T0&#160;in&#160;OS&#160;</p>
<p style="position:absolute;top:367px;left:230px;white-space:nowrap" class="ft02">or (b) T1 in OS</p>
<p style="position:absolute;top:351px;left:383px;white-space:nowrap" class="ft02">Counts irrespective&#160;of&#160;</p>
<p style="position:absolute;top:367px;left:383px;white-space:nowrap" class="ft02">CPL,&#160;T0, T1</p>
<p style="position:absolute;top:351px;left:536px;white-space:nowrap" class="ft02">Counts&#160;irrespective&#160;of&#160;</p>
<p style="position:absolute;top:367px;left:536px;white-space:nowrap" class="ft02">CPL,&#160;T0, T1</p>
<p style="position:absolute;top:351px;left:689px;white-space:nowrap" class="ft02">Counts while (a)&#160;T0 in&#160;OS&#160;</p>
<p style="position:absolute;top:367px;left:689px;white-space:nowrap" class="ft02">or (b) T1 in OS</p>
</div>
</body>
</html>
