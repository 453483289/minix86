<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 651</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#0860a8;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page651-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce651.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:761px;white-space:nowrap" class="ft00">Vol. 3B&#160;18-15</p>
<p style="position:absolute;top:47px;left:672px;white-space:nowrap" class="ft01">PERFORMANCE MONITORING</p>
<p style="position:absolute;top:100px;left:69px;white-space:nowrap" class="ft06">If IA32_A_PMCi&#160;is present, the&#160;64-bit input value&#160;(EDX:EAX) of WRMSR&#160;to&#160;IA32_A_PMCi will cause IA32_PMCi to&#160;<br/>be updated&#160;by:</p>
<p style="position:absolute;top:138px;left:96px;white-space:nowrap" class="ft06">COUNTERWIDTH =&#160;CPUID.0AH:EAX[23:16] bit width&#160;of the performance&#160;monitoring counter<br/>IA32_PMCi[COUNTERWIDTH-1:32]&#160;‚Üê&#160;EDX[COUNTERWIDTH-33:0]);&#160;&#160; &#160;</p>
<p style="position:absolute;top:171px;left:96px;white-space:nowrap" class="ft02">IA32_PMCi[31:0]&#160;‚Üê&#160;EAX[31:0];</p>
<p style="position:absolute;top:187px;left:96px;white-space:nowrap" class="ft02">EDX[63:COUNTERWIDTH] are reserved</p>
<p style="position:absolute;top:243px;left:69px;white-space:nowrap" class="ft03">18.3&#160;</p>
<p style="position:absolute;top:243px;left:148px;white-space:nowrap" class="ft03">PERFORMANCE MONITORING (INTEL¬Æ CORE‚Ñ¢ SOLO AND INTEL¬Æ CORE‚Ñ¢ DUO&#160;</p>
<p style="position:absolute;top:268px;left:147px;white-space:nowrap" class="ft03">PROCESSORS)</p>
<p style="position:absolute;top:304px;left:69px;white-space:nowrap" class="ft06">In Intel&#160;Core&#160;Solo&#160;and Intel Core Duo processors,&#160;non-architectural performance monitoring&#160;events are&#160;<br/>programmed&#160;using the&#160;<a href="o_fe12b1e2a880e0ce-639.html">same facilities (see Figure&#160;18-1)</a>&#160;used for&#160;architectural performance&#160;events.<br/>Non-architectural performance events&#160;use event select&#160;values&#160;that are model-specific.&#160;Event mask&#160;(Umask)&#160;values&#160;<br/>are&#160;also specific&#160;to event&#160;logic units. Some&#160;microarchitectural&#160;conditions detectable&#160;by a&#160;Umask value&#160;may have&#160;<br/>specificity related&#160;to processor topology&#160;(see<a href="o_fe12b1e2a880e0ce-280.html">&#160;Section&#160;8.6,&#160;‚ÄúDetecting&#160;Hardware Multi-Threading&#160;Support and&#160;<br/>Topology,‚Äù</a><a href="˛ˇ">&#160;in the&#160;<i>Intel¬Æ&#160;64&#160;and IA-32 Architectures Software Developer‚Äôs Manual, Volume&#160;3A</i></a>). As a result, the unit&#160;<br/>mask field&#160;(for example, IA32_PERFEVTSELx[bits&#160;15:8]) may&#160;contain sub-fields&#160;that specify topology information&#160;<br/>of processor cores.<br/>The sub-field layout&#160;within the&#160;Umask field may&#160;support&#160;two-bit&#160;encoding&#160;that qualifies the&#160;relationship between&#160;a&#160;<br/>microarchitectural condition&#160;and the&#160;originating&#160;core. This&#160;data is&#160;shown in&#160;<a href="o_fe12b1e2a880e0ce-651.html">Table 18-2.</a>&#160;The&#160;two-bit encoding for&#160;<br/>core-specificity&#160;is only supported for a subset of Umask&#160;values (see<a href="˛ˇ">&#160;Chapter 19,&#160;‚ÄúPerformance Monitoring Events‚Äù)&#160;<br/></a>and for Intel Core Duo processors.&#160;Such events are referred to&#160;as core-specific&#160;events.</p>
<p style="position:absolute;top:696px;left:69px;white-space:nowrap" class="ft06">Some microarchitectural&#160;conditions allow detection&#160;specificity only&#160;at the&#160;boundary of physical processors. Some&#160;<br/>bus&#160;events belong to&#160;this category, providing specificity&#160;between&#160;the originating physical processor (a&#160;bus agent)&#160;<br/>versus&#160;other agents on the&#160;bus.&#160;Sub-field&#160;encoding for agent specificity is&#160;<a href="o_fe12b1e2a880e0ce-651.html">shown in&#160;Table&#160;18-3.</a></p>
<p style="position:absolute;top:898px;left:69px;white-space:nowrap" class="ft06">Some microarchitectural&#160;conditions are&#160;detectable only&#160;from&#160;the originating core. In&#160;such&#160;cases, unit&#160;mask does&#160;<br/>not support&#160;core-specificity&#160;or agent-specificity&#160;encodings. These are&#160;referred to&#160;as core-only&#160;conditions.<br/>Some microarchitectural&#160;conditions allow detection&#160;specificity that includes or&#160;excludes the&#160;action&#160;of hardware&#160;<br/>prefetches. A&#160;two-bit encoding may be&#160;supported&#160;to&#160;qualify&#160;hardware prefetch&#160;actions.&#160;Typically,&#160;this applies only&#160;<br/>to some&#160;L2&#160;or bus&#160;events.&#160;The sub-field encoding for&#160;hardware prefetch qualification&#160;is shown&#160;<a href="o_fe12b1e2a880e0ce-652.html">in Table&#160;18-4.</a></p>
<p style="position:absolute;top:532px;left:212px;white-space:nowrap" class="ft05">Table&#160;18-2.&#160;&#160;Core&#160;Specificity&#160;Encoding&#160;within&#160;a&#160;Non-Architectural Umask</p>
<p style="position:absolute;top:553px;left:74px;white-space:nowrap" class="ft09">IA32_PERFEVTSELx MSRs<br/>Bit 15:14&#160;Encoding</p>
<p style="position:absolute;top:576px;left:315px;white-space:nowrap" class="ft02">Description</p>
<p style="position:absolute;top:598px;left:74px;white-space:nowrap" class="ft02">11B</p>
<p style="position:absolute;top:598px;left:315px;white-space:nowrap" class="ft02">All cores</p>
<p style="position:absolute;top:621px;left:74px;white-space:nowrap" class="ft02">10B</p>
<p style="position:absolute;top:621px;left:315px;white-space:nowrap" class="ft02">Reserved</p>
<p style="position:absolute;top:643px;left:74px;white-space:nowrap" class="ft02">01B</p>
<p style="position:absolute;top:643px;left:315px;white-space:nowrap" class="ft02">This&#160;core</p>
<p style="position:absolute;top:666px;left:74px;white-space:nowrap" class="ft02">00B</p>
<p style="position:absolute;top:666px;left:315px;white-space:nowrap" class="ft02">Reserved</p>
<p style="position:absolute;top:770px;left:206px;white-space:nowrap" class="ft05">Table 18-3.&#160;&#160;Agent Specificity Encoding within a&#160;Non-Architectural Umask</p>
<p style="position:absolute;top:792px;left:75px;white-space:nowrap" class="ft09">IA32_PERFEVTSELx MSRs<br/>Bit&#160;13 Encoding</p>
<p style="position:absolute;top:814px;left:326px;white-space:nowrap" class="ft02">Description</p>
<p style="position:absolute;top:837px;left:75px;white-space:nowrap" class="ft02">0</p>
<p style="position:absolute;top:837px;left:326px;white-space:nowrap" class="ft02">This&#160;&#160;agent</p>
<p style="position:absolute;top:859px;left:75px;white-space:nowrap" class="ft02">1</p>
<p style="position:absolute;top:859px;left:326px;white-space:nowrap" class="ft02">Include all agents</p>
</div>
</body>
</html>
