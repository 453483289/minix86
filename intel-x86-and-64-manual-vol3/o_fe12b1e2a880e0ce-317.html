<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 317</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#0860a8;}
	.ft05{font-size:12px;font-family:Times;color:#0860a8;}
	.ft06{font-size:7px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
	.ft010{font-size:9px;line-height:16px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page317-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce317.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:774px;white-space:nowrap" class="ft00">Vol. 3A&#160;9-5</p>
<p style="position:absolute;top:47px;left:560px;white-space:nowrap" class="ft01">PROCESSOR&#160;MANAGEMENT&#160;AND INITIALIZATION</p>
<p style="position:absolute;top:98px;left:69px;white-space:nowrap" class="ft02">9.1.2&#160;</p>
<p style="position:absolute;top:98px;left:149px;white-space:nowrap" class="ft02">Processor Built-In Self-Test (BIST)</p>
<p style="position:absolute;top:129px;left:69px;white-space:nowrap" class="ft07">Hardware may request that&#160;the BIST be&#160;performed&#160;at power-up. The EAX register&#160;is cleared&#160;(0H)&#160;if&#160;the&#160;processor&#160;<br/>passes&#160;the BIST. A nonzero value&#160;in&#160;the EAX&#160;register&#160;after&#160;the BIST indicates that&#160;a&#160;processor&#160;fault was&#160;detected.&#160;<br/>If the&#160;BIST&#160;is not requested,&#160;the contents&#160;of&#160;the&#160;EAX register&#160;after&#160;a hardware reset is&#160;0H.&#160;<br/>The&#160;overhead&#160;for performing&#160;a BIST&#160;varies&#160;between processor families. For&#160;example,&#160;the BIST&#160;takes&#160;approximately&#160;<br/>30&#160;million processor&#160;clock periods to execute on the&#160;Pentium 4 processor.&#160;This clock count&#160;is&#160;model-specific;&#160;Intel&#160;<br/>reserves&#160;the&#160;right&#160;to&#160;change&#160;the&#160;number&#160;of&#160;periods&#160;for&#160;any&#160;Intel 64 or IA-32 processor,&#160;without notification.</p>
<p style="position:absolute;top:269px;left:69px;white-space:nowrap" class="ft02">9.1.3&#160;</p>
<p style="position:absolute;top:269px;left:150px;white-space:nowrap" class="ft02">Model and Stepping Information</p>
<p style="position:absolute;top:300px;left:69px;white-space:nowrap" class="ft07">Following a&#160;hardware&#160;reset, the EDX register&#160;contains&#160;component identification and&#160;revision&#160;information (see&#160;<br/><a href="o_fe12b1e2a880e0ce-317.html">Figure&#160;9-2</a>). For&#160;example, the&#160;model, family,&#160;and processor type returned for the&#160;first&#160;processor&#160;in&#160;the&#160;Intel&#160;<br/>Pentium 4&#160;family&#160;is as&#160;follows: model (0000B),&#160;family&#160;(1111B),&#160;and processor type (00B).&#160;</p>
<p style="position:absolute;top:586px;left:69px;white-space:nowrap" class="ft07">The&#160;stepping&#160;ID&#160;field&#160;contains a&#160;unique identifier for the&#160;processor’s stepping&#160;ID&#160;or revision&#160;level.&#160;The&#160;extended&#160;<br/>family and&#160;extended model&#160;fields&#160;were added to the&#160;IA-32 architecture&#160;in&#160;the&#160;Pentium 4&#160;processors.</p>
<p style="position:absolute;top:653px;left:69px;white-space:nowrap" class="ft02">9.1.4&#160;</p>
<p style="position:absolute;top:653px;left:149px;white-space:nowrap" class="ft02">First Instruction Executed</p>
<p style="position:absolute;top:684px;left:69px;white-space:nowrap" class="ft07">The first instruction that&#160;is fetched and&#160;executed following&#160;a hardware reset is&#160;located&#160;at physical address&#160;<br/>FFFFFFF0H. This address&#160;is&#160;16&#160;bytes&#160;below the processor’s&#160;uppermost physical&#160;address.&#160;The EPROM containing&#160;the&#160;<br/>software-initialization&#160;code&#160;must&#160;be&#160;located at&#160;this&#160;address.&#160;<br/>The address FFFFFFF0H is&#160;beyond the 1-MByte addressable range of the processor while&#160;in real-address mode. The&#160;<br/>processor&#160;is initialized to&#160;this&#160;starting&#160;address as&#160;follows. The CS&#160;register has two parts: the&#160;visible&#160;segment&#160;<br/>selector part and&#160;the hidden&#160;base&#160;address&#160;part. In&#160;real-address mode,&#160;the base address&#160;is normally formed&#160;by&#160;<br/>shifting the&#160;16-bit segment selector value 4 bits&#160;to the left to produce&#160;a 20-bit base&#160;address.&#160;However,&#160;during&#160;a&#160;<br/>hardware reset, the segment selector&#160;in the CS&#160;register is&#160;loaded&#160;with F000H and the base address is&#160;loaded with&#160;<br/>FFFF0000H.&#160;The&#160;starting address&#160;is thus&#160;formed&#160;by adding the&#160;base&#160;address&#160;to the&#160;value&#160;in the&#160;EIP register&#160;(that&#160;<br/>is, FFFF0000 + FFF0H = FFFFFFF0H).<br/>The first time the CS register is loaded with a new value&#160;after a hardware&#160;reset, the&#160;processor will follow the normal&#160;<br/>rule for address&#160;translation in&#160;real-address mode&#160;(that&#160;is, [CS&#160;base&#160;address&#160;=&#160;CS segment&#160;selector *&#160;16]). To&#160;<br/>insure&#160;that&#160;the&#160;base&#160;address&#160;in the&#160;CS register remains unchanged until the&#160;EPROM&#160;based software-initialization&#160;<br/>code&#160;is completed, the&#160;code&#160;must not contain a&#160;far jump&#160;or far call or allow an&#160;interrupt to&#160;occur (which&#160;would&#160;<br/>cause the&#160;CS&#160;selector&#160;value&#160;to be changed).</p>
<p style="position:absolute;top:985px;left:69px;white-space:nowrap" class="ft04">9.2&#160;</p>
<p style="position:absolute;top:985px;left:148px;white-space:nowrap" class="ft04">X87 FPU INITIALIZATION</p>
<p style="position:absolute;top:1021px;left:69px;white-space:nowrap" class="ft07">Software-initialization code can&#160;determine&#160;the whether&#160;the processor contains an&#160;x87 FPU&#160;by using&#160;the CPUID&#160;<br/>instruction. The&#160;code&#160;must then&#160;initialize&#160;the&#160;x87 FPU&#160;and set flags&#160;in control register CR0&#160;to&#160;reflect&#160;the state of the&#160;<br/>x87 FPU environment.</p>
<p style="position:absolute;top:540px;left:239px;white-space:nowrap" class="ft05">Figure&#160;9-2.&#160;&#160;Version&#160;Information&#160;in the EDX Register&#160;after&#160;Reset</p>
<p style="position:absolute;top:383px;left:263px;white-space:nowrap" class="ft06">31</p>
<p style="position:absolute;top:383px;left:519px;white-space:nowrap" class="ft06">12&#160;11</p>
<p style="position:absolute;top:383px;left:578px;white-space:nowrap" class="ft06">8&#160;7</p>
<p style="position:absolute;top:383px;left:632px;white-space:nowrap" class="ft06">4&#160;3</p>
<p style="position:absolute;top:383px;left:687px;white-space:nowrap" class="ft06">0</p>
<p style="position:absolute;top:408px;left:231px;white-space:nowrap" class="ft00">EDX</p>
<p style="position:absolute;top:472px;left:211px;white-space:nowrap" class="ft010">Family (1111B for&#160;the Pentium 4 Processor&#160;Family)<br/>Model&#160;(Beginning&#160;with&#160;0000B)</p>
<p style="position:absolute;top:383px;left:506px;white-space:nowrap" class="ft06">13</p>
<p style="position:absolute;top:383px;left:491px;white-space:nowrap" class="ft06">14</p>
<p style="position:absolute;top:456px;left:212px;white-space:nowrap" class="ft00">Processor Type</p>
<p style="position:absolute;top:409px;left:595px;white-space:nowrap" class="ft00">Model</p>
<p style="position:absolute;top:410px;left:541px;white-space:nowrap" class="ft00">Family</p>
<p style="position:absolute;top:401px;left:644px;white-space:nowrap" class="ft00">Stepping</p>
<p style="position:absolute;top:415px;left:661px;white-space:nowrap" class="ft00">ID</p>
<p style="position:absolute;top:383px;left:476px;white-space:nowrap" class="ft06">15</p>
<p style="position:absolute;top:413px;left:432px;white-space:nowrap" class="ft00">Model</p>
<p style="position:absolute;top:402px;left:423px;white-space:nowrap" class="ft00">Extended</p>
<p style="position:absolute;top:401px;left:350px;white-space:nowrap" class="ft00">Extended</p>
<p style="position:absolute;top:413px;left:357px;white-space:nowrap" class="ft00">Family</p>
<p style="position:absolute;top:383px;left:465px;white-space:nowrap" class="ft06">16</p>
<p style="position:absolute;top:383px;left:422px;white-space:nowrap" class="ft06">19</p>
<p style="position:absolute;top:383px;left:409px;white-space:nowrap" class="ft06">20</p>
<p style="position:absolute;top:383px;left:319px;white-space:nowrap" class="ft06">27</p>
<p style="position:absolute;top:383px;left:306px;white-space:nowrap" class="ft06">28</p>
<p style="position:absolute;top:510px;left:598px;white-space:nowrap" class="ft00">Reserved</p>
</div>
</body>
</html>
