<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1155</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:16px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:11px;font-family:Times;color:#000000;}
	.ft05{font-size:8px;font-family:Times;color:#000000;}
	.ft06{font-size:14px;font-family:Times;color:#0860a8;}
	.ft07{font-size:18px;font-family:Times;color:#000000;}
	.ft08{font-size:12px;font-family:Times;color:#0860a8;}
	.ft09{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1155-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1155.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:769px;white-space:nowrap" class="ft00">Vol. 3C&#160;28-7</p>
<p style="position:absolute;top:47px;left:581px;white-space:nowrap" class="ft01">VMX SUPPORT&#160;FOR ADDRESS TRANSLATION</p>
<p style="position:absolute;top:552px;left:69px;white-space:nowrap" class="ft02">28.2.3 EPT-Induced&#160;</p>
<p style="position:absolute;top:552px;left:253px;white-space:nowrap" class="ft02">VM&#160;Exits</p>
<p style="position:absolute;top:583px;left:69px;white-space:nowrap" class="ft09">Accesses using guest-physical addresses may cause&#160;VM&#160;exits&#160;due&#160;to&#160;EPT&#160;misconfigurations, EPT violations,&#160;and&#160;<br/>page-modification&#160;log-full events. An&#160;<b>EPT misconfiguration</b>&#160;occurs&#160;when, in the&#160;course of&#160;translating a&#160;guest-<br/>physical&#160;address,&#160;the logical processor encounters&#160;an EPT paging-structure&#160;entry&#160;that contains an&#160;unsupported&#160;<br/>value&#160;(see<a href="o_fe12b1e2a880e0ce-1155.html">&#160;Section 28.2.3.1). A</a>n&#160;<b>EPT violation</b>&#160;occurs when&#160;there is no&#160;EPT&#160;misconfiguration but the&#160;EPT&#160;paging-<br/>structure&#160;entries&#160;disallow an&#160;access using&#160;the guest-physical&#160;ad<a href="o_fe12b1e2a880e0ce-1156.html">dress (see Section 28.2.3.2). A&#160;</a><b>page-modifica-<br/>tion log-full event</b>&#160;occurs&#160;when&#160;the logical processor determines a&#160;need&#160;to create a&#160;page-modification log&#160;entry&#160;<br/>and the&#160;current log&#160;is&#160;full&#160;(see&#160;<a href="o_fe12b1e2a880e0ce-1159.html">Section&#160;28.2.5).<br/></a>These&#160;events occur only due to&#160;an&#160;attempt&#160;to access memory&#160;with&#160;a&#160;guest-physical address. Loading&#160;CR3 with&#160;a&#160;<br/>guest-physical address with the MOV to CR3 instruction can cause neither an EPT configuration nor an EPT&#160;violation&#160;<br/>until&#160;that address&#160;is used to&#160;access&#160;a paging structure.</p>
<p style="position:absolute;top:736px;left:437px;white-space:nowrap" class="ft05">1</p>
<p style="position:absolute;top:763px;left:69px;white-space:nowrap" class="ft09">If&#160;the “EPT-violation&#160;#VE”&#160;VM-execution&#160;control&#160;is 1, certain EPT&#160;violations&#160;may&#160;cause virtualization&#160;exceptions&#160;<br/>instead of VM&#160;exits.&#160;S<a href="o_fe12b1e2a880e0ce-1089.html">ee Section 25.5.6.1.</a></p>
<p style="position:absolute;top:823px;left:69px;white-space:nowrap" class="ft06">28.2.3.1 &#160;&#160;EPT Misconfigurations</p>
<p style="position:absolute;top:852px;left:69px;white-space:nowrap" class="ft03">AN EPT&#160;misconfiguration occurs if&#160;any&#160;of&#160;the following is&#160;identified while&#160;translating a&#160;guest-physical address:</p>
<p style="position:absolute;top:874px;left:69px;white-space:nowrap" class="ft07">•</p>
<p style="position:absolute;top:874px;left:95px;white-space:nowrap" class="ft03">The&#160;value of bits&#160;2:0&#160;of&#160;an EPT&#160;paging-structure&#160;entry&#160;is&#160;either&#160;010b&#160;(write-only) or 110b&#160;(write/execute).</p>
<p style="position:absolute;top:896px;left:69px;white-space:nowrap" class="ft07">•</p>
<p style="position:absolute;top:897px;left:95px;white-space:nowrap" class="ft09">The&#160;value of bits&#160;2:0&#160;of&#160;an EPT&#160;paging-structure&#160;entry&#160;is 100b&#160;(execute-only) and this value&#160;is not&#160;supported&#160;<br/>by&#160;the logical processor.&#160;Software should&#160;read&#160;the&#160;VMX&#160;capability MSR IA32_VMX_EPT_VPID_CAP to&#160;determine&#160;<br/>whether this&#160;value&#160;is&#160;supported&#160;(see<a href="o_fe12b1e2a880e0ce-1949.html">&#160;Appendix&#160;A.10).</a></p>
<p style="position:absolute;top:952px;left:69px;white-space:nowrap" class="ft07">•</p>
<p style="position:absolute;top:952px;left:95px;white-space:nowrap" class="ft09">The&#160;value of bits&#160;2:0&#160;of&#160;an EPT&#160;paging-structure&#160;entry is&#160;not&#160;000b&#160;(the&#160;entry is&#160;present)&#160;<b>and</b>&#160;one of&#160;the&#160;<br/>following holds:</p>
<p style="position:absolute;top:100px;left:140px;white-space:nowrap" class="ft08">Table&#160;28-5. &#160;Format of&#160;an EPT Page-Directory&#160;Entry&#160;(PDE)&#160;that&#160;References&#160;an&#160;EPT&#160;Page Table</p>
<p style="position:absolute;top:133px;left:80px;white-space:nowrap" class="ft03">Bit&#160;</p>
<p style="position:absolute;top:148px;left:80px;white-space:nowrap" class="ft03">Position(s)</p>
<p style="position:absolute;top:133px;left:167px;white-space:nowrap" class="ft03">Contents</p>
<p style="position:absolute;top:177px;left:80px;white-space:nowrap" class="ft03">0</p>
<p style="position:absolute;top:177px;left:167px;white-space:nowrap" class="ft03">Read access; indicates whether reads are&#160;allowed&#160;from the 2-MByte&#160;region&#160;controlled&#160;by this entry</p>
<p style="position:absolute;top:205px;left:80px;white-space:nowrap" class="ft03">1</p>
<p style="position:absolute;top:205px;left:167px;white-space:nowrap" class="ft03">Write access; indicates&#160;whether writes&#160;are&#160;allowed&#160;to&#160;the 2-MByte&#160;region&#160;controlled by this entry</p>
<p style="position:absolute;top:234px;left:80px;white-space:nowrap" class="ft03">2</p>
<p style="position:absolute;top:234px;left:167px;white-space:nowrap" class="ft03">Execute access; indicates whether&#160;instruction fetches are&#160;allowed&#160;from the 2-MByte&#160;region&#160;controlled&#160;by this entry</p>
<p style="position:absolute;top:262px;left:80px;white-space:nowrap" class="ft03">6:3</p>
<p style="position:absolute;top:262px;left:167px;white-space:nowrap" class="ft03">Reserved&#160;(must be&#160;0)</p>
<p style="position:absolute;top:290px;left:80px;white-space:nowrap" class="ft03">7</p>
<p style="position:absolute;top:290px;left:167px;white-space:nowrap" class="ft03">Must be 0 (otherwise, this&#160;entry maps a 2-MByte page)</p>
<p style="position:absolute;top:319px;left:80px;white-space:nowrap" class="ft03">8</p>
<p style="position:absolute;top:319px;left:167px;white-space:nowrap" class="ft03">If bit&#160;6&#160;of&#160;EPTP is 1, accessed flag&#160;for EPT; indicates whether software&#160;has accessed the&#160;2-MByte region controlled&#160;</p>
<p style="position:absolute;top:335px;left:167px;white-space:nowrap" class="ft03">by this en<a href="o_fe12b1e2a880e0ce-1159.html">try (see Section 28.2.4).</a>&#160;Ignored if bit&#160;6&#160;of&#160;EPTP is 0</p>
<p style="position:absolute;top:364px;left:80px;white-space:nowrap" class="ft03">11:9</p>
<p style="position:absolute;top:364px;left:167px;white-space:nowrap" class="ft03">Ignored</p>
<p style="position:absolute;top:393px;left:80px;white-space:nowrap" class="ft03">(N–1):12</p>
<p style="position:absolute;top:393px;left:167px;white-space:nowrap" class="ft03">Physical&#160;address of&#160;4-KByte aligned&#160;EPT page&#160;table&#160;referenced&#160;by this entry</p>
<p style="position:absolute;top:390px;left:601px;white-space:nowrap" class="ft05">1</p>
<p style="position:absolute;top:421px;left:80px;white-space:nowrap" class="ft03">51:N</p>
<p style="position:absolute;top:421px;left:167px;white-space:nowrap" class="ft03">Reserved&#160;(must be&#160;0)</p>
<p style="position:absolute;top:450px;left:80px;white-space:nowrap" class="ft03">63:52</p>
<p style="position:absolute;top:450px;left:167px;white-space:nowrap" class="ft03">Ignored</p>
<p style="position:absolute;top:479px;left:72px;white-space:nowrap" class="ft01">NOTES:</p>
<p style="position:absolute;top:498px;left:71px;white-space:nowrap" class="ft03">1.&#160;N is&#160;the&#160;physical-address width supported&#160;by the&#160;logical processor.</p>
<p style="position:absolute;top:1021px;left:69px;white-space:nowrap" class="ft03">1.&#160;If&#160;the&#160;logical processor is&#160;using PAE paging—because CR0.PG&#160;= CR4.PAE&#160;=&#160;1 and&#160;IA32_EFER.LMA&#160;=&#160;0—the MOV&#160;to&#160;CR3 instruction&#160;</p>
<p style="position:absolute;top:1038px;left:91px;white-space:nowrap" class="ft03">loads&#160;the PDPTEs from&#160;memory using the guest-physical&#160;address&#160;being loaded into&#160;CR3.&#160;In this case, therefore,&#160;the MOV to&#160;CR3&#160;</p>
<p style="position:absolute;top:1054px;left:91px;white-space:nowrap" class="ft03">instruction may cause an&#160;EPT misconfiguration,&#160;an&#160;EPT&#160;violation,&#160;or&#160;a&#160;page-modification&#160;log-full event.</p>
</div>
</body>
</html>
