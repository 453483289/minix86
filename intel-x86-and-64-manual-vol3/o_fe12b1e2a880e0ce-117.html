<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 117</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:18px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:8px;font-family:Times;color:#000000;}
	.ft05{font-size:16px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;font-family:Times;color:#000000;}
	.ft07{font-size:18px;font-family:Times;color:#000000;}
	.ft08{font-size:12px;font-family:Times;color:#0860a8;}
	.ft09{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft011{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page117-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce117.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:767px;white-space:nowrap" class="ft00">Vol. 3A&#160;4-13</p>
<p style="position:absolute;top:47px;left:793px;white-space:nowrap" class="ft01">PAGING</p>
<p style="position:absolute;top:97px;left:69px;white-space:nowrap" class="ft02">4.4 PAE&#160;</p>
<p style="position:absolute;top:97px;left:190px;white-space:nowrap" class="ft02">PAGING</p>
<p style="position:absolute;top:133px;left:69px;white-space:nowrap" class="ft09">A logical processor uses&#160;PAE paging if&#160;CR0.PG&#160;= 1, CR4.PAE&#160;=&#160;1,&#160;and&#160;IA32_EFER.LME&#160;=&#160;0.&#160;PAE paging translates&#160;<br/>32-bit linear&#160;addresses&#160;to 52-bit physical addresses.</p>
<p style="position:absolute;top:147px;left:422px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:150px;left:429px;white-space:nowrap" class="ft03">&#160;Although 52 bits&#160;corresponds to 4 PBytes, linear&#160;addresses&#160;</p>
<p style="position:absolute;top:166px;left:69px;white-space:nowrap" class="ft011">are&#160;limited&#160;to&#160;32&#160;bits;&#160;at most 4&#160;GBytes&#160;of&#160;linear-address space may be&#160;accessed&#160;at any&#160;given time.<br/>With PAE paging,&#160;a logical processor&#160;maintains a set of four&#160;(4) PDPTE registers, which are loaded from an address&#160;<br/>in CR3. Linear address&#160;are translated&#160;using 4&#160;hierarchies of&#160;in-memory paging&#160;structures,&#160;each located using&#160;one&#160;<br/>of&#160;the PDPTE registers.&#160;(This&#160;is different&#160;from&#160;the&#160;other&#160;paging&#160;modes,&#160;in&#160;which there&#160;is&#160;one&#160;hierarchy referenced&#160;<br/>by CR3.)<br/><a href="o_fe12b1e2a880e0ce-117.html">Section&#160;4.4.1&#160;di</a>scusses the&#160;PDPTE re<a href="o_fe12b1e2a880e0ce-118.html">gisters. Section 4.4.2 describes lin</a>ear-address&#160;translation with PAE paging.</p>
<p style="position:absolute;top:314px;left:69px;white-space:nowrap" class="ft05">4.4.1 PDPTE&#160;</p>
<p style="position:absolute;top:314px;left:207px;white-space:nowrap" class="ft05">Registers</p>
<p style="position:absolute;top:345px;left:69px;white-space:nowrap" class="ft09">When PAE&#160;paging&#160;is used,&#160;CR3 references the&#160;base&#160;of a&#160;32-Byte&#160;<b>page-directory-pointer table</b><a href="o_fe12b1e2a880e0ce-117.html">. Table&#160;4-7</a>&#160;illus-<br/>trates&#160;how&#160;CR3&#160;is&#160;used&#160;with&#160;PAE&#160;paging.</p>
<p style="position:absolute;top:567px;left:69px;white-space:nowrap" class="ft09">The page-directory-pointer-table&#160;comprises&#160;four (4) 64-bit&#160;entries&#160;called PDPTEs. Each&#160;PDPTE&#160;controls access to a&#160;<br/>1-GByte region of&#160;the linear-address space.&#160;Corresponding&#160;to the PDPTEs, the logical processor maintains a&#160;set&#160;of&#160;<br/>four&#160;(4) internal, non-architectural PDPTE&#160;registers,&#160;called&#160;PDPTE0,&#160;PDPTE1,&#160;PDPTE2,&#160;and&#160;PDPTE3.&#160;The&#160;logical&#160;<br/>processor&#160;loads&#160;these registers&#160;from&#160;the PDPTEs&#160;in memory as&#160;part of certain operations:</p>
<p style="position:absolute;top:638px;left:69px;white-space:nowrap" class="ft07">•</p>
<p style="position:absolute;top:639px;left:95px;white-space:nowrap" class="ft09">If&#160;PAE&#160;paging&#160;would be in&#160;use following an&#160;execution&#160;of&#160;MOV&#160;to CR0&#160;or MOV to CR4 (see<a href="o_fe12b1e2a880e0ce-105.html">&#160;Section&#160;4.1.1) and the</a>&#160;<br/>instruction&#160;is modifying&#160;any&#160;of&#160;CR0.CD,&#160;CR0.NW,&#160;CR0.PG,&#160;CR4.PAE,&#160;CR4.PGE,&#160;CR4.PSE,&#160;or CR4.SMEP;&#160;then&#160;the&#160;<br/>PDPTEs are&#160;loaded from the&#160;address in&#160;CR3.</p>
<p style="position:absolute;top:694px;left:69px;white-space:nowrap" class="ft07">•</p>
<p style="position:absolute;top:694px;left:95px;white-space:nowrap" class="ft09">If MOV to&#160;CR3 is&#160;executed&#160;while the&#160;logical&#160;processor&#160;is using&#160;PAE paging,&#160;the&#160;PDPTEs are&#160;loaded&#160;from the&#160;<br/>address being loaded&#160;into&#160;CR3.</p>
<p style="position:absolute;top:733px;left:69px;white-space:nowrap" class="ft07">•</p>
<p style="position:absolute;top:733px;left:95px;white-space:nowrap" class="ft09">If PAE paging is&#160;in use and&#160;a task switch&#160;changes the&#160;value of&#160;CR3,&#160;the PDPTEs&#160;are&#160;loaded&#160;from&#160;the address&#160;in&#160;<br/>the new CR3&#160;value.</p>
<p style="position:absolute;top:772px;left:69px;white-space:nowrap" class="ft07">•</p>
<p style="position:absolute;top:772px;left:95px;white-space:nowrap" class="ft03">Certain VMX transitions&#160;load the&#160;PDPTE&#160;registers.&#160;S<a href="o_fe12b1e2a880e0ce-150.html">ee&#160;Section 4.11.1.</a></p>
<p style="position:absolute;top:796px;left:69px;white-space:nowrap" class="ft09"><a href="o_fe12b1e2a880e0ce-118.html">Table&#160;4-8</a>&#160;gives the&#160;format&#160;of a PDPTE.&#160;If&#160;any of the&#160;PDPTEs&#160;sets&#160;both&#160;the P&#160;flag (bit&#160;0) and&#160;any reserved bit,&#160;the&#160;<br/>MOV to CR instruction causes a general-protection exception (#GP(0)) and the PDPTEs are not loaded.</p>
<p style="position:absolute;top:810px;left:758px;white-space:nowrap" class="ft04">2</p>
<p style="position:absolute;top:813px;left:765px;white-space:nowrap" class="ft03">&#160;As shown&#160;</p>
<p style="position:absolute;top:829px;left:69px;white-space:nowrap" class="ft03"><a href="o_fe12b1e2a880e0ce-118.html">in Table&#160;4-8,&#160;</a>bits&#160;2:1,&#160;8:5,&#160;and&#160;63:MAXPHYADDR&#160;are reserved&#160;in&#160;the&#160;PDPTEs.</p>
<p style="position:absolute;top:1017px;left:69px;white-space:nowrap" class="ft03">1.&#160;If&#160;MAXPHYADDR&#160;&lt;&#160;52, bits in&#160;the&#160;range&#160;51:MAXPHYADDR will be&#160;0&#160;in&#160;any physical address used&#160;by&#160;PAE paging. (The&#160;corresponding&#160;</p>
<p style="position:absolute;top:1033px;left:91px;white-space:nowrap" class="ft03">bits are reserved&#160;in&#160;the paging-structure&#160;entries.<a href="o_fe12b1e2a880e0ce-109.html">) See Section 4.1.4 f</a>or how to&#160;determine MAXPHYADDR.</p>
<p style="position:absolute;top:392px;left:321px;white-space:nowrap" class="ft08">Table 4-7.&#160; Use of&#160;CR3&#160;with&#160;PAE&#160;Paging</p>
<p style="position:absolute;top:426px;left:80px;white-space:nowrap" class="ft03">Bit&#160;</p>
<p style="position:absolute;top:441px;left:80px;white-space:nowrap" class="ft03">Position(s)</p>
<p style="position:absolute;top:426px;left:166px;white-space:nowrap" class="ft03">Contents</p>
<p style="position:absolute;top:469px;left:80px;white-space:nowrap" class="ft03">4:0</p>
<p style="position:absolute;top:469px;left:166px;white-space:nowrap" class="ft03">Ignored</p>
<p style="position:absolute;top:498px;left:80px;white-space:nowrap" class="ft03">31:5</p>
<p style="position:absolute;top:498px;left:166px;white-space:nowrap" class="ft03">Physical&#160;address&#160;of&#160;the&#160;32-Byte aligned&#160;page-directory-pointer table used&#160;for linear-address translation</p>
<p style="position:absolute;top:526px;left:80px;white-space:nowrap" class="ft03">63:32</p>
<p style="position:absolute;top:526px;left:166px;white-space:nowrap" class="ft03">Ignored&#160;(these&#160;bits exist only on&#160;processors&#160;supporting the&#160;Intel-64 architecture)</p>
<p style="position:absolute;top:1054px;left:69px;white-space:nowrap" class="ft03">2.&#160;On&#160;some&#160;processors, reserved&#160;bits are checked&#160;even&#160;in&#160;PDPTEs&#160;in&#160;which&#160;the P flag&#160;(bit&#160;0)&#160;is&#160;0.</p>
</div>
</body>
</html>
