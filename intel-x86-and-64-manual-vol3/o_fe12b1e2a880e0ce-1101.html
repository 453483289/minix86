<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 1101</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:11px;font-family:Times;color:#000000;}
	.ft03{font-size:18px;font-family:Times;color:#000000;}
	.ft04{font-size:8px;font-family:Times;color:#000000;}
	.ft05{font-size:14px;font-family:Times;color:#0860a8;}
	.ft06{font-size:11px;font-family:Times;color:#000000;}
	.ft07{font-size:16px;font-family:Times;color:#000000;}
	.ft08{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft09{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft010{font-size:11px;line-height:23px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page1101-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce1101.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:769px;white-space:nowrap" class="ft00">Vol. 3C&#160;26-9</p>
<p style="position:absolute;top:47px;left:766px;white-space:nowrap" class="ft01">VM&#160;ENTRIES</p>
<p style="position:absolute;top:100px;left:94px;white-space:nowrap" class="ft02">—&#160;If&#160;the “load&#160;debug controls” VM-entry control&#160;is 1,&#160;bits&#160;63:32&#160;in the&#160;DR7 field&#160;must be&#160;0.&#160;The first&#160;</p>
<p style="position:absolute;top:117px;left:120px;white-space:nowrap" class="ft08">processors to support the virtual-machine extensions supported only the 1-setting of this control and thus&#160;<br/>performed this&#160;check unconditionally (if they&#160;supported Intel&#160;64&#160;architecture).</p>
<p style="position:absolute;top:157px;left:94px;white-space:nowrap" class="ft02">—&#160;The&#160;IA32_SYSENTER_ESP&#160;field and&#160;the IA32_SYSENTER_EIP field must each&#160;contain&#160;a canonical&#160;address.</p>
<p style="position:absolute;top:179px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:180px;left:95px;white-space:nowrap" class="ft08">If the&#160;“load IA32_PERF_GLOBAL_CTRL”&#160;VM-entry control&#160;is 1,&#160;bits reserved in&#160;the IA32_PERF_GLOBAL_CTRL&#160;<br/>MSR must&#160;be&#160;0 in&#160;the&#160;field&#160;for that register&#160;<a href="o_fe12b1e2a880e0ce-643.html">(see&#160;Figure&#160;18-3)</a>.</p>
<p style="position:absolute;top:218px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:219px;left:95px;white-space:nowrap" class="ft08">If the&#160;“load&#160;IA32_PAT” VM-entry&#160;control&#160;is 1,&#160;the value of&#160;the&#160;field for the IA32_PAT&#160;MSR&#160;must&#160;be one&#160;that could&#160;<br/>be written by WRMSR without fault at CPL 0. Specifically, each of&#160;the&#160;8&#160;bytes&#160;in the field must have one of the&#160;<br/>values 0&#160;(UC), 1&#160;(WC),&#160;4&#160;(WT), 5&#160;(WP), 6&#160;(WB),&#160;or 7&#160;(UC-).</p>
<p style="position:absolute;top:274px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:274px;left:95px;white-space:nowrap" class="ft09">If the&#160;“load IA32_EFER”&#160;VM-entry control&#160;is 1,&#160;the&#160;following&#160;checks are&#160;performed&#160;on the&#160;field&#160;for&#160;the&#160;<br/>IA32_EFER MSR :<br/>—&#160;Bits&#160;reserved&#160;in the&#160;IA32_EFER&#160;MSR must be&#160;0.<br/>—&#160;Bit&#160;10&#160;(corresponding&#160;to IA32_EFER.LMA) must equal&#160;the value&#160;of&#160;the “IA-32e mode&#160;guest”&#160;VM-entry&#160;</p>
<p style="position:absolute;top:355px;left:120px;white-space:nowrap" class="ft02">control.&#160;It must also&#160;be&#160;identical&#160;to&#160;bit&#160;8&#160;(LME) if&#160;bit&#160;31&#160;in the&#160;CR0&#160;field&#160;(corresponding to&#160;CR0.PG) is&#160;1.</p>
<p style="position:absolute;top:353px;left:816px;white-space:nowrap" class="ft04">1</p>
<p style="position:absolute;top:377px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:378px;left:95px;white-space:nowrap" class="ft09">If&#160;the “load&#160;IA32_BNDCFGS” VM-entry control is&#160;1,&#160;the&#160;following&#160;checks are&#160;performed&#160;on the&#160;field&#160;for&#160;the&#160;<br/>IA32_BNDCFGS&#160;MSR&#160;:<br/>—&#160;Bits reserved in&#160;the IA32_BNDCFGS MSR&#160;must&#160;be&#160;0.<br/>—&#160;The&#160;linear&#160;address&#160;in bits&#160;63:12&#160;must be canonical.&#160;</p>
<p style="position:absolute;top:487px;left:69px;white-space:nowrap" class="ft05">26.3.1.2 &#160;&#160;Checks on Guest Segment&#160;Registers</p>
<p style="position:absolute;top:515px;left:69px;white-space:nowrap" class="ft08">This section specifies the&#160;checks on the&#160;fields&#160;for CS,&#160;SS, DS,&#160;ES, FS, GS, TR,&#160;and LDTR. The&#160;following&#160;terms are&#160;<br/>used in&#160;defining these checks:</p>
<p style="position:absolute;top:553px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:554px;left:95px;white-space:nowrap" class="ft02">The&#160;guest&#160;will&#160;be&#160;<b>virtual-8086</b>&#160;if the&#160;VM&#160;flag (bit&#160;17) is&#160;1&#160;in the&#160;RFLAGS field in&#160;the guest-state area.</p>
<p style="position:absolute;top:576px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:577px;left:95px;white-space:nowrap" class="ft08">The&#160;guest&#160;will&#160;be&#160;<b>IA-32e&#160;mode</b>&#160;if&#160;the “IA-32e mode&#160;guest”&#160;VM-entry control is&#160;1.&#160;(This&#160;is possible&#160;only&#160;on&#160;<br/>processors that support Intel 64 architecture.)</p>
<p style="position:absolute;top:615px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:616px;left:95px;white-space:nowrap" class="ft08">Any&#160;one of these registers is said to be&#160;<b>usable</b>&#160;if&#160;the unusable bit&#160;(bit&#160;16) is 0 in&#160;the&#160;access-rights field for that&#160;<br/>register.</p>
<p style="position:absolute;top:656px;left:69px;white-space:nowrap" class="ft02">The&#160;following are&#160;the&#160;checks on these&#160;fields:&#160;</p>
<p style="position:absolute;top:678px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:679px;left:95px;white-space:nowrap" class="ft09">Selector fields.<br/>—&#160;TR.&#160;The&#160;TI flag&#160;(bit&#160;2)&#160;must&#160;be&#160;0.<br/>—&#160;LDTR. If LDTR&#160;is usable,&#160;the&#160;TI flag&#160;(bit&#160;2) must&#160;be&#160;0.<br/>—&#160;SS.&#160;If the&#160;guest will not be virtual-8086&#160;and the&#160;“unrestricted guest”&#160;VM-execution&#160;control&#160;is 0,&#160;the RPL&#160;</p>
<p style="position:absolute;top:767px;left:120px;white-space:nowrap" class="ft02">(bits&#160;1:0) must equal the&#160;RPL of the&#160;selector&#160;field&#160;for&#160;CS.</p>
<p style="position:absolute;top:764px;left:504px;white-space:nowrap" class="ft04">2</p>
<p style="position:absolute;top:789px;left:69px;white-space:nowrap" class="ft03">•</p>
<p style="position:absolute;top:790px;left:95px;white-space:nowrap" class="ft09">Base-address fields.<br/>—&#160;CS,&#160;SS,&#160;DS, ES, FS, GS. If the guest will&#160;be&#160;virtual-8086, the address must be&#160;the&#160;selector field shifted&#160;left&#160;</p>
<p style="position:absolute;top:830px;left:120px;white-space:nowrap" class="ft02">4 bits (multiplied by 16).</p>
<p style="position:absolute;top:854px;left:95px;white-space:nowrap" class="ft02">—&#160;The following&#160;checks&#160;are performed on processors that&#160;support&#160;Intel 64&#160;architecture:</p>
<p style="position:absolute;top:880px;left:120px;white-space:nowrap" class="ft07">•</p>
<p style="position:absolute;top:878px;left:146px;white-space:nowrap" class="ft02">TR, FS, GS. The&#160;address&#160;must&#160;be&#160;canonical.</p>
<p style="position:absolute;top:903px;left:120px;white-space:nowrap" class="ft07">•</p>
<p style="position:absolute;top:902px;left:146px;white-space:nowrap" class="ft02">LDTR.&#160;If&#160;LDTR&#160;is usable, the&#160;address must be&#160;canonical.</p>
<p style="position:absolute;top:927px;left:120px;white-space:nowrap" class="ft07">•</p>
<p style="position:absolute;top:926px;left:146px;white-space:nowrap" class="ft02">CS.&#160;Bits&#160;63:32&#160;of the&#160;address must be zero.</p>
<p style="position:absolute;top:963px;left:69px;white-space:nowrap" class="ft02">5.&#160;Bit&#160;63&#160;of&#160;the&#160;CR3&#160;field&#160;in&#160;the&#160;guest-state&#160;area&#160;must&#160;be&#160;0.&#160;This&#160;is true even&#160;though,&#160;If CR4.PCIDE&#160;=&#160;1,&#160;bit&#160;63&#160;of&#160;the&#160;source operand to&#160;</p>
<p style="position:absolute;top:979px;left:91px;white-space:nowrap" class="ft02">MOV to CR3&#160;is&#160;used&#160;to&#160;determine&#160;whether cached&#160;translation&#160;information is&#160;invalidated.</p>
<p style="position:absolute;top:1000px;left:69px;white-space:nowrap" class="ft02">1.&#160;If&#160;the&#160;capability MSR IA32_VMX_CR0_FIXED0 reports&#160;that&#160;CR0.PG must&#160;be&#160;1 in&#160;VMX operation, bit&#160;31&#160;in the CR0&#160;field must&#160;be&#160;1&#160;</p>
<p style="position:absolute;top:1017px;left:91px;white-space:nowrap" class="ft02">unless the “unrestricted guest” VM-execution&#160;control and bit&#160;31&#160;of&#160;the&#160;primary processor-based VM-execution controls are&#160;both 1.</p>
<p style="position:absolute;top:1038px;left:69px;white-space:nowrap" class="ft02">2.&#160;“Unrestricted guest”&#160;is a secondary processor-based VM-execution&#160;control.&#160;If bit&#160;31&#160;of&#160;the&#160;primary processor-based&#160;VM-execution&#160;</p>
<p style="position:absolute;top:1054px;left:91px;white-space:nowrap" class="ft02">controls&#160;is 0,&#160;VM&#160;entry functions as&#160;if&#160;the “unrestricted&#160;guest” VM-execution&#160;control were&#160;0.&#160;See<a href="o_fe12b1e2a880e0ce-1055.html">&#160;Section&#160;24.6.2.</a></p>
</div>
</body>
</html>
