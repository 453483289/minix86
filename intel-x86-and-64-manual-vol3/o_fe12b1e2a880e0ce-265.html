<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 265</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:9px;font-family:Times;color:#000000;}
	.ft01{font-size:11px;font-family:Times;color:#0860a8;}
	.ft02{font-size:14px;font-family:Times;color:#0860a8;}
	.ft03{font-size:11px;font-family:Times;color:#000000;}
	.ft04{font-size:18px;font-family:Times;color:#000000;}
	.ft05{font-size:11px;line-height:16px;font-family:Times;color:#000000;}
	.ft06{font-size:11px;line-height:24px;font-family:Times;color:#000000;}
	.ft07{font-size:11px;line-height:22px;font-family:Times;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page265-div" style="position:relative;width:918px;height:1188px;">
<img width="918" height="1188" src="o_fe12b1e2a880e0ce265.png" alt="background image"/>
<p style="position:absolute;top:1103px;left:774px;white-space:nowrap" class="ft00">Vol. 3A&#160;8-9</p>
<p style="position:absolute;top:47px;left:619px;white-space:nowrap" class="ft01">MULTIPLE-PROCESSOR&#160;MANAGEMENT</p>
<p style="position:absolute;top:99px;left:69px;white-space:nowrap" class="ft02">8.2.3.2&#160;&#160;</p>
<p style="position:absolute;top:99px;left:153px;white-space:nowrap" class="ft02">Neither Loads Nor Stores&#160;Are Reordered&#160;with Like&#160;Operations</p>
<p style="position:absolute;top:127px;left:69px;white-space:nowrap" class="ft05">The Intel-64 memory-ordering model allows neither loads nor&#160;stores&#160;to&#160;be&#160;reordered&#160;with&#160;the&#160;same&#160;kind&#160;of&#160;opera-<br/>tion. That is, it&#160;ensures&#160;that loads are seen in&#160;program&#160;order and&#160;that stores are seen in&#160;program&#160;order.&#160;This is&#160;illus-<br/>trated&#160;by the&#160;following&#160;example:</p>
<p style="position:absolute;top:331px;left:69px;white-space:nowrap" class="ft05">The&#160;disallowed&#160;return values could&#160;be&#160;exhibited&#160;only if&#160;processor&#160;0’s&#160;two stores&#160;are&#160;reordered (with the&#160;two&#160;loads&#160;<br/>occurring&#160;between them)&#160;or if processor&#160;1’s&#160;two&#160;loads are&#160;reordered&#160;(with&#160;the two stores&#160;occurring between them).</p>
<p style="position:absolute;top:381px;left:69px;white-space:nowrap" class="ft05">If&#160;r1&#160;=&#160;1,&#160;the&#160;store&#160;to y occurs&#160;before the&#160;load&#160;from&#160;y.&#160;Because the Intel-64 memory-ordering model does not allow&#160;<br/>stores&#160;to be&#160;reordered, the&#160;earlier store to&#160;x occurs&#160;before&#160;the load from y.&#160;Because the Intel-64&#160;memory-ordering&#160;<br/>model does not allow loads to&#160;be&#160;reordered,&#160;the&#160;store to&#160;x also&#160;occurs&#160;before&#160;the&#160;later load from&#160;x.&#160;This r2&#160;= 1.</p>
<p style="position:absolute;top:458px;left:69px;white-space:nowrap" class="ft02">8.2.3.3&#160;&#160;</p>
<p style="position:absolute;top:458px;left:153px;white-space:nowrap" class="ft02">Stores Are Not Reordered With Earlier Loads</p>
<p style="position:absolute;top:487px;left:69px;white-space:nowrap" class="ft05">The Intel-64&#160;memory-ordering model ensures that&#160;a store by&#160;a processor may not occur&#160;before a&#160;previous load by&#160;<br/>the same&#160;processor.&#160;This&#160;is illustrated&#160;by&#160;the following example:</p>
<p style="position:absolute;top:674px;left:69px;white-space:nowrap" class="ft03">Assume r1&#160;= 1.</p>
<p style="position:absolute;top:696px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:697px;left:95px;white-space:nowrap" class="ft03">Because r1&#160;= 1,&#160;processor&#160;1’s&#160;store to&#160;x&#160;occurs before processor&#160;0’s&#160;load from x.</p>
<p style="position:absolute;top:718px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:719px;left:95px;white-space:nowrap" class="ft05">Because the&#160;Intel-64 memory-ordering&#160;model prevents&#160;each&#160;store from being reordered with&#160;the&#160;earlier&#160;load&#160;<br/>by&#160;the same&#160;processor,&#160;processor&#160;1’s&#160;load from&#160;y occurs before its&#160;store&#160;to&#160;x.</p>
<p style="position:absolute;top:757px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:758px;left:95px;white-space:nowrap" class="ft03">Similarly,&#160;processor&#160;0’s&#160;load from x occurs before its store&#160;to y.</p>
<p style="position:absolute;top:780px;left:69px;white-space:nowrap" class="ft04">•</p>
<p style="position:absolute;top:781px;left:95px;white-space:nowrap" class="ft03">Thus, processor&#160;1’s&#160;load from&#160;y occurs before processor&#160;0’s&#160;store&#160;to&#160;y,&#160;implying&#160;r2&#160;=&#160;0.</p>
<p style="position:absolute;top:825px;left:69px;white-space:nowrap" class="ft02">8.2.3.4&#160;&#160;</p>
<p style="position:absolute;top:825px;left:153px;white-space:nowrap" class="ft02">Loads May Be&#160;Reordered with Earlier&#160;Stores to&#160;Different Locations</p>
<p style="position:absolute;top:853px;left:69px;white-space:nowrap" class="ft05">The Intel-64 memory-ordering&#160;model&#160;allows&#160;a load&#160;to be reordered with an&#160;earlier store to&#160;a&#160;different&#160;location.&#160;<br/>However,&#160;loads are&#160;not reordered&#160;with&#160;stores to&#160;the same location.<br/>The&#160;fact&#160;that a&#160;load may be reordered with&#160;an earlier store to&#160;a different&#160;location&#160;is&#160;illustrated by the&#160;following&#160;<br/>example:</p>
<p style="position:absolute;top:182px;left:71px;white-space:nowrap" class="ft01">Example 8-1. &#160;Stores&#160;Are Not Reordered with&#160;Other&#160;Stores</p>
<p style="position:absolute;top:202px;left:227px;white-space:nowrap" class="ft03">Processor 0</p>
<p style="position:absolute;top:202px;left:608px;white-space:nowrap" class="ft03">Processor 1</p>
<p style="position:absolute;top:225px;left:76px;white-space:nowrap" class="ft03">mov [ _x], 1</p>
<p style="position:absolute;top:225px;left:457px;white-space:nowrap" class="ft03">mov&#160;r1, [ _y]</p>
<p style="position:absolute;top:247px;left:76px;white-space:nowrap" class="ft03">mov [ _y], 1</p>
<p style="position:absolute;top:247px;left:457px;white-space:nowrap" class="ft03">mov&#160;r2, [ _x]</p>
<p style="position:absolute;top:270px;left:76px;white-space:nowrap" class="ft07">Initially x = y = 0<br/>r1 = 1 and r2 = 0 is&#160;not allowed</p>
<p style="position:absolute;top:525px;left:69px;white-space:nowrap" class="ft01">Example&#160;8-2.&#160;&#160;Stores&#160;Are&#160;Not Reordered with Older&#160;Loads</p>
<p style="position:absolute;top:545px;left:226px;white-space:nowrap" class="ft03">Processor 0</p>
<p style="position:absolute;top:545px;left:609px;white-space:nowrap" class="ft03">Processor 1</p>
<p style="position:absolute;top:567px;left:74px;white-space:nowrap" class="ft03">mov r1,&#160;[ _x]</p>
<p style="position:absolute;top:567px;left:457px;white-space:nowrap" class="ft03">mov&#160;r2, [ _y]</p>
<p style="position:absolute;top:590px;left:74px;white-space:nowrap" class="ft03">mov [ _y], 1</p>
<p style="position:absolute;top:590px;left:458px;white-space:nowrap" class="ft03">mov&#160;[ _x], 1</p>
<p style="position:absolute;top:612px;left:74px;white-space:nowrap" class="ft07">Initially x = y = 0<br/>r1 = 1 and r2 = 1 is not allowed</p>
<p style="position:absolute;top:933px;left:70px;white-space:nowrap" class="ft01">Example 8-3. &#160;Loads&#160;May be&#160;Reordered&#160;with Older Stores</p>
<p style="position:absolute;top:952px;left:226px;white-space:nowrap" class="ft03">Processor 0</p>
<p style="position:absolute;top:952px;left:609px;white-space:nowrap" class="ft03">Processor&#160;1</p>
<p style="position:absolute;top:975px;left:74px;white-space:nowrap" class="ft03">mov [ _x], 1</p>
<p style="position:absolute;top:975px;left:457px;white-space:nowrap" class="ft03">mov&#160;[ _y], 1</p>
<p style="position:absolute;top:997px;left:74px;white-space:nowrap" class="ft03">mov r1,&#160;[ _y]</p>
<p style="position:absolute;top:997px;left:457px;white-space:nowrap" class="ft03">mov&#160;r2, [ _x]</p>
<p style="position:absolute;top:1020px;left:74px;white-space:nowrap" class="ft07">Initially x&#160;= y = 0<br/>r1 = 0 and r2&#160;= 0 is allowed</p>
</div>
</body>
</html>
